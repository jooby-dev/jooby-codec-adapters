// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// these options can be edited
// available hardware types can be found here:
// https://github.com/jooby-dev/jooby-docs/blob/main/docs/analog/basics.md#hardware-types
var config = {
    hardwareType: 0
};


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,getBase64FromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(e){if(Array.isArray(e))return t(e)}function n(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true}):t[e]=n,t}function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return e(t)||r(t)||o(t)||a()}function s(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function u(t){var e=s(t,"string");return"symbol"==typeof e?e:e+""}function o(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var f={separator:" ",prefix:""};var v=1;var c=2;var l=3;var h=4;var g=Math.log,d=Math.pow,U=Math.LN2;var T=function(t,e,n,r,a){var i,s,u=a*8-r-1,o=(1<<u)-1,f=o>>1,v=-7,c=n?a-1:0,l=n?-1:1,h=t[e+c];c+=l;i=h&(1<<-v)-1;h>>=-v;v+=u;for(;v>0;i=i*256+t[e+c],c+=l,v-=8);s=i&(1<<-v)-1;i>>=-v;v+=r;for(;v>0;s=s*256+t[e+c],c+=l,v-=8);if(i===0){i=1-f}else if(i===o){return s?NaN:h?-Infinity:Infinity}else{s=s+d(2,r);i=i-f}return(h?-1:1)*s*d(2,i-r)};var p=function(t,e,n,r,a,i){var s,u,o,f=i*8-a-1,v=(1<<f)-1,c=v>>1,l=a===23?d(2,-24)-d(2,-77):0,h=r?0:i-1,T=r?1:-1,p=n<0||n===0&&1/n<0?1:0;n<0&&(n=-n);if(n!==n||n===Infinity){u=n!==n?1:0;s=v}else{s=g(n)/U|0;if(n*(o=d(2,-s))<1){s--;o*=2}if(s+c>=1){n+=l/o}else{n+=l*d(2,1-c)}if(n*o>=2){s++;o/=2}if(s+c>=v){u=0;s=v}else if(s+c>=1){u=(n*o-1)*d(2,a);s=s+c}else{u=n*d(2,c-1)*d(2,a);s=0}}for(;a>=8;t[e+h]=u&255,h+=T,u/=256,a-=8);s=s<<a|u;f+=a;for(;f>0;t[e+h]=s&255,h+=T,s/=256,f-=8);t[e+h-T]|=p*128};var E=[1,0];var m=[2,1,0];var S=[3,2,1,0];var _=[0,1];var I=[0,1,2];var A=[0,1,2,3];var N=function(t,e){return t[e]};var y=function(t,e,n){var r=n?_:E;var a=t[e+r[0]];var i=t[e+r[1]]<<8;return a|i};var w=function(t,e,n){var r=n?I:m;var a=t[e+r[0]];var i=t[e+r[1]]<<8;var s=t[e+r[2]]<<16;return a|i|s};var b=function(t,e,n){var r=n?A:S;var a=t[e+r[3]]*16777216;var i=t[e+r[2]]*65536;var s=t[e+r[1]]*256;var u=t[e+r[0]];return a+i+s+u};var L=function(t,e,n){t[e]=n&255};var O=function(t,e,n,r){var a=r?_:E;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255};var C=function(t,e,n,r){var a=r?I:m;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255};var B=function(t,e,n,r){var a=r?A:S;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255;t[e+a[3]]=n>>>24&255};function M(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var n=new Array(t).fill(0);this.data=n}else{this.data=t}this.offset=0;this.isLittleEndian=e}M.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){L(this.data,this.offset,t<0?t|256:t);this.offset+=v},getInt8:function(){var t=N(this.data,this.offset);this.offset+=v;return t&128?t^-256:t},setUint8:function(t){L(this.data,this.offset,t);this.offset+=v},getUint8:function(){var t=N(this.data,this.offset);this.offset+=v;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;O(this.data,this.offset,t<0?t|65536:t,e);this.offset+=c},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=y(this.data,this.offset,t);this.offset+=c;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;O(this.data,this.offset,t,e);this.offset+=c},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=y(this.data,this.offset,t);this.offset+=c;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=l},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=w(this.data,this.offset,t);this.offset+=l;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t,e);this.offset+=l},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=w(this.data,this.offset,t);this.offset+=l;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=h},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=b(this.data,this.offset,t);this.offset+=h;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t,e);this.offset+=h},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=b(this.data,this.offset,t);this.offset+=h;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;p(this.data,this.offset,t,e,23,4);this.offset+=h},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=T(this.data,this.offset,t,23,4);this.offset+=h;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var n=[];while(this.offset<e){n.push(String.fromCharCode(this.getUint8()))}return n.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var n=this.data;n.splice.apply(n,[e,t.length].concat(i(t)));this.data=n;this.offset=e+t.length}};Object.defineProperties(M.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var R=31;var D=function(t,e){if((t&R)===0){if(e>R){throw new Error("Wrong command id/size. Id: ".concat(t,", size: ").concat(e,"."))}return[t|e]}if(t>R){return[R,t>>8,e]}return[t,e]};var F=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=D(t,e.length);return[].concat(i(n),i(e))};var k=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=Object.assign({},f,e),r=n.separator,a=n.prefix;return t.map(function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))}).join(r)};var P=2;var x=3;var H=4;var V=5;var G=6;var j=7;var Y=9;var z=11;var q=12;var W=20;var Q=24;var X=25;var K=26;var Z=27;var $=30;var J=543;var tt=1311;var et=1823;var nt=3103;var rt=3359;var at=3871;var it=10783;var st=11039;var ut=11295;var ot=12319;var ft=12831;var vt=13087;var ct=13343;var lt=Object.freeze({__proto__:null,correctTime2000:q,dataSegment:$,getArchiveDays:G,getArchiveDaysMc:Z,getArchiveEvents:z,getArchiveHours:V,getArchiveHoursMc:K,getArchiveHoursMcEx:ot,getBatteryStatus:tt,getChannelsStatus:ft,getChannelsTypes:vt,getCurrent:j,getCurrentMc:Q,getExAbsArchiveDaysMc:rt,getExAbsArchiveHoursMc:nt,getExAbsCurrentMc:at,getLmicInfo:J,getParameter:H,getSignalQuality:ct,getStatus:W,getTime2000:Y,setParameter:x,setTime2000:P,softRestart:X,updateRun:ut,usWaterMeterCommand:et,verifyImage:st,writeImage:it});var ht=function(t){var e={};for(var n in t){var r=t[n];e[r]=n}return e};ht(lt);var gt=q;var dt=2;var Ut=function(t){var e=t.sequenceNumber,n=t.seconds;var r=new M(dt,false);r.setUint8(e);r.setInt8(n);return F(gt,r.data)};var Tt=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=0;for(var r in e){if(r in t&&e[r]){n|=t[r]}}return n};var pt=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n={};for(var r in t){n[r]=(e&t[r])!==0}return n};var Et=function(t,e,n,r){var a=(1<<e)-1<<n-1;var i=r;var s=t;s&=~a;i<<=n-1;s|=i;return s};var mt=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map(function(t){return t.padStart(2,"0")}).join("");if(e.length%2!==0){e="0".concat(e)}var n=e.length/2;var r=new Array(n);for(var a=0;a<n;a++){r[a]=parseInt(e.substring(a*2,a*2+2),16)}return r};var St=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var n=Math.pow(10,e);return Math.round(t*n*(1+Number.EPSILON))/n};var _t=9466848e5;var It=1e3;var At=function(t){return new Date(_t+t*It)};var Nt=1;var yt=4;var wt=5;var bt=8;var Lt=9;var Ot=10;var Ct=11;var Bt=13;var Mt=14;var Rt=15;var Dt=18;var Ft=23;var kt=24;var Pt=25;var xt=26;var Ht=28;var Vt=29;var Gt=30;var jt=31;var Yt=32;var zt=33;var qt=34;var Wt=35;var Qt=36;var Xt=37;var Kt=38;var Zt=39;var $t=40;var Jt=41;var te=42;var ee=43;var ne=44;var re=45;var ae=46;var ie=47;var se=48;var ue=49;var oe=50;var fe=51;var ve=52;var ce=53;var le=54;var he=55;var ge=56;var de=57;var Ue=58;var Te=59;var pe=60;var Ee=61;var me=64;var Se=Object.freeze({__proto__:null,ABSOLUTE_DATA:Ft,ABSOLUTE_DATA_ENABLE:kt,ABSOLUTE_DATA_ENABLE_MULTI_CHANNEL:Gt,ABSOLUTE_DATA_MULTI_CHANNEL:Vt,ACTIVATE_MODULE:Ee,ACTIVATION_METHOD:Lt,BATTERY_DEPASSIVATION_CONFIG:zt,BATTERY_DEPASSIVATION_INFO:Ot,BATTERY_MINIMAL_LOAD_TIME:Ct,CHANNELS_CONFIG:Bt,CHANNEL_TYPE:ge,DAY_CHECKOUT_HOUR:yt,EVENTS_CONFIG:oe,EXTRA_FRAME_INTERVAL:Ht,EXTRA_PAYLOAD_ENABLE:de,GEOLOCATION:xt,KEEP_LORA_CONNECTION_ON_REMOVAL:Te,MQTT_BROKER_ADDRESS:Wt,MQTT_DATA_RECEIVE_CONFIG:Kt,MQTT_DATA_SEND_CONFIG:Zt,MQTT_SESSION_CONFIG:qt,MQTT_SSL_ENABLE:Qt,MQTT_TOPIC_PREFIX:Xt,MTX_DATA_TRANSMISSION_SCHEDULE:Mt,MTX_GET_CURRENT_DEMAND_SCHEDULE_CONFIG:me,MTX_POWER_CONFIG:Rt,NBIOT_APN:ce,NBIOT_BANDS:ve,NBIOT_DEVICE_SOFTWARE_UPDATE:ie,NBIOT_LED_INDICATION:le,NBIOT_MODULE_FIRMWARE_UPDATE:se,NBIOT_MODULE_INFO:fe,NBIOT_NTP_SERVER:pe,NBIOT_SIM:he,NBIOT_SSL_CACERT_SET:te,NBIOT_SSL_CACERT_WRITE:Jt,NBIOT_SSL_CLIENT_CERT_SET:ne,NBIOT_SSL_CLIENT_CERT_WRITE:ee,NBIOT_SSL_CLIENT_KEY_SET:ae,NBIOT_SSL_CLIENT_KEY_WRITE:re,NBIOT_SSL_CONFIG:$t,PRIORITY_DATA_DELIVERY_TYPE:bt,PULSE_CHANNELS_SCAN_CONFIG:jt,PULSE_CHANNELS_SET_CONFIG:Yt,REPORTING_DATA_CONFIG:ue,REPORTING_DATA_INTERVAL:Nt,REPORTING_DATA_TYPE:wt,RX2_CONFIG:Dt,SERIAL_NUMBER:Pt,TIME_SYNCHRONIZATION_PERIOD_VIA_MAC:Ue});ht(Se);var _e=0;var Ie=1;var Ae=2;var Ne=3;var ye=4;var we=5;var be=0;var Le=1;var Oe=2;var Ce=3;var Be=4;var Me=5;var Re=6;var De=Object.freeze({__proto__:null,SF10B125:Oe,SF11B125:Le,SF12B125:be,SF7B125:Me,SF7B250:Re,SF8B125:Be,SF9B125:Ce});var Fe=ht(De);var ke,Pe;var xe=2e3;var He=4;var Ve=5;var Ge=1;var je=7;var Ye=600;var ze=100;var qe=6;var We=function(t){var e=t.type;var n=1;switch(e){case _e:case Ie:case Ae:break;case Ne:n+=2;break;case ye:n+=5;break;case we:n+=4;break}return n};var Qe=(ke={},n(n(n(n(n(n(n(n(n(n(ke,Nt,1+4),yt,1+1),wt,1+1),bt,1+1),Lt,1+1),Ot,1+6),Ct,1+4),Bt,1+1),Mt,1+20),Rt,1+1),n(n(n(n(n(n(n(n(n(n(ke,Dt,1+4),Ft,1+9),kt,1+1),Pt,1+6),xt,1+10),Ht,1+2),Vt,1+10),Gt,1+2),jt,1+3),Yt,1+1),n(n(n(n(n(n(n(n(n(n(ke,zt,1+4),Qt,1+1),Kt,1+3),Zt,1+3),$t,1+2),te,1+4),ne,1+4),ae,1+4),ue,1+4),oe,1+3),n(n(n(n(n(n(ke,le,1+2),he,1+3),de,1+1),Ue,1+4),Te,1+1),Ee,1+1));var Xe={channel1:Math.pow(2,0),channel2:Math.pow(2,1),channel3:Math.pow(2,2),channel4:Math.pow(2,3)};var Ke=function(t){var e=pt(Xe,t);return{channel1:e.channel1,channel2:e.channel2,channel3:e.channel3,channel4:e.channel4}};var Ze=function(t){var e=t.channel1,n=t.channel2,r=t.channel3,a=t.channel4;return Tt(Xe,{channel1:e,channel2:n,channel3:r,channel4:a})};var $e=function(t){return Ke(t.getUint8())};var Je=function(t,e){return t.setUint8(Ze(e))};var tn={128:1,129:5,130:10,131:100,132:1e3,133:1e4,134:1e5};var en=ht(tn);var nn=function(t){return!!(t&128)};var rn=function(t){return{size:t.getUint16(),position:t.getUint16(),chunk:t.getBytesLeft()}};var an=function(t,e){if(e.size!==e.chunk.length){throw new Error("ssl chunk size parameter doesn't match actual ssl chunk size")}t.setUint16(e.size);t.setUint16(e.position);t.setBytes(e.chunk)};var sn=function(t){return{crc32:t.getUint32()}};var un=function(t,e){t.setUint32(e.crc32)};var on=(Pe={},n(n(n(n(n(n(n(n(n(n(Pe,Nt,{get:function(t){return{specialSchedulePeriod:t.getUint8()*Ye,firstDaysSpecialSchedule:t.getUint8(),lastDaysSpecialSchedule:t.getUint8(),period:t.getUint8()*Ye}},set:function(t,e){t.setUint8(e.specialSchedulePeriod/Ye);t.setUint8(e.firstDaysSpecialSchedule);t.setUint8(e.lastDaysSpecialSchedule);t.setUint8(e.period/Ye)}}),yt,{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}}),wt,{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}}),bt,{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}}),Lt,{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}}),Ot,{get:function(t){return{loadTime:t.getUint16(),internalResistance:t.getUint16(),lowVoltage:t.getUint16()}},set:function(t,e){t.setUint16(e.loadTime);t.setUint16(e.internalResistance);t.setUint16(e.lowVoltage)}}),Ct,{get:function(t){return{value:t.getUint32()}},set:function(t,e){t.setUint32(e.value)}}),Bt,{get:function(t){return{value:t.getUint8()}},set:function(t,e){if(e.value<0||e.value>18){throw new Error("channels config must be between 0-18")}t.setUint8(e.value)}}),Mt,{get:function(t){var e=[];for(var n=0;n<4;n++){var r=t.getUint8();var a=t.getUint8()*Ye;var i=t.getUint24(true);var s={};for(var u=0;u<24;u++){s[u]=i&1<<u?1:0}e.push({dataType:r,transmissionPeriod:a,allowedHoursSchedule:s})}return{schedules:e}},set:function(t,e){for(var n of e.schedules){t.setUint8(n.dataType);t.setUint8(n.transmissionPeriod/Ye);var r=0;for(var a=0;a<24;a++){if(n.allowedHoursSchedule[a]){r|=1<<a}}t.setUint24(r,true)}}}),Rt,{get:function(t){var e=t.getUint8();return{active:!!(e&1),vari:!!(e&2),vare:!!(e&4),activeExp:!!(e&8),variExp:!!(e&16),vareExp:!!(e&32)}},set:function(t,e){var n=0;n|=e.active?1:0;n|=e.vari?2:0;n|=e.vare?4:0;n|=e.activeExp?8:0;n|=e.variExp?16:0;n|=e.vareExp?32:0;t.setUint8(n)}}),n(n(n(n(n(n(n(n(n(n(Pe,Dt,{get:function(t){var e=t.getUint8();var n=Fe[e];var r=t.getUint24()*ze;return{spreadFactor:e,spreadFactorName:n,frequency:r}},set:function(t,e){t.setUint8(e.spreadFactor);t.setUint24(e.frequency/ze)}}),Ft,{get:function(t){return{meterValue:t.getUint32(),pulseCoefficient:pn(t),value:t.getUint32()}},set:function(t,e){t.setUint32(e.meterValue);En(t,e.pulseCoefficient);t.setUint32(e.value)}}),kt,{get:function(t){return{state:t.getUint8()}},set:function(t,e){t.setUint8(e.state)}}),Pt,{get:function(t){return{value:k(t.getBytes(qe))}},set:function(t,e){mt(e.value).forEach(function(e){return t.setUint8(e)})}}),xt,{get:function(t){return{latitude:St(t.getFloat32()),longitude:St(t.getFloat32()),altitude:St(t.getUint16())}},set:function(t,e){t.setFloat32(St(e.latitude));t.setFloat32(St(e.longitude));t.setUint16(St(e.altitude))}}),Ht,{get:function(t){return{value:t.getUint16()}},set:function(t,e){t.setUint16(e.value)}}),Vt,{get:function(t){return{channel:gn(t),meterValue:t.getUint32(),pulseCoefficient:pn(t),value:t.getUint32()}},set:function(t,e){dn(t,e.channel);t.setUint32(e.meterValue);En(t,e.pulseCoefficient);t.setUint32(e.value)}}),Gt,{get:function(t){return{channel:gn(t),state:t.getUint8()}},set:function(t,e){dn(t,e.channel);t.setUint8(e.state)}}),jt,{get:function(t){return{channelList:ln(t),pullUpTime:t.getUint8(),scanTime:t.getUint8()}},set:function(t,e){if(e.pullUpTime<17){throw new Error("minimal value for pullUpTime - 17")}if(e.scanTime<15){throw new Error("minimal value for scanTime - 15")}hn(t,e.channelList.map(function(t){return{index:t}}));t.setUint8(e.pullUpTime);t.setUint8(e.scanTime)}}),Yt,{get:$e,set:Je}),n(n(n(n(n(n(n(n(n(n(Pe,zt,{get:function(t){return{resistanceStartThreshold:t.getUint16(),resistanceStopThreshold:t.getUint16()}},set:function(t,e){t.setUint16(e.resistanceStartThreshold);t.setUint16(e.resistanceStopThreshold)}}),qt,{get:function(t){return{clientId:t.getString(),username:t.getString(),password:t.getString(),cleanSession:t.getUint8()}},set:function(t,e){t.setString(e.clientId);t.setString(e.username);t.setString(e.password);t.setUint8(e.cleanSession)}}),Wt,{get:function(t){return{hostName:t.getString(),port:t.getUint16()}},set:function(t,e){t.setString(e.hostName);t.setUint16(e.port)}}),Qt,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),Xt,{get:function(t){return{topicPrefix:t.getString()}},set:function(t,e){t.setString(e.topicPrefix)}}),Kt,{get:function(t){return{qos:t.getUint8(),count:t.getUint8(),timeout:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.count);t.setUint8(e.timeout)}}),Zt,{get:function(t){return{qos:t.getUint8(),retain:t.getUint8(),newestSendFirst:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.retain);t.setUint8(e.newestSendFirst)}}),$t,{get:function(t){return{securityLevel:t.getUint8(),version:t.getUint8()}},set:function(t,e){t.setUint8(e.securityLevel);t.setUint8(e.version)}}),Jt,{get:rn,set:an}),te,{get:sn,set:un}),n(n(n(n(n(n(n(n(n(n(Pe,ee,{get:rn,set:an}),ne,{get:sn,set:un}),re,{get:rn,set:an}),ae,{get:sn,set:un}),ie,{get:function(t){return{softwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.softwareImageUrl)}}),se,{get:function(t){return{moduleFirmwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.moduleFirmwareImageUrl)}}),ue,{get:function(t){return{dataType:t.getUint8(),hour:t.getUint8(),minutes:t.getUint8(),countToSend:t.getUint8()}},set:function(t,e){t.setUint8(e.dataType);t.setUint8(e.hour);t.setUint8(e.minutes);t.setUint8(e.countToSend)}}),oe,{get:function(t){return{eventId:t.getUint8(),sendEvent:t.getUint8(),saveEvent:t.getUint8()}},set:function(t,e){t.setUint8(e.eventId);t.setUint8(e.sendEvent);t.setUint8(e.saveEvent)}}),fe,{get:function(t){return{moduleInfo:t.getString()}},set:function(t,e){t.setString(e.moduleInfo)}}),ve,{get:function(t){var e=t.getUint8();var n=[];for(var r=0;r<e;r++){n.push(t.getUint8())}return{bands:n}},set:function(t,e){t.setUint8(e.bands.length);for(var n of e.bands){t.setUint8(n)}}}),n(n(n(n(n(n(n(n(n(n(Pe,ce,{get:function(t){return{apn:t.getString()}},set:function(t,e){t.setString(e.apn)}}),le,{get:function(t){return{enableLed:t.getUint8(),enableNbiotNetworkLed:t.getUint8()}},set:function(t,e){t.setUint8(e.enableLed);t.setUint8(e.enableNbiotNetworkLed)}}),he,{get:function(t){return{enable:t.getUint8(),pin:t.getUint16()}},set:function(t,e){t.setUint8(e.enable);t.setUint16(e.pin)}}),ge,{get:function(t){return Ln(t)},set:function(t,e){return On(t,e)}}),de,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),Ue,{get:function(t){return{period:t.getUint32()}},set:function(t,e){t.setUint32(e.period)}}),Te,{get:function(t){return{value:t.getUint8()!==0}},set:function(t,e){t.setUint8(e.value?1:0)}}),pe,{get:function(t){return{server:t.getString(),port:t.getUint16()}},set:function(t,e){t.setString(e.server);t.setUint16(e.port)}}),Ee,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),me,{get:function(t){var e=[];while(t.bytesLeft>0){var n=t.getUint8();var r=t.getUint8()*Ye;var a=t.getUint8();var i=t.getUint8();var s=t.getUint8();e.push({id:n,transmissionPeriod:r,demandType0:a,demandType1:i,demandType2:s})}return{schedules:e}},set:function(t,e){for(var n of e.schedules){t.setUint8(n.id);t.setUint8(n.transmissionPeriod/Ye);t.setUint8(n.demandType0);t.setUint8(n.demandType1);t.setUint8(n.demandType2)}}}));var fn=function(t){var e;var n;switch(t.id){case qt:n=t.data;e=1+1;e+=n.clientId.length+1;e+=n.username.length+1;e+=n.password.length+1;break;case Wt:n=t.data;e=1+2;e+=n.hostName.length+1;break;case Xt:n=t.data;e=1;e+=n.topicPrefix.length+1;break;case Jt:case ee:case re:n=t.data;e=1+2+2;e+=n.chunk.length;break;case ie:n=t.data;e=1;e+=n.softwareImageUrl.length+1;break;case se:n=t.data;e=1;e+=n.moduleFirmwareImageUrl.length+1;break;case fe:n=t.data;e=1+1+n.moduleInfo.length;break;case ve:n=t.data;e=1+1;e+=n.bands.length;break;case ce:n=t.data;e=1+1+n.apn.length;break;case ge:n=t.data;e=1+We(n);break;case pe:n=t.data;e=1+1+n.server.length+2;break;case me:n=t.data;e=1+n.schedules.length*5;break;default:e=Qe[t.id]}if(e===undefined){throw new Error("unknown parameter id")}return e};var vn=function(t){var e;switch(t.id){case Vt:case Gt:case ue:case oe:case ge:e=2;break;default:e=1;break}return e};var cn=function(t,e){t.setUint32(e)};var ln=function(t){var e=[];var n=true;var r=1;while(n){var a=t.getUint8();var i=a.toString(2).padStart(je+1,"0").split("").reverse();i.forEach(function(t,a){var i=Number(t);if(a===je){n=!!i}else{if(i){e.push(r)}++r}})}return e};var hn=function(t,e){if(e.length===0){t.setUint8(0);return}e.sort(function(t,e){return t.index-e.index});var n=Math.max.apply(Math,i(e.map(function(t){var e=t.index;return e})));var r=(n-n%8)/8;var a=new Array(r+1).fill(0);var s=0;a.forEach(function(t,n){var r=n*je+1;var i=r+je;while(r<i){var u=e.find(function(t){return t.index===r});if(u!==undefined){s|=1<<(u.index-1)%je}++r}if(a[n+1]!==undefined){s|=1<<je}a[n]=s;s=0});a.forEach(function(e){return t.setUint8(e)})};var gn=function(t){return t.getUint8()+1};var dn=function(t,e){if(e<1){throw new Error("channel must be 1 or greater")}t.setUint8(e-1)};var Un=function(t,e,n){if(e===0&&n===0){t.setUint8(0);return}t.setUint8((n-1&7)<<5|e&31)};var Tn=function(t,e){var n;if(e instanceof Date){n=e}else{n=At(e)}var r=n.getUTCFullYear()-xe;var a=n.getUTCMonth()+1;var i=n.getUTCDate();var s=r<<Ge|a>>He-Ge;var u=(a&7)<<Ve|i;[s,u].forEach(function(e){return t.setUint8(e)})};var pn=function(t){var e=t.getUint8();if(nn(e)){var n=tn[e];if(n){return n}throw new Error("pulseCoefficient MSB is set, but value unknown")}return e};var En=function(t,e){if(e in en){var n=en[e];if(n){t.setUint8(n)}else{throw new Error("pulseCoefficient MSB is set, but value unknown")}}else{t.setUint8(e)}};var mn=function(t,e){var n=e.id,r=e.data;if(!on[n]||!on[n].set){throw new Error("parameter ".concat(n," is not supported"))}t.setUint8(n);on[n].set(t,r)};var Sn=function(t,e){var n=e.id,r=e.data;var a;t.setUint8(n);switch(n){case Vt:case Gt:case ge:a=r;dn(t,a.channel);break;case ue:a=r;t.setUint8(a.dataType);break;case oe:a=r;t.setUint8(a.eventId);break}};var _n=function(t,e){var n=Et(0,3,1,e.segmentIndex);n=Et(n,3,5,e.segmentsNumber);n=Et(n,1,8,+e.isLast);t.setUint8(e.segmentationSessionId);t.setUint8(n);t.setBytes(e.data)};var In=function(t){var e=t.getUint16();return{activeStateTimeMs:e}};var An=function(t,e){t.setUint16(e.activeStateTimeMs)};var Nn=function(t){var e=t.getUint8();var n=t.getUint16();var r=t.getUint8();return{type:e,activeStateTimeMs:n,halState:r}};var yn=function(t,e){t.setUint8(e.type);t.setUint16(e.activeStateTimeMs);t.setUint8(e.halState)};var wn=function(t){var e=t.getUint16();var n=t.getUint8();var r=t.getInt8();var a=t.getInt8();return{measurementPeriod:e,hysteresisSec:n,highTemperatureThreshold:r,lowTemperatureThreshold:a}};var bn=function(t,e){t.setUint16(e.measurementPeriod);t.setUint8(e.hysteresisSec);t.setInt8(e.highTemperatureThreshold);t.setInt8(e.lowTemperatureThreshold)};var Ln=function(t){var e=gn(t);var n=t.getUint8();var r={};switch(n){case Ne:r=In(t);break;case ye:r=wn(t);break;case we:r=Nn(t);break}return{channel:e,type:n,parameters:r}};var On=function(t,e){var n=e.type,r=e.channel,a=e.parameters;dn(t,r);t.setUint8(n);switch(n){case Ne:An(t,a);break;case ye:bn(t,a);break;case we:yn(t,a);break}};var Cn=function(t){return btoa(t.map(function(t){return String.fromCharCode(t)}).join(""))};var Bn=$;var Mn=2;var Rn=function(t){var e=new M(Mn+t.data.length,false);_n(e,t);return F(Bn,e.data)};var Dn=G;var Fn=3;var kn=function(t){var e=new M(Fn,false);var n=t.startTime2000,r=t.days;var a=At(n);Tn(e,a);e.setUint8(r);return F(Dn,e.data)};var Pn=Z;var xn=4;var Hn=function(t){var e=new M(xn,false);var n=t.startTime2000,r=t.days,a=t.channelList;var i=At(n);Tn(e,i);hn(e,a.map(function(t){return{index:t}}));e.setUint8(r);return F(Pn,e.data)};var Vn=z;var Gn=5;var jn=function(t){var e=t.startTime2000,n=t.events;var r=new M(Gn,false);cn(r,e);r.setUint8(n);return F(Vn,r.data)};var Yn=V;var zn=4;var qn=function(t){var e=t.startTime2000,n=t.hours;var r=new M(zn,false);var a=At(e);var i=a.getUTCHours();Tn(r,a);Un(r,i,1);r.setUint8(n);return F(Yn,r.data)};var Wn=K;var Qn=4;var Xn=function(t){var e=new M(Qn,false);var n=t.hours,r=t.startTime2000,a=t.channelList;var i=At(r);var s=i.getUTCHours();Tn(e,i);Un(e,s,n);hn(e,a.map(function(t){return{index:t}}));return F(Wn,e.data)};var Kn=ot;var Zn=5;var $n=function(t){var e=new M(Zn,false);var n=t.channelList,r=t.hour,a=t.hours,i=t.startTime2000;var s=At(i);Tn(e,s);e.setUint8(r);e.setUint8(a);hn(e,n.map(function(t){return{index:t}}));return F(Kn,e.data)};var Jn=tt;var tr=function(){return F(Jn)};var er=ft;var nr=function(t){return F(er,Object.keys(t).length!==0?[Ze(t)]:[])};var rr=vt;var ar=function(){return F(rr)};var ir=j;var sr=function(){return F(ir)};var ur=Q;var or=function(){return F(ur)};var fr=rt;var vr=4;var cr=function(t){var e=new M(vr,false);var n=t.startTime2000,r=t.days,a=t.channelList;Tn(e,n);hn(e,a.map(function(t){return{index:t}}));e.setUint8(r);return F(fr,e.data)};var lr=nt;var hr=4;var gr=function(t){var e=new M(hr,false);var n=t.startTime2000,r=t.hours,a=t.channelList;var i=At(n);var s=i.getUTCHours();Tn(e,i);Un(e,s,r);hn(e,a.map(function(t){return{index:t}}));return F(lr,e.data)};var dr=at;var Ur=function(){return F(dr)};var Tr=J;var pr=function(){return F(Tr)};var Er=H;var mr=function(t){var e=new M(vn(t),false);Sn(e,t);return F(Er,e.data)};var Sr=ct;var _r=function(){return F(Sr,[])};var Ir=W;var Ar=function(){return F(Ir)};var Nr=Y;var yr=function(){return F(Nr,[])};var wr=x;var br=function(t){var e=new M(fn(t),false);mn(e,t);return F(wr,e.data)};var Lr=P;var Or=5;var Cr=function(t){var e=t.sequenceNumber,n=t.seconds;var r=new M(Or,false);r.setUint8(e);r.setInt32(n);return F(Lr,r.data)};var Br=X;var Mr=function(){return F(Br)};var Rr=ut;var Dr=function(){return F(Rr)};var Fr=et;var kr=function(t){var e=t.data,n=t.length;var r=new M(n,false);r.setUint8(n);r.setBytes(e);return F(Fr,r.data)};var Pr=st;var xr=function(){return F(Pr)};var Hr=it;var Vr=4;var Gr=function(t){var e=new M(Vr,false);e.setUint32(t.offset);e.setBytes(t.data);return F(Hr,e.data)};var jr=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var n=e;t.forEach(function(t){n^=t});return n};var Yr=function(t){return function(e){var n;var r=e.map(function(e){if("id"in e){return t[e.id](e.parameters||{},e.config)}if("command"in e){return e.command.bytes}throw new Error("wrong command format")});var a=(n=[]).concat.apply(n,i(r));return[].concat(i(a),[jr(a)])}};var zr={};var qr=Yr(zr);zr[gt]=Ut;zr[Bn]=Rn;zr[Dn]=kn;zr[Pn]=Hn;zr[Vn]=jn;zr[Yn]=qn;zr[Wn]=Xn;zr[Kn]=$n;zr[Jn]=tr;zr[er]=nr;zr[rr]=ar;zr[ir]=sr;zr[ur]=or;zr[fr]=cr;zr[lr]=gr;zr[dr]=Ur;zr[Tr]=pr;zr[Er]=mr;zr[Sr]=_r;zr[Ir]=Ar;zr[Nr]=yr;zr[wr]=br;zr[Lr]=Cr;zr[Br]=Mr;zr[Rr]=Dr;zr[Fr]=kr;zr[Pr]=xr;zr[Hr]=Gr;toBytes=qr;getBase64FromBytes=Cn})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(toBytes(msg.commands, config))
};

return result;
