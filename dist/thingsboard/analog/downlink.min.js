// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// these options can be edited
// available hardware types can be found here:
// https://github.com/jooby-dev/jooby-docs/blob/main/docs/analog/basics.md#hardware-types
var config = {
    hardwareType: 0
};


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,getBase64FromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(e){if(Array.isArray(e))return t(e)}function n(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true}):t[e]=n,t}function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return e(t)||r(t)||o(t)||a()}function s(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function u(t){var e=s(t,"string");return"symbol"==typeof e?e:e+""}function o(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var f={separator:" ",prefix:""};var v=1;var c=2;var l=3;var h=4;var g=Math.log,d=Math.pow,U=Math.LN2;var T=function(t,e,n,r,a){var i,s,u=a*8-r-1,o=(1<<u)-1,f=o>>1,v=-7,c=n?a-1:0,l=n?-1:1,h=t[e+c];c+=l;i=h&(1<<-v)-1;h>>=-v;v+=u;for(;v>0;i=i*256+t[e+c],c+=l,v-=8);s=i&(1<<-v)-1;i>>=-v;v+=r;for(;v>0;s=s*256+t[e+c],c+=l,v-=8);if(i===0){i=1-f}else if(i===o){return s?NaN:h?-Infinity:Infinity}else{s=s+d(2,r);i=i-f}return(h?-1:1)*s*d(2,i-r)};var m=function(t,e,n,r,a,i){var s,u,o,f=i*8-a-1,v=(1<<f)-1,c=v>>1,l=a===23?d(2,-24)-d(2,-77):0,h=r?0:i-1,T=r?1:-1,m=n<0||n===0&&1/n<0?1:0;n<0&&(n=-n);if(n!==n||n===Infinity){u=n!==n?1:0;s=v}else{s=g(n)/U|0;if(n*(o=d(2,-s))<1){s--;o*=2}if(s+c>=1){n+=l/o}else{n+=l*d(2,1-c)}if(n*o>=2){s++;o/=2}if(s+c>=v){u=0;s=v}else if(s+c>=1){u=(n*o-1)*d(2,a);s=s+c}else{u=n*d(2,c-1)*d(2,a);s=0}}for(;a>=8;t[e+h]=u&255,h+=T,u/=256,a-=8);s=s<<a|u;f+=a;for(;f>0;t[e+h]=s&255,h+=T,s/=256,f-=8);t[e+h-T]|=m*128};var E=[1,0];var p=[2,1,0];var S=[3,2,1,0];var _=[0,1];var I=[0,1,2];var A=[0,1,2,3];var N=function(t,e){return t[e]};var b=function(t,e,n){var r=n?_:E;var a=t[e+r[0]];var i=t[e+r[1]]<<8;return a|i};var w=function(t,e,n){var r=n?I:p;var a=t[e+r[0]];var i=t[e+r[1]]<<8;var s=t[e+r[2]]<<16;return a|i|s};var y=function(t,e,n){var r=n?A:S;var a=t[e+r[3]]*16777216;var i=t[e+r[2]]*65536;var s=t[e+r[1]]*256;var u=t[e+r[0]];return a+i+s+u};var L=function(t,e,n){t[e]=n&255};var O=function(t,e,n,r){var a=r?_:E;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255};var C=function(t,e,n,r){var a=r?I:p;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255};var B=function(t,e,n,r){var a=r?A:S;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255;t[e+a[3]]=n>>>24&255};function M(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var n=new Array(t).fill(0);this.data=n}else{this.data=t}this.offset=0;this.isLittleEndian=e}M.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){L(this.data,this.offset,t<0?t|256:t);this.offset+=v},getInt8:function(){var t=N(this.data,this.offset);this.offset+=v;return t&128?t^-256:t},setUint8:function(t){L(this.data,this.offset,t);this.offset+=v},getUint8:function(){var t=N(this.data,this.offset);this.offset+=v;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;O(this.data,this.offset,t<0?t|65536:t,e);this.offset+=c},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=b(this.data,this.offset,t);this.offset+=c;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;O(this.data,this.offset,t,e);this.offset+=c},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=b(this.data,this.offset,t);this.offset+=c;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=l},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=w(this.data,this.offset,t);this.offset+=l;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t,e);this.offset+=l},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=w(this.data,this.offset,t);this.offset+=l;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=h},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=y(this.data,this.offset,t);this.offset+=h;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t,e);this.offset+=h},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=y(this.data,this.offset,t);this.offset+=h;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t,e,23,4);this.offset+=h},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=T(this.data,this.offset,t,23,4);this.offset+=h;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var n=[];while(this.offset<e){n.push(String.fromCharCode(this.getUint8()))}return n.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var n=this.data;n.splice.apply(n,[e,t.length].concat(i(t)));this.data=n;this.offset=e+t.length}};Object.defineProperties(M.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var R=31;var F=function(t,e){if((t&R)===0){if(e>R){throw new Error("Wrong command id/size. Id: ".concat(t,", size: ").concat(e,"."))}return[t|e]}if(t>R){return[R,t>>8,e]}return[t,e]};var D=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=F(t,e.length);return[].concat(i(n),i(e))};var k=2;var P=3;var x=4;var V=5;var H=6;var j=7;var G=9;var Y=11;var z=12;var q=20;var Q=24;var W=25;var K=26;var X=27;var Z=30;var $=543;var J=1311;var tt=1823;var et=3103;var nt=3359;var rt=3871;var at=10783;var it=11039;var st=11295;var ut=12319;var ot=12831;var ft=13087;var vt=13343;var ct=Object.freeze({__proto__:null,correctTime2000:z,dataSegment:Z,getArchiveDays:H,getArchiveDaysMc:X,getArchiveEvents:Y,getArchiveHours:V,getArchiveHoursMc:K,getArchiveHoursMcEx:ut,getBatteryStatus:J,getChannelsStatus:ot,getChannelsTypes:ft,getCurrent:j,getCurrentMc:Q,getExAbsArchiveDaysMc:nt,getExAbsArchiveHoursMc:et,getExAbsCurrentMc:rt,getLmicInfo:$,getParameter:x,getSignalQuality:vt,getStatus:q,getTime2000:G,setParameter:P,setTime2000:k,softRestart:W,updateRun:st,usWaterMeterCommand:tt,verifyImage:it,writeImage:at});var lt=function(t){var e={};for(var n in t){var r=t[n];e[r]=n}return e};lt(ct);var ht=z;var gt=2;var dt=function(t){var e=t.sequenceNumber,n=t.seconds;var r=new M(gt,false);r.setUint8(e);r.setInt8(n);return D(ht,r.data)};var Ut=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=0;for(var r in e){if(r in t&&e[r]){n|=t[r]}}return n};var Tt=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n={};for(var r in t){n[r]=(e&t[r])!==0}return n};var mt=function(t,e,n,r){var a=(1<<e)-1<<n-1;var i=r;var s=t;s&=~a;i<<=n-1;s|=i;return s};var Et=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=Object.assign({},f,e),r=n.separator,a=n.prefix;return t.map(function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))}).join(r)};var pt=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map(function(t){return t.padStart(2,"0")}).join("");if(e.length%2!==0){e="0".concat(e)}var n=e.length/2;var r=new Array(n);for(var a=0;a<n;a++){r[a]=parseInt(e.substring(a*2,a*2+2),16)}return r};var St=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var n=Math.pow(10,e);return Math.round(t*n*(1+Number.EPSILON))/n};var _t=9466848e5;var It=1e3;var At=function(t){return new Date(_t+t*It)};var Nt=1;var bt=4;var wt=5;var yt=8;var Lt=9;var Ot=10;var Ct=11;var Bt=13;var Mt=18;var Rt=23;var Ft=24;var Dt=25;var kt=26;var Pt=28;var xt=29;var Vt=30;var Ht=31;var jt=32;var Gt=33;var Yt=34;var zt=35;var qt=36;var Qt=37;var Wt=38;var Kt=39;var Xt=40;var Zt=41;var $t=42;var Jt=43;var te=44;var ee=45;var ne=46;var re=47;var ae=48;var ie=49;var se=50;var ue=51;var oe=52;var fe=53;var ve=54;var ce=55;var le=56;var he=57;var ge=58;var de=59;var Ue=60;var Te=61;var me=Object.freeze({__proto__:null,ABSOLUTE_DATA:Rt,ABSOLUTE_DATA_ENABLE:Ft,ABSOLUTE_DATA_ENABLE_MULTI_CHANNEL:Vt,ABSOLUTE_DATA_MULTI_CHANNEL:xt,ACTIVATE_MODULE:Te,ACTIVATION_METHOD:Lt,BATTERY_DEPASSIVATION_CONFIG:Gt,BATTERY_DEPASSIVATION_INFO:Ot,BATTERY_MINIMAL_LOAD_TIME:Ct,CHANNELS_CONFIG:Bt,CHANNEL_TYPE:le,DAY_CHECKOUT_HOUR:bt,EVENTS_CONFIG:se,EXTRA_FRAME_INTERVAL:Pt,EXTRA_PAYLOAD_ENABLE:he,GEOLOCATION:kt,KEEP_LORA_CONNECTION_ON_REMOVAL:de,MQTT_BROKER_ADDRESS:zt,MQTT_DATA_RECEIVE_CONFIG:Wt,MQTT_DATA_SEND_CONFIG:Kt,MQTT_SESSION_CONFIG:Yt,MQTT_SSL_ENABLE:qt,MQTT_TOPIC_PREFIX:Qt,NBIOT_APN:fe,NBIOT_BANDS:oe,NBIOT_DEVICE_SOFTWARE_UPDATE:re,NBIOT_LED_INDICATION:ve,NBIOT_MODULE_FIRMWARE_UPDATE:ae,NBIOT_MODULE_INFO:ue,NBIOT_NTP_SERVER:Ue,NBIOT_SIM:ce,NBIOT_SSL_CACERT_SET:$t,NBIOT_SSL_CACERT_WRITE:Zt,NBIOT_SSL_CLIENT_CERT_SET:te,NBIOT_SSL_CLIENT_CERT_WRITE:Jt,NBIOT_SSL_CLIENT_KEY_SET:ne,NBIOT_SSL_CLIENT_KEY_WRITE:ee,NBIOT_SSL_CONFIG:Xt,PRIORITY_DATA_DELIVERY_TYPE:yt,PULSE_CHANNELS_SCAN_CONFIG:Ht,PULSE_CHANNELS_SET_CONFIG:jt,REPORTING_DATA_CONFIG:ie,REPORTING_DATA_INTERVAL:Nt,REPORTING_DATA_TYPE:wt,RX2_CONFIG:Mt,SERIAL_NUMBER:Dt,TIME_SYNCHRONIZATION_PERIOD_VIA_MAC:ge});lt(me);var Ee=0;var pe=1;var Se=2;var _e=3;var Ie=4;var Ae=5;var Ne=0;var be=1;var we=2;var ye=3;var Le=4;var Oe=5;var Ce=6;var Be=Object.freeze({__proto__:null,SF10B125:we,SF11B125:be,SF12B125:Ne,SF7B125:Oe,SF7B250:Ce,SF8B125:Le,SF9B125:ye});var Me=lt(Be);var Re,Fe;var De=2e3;var ke=4;var Pe=5;var xe=1;var Ve=7;var He=600;var je=100;var Ge=6;var Ye=function(t){var e=t.type;var n=1;switch(e){case Ee:case pe:case Se:break;case _e:n+=2;break;case Ie:n+=5;break;case Ae:n+=4;break}return n};var ze=(Re={},n(n(n(n(n(n(n(n(n(n(Re,Nt,1+4),bt,1+1),wt,1+1),yt,1+1),Lt,1+1),Ot,1+6),Ct,1+4),Bt,1+1),Mt,1+4),Rt,1+9),n(n(n(n(n(n(n(n(n(n(Re,Ft,1+1),Dt,1+6),kt,1+10),Pt,1+2),xt,1+10),Vt,1+2),Ht,1+3),jt,1+1),Gt,1+4),qt,1+1),n(n(n(n(n(n(n(n(n(n(Re,Wt,1+3),Kt,1+3),Xt,1+2),$t,1+4),te,1+4),ne,1+4),ie,1+4),se,1+3),ve,1+2),ce,1+3),n(n(n(n(Re,he,1+1),ge,1+4),de,1+1),Te,1+1));var qe={channel1:Math.pow(2,0),channel2:Math.pow(2,1),channel3:Math.pow(2,2),channel4:Math.pow(2,3)};var Qe=function(t){var e=Tt(qe,t);return{channel1:e.channel1,channel2:e.channel2,channel3:e.channel3,channel4:e.channel4}};var We=function(t){var e=t.channel1,n=t.channel2,r=t.channel3,a=t.channel4;return Ut(qe,{channel1:e,channel2:n,channel3:r,channel4:a})};var Ke=function(t){return Qe(t.getUint8())};var Xe=function(t,e){return t.setUint8(We(e))};var Ze={128:1,129:5,130:10,131:100,132:1e3,133:1e4,134:1e5};var $e=lt(Ze);var Je=function(t){return!!(t&128)};var tn=function(t){return{size:t.getUint16(),position:t.getUint16(),chunk:t.getBytesLeft()}};var en=function(t,e){if(e.size!==e.chunk.length){throw new Error("ssl chunk size parameter doesn't match actual ssl chunk size")}t.setUint16(e.size);t.setUint16(e.position);t.setBytes(e.chunk)};var nn=function(t){return{crc32:t.getUint32()}};var rn=function(t,e){t.setUint32(e.crc32)};var an=(Fe={},n(n(n(n(n(n(n(n(n(n(Fe,Nt,{get:function(t){return{specialSchedulePeriod:t.getUint8()*He,firstDaysSpecialSchedule:t.getUint8(),lastDaysSpecialSchedule:t.getUint8(),period:t.getUint8()*He}},set:function(t,e){t.setUint8(e.specialSchedulePeriod/He);t.setUint8(e.firstDaysSpecialSchedule);t.setUint8(e.lastDaysSpecialSchedule);t.setUint8(e.period/He)}}),bt,{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}}),wt,{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}}),yt,{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}}),Lt,{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}}),Ot,{get:function(t){return{loadTime:t.getUint16(),internalResistance:t.getUint16(),lowVoltage:t.getUint16()}},set:function(t,e){t.setUint16(e.loadTime);t.setUint16(e.internalResistance);t.setUint16(e.lowVoltage)}}),Ct,{get:function(t){return{value:t.getUint32()}},set:function(t,e){t.setUint32(e.value)}}),Bt,{get:function(t){return{value:t.getUint8()}},set:function(t,e){if(e.value<0||e.value>18){throw new Error("channels config must be between 0-18")}t.setUint8(e.value)}}),Mt,{get:function(t){var e=t.getUint8();var n=Me[e];var r=t.getUint24()*je;return{spreadFactor:e,spreadFactorName:n,frequency:r}},set:function(t,e){t.setUint8(e.spreadFactor);t.setUint24(e.frequency/je)}}),Rt,{get:function(t){return{meterValue:t.getUint32(),pulseCoefficient:dn(t),value:t.getUint32()}},set:function(t,e){t.setUint32(e.meterValue);Un(t,e.pulseCoefficient);t.setUint32(e.value)}}),n(n(n(n(n(n(n(n(n(n(Fe,Ft,{get:function(t){return{state:t.getUint8()}},set:function(t,e){t.setUint8(e.state)}}),Dt,{get:function(t){return{value:Et(t.getBytes(Ge))}},set:function(t,e){pt(e.value).forEach(function(e){return t.setUint8(e)})}}),kt,{get:function(t){return{latitude:St(t.getFloat32()),longitude:St(t.getFloat32()),altitude:St(t.getUint16())}},set:function(t,e){t.setFloat32(St(e.latitude));t.setFloat32(St(e.longitude));t.setUint16(St(e.altitude))}}),Pt,{get:function(t){return{value:t.getUint16()}},set:function(t,e){t.setUint16(e.value)}}),xt,{get:function(t){return{channel:cn(t),meterValue:t.getUint32(),pulseCoefficient:dn(t),value:t.getUint32()}},set:function(t,e){ln(t,e.channel);t.setUint32(e.meterValue);Un(t,e.pulseCoefficient);t.setUint32(e.value)}}),Vt,{get:function(t){return{channel:cn(t),state:t.getUint8()}},set:function(t,e){ln(t,e.channel);t.setUint8(e.state)}}),Ht,{get:function(t){return{channelList:fn(t),pullUpTime:t.getUint8(),scanTime:t.getUint8()}},set:function(t,e){if(e.pullUpTime<17){throw new Error("minimal value for pullUpTime - 17")}if(e.scanTime<15){throw new Error("minimal value for scanTime - 15")}vn(t,e.channelList.map(function(t){return{index:t}}));t.setUint8(e.pullUpTime);t.setUint8(e.scanTime)}}),jt,{get:Ke,set:Xe}),Gt,{get:function(t){return{resistanceStartThreshold:t.getUint16(),resistanceStopThreshold:t.getUint16()}},set:function(t,e){t.setUint16(e.resistanceStartThreshold);t.setUint16(e.resistanceStopThreshold)}}),Yt,{get:function(t){return{clientId:t.getString(),username:t.getString(),password:t.getString(),cleanSession:t.getUint8()}},set:function(t,e){t.setString(e.clientId);t.setString(e.username);t.setString(e.password);t.setUint8(e.cleanSession)}}),n(n(n(n(n(n(n(n(n(n(Fe,zt,{get:function(t){return{hostName:t.getString(),port:t.getUint16()}},set:function(t,e){t.setString(e.hostName);t.setUint16(e.port)}}),qt,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),Qt,{get:function(t){return{topicPrefix:t.getString()}},set:function(t,e){t.setString(e.topicPrefix)}}),Wt,{get:function(t){return{qos:t.getUint8(),count:t.getUint8(),timeout:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.count);t.setUint8(e.timeout)}}),Kt,{get:function(t){return{qos:t.getUint8(),retain:t.getUint8(),newestSendFirst:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.retain);t.setUint8(e.newestSendFirst)}}),Xt,{get:function(t){return{securityLevel:t.getUint8(),version:t.getUint8()}},set:function(t,e){t.setUint8(e.securityLevel);t.setUint8(e.version)}}),Zt,{get:tn,set:en}),$t,{get:nn,set:rn}),Jt,{get:tn,set:en}),te,{get:nn,set:rn}),n(n(n(n(n(n(n(n(n(n(Fe,ee,{get:tn,set:en}),ne,{get:nn,set:rn}),re,{get:function(t){return{softwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.softwareImageUrl)}}),ae,{get:function(t){return{moduleFirmwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.moduleFirmwareImageUrl)}}),ie,{get:function(t){return{dataType:t.getUint8(),hour:t.getUint8(),minutes:t.getUint8(),countToSend:t.getUint8()}},set:function(t,e){t.setUint8(e.dataType);t.setUint8(e.hour);t.setUint8(e.minutes);t.setUint8(e.countToSend)}}),se,{get:function(t){return{eventId:t.getUint8(),sendEvent:t.getUint8(),saveEvent:t.getUint8()}},set:function(t,e){t.setUint8(e.eventId);t.setUint8(e.sendEvent);t.setUint8(e.saveEvent)}}),ue,{get:function(t){return{moduleInfo:t.getString()}},set:function(t,e){t.setString(e.moduleInfo)}}),oe,{get:function(t){var e=t.getUint8();var n=[];for(var r=0;r<e;r++){n.push(t.getUint8())}return{bands:n}},set:function(t,e){t.setUint8(e.bands.length);for(var n of e.bands){t.setUint8(n)}}}),fe,{get:function(t){return{apn:t.getString()}},set:function(t,e){t.setString(e.apn)}}),ve,{get:function(t){return{enableLed:t.getUint8(),enableNbiotNetworkLed:t.getUint8()}},set:function(t,e){t.setUint8(e.enableLed);t.setUint8(e.enableNbiotNetworkLed)}}),n(n(n(n(n(n(n(Fe,ce,{get:function(t){return{enable:t.getUint8(),pin:t.getUint16()}},set:function(t,e){t.setUint8(e.enable);t.setUint16(e.pin)}}),le,{get:function(t){return bn(t)},set:function(t,e){return wn(t,e)}}),he,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),ge,{get:function(t){return{period:t.getUint32()}},set:function(t,e){t.setUint32(e.period)}}),de,{get:function(t){return{value:t.getUint8()!==0}},set:function(t,e){t.setUint8(e.value?1:0)}}),Ue,{get:function(t){return{server:t.getString(),port:t.getUint16()}},set:function(t,e){t.setString(e.server);t.setUint16(e.port)}}),Te,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}));var sn=function(t){var e;var n;switch(t.id){case Yt:n=t.data;e=1+1;e+=n.clientId.length+1;e+=n.username.length+1;e+=n.password.length+1;break;case zt:n=t.data;e=1+2;e+=n.hostName.length+1;break;case Qt:n=t.data;e=1;e+=n.topicPrefix.length+1;break;case Zt:case Jt:case ee:n=t.data;e=1+2+2;e+=n.chunk.length;break;case re:n=t.data;e=1;e+=n.softwareImageUrl.length+1;break;case ae:n=t.data;e=1;e+=n.moduleFirmwareImageUrl.length+1;break;case ue:n=t.data;e=1+1+n.moduleInfo.length;break;case oe:n=t.data;e=1+1;e+=n.bands.length;break;case fe:n=t.data;e=1+1+n.apn.length;break;case le:n=t.data;e=1+Ye(n);break;case Ue:n=t.data;e=1+1+n.server.length+2;break;default:e=ze[t.id]}if(e===undefined){throw new Error("unknown parameter id")}return e};var un=function(t){var e;switch(t.id){case xt:case Vt:case ie:case se:case le:e=2;break;default:e=1;break}return e};var on=function(t,e){t.setUint32(e)};var fn=function(t){var e=[];var n=true;var r=1;while(n){var a=t.getUint8();var i=a.toString(2).padStart(Ve+1,"0").split("").reverse();i.forEach(function(t,a){var i=Number(t);if(a===Ve){n=!!i}else{if(i){e.push(r)}++r}})}return e};var vn=function(t,e){if(e.length===0){t.setUint8(0);return}e.sort(function(t,e){return t.index-e.index});var n=Math.max.apply(Math,i(e.map(function(t){var e=t.index;return e})));var r=(n-n%8)/8;var a=new Array(r+1).fill(0);var s=0;a.forEach(function(t,n){var r=n*Ve+1;var i=r+Ve;while(r<i){var u=e.find(function(t){return t.index===r});if(u!==undefined){s|=1<<(u.index-1)%Ve}++r}if(a[n+1]!==undefined){s|=1<<Ve}a[n]=s;s=0});a.forEach(function(e){return t.setUint8(e)})};var cn=function(t){return t.getUint8()+1};var ln=function(t,e){if(e<1){throw new Error("channel must be 1 or greater")}t.setUint8(e-1)};var hn=function(t,e,n){if(e===0&&n===0){t.setUint8(0);return}t.setUint8((n-1&7)<<5|e&31)};var gn=function(t,e){var n;if(e instanceof Date){n=e}else{n=At(e)}var r=n.getUTCFullYear()-De;var a=n.getUTCMonth()+1;var i=n.getUTCDate();var s=r<<xe|a>>ke-xe;var u=(a&7)<<Pe|i;[s,u].forEach(function(e){return t.setUint8(e)})};var dn=function(t){var e=t.getUint8();if(Je(e)){var n=Ze[e];if(n){return n}throw new Error("pulseCoefficient MSB is set, but value unknown")}return e};var Un=function(t,e){if(e in $e){var n=$e[e];if(n){t.setUint8(n)}else{throw new Error("pulseCoefficient MSB is set, but value unknown")}}else{t.setUint8(e)}};var Tn=function(t,e){var n=e.id,r=e.data;if(!an[n]||!an[n].set){throw new Error("parameter ".concat(n," is not supported"))}t.setUint8(n);an[n].set(t,r)};var mn=function(t,e){var n=e.id,r=e.data;var a;t.setUint8(n);switch(n){case xt:case Vt:case le:a=r;ln(t,a.channel);break;case ie:a=r;t.setUint8(a.dataType);break;case se:a=r;t.setUint8(a.eventId);break}};var En=function(t,e){var n=mt(0,3,1,e.segmentIndex);n=mt(n,3,5,e.segmentsNumber);n=mt(n,1,8,+e.isLast);t.setUint8(e.segmentationSessionId);t.setUint8(n);t.setBytes(e.data)};var pn=function(t){var e=t.getUint16();return{activeStateTimeMs:e}};var Sn=function(t,e){t.setUint16(e.activeStateTimeMs)};var _n=function(t){var e=t.getUint8();var n=t.getUint16();var r=t.getUint8();return{type:e,activeStateTimeMs:n,halState:r}};var In=function(t,e){t.setUint8(e.type);t.setUint16(e.activeStateTimeMs);t.setUint8(e.halState)};var An=function(t){var e=t.getUint16();var n=t.getUint8();var r=t.getInt8();var a=t.getInt8();return{measurementPeriod:e,hysteresisSec:n,highTemperatureThreshold:r,lowTemperatureThreshold:a}};var Nn=function(t,e){t.setUint16(e.measurementPeriod);t.setUint8(e.hysteresisSec);t.setInt8(e.highTemperatureThreshold);t.setInt8(e.lowTemperatureThreshold)};var bn=function(t){var e=cn(t);var n=t.getUint8();var r={};switch(n){case _e:r=pn(t);break;case Ie:r=An(t);break;case Ae:r=_n(t);break}return{channel:e,type:n,parameters:r}};var wn=function(t,e){var n=e.type,r=e.channel,a=e.parameters;ln(t,r);t.setUint8(n);switch(n){case _e:Sn(t,a);break;case Ie:Nn(t,a);break;case Ae:In(t,a);break}};var yn=function(t){return btoa(t.map(function(t){return String.fromCharCode(t)}).join(""))};var Ln=Z;var On=2;var Cn=function(t){var e=new M(On+t.data.length,false);En(e,t);return D(Ln,e.data)};var Bn=H;var Mn=3;var Rn=function(t){var e=new M(Mn,false);var n=t.startTime2000,r=t.days;var a=At(n);gn(e,a);e.setUint8(r);return D(Bn,e.data)};var Fn=X;var Dn=4;var kn=function(t){var e=new M(Dn,false);var n=t.startTime2000,r=t.days,a=t.channelList;var i=At(n);gn(e,i);vn(e,a.map(function(t){return{index:t}}));e.setUint8(r);return D(Fn,e.data)};var Pn=Y;var xn=5;var Vn=function(t){var e=t.startTime2000,n=t.events;var r=new M(xn,false);on(r,e);r.setUint8(n);return D(Pn,r.data)};var Hn=V;var jn=4;var Gn=function(t){var e=t.startTime2000,n=t.hours;var r=new M(jn,false);var a=At(e);var i=a.getUTCHours();gn(r,a);hn(r,i,1);r.setUint8(n);return D(Hn,r.data)};var Yn=K;var zn=4;var qn=function(t){var e=new M(zn,false);var n=t.hours,r=t.startTime2000,a=t.channelList;var i=At(r);var s=i.getUTCHours();gn(e,i);hn(e,s,n);vn(e,a.map(function(t){return{index:t}}));return D(Yn,e.data)};var Qn=ut;var Wn=5;var Kn=function(t){var e=new M(Wn,false);var n=t.channelList,r=t.hour,a=t.hours,i=t.startTime2000;var s=At(i);gn(e,s);e.setUint8(r);e.setUint8(a);vn(e,n.map(function(t){return{index:t}}));return D(Qn,e.data)};var Xn=J;var Zn=function(){return D(Xn)};var $n=ot;var Jn=function(t){return D($n,Object.keys(t).length!==0?[We(t)]:[])};var tr=ft;var er=function(){return D(tr)};var nr=j;var rr=function(){return D(nr)};var ar=Q;var ir=function(){return D(ar)};var sr=nt;var ur=4;var or=function(t){var e=new M(ur,false);var n=t.startTime2000,r=t.days,a=t.channelList;gn(e,n);vn(e,a.map(function(t){return{index:t}}));e.setUint8(r);return D(sr,e.data)};var fr=et;var vr=4;var cr=function(t){var e=new M(vr,false);var n=t.startTime2000,r=t.hours,a=t.channelList;var i=At(n);var s=i.getUTCHours();gn(e,i);hn(e,s,r);vn(e,a.map(function(t){return{index:t}}));return D(fr,e.data)};var lr=rt;var hr=function(){return D(lr)};var gr=$;var dr=function(){return D(gr)};var Ur=x;var Tr=function(t){var e=new M(un(t),false);mn(e,t);return D(Ur,e.data)};var mr=vt;var Er=function(){return D(mr,[])};var pr=q;var Sr=function(){return D(pr)};var _r=G;var Ir=function(){return D(_r,[])};var Ar=P;var Nr=function(t){var e=new M(sn(t),false);Tn(e,t);return D(Ar,e.data)};var br=k;var wr=5;var yr=function(t){var e=t.sequenceNumber,n=t.seconds;var r=new M(wr,false);r.setUint8(e);r.setInt32(n);return D(br,r.data)};var Lr=W;var Or=function(){return D(Lr)};var Cr=st;var Br=function(){return D(Cr)};var Mr=tt;var Rr=function(t){var e=t.data,n=t.length;var r=new M(n,false);r.setUint8(n);r.setBytes(e);return D(Mr,r.data)};var Fr=it;var Dr=function(){return D(Fr)};var kr=at;var Pr=4;var xr=function(t){var e=new M(Pr,false);e.setUint32(t.offset);e.setBytes(t.data);return D(kr,e.data)};var Vr=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var n=e;t.forEach(function(t){n^=t});return n};var Hr=function(t){return function(e){var n;var r=e.map(function(e){if("id"in e){return t[e.id](e.parameters||{},e.config)}if("command"in e){return e.command.bytes}throw new Error("wrong command format")});var a=(n=[]).concat.apply(n,i(r));return[].concat(i(a),[Vr(a)])}};var jr={};var Gr=Hr(jr);jr[ht]=dt;jr[Ln]=Cn;jr[Bn]=Rn;jr[Fn]=kn;jr[Pn]=Vn;jr[Hn]=Gn;jr[Yn]=qn;jr[Qn]=Kn;jr[Xn]=Zn;jr[$n]=Jn;jr[tr]=er;jr[nr]=rr;jr[ar]=ir;jr[sr]=or;jr[fr]=cr;jr[lr]=hr;jr[gr]=dr;jr[Ur]=Tr;jr[mr]=Er;jr[pr]=Sr;jr[_r]=Ir;jr[Ar]=Nr;jr[br]=yr;jr[Lr]=Or;jr[Cr]=Br;jr[Mr]=Rr;jr[Fr]=Dr;jr[kr]=xr;toBytes=Gr;getBase64FromBytes=yn})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(toBytes(msg.commands, config))
};

return result;
