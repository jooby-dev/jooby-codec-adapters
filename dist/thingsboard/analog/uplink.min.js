// these options can be edited
// available hardware types can be found here:
// https://github.com/jooby-dev/jooby-docs/blob/main/docs/analog/basics.md#hardware-types
var config = {
    hardwareType: 0
};


//#region [autogenerated jooby-codec bundle]
var fromBytes;(function(){"use strict";function t(t){return e(t)||r(t)||n(t)||i()}function e(t){if(Array.isArray(t))return a(t)}function r(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n(t,e){if(!t)return;if(typeof t==="string")return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}function a(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s={separator:" ",prefix:""};var o=1;var f=2;var u=4;var v=Math.log,h=Math.pow,c=Math.LN2;var l=function(t,e,r,n,a){var i,s,o=a*8-n-1,f=(1<<o)-1,u=f>>1,v=-7,c=r?a-1:0,l=r?-1:1,d=t[e+c];c+=l;i=d&(1<<-v)-1;d>>=-v;v+=o;for(;v>0;i=i*256+t[e+c],c+=l,v-=8);s=i&(1<<-v)-1;i>>=-v;v+=n;for(;v>0;s=s*256+t[e+c],c+=l,v-=8);if(i===0){i=1-u}else if(i===f){return s?NaN:d?-Infinity:Infinity}else{s=s+h(2,n);i=i-u}return(d?-1:1)*s*h(2,i-n)};var d=function(t,e,r,n,a,i){var s,o,f,u=i*8-a-1,l=(1<<u)-1,d=l>>1,g=a===23?h(2,-24)-h(2,-77):0,p=n?0:i-1,w=n?1:-1,y=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){o=r!==r?1:0;s=l}else{s=v(r)/c|0;if(r*(f=h(2,-s))<1){s--;f*=2}if(s+d>=1){r+=g/f}else{r+=g*h(2,1-d)}if(r*f>=2){s++;f/=2}if(s+d>=l){o=0;s=l}else if(s+d>=1){o=(r*f-1)*h(2,a);s=s+d}else{o=r*h(2,d-1)*h(2,a);s=0}}for(;a>=8;t[e+p]=o&255,p+=w,o/=256,a-=8);s=s<<a|o;u+=a;for(;u>0;t[e+p]=s&255,p+=w,s/=256,u-=8);t[e+p-w]|=y*128};var g=[1,0];var p=[3,2,1,0];var w=[0,1];var y=[0,1,2,3];var m=function(t,e){return t[e]};var E=function(t,e,r){var n=r?w:g;var a=t[e+n[0]];var i=t[e+n[1]]<<8;return a|i};var U=function(t,e,r){var n=r?y:p;var a=t[e+n[3]]*16777216;var i=t[e+n[2]]*65536;var s=t[e+n[1]]*256;var o=t[e+n[0]];return a+i+s+o};var C=function(t,e,r){t[e]=r&255};var b=function(t,e,r,n){var a=n?w:g;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255};var M=function(t,e,r,n){var a=n?y:p;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255;t[e+a[2]]=r>>>16&255;t[e+a[3]]=r>>>24&255};function x(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}x.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){C(this.data,this.offset,t<0?t|256:t);this.offset+=o},getInt8:function(){var t=m(this.data,this.offset);this.offset+=o;return t&128?t^-256:t},setUint8:function(t){C(this.data,this.offset,t);this.offset+=o},getUint8:function(){var t=m(this.data,this.offset);this.offset+=o;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t<0?t|65536:t,e);this.offset+=f},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=E(this.data,this.offset,t);this.offset+=f;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t,e);this.offset+=f},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=E(this.data,this.offset,t);this.offset+=f;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;M(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=u},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=U(this.data,this.offset,t);this.offset+=u;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;M(this.data,this.offset,t,e);this.offset+=u},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=U(this.data,this.offset,t);this.offset+=u;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;d(this.data,this.offset,t,e,23,4);this.offset+=u},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=l(this.data,this.offset,t,23,4);this.offset+=u;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var n=this.data;n.splice.apply(n,[r,e.length].concat(t(e)));this.data=n;this.offset=r+e.length}};Object.defineProperties(x.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var L=224;var S=31;var I=function(t){if(t.length===0){throw new Error("Invalid buffer size")}var e={shortCode:t[0]&L,extraCode:t[0]&S};if(e.shortCode!==0){return{headerSize:1,commandId:t[0]&~e.extraCode,commandSize:e.extraCode}}if(e.extraCode===S){if(t.length<3){throw new Error("Invalid buffer size")}return{headerSize:3,commandId:t[1]<<8|S,commandSize:t[2]}}if(t.length<2){throw new Error("Invalid buffer size")}return{headerSize:2,commandId:e.extraCode,commandSize:t[1]}};var T=12;var V="correctTime2000";var B=1;var z=function(t){if(t.length!==B){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new x(t,false);var r={status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return r};var D=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var n in e){if(n in t&&e[n]){r|=t[n]}}return r};var A=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var n in t){r[n]=(e&t[n])!==0}return r};var W=9466848e5;var H=1e3;var O=function(t){return new Date(W+t*H)};var k=function(t){return(t.getTime()-W)/H};var N=1;var P=2;var F=3;var R=4;var j=5;var q=6;var G=7;var Y=8;var $=9;var J=10;var K=11;var Q=12;var X=function(t){var e={};for(var r in t){var n=t[r];e[n]=r}return e};var Z=2e3;var _=4;var tt=5;var et=1;var rt=4095;var nt=128;var at=7;var it=[P,F,N,Q];var st=[Y,j,$,R];var ot=[K];var ft=[q,J];var ut=[G];var vt={isBatteryLow:Math.pow(2,0),isMagneticInfluence:Math.pow(2,1),isButtonReleased:Math.pow(2,2),isConnectionLost:Math.pow(2,3)};var ht={isBatteryLow:Math.pow(2,0),isConnectionLost:Math.pow(2,3),isFirstChannelInactive:Math.pow(2,4),isSecondChannelInactive:Math.pow(2,5)};var ct={isConnectionLost:Math.pow(2,3)};var lt={isBatteryLow:Math.pow(2,0),isConnectionLost:Math.pow(2,3),isFirstChannelInactive:Math.pow(2,4),isSecondChannelInactive:Math.pow(2,5),isThirdChannelInactive:Math.pow(2,6),isForthChannelInactive:Math.pow(2,7)};var dt={isMeterCaseOpen:Math.pow(2,0),isMagneticInfluence:Math.pow(2,1),isParametersSetRemotely:Math.pow(2,2),isParametersSetLocally:Math.pow(2,3),isMeterProgramRestarted:Math.pow(2,4),isLockedOut:Math.pow(2,5),isTimeSet:Math.pow(2,6),isTimeCorrected:Math.pow(2,7),isMeterFailure:Math.pow(2,8),isMeterTerminalBoxOpen:Math.pow(2,9),isModuleCompartmentOpen:Math.pow(2,10),isTariffPlanChanged:Math.pow(2,11),isNewTariffPlanReceived:Math.pow(2,12)};var gt={128:1,129:5,130:10,131:100,132:1e3,133:1e4,134:1e5};var pt=X(gt);var wt=function(t){return!!(t&128)};function yt(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;x.call(this,t,e)}yt.prototype=Object.create(x.prototype);yt.prototype.constructor=yt;yt.prototype.getExtendedValue=function(){var t=0;var e=true;var r=0;while(e&&this.offset<=this.data.length){var n=this.getUint8();e=!!(n&nt);t+=(n&127)<<7*r;++r}if(t<0){t=0}return t};yt.prototype.setExtendedValue=function(t){var e=this;if(t===0){this.setUint8(0);return}var r=[];var n=t;while(n){r.push(nt|n&127);n>>=7}var a=r.pop();if(a){r.push(a&127)}r.forEach((function(t){return e.setUint8(t)}))};yt.prototype.getExtendedValueSize=function(t){var e=Math.ceil(t/7);var r=t+e;var n=Math.ceil(r/8);return n};yt.prototype.getTime=function(){return this.getUint32(false)};yt.prototype.setTime=function(t){this.setUint32(t,false)};yt.prototype.getBatteryVoltage=function(){var t=this.getUint8();var e=this.getUint8();var r=this.getUint8();var n=t<<4;n|=(e&240)>>4;var a=(e&15)<<8|r;if(a===rt){a=undefined}if(n===rt){n=undefined}return{underLowLoad:n,underHighLoad:a}};yt.prototype.setBatteryVoltage=function(t){var e=this;var r=t.underLowLoad,n=t.underHighLoad;if(r===undefined){r=rt}if(n===undefined){n=rt}var a=r>>4&255;var i=(r&15)<<4|n>>8&15;var s=n&255;[a,i,s].forEach((function(t){return e.setUint8(t)}))};yt.prototype.getChannels=function(){var t=[];var e=true;var r=1;while(e){var n=this.getUint8();var a=n.toString(2).padStart(at+1,"0").split("").reverse();a.forEach((function(n,a){var i=Number(n);if(a===at){e=!!i}else{if(i){t.push(r)}++r}}))}return t};yt.prototype.setChannels=function(e){var r=this;if(e.length===0){this.setUint8(0);return}e.sort((function(t,e){return t.index-e.index}));var n=Math.max.apply(Math,t(e.map((function(t){var e=t.index;return e}))));var a=(n-n%8)/8;var i=new Array(a+1).fill(0);var s=0;i.forEach((function(t,r){var n=r*at+1;var a=n+at;while(n<a){var o=e.find((function(t){return t.index===n}));if(o!==undefined){s|=1<<(o.index-1)%at}++n}if(i[r+1]!==undefined){s|=1<<at}i[r]=s;s=0}));i.forEach((function(t){return r.setUint8(t)}))};yt.prototype.getChannelsValuesWithHourDiff=function(){var t=this;var e=this.getDate();var r=this.getHours(),n=r.hour,a=r.hours;var i=this.getChannels();var s=[];e.setUTCHours(n);i.forEach((function(e){var r=[];var n=t.getExtendedValue();for(var i=1;i<a;++i){r.push(t.getExtendedValue())}s.push({value:n,diff:r,index:e})}));return{startTime2000:k(e),hours:a,channelList:s}};yt.prototype.setChannelsValuesWithHourDiff=function(t,e,r){var n=this;var a=O(e);var i=a.getUTCHours();this.setDate(a);this.setHours(i,t);this.setChannels(r);r.forEach((function(t){var e=t.value,r=t.diff;n.setExtendedValue(e);r.forEach((function(t){return n.setExtendedValue(t)}))}))};yt.prototype.getHours=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getUint8();if(t===0){return{hours:0,hour:0}}var e=((t&224)>>5)+1;var r=t&31;return{hours:e,hour:r}};yt.prototype.setHours=function(t,e){if(t===0&&e===0){this.setUint8(0);return}this.setUint8((e-1&7)<<5|t&31)};yt.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();var r=t>>et;var n=(t&1)<<_-et|e>>tt;var a=e&31;return new Date(Date.UTC(r+Z,n-1,a,0,0,0,0))};yt.prototype.setDate=function(t){var e=this;var r;if(t instanceof Date){r=t}else{r=O(t)}var n=r.getUTCFullYear()-Z;var a=r.getUTCMonth()+1;var i=r.getUTCDate();var s=n<<et|a>>_-et;var o=(a&7)<<tt|i;[s,o].forEach((function(t){return e.setUint8(t)}))};yt.prototype.getPulseCoefficient=function(){var t=this.getUint8();if(wt(t)){var e=gt[t];if(e){return e}throw new Error("pulseCoefficient MSB is set, but value unknown")}return t};yt.prototype.setPulseCoefficient=function(t){if(t in pt){var e=pt[t];if(e){this.setUint8(e)}else{throw new Error("pulseCoefficient MSB is set, but value unknown")}}else{this.setUint8(t)}};yt.prototype.getChannelsWithAbsoluteValues=function(){var t=this;var e=this.getChannels();var r=[];e.forEach((function(e){r.push({pulseCoefficient:t.getPulseCoefficient(),value:t.getExtendedValue(),index:e})}));return r};yt.prototype.setChannelsWithAbsoluteValues=function(t){var e=this;this.setChannels(t);t.forEach((function(t){var r=t.value,n=t.pulseCoefficient;e.setPulseCoefficient(n);e.setExtendedValue(r)}))};yt.prototype.getChannelsAbsoluteValuesWithHourDiff=function(t){var e=this;var r=this.getChannels();var n=[];r.forEach((function(r){var a=e.getPulseCoefficient();var i=e.getExtendedValue();var s=[];for(var o=1;o<t;++o){s.push(e.getExtendedValue())}n.push({diff:s,value:i,pulseCoefficient:a,index:r})}));return n};yt.prototype.setChannelsAbsoluteValuesWithHourDiff=function(t){var e=this;this.setChannels(t);t.forEach((function(t){var r=t.value,n=t.diff,a=t.pulseCoefficient;e.setPulseCoefficient(a);e.setExtendedValue(r);n.forEach((function(t){return e.setExtendedValue(t)}))}))};yt.prototype.getEventStatus=function(t){var e;if(it.indexOf(t)!==-1){e=A(vt,this.getUint8())}else if(st.indexOf(t)!==-1){e=A(ht,this.getUint8())}else if(ot.indexOf(t)!==-1){e=A(ct,this.getUint8())}else if(ft.indexOf(t)!==-1){e=A(lt,this.getExtendedValue())}else if(ut.indexOf(t)!==-1){e=A(dt,this.getUint16())}else{throw new Error("wrong hardwareType")}return e};yt.prototype.setEventStatus=function(t,e){if(it.indexOf(t)!==-1){this.setUint8(D(vt,e))}else if(st.indexOf(t)!==-1){this.setUint8(D(ht,e))}else if(ot.indexOf(t)!==-1){this.setUint8(D(ct,e))}else if(ft.indexOf(t)!==-1){this.setExtendedValue(D(lt,e))}else if(ut.indexOf(t)!==-1){this.setUint16(D(dt,e))}else{throw new Error("wrong hardwareType")}};var mt=24;var Et="currentMc";var Ut=37;var Ct=function(t){if(t.length>Ut){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e={channelList:[]};var r=new yt(t);var n=r.getChannels();e.channelList=n.map((function(t){return{value:r.getExtendedValue(),index:t}}));return e};var bt=22;var Mt="dayMc";var xt=32;var Lt=function(t){if(t.length>xt){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);var r=e.getDate();var n=e.getChannels();var a=n.map((function(t){return{value:e.getExtendedValue(),index:t}}));return{startTime2000:k(r),channelList:a}};var St=2847;var It="exAbsDayMc";var Tt=89;var Vt=function(t){if(t.length>Tt){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);var r=e.getDate();var n=e.getChannelsWithAbsoluteValues();return{startTime2000:k(r),channelList:n}};var Bt=2591;var zt="exAbsHourMc";var Dt=168;var At=function(t){if(t.length>Dt){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);var r=e.getDate();var n=e.getHours(),a=n.hour,i=n.hours;var s=e.getChannelsAbsoluteValuesWithHourDiff(i);r.setUTCHours(a);return{startTime2000:k(r),hours:i,channelList:s}};var Wt=27;var Ht="getArchiveDaysMc";var Ot=function(t){var e=new yt(t);var r=e.getDate();var n=e.getChannels();var a=e.getUint8();var i=[];n.forEach((function(t){var r=[];i.push({dayList:r,index:t});for(var n=0;n<a;++n){r.push(e.getExtendedValue())}}));return{startTime2000:k(r),days:a,channelList:i}};var kt=11;var Nt="getArchiveEvents";var Pt=function(t){return{time2000:t.getTime(),id:t.getUint8(),sequenceNumber:t.getUint8()}};var Ft=function(t){var e=new yt(t,false);var r=[];while(e.bytesLeft>0){r.push(Pt(e))}return{eventList:r}};var Rt=26;var jt="getArchiveHoursMc";var qt=164;var Gt=function(t){if(t.length>qt){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);return e.getChannelsValuesWithHourDiff()};var Yt=3359;var $t="getExAbsArchiveDaysMc";var Jt=function(t){var e=new yt(t);var r=e.getDate();var n=e.getChannels();var a=e.getUint8();var i=[];n.forEach((function(t){var r=[];var n=e.getPulseCoefficient();i.push({pulseCoefficient:n,dayList:r,index:t});for(var s=0;s<a;++s){r.push(e.getExtendedValue())}}));return{channelList:i,days:a,startTime2000:k(r)}};var Kt=26;var Qt="getArchiveHoursMc";var Xt=function(t){var e=new yt(t);return e.getChannelsValuesWithHourDiff()};var Zt=543;var _t="getLmicInfo";var te=2;var ee={isMulticastSupported:1<<0,isFragmentedDataSupported:1<<1};var re=function(t){if(t.length!==te){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new x(t);var r=A(ee,e.getUint8());var n=e.getUint8();if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return{capabilities:r,version:n}};var ne=23;var ae="hourMc";var ie=164;var se=function(t){if(t.length>ie){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);return e.getChannelsValuesWithHourDiff()};var oe=96;var fe="lastEvent";var ue=function(t,e){if(!e.hardwareType){throw new Error("hardwareType in config is mandatory")}var r=new yt(t);var n=r.getUint8();var a=r.getEventStatus(e.hardwareType);return{sequenceNumber:n,status:a}};var ve=1;var he=2;var ce=3;var le=4;var de=5;var ge=6;var pe=7;var we=8;var ye=9;var me=11;var Ee=12;var Ue=13;var Ce=15;var be=16;var Me=17;var xe=18;var Le=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},s,e),n=r.separator,a=r.prefix;return t.map((function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))})).join(n)};var Se=21;var Ie="newEvent";var Te=14;var Ve=8;var Be=function(t){return t.getUint16(false)};var ze=function(t){return Le(t.getBytes(Ve))};var De=function(t){if(t.length>Te){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);var r=e.getUint8();var n=e.getUint8();var a;switch(r){case ve:case he:case ce:case le:case ge:case pe:case we:case ye:case Ce:case be:case xe:a={time2000:e.getTime()};break;case de:a={voltage:Be(e)};break;case me:a={time2000:e.getTime(),deviceId:ze(e)};break;case Ee:case Ue:a={channel:e.getUint8()+1,value:e.getExtendedValue()};break;case Me:a={status:e.getEventStatus(G)};break;default:throw new Error("Event ".concat(Se," is not supported"))}return{id:r,sequenceNumber:n,data:a}};var Ae=2;var We="setTime2000";var He=1;var Oe=function(t){if(t.length!==He){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new x(t,false);var r={status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return r};var ke=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var r=Math.pow(10,e);return Math.round(t*r*(1+Number.EPSILON))/r};var Ne=20;var Pe="status";var Fe=65535;var Re=255;var je=function(t){var e=new yt(t);var r={type:e.getUint8(),version:e.getUint8()};var n={type:e.getUint8(),version:e.getUint8()};var a;switch(n.type){case N:case P:case F:case R:case j:case q:case Y:case $:case J:case Q:{var i={batteryVoltage:e.getBatteryVoltage(),batteryInternalResistance:e.getUint16(false),temperature:e.getUint8(),remainingBatteryCapacity:e.getUint8(),lastEventSequenceNumber:e.getUint8()};if(i.batteryInternalResistance===Fe){i.batteryInternalResistance=undefined}if(i.remainingBatteryCapacity===Re){i.remainingBatteryCapacity=undefined}else if(i.remainingBatteryCapacity!==undefined){i.remainingBatteryCapacity=ke(i.remainingBatteryCapacity*100/(Re-1),0)}a=i}break;case G:a={time2000:e.getUint32(),resetReason:e.getUint8(),rssiLastDownlinkFrame:e.getUint8(),snrLastDownlinkFrame:e.getUint8(),downlinkRequestsNumber:e.getUint8(),downlinkFragmentsNumber:e.getUint8(),uplinkResponsesNumber:e.getUint8(),uplinkFragmentsNumber:e.getUint8(),signalMarginToGateway:e.getUint8(),signalMarginFromGateway:e.getUint8(),detectedGatewaysNumber:e.getUint8(),gatewayDownlinkErrorRate:e.getUint8(),lastEventSequenceNumber:e.getUint8()};break;case K:default:throw new Error("".concat(Ne,": hardware type ").concat(n.type," is not supported"))}return{software:r,hardware:n,data:a}};var qe=9;var Ge="time2000";var Ye=5;var $e=function(t){if(t.length!==Ye){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new yt(t);var r={sequenceNumber:e.getUint8(),time2000:e.getTime()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return r};var Je=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var Ke=3;var Qe=function(e,r){return function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1?arguments[1]:undefined;var i=[];var s={commands:i,bytes:n,lrc:{expected:undefined,actual:0}};var o=0;var f;var u;if(!n.length){return s}do{var v=I(n.slice(o,o+Ke));var h=n.slice(o,o+v.headerSize);var c=n.slice(o+v.headerSize,o+v.headerSize+v.commandSize);var l={id:v.commandId,name:r[v.commandId],headerSize:v.headerSize,bytes:[].concat(t(h),t(c))};o=o+v.headerSize+v.commandSize;if(a){l.config=a}try{l.parameters=e[v.commandId](c,a);i.push(l)}catch(t){i.push({command:l,error:t.message})}}while(o<n.length-1);if(n.length-o===1){f=n[n.length-1];u=Je(n.slice(0,-1))}else{u=Je(n)}s.lrc.actual=u;s.lrc.expected=f;if(f===u){return s}return{message:s,error:"mismatch LRC"}}};var Xe={};var Ze={};var _e=Qe(Xe,Ze);Xe[T]=z;Xe[mt]=Ct;Xe[bt]=Lt;Xe[St]=Vt;Xe[Bt]=At;Xe[Wt]=Ot;Xe[kt]=Ft;Xe[Rt]=Gt;Xe[Yt]=Jt;Xe[Kt]=Xt;Xe[Zt]=re;Xe[ne]=se;Xe[oe]=ue;Xe[Se]=De;Xe[Ae]=Oe;Xe[Ne]=je;Xe[qe]=$e;Ze[T]=V;Ze[mt]=Et;Ze[bt]=Mt;Ze[St]=It;Ze[Bt]=zt;Ze[Wt]=Ht;Ze[kt]=Nt;Ze[Rt]=jt;Ze[Yt]=$t;Ze[Kt]=Qt;Ze[Zt]=_t;Ze[ne]=ae;Ze[oe]=fe;Ze[Se]=Ie;Ze[Ae]=We;Ze[Ne]=Pe;Ze[qe]=Ge;fromBytes=_e})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var message = fromBytes(payload, config);

// there may be a message.error (e.g. mismatched LRC)
// in that case message.message will contain everything parsed successfully
// it should be used with caution

var result = {
    deviceName: 'Some Device Name',
    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    message: message.message || message,
    metadata: metadata
};

return result;
