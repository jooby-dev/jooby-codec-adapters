// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// these options can be edited
// available hardware types can be found here:
// https://github.com/jooby-dev/jooby-docs/blob/main/docs/analog/basics.md#hardware-types
var config = {
    // required field
    hardwareType: 0
};


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(e){if(Array.isArray(e))return t(e)}function n(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true}):t[e]=n,t}function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return e(t)||r(t)||u(t)||a()}function s(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function o(t){var e=s(t,"string");return"symbol"==typeof e?e:e+""}function u(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var f={separator:" ",prefix:""};var v=1;var c=2;var h=3;var g=4;var l=Math.log,d=Math.pow,p=Math.LN2;var U=function(t,e,n,r,a){var i,s,o=a*8-r-1,u=(1<<o)-1,f=u>>1,v=-7,c=n?a-1:0,h=n?-1:1,g=t[e+c];c+=h;i=g&(1<<-v)-1;g>>=-v;v+=o;for(;v>0;i=i*256+t[e+c],c+=h,v-=8);s=i&(1<<-v)-1;i>>=-v;v+=r;for(;v>0;s=s*256+t[e+c],c+=h,v-=8);if(i===0){i=1-f}else if(i===u){return s?NaN:g?-Infinity:Infinity}else{s=s+d(2,r);i=i-f}return(g?-1:1)*s*d(2,i-r)};var E=function(t,e,n,r,a,i){var s,o,u,f=i*8-a-1,v=(1<<f)-1,c=v>>1,h=a===23?d(2,-24)-d(2,-77):0,g=r?0:i-1,U=r?1:-1,E=n<0||n===0&&1/n<0?1:0;n<0&&(n=-n);if(n!==n||n===Infinity){o=n!==n?1:0;s=v}else{s=l(n)/p|0;if(n*(u=d(2,-s))<1){s--;u*=2}if(s+c>=1){n+=h/u}else{n+=h*d(2,1-c)}if(n*u>=2){s++;u/=2}if(s+c>=v){o=0;s=v}else if(s+c>=1){o=(n*u-1)*d(2,a);s=s+c}else{o=n*d(2,c-1)*d(2,a);s=0}}for(;a>=8;t[e+g]=o&255,g+=U,o/=256,a-=8);s=s<<a|o;f+=a;for(;f>0;t[e+g]=s&255,g+=U,s/=256,f-=8);t[e+g-U]|=E*128};var m=[1,0];var y=[2,1,0];var w=[3,2,1,0];var T=[0,1];var S=[0,1,2];var C=[0,1,2,3];var I=function(t,e){return t[e]};var _=function(t,e,n){var r=n?T:m;var a=t[e+r[0]];var i=t[e+r[1]]<<8;return a|i};var L=function(t,e,n){var r=n?S:y;var a=t[e+r[0]];var i=t[e+r[1]]<<8;var s=t[e+r[2]]<<16;return a|i|s};var A=function(t,e,n){var r=n?C:w;var a=t[e+r[3]]*16777216;var i=t[e+r[2]]*65536;var s=t[e+r[1]]*256;var o=t[e+r[0]];return a+i+s+o};var b=function(t,e,n){t[e]=n&255};var N=function(t,e,n,r){var a=r?T:m;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255};var M=function(t,e,n,r){var a=r?S:y;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255};var O=function(t,e,n,r){var a=r?C:w;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255;t[e+a[3]]=n>>>24&255};function R(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var n=new Array(t).fill(0);this.data=n}else{this.data=t}this.offset=0;this.isLittleEndian=e}R.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){b(this.data,this.offset,t<0?t|256:t);this.offset+=v},getInt8:function(){var t=I(this.data,this.offset);this.offset+=v;return t&128?t^-256:t},setUint8:function(t){b(this.data,this.offset,t);this.offset+=v},getUint8:function(){var t=I(this.data,this.offset);this.offset+=v;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;N(this.data,this.offset,t<0?t|65536:t,e);this.offset+=c},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=_(this.data,this.offset,t);this.offset+=c;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;N(this.data,this.offset,t,e);this.offset+=c},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=_(this.data,this.offset,t);this.offset+=c;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;M(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=h},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=L(this.data,this.offset,t);this.offset+=h;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;M(this.data,this.offset,t,e);this.offset+=h},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=L(this.data,this.offset,t);this.offset+=h;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;O(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=g},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=A(this.data,this.offset,t);this.offset+=g;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;O(this.data,this.offset,t,e);this.offset+=g},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=A(this.data,this.offset,t);this.offset+=g;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;E(this.data,this.offset,t,e,23,4);this.offset+=g},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=U(this.data,this.offset,t,23,4);this.offset+=g;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var n=[];while(this.offset<e){n.push(String.fromCharCode(this.getUint8()))}return n.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var n=this.data;n.splice.apply(n,[e,t.length].concat(i(t)));this.data=n;this.offset=e+t.length}};Object.defineProperties(R.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var B=224;var D=31;var V=function(t){if(t.length===0){throw new Error("Invalid buffer size")}var e={shortCode:t[0]&B,extraCode:t[0]&D};if(e.shortCode!==0){return{headerSize:1,commandId:t[0]&~e.extraCode,commandSize:e.extraCode}}if(e.extraCode===D){if(t.length<3){throw new Error("Invalid buffer size")}return{headerSize:3,commandId:t[1]<<8|D,commandSize:t[2]}}if(t.length<2){throw new Error("Invalid buffer size")}return{headerSize:2,commandId:e.extraCode,commandSize:t[1]}};var x=2;var P=3;var H=4;var F=5;var W=6;var z=7;var k=9;var G=11;var Y=12;var j=20;var q=21;var Q=22;var X=23;var K=24;var J=25;var Z=26;var $=27;var tt=30;var et=32;var nt=64;var rt=96;var at=543;var it=1311;var st=1823;var ot=2591;var ut=2847;var ft=3103;var vt=3359;var ct=3871;var ht=5151;var gt=10783;var lt=11039;var dt=11295;var pt=12319;var Ut=12575;var Et=12831;var mt=13087;var yt=13343;var wt=Object.freeze({__proto__:null,correctTime2000:Y,current:z,currentMc:K,dataSegment:tt,day:et,dayMc:Q,exAbsCurrentMc:ct,exAbsDayMc:ut,exAbsHourMc:ot,getArchiveDays:W,getArchiveDaysMc:$,getArchiveEvents:G,getArchiveHours:F,getArchiveHoursMc:Z,getArchiveHoursMcEx:pt,getBatteryStatus:it,getChannelsStatus:Et,getChannelsTypes:mt,getExAbsArchiveDaysMc:vt,getExAbsArchiveHoursMc:ft,getLmicInfo:at,getParameter:H,hour:nt,hourMc:X,hourMcEx:Ut,lastEvent:rt,newEvent:q,setParameter:P,setTime2000:x,signalQuality:yt,softRestart:J,status:j,time2000:k,updateRun:dt,usWaterMeterBatteryStatus:ht,usWaterMeterCommand:st,verifyImage:lt,writeImage:gt});var Tt=function(t){var e={};for(var n in t){var r=t[n];e[r]=n}return e};var St=Tt(wt);var Ct=Y;var It=1;var _t=function(t){if(t.length!==It){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new R(t,false);var n={status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var Lt=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=0;for(var r in e){if(r in t&&e[r]){n|=t[r]}}return n};var At=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n={};for(var r in t){n[r]=(e&t[r])!==0}return n};var bt=function(t,e,n){return(1<<e)-1&t>>n-1};var Nt=function(t,e,n,r){var a=(1<<e)-1<<n-1;var i=r;var s=t;s&=~a;i<<=n-1;s|=i;return s};var Mt=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=Object.assign({},f,e),r=n.separator,a=n.prefix;return t.map(function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))}).join(r)};var Ot=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map(function(t){return t.padStart(2,"0")}).join("");if(e.length%2!==0){e="0".concat(e)}var n=e.length/2;var r=new Array(n);for(var a=0;a<n;a++){r[a]=parseInt(e.substring(a*2,a*2+2),16)}return r};var Rt=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var n=Math.pow(10,e);return Math.round(t*n*(1+Number.EPSILON))/n};var Bt=9466848e5;var Dt=1e3;var Vt=function(t){return new Date(Bt+t*Dt)};var xt=function(t){return(t.getTime()-Bt)/Dt};var Pt=1;var Ht=2;var Ft=3;var Wt=4;var zt=5;var kt=6;var Gt=7;var Yt=8;var jt=9;var qt=10;var Qt=11;var Xt=12;var Kt=13;var Jt=14;var Zt=21;var $t=24;var te=1;var ee=4;var ne=5;var re=8;var ae=9;var ie=10;var se=11;var oe=13;var ue=18;var fe=23;var ve=24;var ce=25;var he=26;var ge=28;var le=29;var de=30;var pe=31;var Ue=32;var Ee=33;var me=34;var ye=35;var we=36;var Te=37;var Se=38;var Ce=39;var Ie=40;var _e=41;var Le=42;var Ae=43;var be=44;var Ne=45;var Me=46;var Oe=47;var Re=48;var Be=49;var De=50;var Ve=51;var xe=52;var Pe=53;var He=54;var Fe=55;var We=56;var ze=57;var ke=58;var Ge=59;var Ye=60;var je=61;var qe=Object.freeze({__proto__:null,ABSOLUTE_DATA:fe,ABSOLUTE_DATA_ENABLE:ve,ABSOLUTE_DATA_ENABLE_MULTI_CHANNEL:de,ABSOLUTE_DATA_MULTI_CHANNEL:le,ACTIVATE_MODULE:je,ACTIVATION_METHOD:ae,BATTERY_DEPASSIVATION_CONFIG:Ee,BATTERY_DEPASSIVATION_INFO:ie,BATTERY_MINIMAL_LOAD_TIME:se,CHANNELS_CONFIG:oe,CHANNEL_TYPE:We,DAY_CHECKOUT_HOUR:ee,EVENTS_CONFIG:De,EXTRA_FRAME_INTERVAL:ge,EXTRA_PAYLOAD_ENABLE:ze,GEOLOCATION:he,KEEP_LORA_CONNECTION_ON_REMOVAL:Ge,MQTT_BROKER_ADDRESS:ye,MQTT_DATA_RECEIVE_CONFIG:Se,MQTT_DATA_SEND_CONFIG:Ce,MQTT_SESSION_CONFIG:me,MQTT_SSL_ENABLE:we,MQTT_TOPIC_PREFIX:Te,NBIOT_APN:Pe,NBIOT_BANDS:xe,NBIOT_DEVICE_SOFTWARE_UPDATE:Oe,NBIOT_LED_INDICATION:He,NBIOT_MODULE_FIRMWARE_UPDATE:Re,NBIOT_MODULE_INFO:Ve,NBIOT_NTP_SERVER:Ye,NBIOT_SIM:Fe,NBIOT_SSL_CACERT_SET:Le,NBIOT_SSL_CACERT_WRITE:_e,NBIOT_SSL_CLIENT_CERT_SET:be,NBIOT_SSL_CLIENT_CERT_WRITE:Ae,NBIOT_SSL_CLIENT_KEY_SET:Me,NBIOT_SSL_CLIENT_KEY_WRITE:Ne,NBIOT_SSL_CONFIG:Ie,PRIORITY_DATA_DELIVERY_TYPE:re,PULSE_CHANNELS_SCAN_CONFIG:pe,PULSE_CHANNELS_SET_CONFIG:Ue,REPORTING_DATA_CONFIG:Be,REPORTING_DATA_INTERVAL:te,REPORTING_DATA_TYPE:ne,RX2_CONFIG:ue,SERIAL_NUMBER:ce,TIME_SYNCHRONIZATION_PERIOD_VIA_MAC:ke});var Qe=Tt(qe);var Xe=4294967295;var Ke=0;var Je=1;var Ze=2;var $e=3;var tn=4;var en=Object.freeze({__proto__:null,BINARY_SENSOR:$e,IDLE:Ke,POWER_CHANNEL:Ze,PULSE_SENSOR:Je,TEMPERATURE_SENSOR:tn});var nn=0;var rn=1;var an=2;var sn=3;var on=4;var un=5;var fn=6;var vn=Object.freeze({__proto__:null,SF10B125:an,SF11B125:rn,SF12B125:nn,SF7B125:un,SF7B250:fn,SF8B125:on,SF9B125:sn});var cn=Tt(vn);var hn,gn;var ln=2e3;var dn=4;var pn=5;var Un=1;var En=4095;var mn=128;var yn=7;var wn=600;var Tn=100;var Sn=6;var Cn=8;var In=2+4;var _n=2;var Ln=[Ht,Ft,Pt,Xt,$t];var An=[Yt,zt,jt,Wt];var bn=[Qt];var Nn=[kt,qt];var Mn=[Gt];var On={isBatteryLow:Math.pow(2,0),isMagneticInfluence:Math.pow(2,1),isButtonReleased:Math.pow(2,2),isConnectionLost:Math.pow(2,3)};var Rn={isBatteryLow:Math.pow(2,0),isConnectionLost:Math.pow(2,3),isFirstChannelInactive:Math.pow(2,4),isSecondChannelInactive:Math.pow(2,5)};var Bn={isConnectionLost:Math.pow(2,3)};var Dn={isBatteryLow:Math.pow(2,0),isConnectionLost:Math.pow(2,3),isFirstChannelInactive:Math.pow(2,4),isSecondChannelInactive:Math.pow(2,5),isThirdChannelInactive:Math.pow(2,6),isForthChannelInactive:Math.pow(2,8)};var Vn={isMeterCaseOpen:Math.pow(2,0),isMagneticInfluence:Math.pow(2,1),isParametersSetRemotely:Math.pow(2,2),isParametersSetLocally:Math.pow(2,3),isMeterProgramRestarted:Math.pow(2,4),isLockedOut:Math.pow(2,5),isTimeSet:Math.pow(2,6),isTimeCorrected:Math.pow(2,7),isMeterFailure:Math.pow(2,8),isMeterTerminalBoxOpen:Math.pow(2,9),isModuleCompartmentOpen:Math.pow(2,10),isTariffPlanChanged:Math.pow(2,11),isNewTariffPlanReceived:Math.pow(2,12)};var xn={transportMode:1,frequencyOutput:2,reverseFlow:4,tamperBreak:8,leakage:16,pipeBreak:32,pipeEmpty:64,batteryDischarge:128};hn={},n(n(n(n(n(n(n(n(n(n(hn,te,1+4),ee,1+1),ne,1+1),re,1+1),ae,1+1),ie,1+6),se,1+4),oe,1+1),ue,1+4),fe,1+9),n(n(n(n(n(n(n(n(n(n(hn,ve,1+1),ce,1+6),he,1+10),ge,1+2),le,1+10),de,1+2),pe,1+3),Ue,1+1),Ee,1+4),we,1+1),n(n(n(n(n(n(n(n(n(n(hn,Se,1+3),Ce,1+3),Ie,1+2),Le,1+4),be,1+4),Me,1+4),Be,1+4),De,1+3),He,1+2),Fe,1+3),n(n(n(n(hn,ze,1+1),ke,1+4),Ge,1+1),je,1+1);var Pn={channel1:Math.pow(2,0),channel2:Math.pow(2,1),channel3:Math.pow(2,2),channel4:Math.pow(2,3)};var Hn=function(t){var e=At(Pn,t);return{channel1:e.channel1,channel2:e.channel2,channel3:e.channel3,channel4:e.channel4}};var Fn=function(t){var e=t.channel1,n=t.channel2,r=t.channel3,a=t.channel4;return Lt(Pn,{channel1:e,channel2:n,channel3:r,channel4:a})};var Wn=function(t){return Hn(t.getUint8())};var zn=function(t,e){return t.setUint8(Fn(e))};var kn={128:1,129:5,130:10,131:100,132:1e3,133:1e4,134:1e5};var Gn=Tt(kn);var Yn=function(t){return!!(t&128)};var jn=function(t){return{size:t.getUint16(),position:t.getUint16(),chunk:t.getBytesLeft()}};var qn=function(t,e){if(e.size!==e.chunk.length){throw new Error("ssl chunk size parameter doesn't match actual ssl chunk size")}t.setUint16(e.size);t.setUint16(e.position);t.setBytes(e.chunk)};var Qn=function(t){return{crc32:t.getUint32()}};var Xn=function(t,e){t.setUint32(e.crc32)};var Kn=(gn={},n(n(n(n(n(n(n(n(n(n(gn,te,{get:function(t){return{specialSchedulePeriod:t.getUint8()*wn,firstDaysSpecialSchedule:t.getUint8(),lastDaysSpecialSchedule:t.getUint8(),period:t.getUint8()*wn}},set:function(t,e){t.setUint8(e.specialSchedulePeriod/wn);t.setUint8(e.firstDaysSpecialSchedule);t.setUint8(e.lastDaysSpecialSchedule);t.setUint8(e.period/wn)}}),ee,{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}}),ne,{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}}),re,{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}}),ae,{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}}),ie,{get:function(t){return{loadTime:t.getUint16(),internalResistance:t.getUint16(),lowVoltage:t.getUint16()}},set:function(t,e){t.setUint16(e.loadTime);t.setUint16(e.internalResistance);t.setUint16(e.lowVoltage)}}),se,{get:function(t){return{value:t.getUint32()}},set:function(t,e){t.setUint32(e.value)}}),oe,{get:function(t){return{value:t.getUint8()}},set:function(t,e){if(e.value<0||e.value>18){throw new Error("channels config must be between 0-18")}t.setUint8(e.value)}}),ue,{get:function(t){var e=t.getUint8();var n=cn[e];var r=t.getUint24()*Tn;return{spreadFactor:e,spreadFactorName:n,frequency:r}},set:function(t,e){t.setUint8(e.spreadFactor);t.setUint24(e.frequency/Tn)}}),fe,{get:function(t){return{meterValue:t.getUint32(),pulseCoefficient:t.getPulseCoefficient(),value:t.getUint32()}},set:function(t,e){t.setUint32(e.meterValue);t.setPulseCoefficient(e.pulseCoefficient);t.setUint32(e.value)}}),n(n(n(n(n(n(n(n(n(n(gn,ve,{get:function(t){return{state:t.getUint8()}},set:function(t,e){t.setUint8(e.state)}}),ce,{get:function(t){return{value:Mt(t.getBytes(Sn))}},set:function(t,e){Ot(e.value).forEach(function(e){return t.setUint8(e)})}}),he,{get:function(t){return{latitude:Rt(t.getFloat32()),longitude:Rt(t.getFloat32()),altitude:Rt(t.getUint16())}},set:function(t,e){t.setFloat32(Rt(e.latitude));t.setFloat32(Rt(e.longitude));t.setUint16(Rt(e.altitude))}}),ge,{get:function(t){return{value:t.getUint16()}},set:function(t,e){t.setUint16(e.value)}}),le,{get:function(t){return{channel:t.getChannelValue(),meterValue:t.getUint32(),pulseCoefficient:t.getPulseCoefficient(),value:t.getUint32()}},set:function(t,e){t.setChannelValue(e.channel);t.setUint32(e.meterValue);t.setPulseCoefficient(e.pulseCoefficient);t.setUint32(e.value)}}),de,{get:function(t){return{channel:t.getChannelValue(),state:t.getUint8()}},set:function(t,e){t.setChannelValue(e.channel);t.setUint8(e.state)}}),pe,{get:function(t){return{channelList:t.getChannels(),pullUpTime:t.getUint8(),scanTime:t.getUint8()}},set:function(t,e){if(e.pullUpTime<17){throw new Error("minimal value for pullUpTime - 17")}if(e.scanTime<15){throw new Error("minimal value for scanTime - 15")}t.setChannels(e.channelList.map(function(t){return{index:t}}));t.setUint8(e.pullUpTime);t.setUint8(e.scanTime)}}),Ue,{get:Wn,set:zn}),Ee,{get:function(t){return{resistanceStartThreshold:t.getUint16(),resistanceStopThreshold:t.getUint16()}},set:function(t,e){t.setUint16(e.resistanceStartThreshold);t.setUint16(e.resistanceStopThreshold)}}),me,{get:function(t){return{clientId:t.getString(),username:t.getString(),password:t.getString(),cleanSession:t.getUint8()}},set:function(t,e){t.setString(e.clientId);t.setString(e.username);t.setString(e.password);t.setUint8(e.cleanSession)}}),n(n(n(n(n(n(n(n(n(n(gn,ye,{get:function(t){return{hostName:t.getString(),port:t.getUint16()}},set:function(t,e){t.setString(e.hostName);t.setUint16(e.port)}}),we,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),Te,{get:function(t){return{topicPrefix:t.getString()}},set:function(t,e){t.setString(e.topicPrefix)}}),Se,{get:function(t){return{qos:t.getUint8(),count:t.getUint8(),timeout:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.count);t.setUint8(e.timeout)}}),Ce,{get:function(t){return{qos:t.getUint8(),retain:t.getUint8(),newestSendFirst:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.retain);t.setUint8(e.newestSendFirst)}}),Ie,{get:function(t){return{securityLevel:t.getUint8(),version:t.getUint8()}},set:function(t,e){t.setUint8(e.securityLevel);t.setUint8(e.version)}}),_e,{get:jn,set:qn}),Le,{get:Qn,set:Xn}),Ae,{get:jn,set:qn}),be,{get:Qn,set:Xn}),n(n(n(n(n(n(n(n(n(n(gn,Ne,{get:jn,set:qn}),Me,{get:Qn,set:Xn}),Oe,{get:function(t){return{softwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.softwareImageUrl)}}),Re,{get:function(t){return{moduleFirmwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.moduleFirmwareImageUrl)}}),Be,{get:function(t){return{dataType:t.getUint8(),hour:t.getUint8(),minutes:t.getUint8(),countToSend:t.getUint8()}},set:function(t,e){t.setUint8(e.dataType);t.setUint8(e.hour);t.setUint8(e.minutes);t.setUint8(e.countToSend)}}),De,{get:function(t){return{eventId:t.getUint8(),sendEvent:t.getUint8(),saveEvent:t.getUint8()}},set:function(t,e){t.setUint8(e.eventId);t.setUint8(e.sendEvent);t.setUint8(e.saveEvent)}}),Ve,{get:function(t){return{moduleInfo:t.getString()}},set:function(t,e){t.setString(e.moduleInfo)}}),xe,{get:function(t){var e=t.getUint8();var n=[];for(var r=0;r<e;r++){n.push(t.getUint8())}return{bands:n}},set:function(t,e){t.setUint8(e.bands.length);for(var n of e.bands){t.setUint8(n)}}}),Pe,{get:function(t){return{apn:t.getString()}},set:function(t,e){t.setString(e.apn)}}),He,{get:function(t){return{enableLed:t.getUint8(),enableNbiotNetworkLed:t.getUint8()}},set:function(t,e){t.setUint8(e.enableLed);t.setUint8(e.enableNbiotNetworkLed)}}),n(n(n(n(n(n(n(gn,Fe,{get:function(t){return{enable:t.getUint8(),pin:t.getUint16()}},set:function(t,e){t.setUint8(e.enable);t.setUint16(e.pin)}}),We,{get:function(t){return t.getChannelType()},set:function(t,e){return t.setChannelType(e)}}),ze,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}),ke,{get:function(t){return{period:t.getUint32()}},set:function(t,e){t.setUint32(e.period)}}),Ge,{get:function(t){return{value:t.getUint8()!==0}},set:function(t,e){t.setUint8(e.value?1:0)}}),Ye,{get:function(t){return{server:t.getString(),port:t.getUint16()}},set:function(t,e){t.setString(e.server);t.setUint16(e.port)}}),je,{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}}));function Jn(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;R.call(this,t,e)}Jn.prototype=Object.create(R.prototype);Jn.prototype.constructor=Jn;Jn.getMagneticInfluenceBit=function(t){return!!bt(t,1,Cn)};Jn.setMagneticInfluenceBit=function(t,e){return Nt(t,1,Cn,+e)};Jn.getLegacyHourCounterSize=function(t){return In+t.diff.length*_n};Jn.prototype.getExtendedValue=function(){var t=0;var e=true;var n=0;while(e&&this.offset<=this.data.length){var r=this.getUint8();e=!!(r&mn);t+=(r&127)<<7*n>>>0;++n}return t};Jn.prototype.setExtendedValue=function(t){var e=this;if(t===0){this.setUint8(0);return}var n=[];var r=t;while(r){n.push(mn|r&127);r>>>=7}var a=n.pop();if(a){n.push(a&127)}n.forEach(function(t){return e.setUint8(t)})};Jn.prototype.getExtendedValueSize=function(t){var e=Math.ceil(t/7);var n=t+e;var r=Math.ceil(n/8);return r};Jn.prototype.getTime=function(){return this.getUint32()};Jn.prototype.setTime=function(t){this.setUint32(t)};Jn.prototype.getBatteryVoltage=function(){var t=this.getUint8();var e=this.getUint8();var n=this.getUint8();var r=t<<4;r|=(e&240)>>4;var a=(e&15)<<8|n;if(a===En){a=undefined}if(r===En){r=undefined}return{underLowLoad:r,underHighLoad:a}};Jn.prototype.setBatteryVoltage=function(t){var e=this;var n=t.underLowLoad,r=t.underHighLoad;if(n===undefined){n=En}if(r===undefined){r=En}var a=n>>4&255;var i=(n&15)<<4|r>>8&15;var s=r&255;[a,i,s].forEach(function(t){return e.setUint8(t)})};Jn.prototype.getLegacyCounterValue=function(){return this.getUint24()};Jn.prototype.setLegacyCounterValue=function(t){this.setUint24(t)};Jn.prototype.getLegacyCounter=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getUint8();var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this.getLegacyCounterValue();return{isMagneticInfluence:Jn.getMagneticInfluenceBit(t),value:e&&n===Xe?0:n}};Jn.prototype.setLegacyCounter=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.setUint8(Jn.setMagneticInfluenceBit(e,t.isMagneticInfluence));this.setLegacyCounterValue(n&&t.value===0?Xe:t.value)};Jn.prototype.getChannels=function(){var t=[];var e=true;var n=1;while(e){var r=this.getUint8();var a=r.toString(2).padStart(yn+1,"0").split("").reverse();a.forEach(function(r,a){var i=Number(r);if(a===yn){e=!!i}else{if(i){t.push(n)}++n}})}return t};Jn.prototype.setChannels=function(t){var e=this;if(t.length===0){this.setUint8(0);return}t.sort(function(t,e){return t.index-e.index});var n=Math.max.apply(Math,i(t.map(function(t){var e=t.index;return e})));var r=(n-n%8)/8;var a=new Array(r+1).fill(0);var s=0;a.forEach(function(e,n){var r=n*yn+1;var i=r+yn;while(r<i){var o=t.find(function(t){return t.index===r});if(o!==undefined){s|=1<<(o.index-1)%yn}++r}if(a[n+1]!==undefined){s|=1<<yn}a[n]=s;s=0});a.forEach(function(t){return e.setUint8(t)})};Jn.prototype.getChannelValue=function(){return this.getUint8()+1};Jn.prototype.setChannelValue=function(t){if(t<1){throw new Error("channel must be 1 or greater")}this.setUint8(t-1)};Jn.prototype.getChannelsValuesWithHourDiff=function(){var t=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=this.getDate();var r=this.getHours(),a=r.hour,i=r.hours;var s=this.getChannels();var o=[];n.setUTCHours(a);s.forEach(function(n){var r=[];var a=t.getExtendedValue();for(var s=1;s<i;++s){r.push(t.getExtendedValue())}o.push({value:a===e&&Xe?0:a,diff:r,index:n})});return{startTime2000:xt(n),hours:i,channelList:o}};Jn.prototype.setChannelsValuesWithHourDiff=function(t,e,n){var r=this;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var i=Vt(e);var s=i.getUTCHours();this.setDate(i);this.setHours(s,t);this.setChannels(n);n.forEach(function(t){var e=t.value,n=t.diff;r.setExtendedValue(a&&e===0?Xe:e);n.forEach(function(t){return r.setExtendedValue(t)})})};Jn.prototype.getHours=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getUint8();if(t===0){return{hours:0,hour:0}}var e=((t&224)>>5)+1;var n=t&31;return{hours:e,hour:n}};Jn.prototype.setHours=function(t,e){if(t===0&&e===0){this.setUint8(0);return}this.setUint8((e-1&7)<<5|t&31)};Jn.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();var n=t>>Un;var r=(t&1)<<dn-Un|e>>pn;var a=e&31;return new Date(Date.UTC(n+ln,r-1,a,0,0,0,0))};Jn.prototype.setDate=function(t){var e=this;var n;if(t instanceof Date){n=t}else{n=Vt(t)}var r=n.getUTCFullYear()-ln;var a=n.getUTCMonth()+1;var i=n.getUTCDate();var s=r<<Un|a>>dn-Un;var o=(a&7)<<pn|i;[s,o].forEach(function(t){return e.setUint8(t)})};Jn.prototype.getPulseCoefficient=function(){var t=this.getUint8();if(Yn(t)){var e=kn[t];if(e){return e}throw new Error("pulseCoefficient MSB is set, but value unknown")}return t};Jn.prototype.setPulseCoefficient=function(t){if(t in Gn){var e=Gn[t];if(e){this.setUint8(e)}else{throw new Error("pulseCoefficient MSB is set, but value unknown")}}else{this.setUint8(t)}};Jn.prototype.getChannelsWithAbsoluteValues=function(){var t=this;var e=this.getChannels();var n=[];e.forEach(function(e){n.push({pulseCoefficient:t.getPulseCoefficient(),value:t.getExtendedValue(),index:e})});return n};Jn.prototype.setChannelsWithAbsoluteValues=function(t){var e=this;this.setChannels(t);t.forEach(function(t){var n=t.value,r=t.pulseCoefficient;e.setPulseCoefficient(r);e.setExtendedValue(n)})};Jn.prototype.getChannelsAbsoluteValuesWithHourDiff=function(t){var e=this;var n=this.getChannels();var r=[];n.forEach(function(n){var a=e.getPulseCoefficient();var i=e.getExtendedValue();var s=[];for(var o=1;o<t;++o){s.push(e.getExtendedValue())}r.push({diff:s,value:i,pulseCoefficient:a,index:n})});return r};Jn.prototype.setChannelsAbsoluteValuesWithHourDiff=function(t){var e=this;this.setChannels(t);t.forEach(function(t){var n=t.value,r=t.diff,a=t.pulseCoefficient;e.setPulseCoefficient(a);e.setExtendedValue(n);r.forEach(function(t){return e.setExtendedValue(t)})})};Jn.prototype.getEventStatus=function(t){var e;if(Ln.indexOf(t)!==-1){e=At(On,this.getUint8())}else if(An.indexOf(t)!==-1){e=At(Rn,this.getUint8())}else if(bn.indexOf(t)!==-1){e=At(Bn,this.getUint8())}else if(Nn.indexOf(t)!==-1){e=At(Dn,this.getUint16(true))}else if(Mn.indexOf(t)!==-1){e=At(Vn,this.getUint16(true))}else if(t===Kt){var n=At(xn,this.getUint8());e={event:n,error:this.getUint8()}}else{throw new Error("wrong hardwareType")}return e};Jn.prototype.setEventStatus=function(t,e){if(Ln.indexOf(t)!==-1){this.setUint8(Lt(On,e))}else if(An.indexOf(t)!==-1){this.setUint8(Lt(Rn,e))}else if(bn.indexOf(t)!==-1){this.setUint8(Lt(Bn,e))}else if(Nn.indexOf(t)!==-1){this.setUint16(Lt(Dn,e)|1<<7,true)}else if(Mn.indexOf(t)!==-1){this.setUint16(Lt(Vn,e),true)}else if(t===Kt){var n=e;this.setUint8(Lt(xn,n.event));this.setUint8(n.error)}else{throw new Error("wrong hardwareType")}};Jn.prototype.getParameter=function(){var t=this.getUint8();var e=Qe[t];if(!Kn[t]||!Kn[t].get){throw new Error("parameter ".concat(t," is not supported"))}var n=Kn[t].get(this);return{id:t,name:e,data:n}};Jn.prototype.setParameter=function(t){var e=t.id,n=t.data;if(!Kn[e]||!Kn[e].set){throw new Error("parameter ".concat(e," is not supported"))}this.setUint8(e);Kn[e].set(this,n)};Jn.prototype.getRequestParameter=function(){var t=this.getUint8();var e=Qe[t];var n=null;switch(t){case de:case le:case We:n={channel:this.getChannelValue()};break;case Be:n={dataType:this.getUint8()};break;case De:n={eventId:this.getUint8()};break}return{id:t,name:e,data:n}};Jn.prototype.setRequestParameter=function(t){var e=t.id,n=t.data;var r;this.setUint8(e);switch(e){case le:case de:case We:r=n;this.setChannelValue(r.channel);break;case Be:r=n;this.setUint8(r.dataType);break;case De:r=n;this.setUint8(r.eventId);break}};Jn.prototype.getResponseParameter=function(){var t=this.getUint8();var e=Qe[t];var n;if(!Kn[t]||!Kn[t].get){throw new Error("parameter ".concat(t," is not supported"))}switch(t){case me:case _e:case Ae:case Ne:case Le:case be:case Me:case Oe:case Re:n=null;break;default:n=Kn[t].get(this)}return{id:t,name:e,data:n}};Jn.prototype.setResponseParameter=function(t){var e=t.id,n=t.data;if(!Kn[e]||!Kn[e].set){throw new Error("parameter ".concat(e," is not supported"))}this.setUint8(e);switch(e){case me:case _e:case Ae:case Ne:case Le:case be:case Me:case Oe:case Re:break;default:Kn[e].set(this,n)}};Jn.prototype.getLegacyHourDiff=function(){var t=this.getUint8();var e=this.getUint8();return{isMagneticInfluence:Jn.getMagneticInfluenceBit(t),value:(t&31)<<8|e}};Jn.prototype.setLegacyHourDiff=function(t){var e=this;var n=[t.value>>8,t.value&255];n[0]=Jn.setMagneticInfluenceBit(n[0],t.isMagneticInfluence);n.forEach(function(t){return e.setUint8(t)})};Jn.prototype.getLegacyHourCounterWithDiff=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=this.getDate();var n=this.getUint8();var r=this.getHours(n),a=r.hour;var i=this.getLegacyCounterValue();var s={isMagneticInfluence:Jn.getMagneticInfluenceBit(n),value:t&&i===Xe?0:i};var o=[];while(this.offset<this.data.length){o.push(this.getLegacyHourDiff())}e.setUTCHours(a);return{startTime2000:xt(e),counter:s,diff:o}};Jn.prototype.setLegacyHourCounterWithDiff=function(t){var e=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=Vt(t.startTime2000);var a=r.getUTCHours();var i=t.counter.value;this.setDate(r);this.setHours(a,1);this.seek(this.offset-1);var s=this.getUint8();this.seek(this.offset-1);this.setUint8(Jn.setMagneticInfluenceBit(s,t.counter.isMagneticInfluence));this.setLegacyCounterValue(n&&i===0?Xe:i);t.diff.forEach(function(t){return e.setLegacyHourDiff(t)})};Jn.prototype.getChannelsValuesWithHourDiffExtended=function(){var t=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=this.getDate();var r=this.getUint8();var a=this.getUint8();var i=this.getChannels();var s=[];n.setUTCHours(r);i.forEach(function(n){var r=[];var i=t.getExtendedValue();for(var o=0;o<a;++o){r.push(t.getExtendedValue())}s.push({value:i===e&&Xe?0:i,diff:r,index:n})});return{startTime2000:xt(n),hour:r,hours:a,channelList:s}};Jn.prototype.setChannelsValuesWithHourDiffExtended=function(t){var e=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=Vt(t.startTime2000);this.setDate(r);this.setUint8(t.hour);this.setUint8(t.hours);this.setChannels(t.channelList);t.channelList.forEach(function(t){var r=t.value,a=t.diff;e.setExtendedValue(n&&r===0?Xe:r);a.forEach(function(t){return e.setExtendedValue(t)})})};Jn.prototype.getDataSegment=function(){var t=this.getUint8();var e=this.getUint8();return{segmentationSessionId:t,segmentIndex:bt(e,3,1),segmentsNumber:bt(e,3,5),isLast:Boolean(bt(e,1,8)),data:this.getBytesLeft()}};Jn.prototype.setDataSegment=function(t){var e=Nt(0,3,1,t.segmentIndex);e=Nt(e,3,5,t.segmentsNumber);e=Nt(e,1,8,+t.isLast);this.setUint8(t.segmentationSessionId);this.setUint8(e);this.setBytes(t.data)};Jn.prototype.getBinarySensor=function(){var t=this.getUint16();return{activeStateTimeMs:t}};Jn.prototype.setBinarySensor=function(t){this.setUint16(t.activeStateTimeMs)};Jn.prototype.getTemperatureSensor=function(){var t=this.getUint16();var e=this.getUint8();var n=this.getInt8();var r=this.getInt8();return{measurementPeriod:t,hysteresisSec:e,highTemperatureThreshold:n,lowTemperatureThreshold:r}};Jn.prototype.setTemperatureSensor=function(t){this.setInt16(t.measurementPeriod);this.setInt8(t.hysteresisSec);this.setInt8(t.highTemperatureThreshold);this.setInt8(t.lowTemperatureThreshold)};Jn.prototype.getChannelType=function(){var t=this.getChannelValue();var e=this.getUint8();var n={};switch(e){case $e:n=this.getBinarySensor();break;case tn:n=this.getTemperatureSensor();break}return{channel:t,type:e,parameters:n}};Jn.prototype.setChannelType=function(t){var e=t.type,n=t.channel,r=t.parameters;this.setChannelValue(n);this.setUint8(e);switch(e){case $e:this.setBinarySensor(r);break;case tn:this.setTemperatureSensor(r);break}};var Zn=z;var $n=4;var tr=function(t){if(t.length>$n){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);return e.getLegacyCounter()};var er=K;var nr=37;var rr=function(t){if(t.length>nr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e={channelList:[]};var n=new Jn(t);var r=n.getChannels();e.channelList=r.map(function(t){return{value:n.getExtendedValue(),index:t}});return e};var ar=2;var ir=3;var sr=4;var or=5;var ur=6;var fr=7;var vr=9;var cr=11;var hr=12;var gr=20;var lr=24;var dr=25;var pr=26;var Ur=27;var Er=30;var mr=543;var yr=1311;var wr=1823;var Tr=3103;var Sr=3359;var Cr=3871;var Ir=10783;var _r=11039;var Lr=11295;var Ar=12319;var br=12831;var Nr=13087;var Mr=13343;var Or=Object.freeze({__proto__:null,correctTime2000:hr,dataSegment:Er,getArchiveDays:ur,getArchiveDaysMc:Ur,getArchiveEvents:cr,getArchiveHours:or,getArchiveHoursMc:pr,getArchiveHoursMcEx:Ar,getBatteryStatus:yr,getChannelsStatus:br,getChannelsTypes:Nr,getCurrent:fr,getCurrentMc:lr,getExAbsArchiveDaysMc:Sr,getExAbsArchiveHoursMc:Tr,getExAbsCurrentMc:Cr,getLmicInfo:mr,getParameter:sr,getSignalQuality:Mr,getStatus:gr,getTime2000:vr,setParameter:ir,setTime2000:ar,softRestart:dr,updateRun:Lr,usWaterMeterCommand:wr,verifyImage:_r,writeImage:Ir});Tt(Or);var Rr=Er;var Br=function(t){var e=new Jn(t);return e.getDataSegment()};var Dr=et;var Vr=function(t){var e=new Jn(t);var n=e.getDate();var r=e.getUint8();var a=e.getHours(r),i=a.hour;var s=Jn.getMagneticInfluenceBit(r);var o=e.getLegacyCounterValue();n.setUTCHours(i);return{value:o,isMagneticInfluence:s,startTime2000:xt(n)}};var xr=Q;var Pr=32;var Hr=function(t){if(t.length>Pr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);var n=e.getDate();var r=e.getChannels();var a=r.map(function(t){return{value:e.getExtendedValue(),index:t}});return{startTime2000:xt(n),channelList:a}};var Fr=ct;var Wr=function(t){var e=new Jn(t);return{channelList:e.getChannelsWithAbsoluteValues()}};var zr=ut;var kr=89;var Gr=function(t){if(t.length>kr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);var n=e.getDate();var r=e.getChannelsWithAbsoluteValues();return{startTime2000:xt(n),channelList:r}};var Yr=ot;var jr=168;var qr=function(t){if(t.length>jr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);var n=e.getDate();var r=e.getHours(),a=r.hour,i=r.hours;var s=e.getChannelsAbsoluteValuesWithHourDiff(i);n.setUTCHours(a);return{startTime2000:xt(n),hours:i,channelList:s}};var Qr=W;var Xr=function(t){var e=new Jn(t);var n=e.getDate();var r=[];while(e.offset<e.data.length){r.push(e.getLegacyCounter(undefined,true))}return{startTime2000:xt(n),dayList:r}};var Kr=$;var Jr=function(t){var e=new Jn(t);var n=e.getDate();var r=e.getChannels();var a=e.getUint8();var i=[];r.forEach(function(t){var n=[];i.push({dayList:n,index:t});for(var r=0;r<a;++r){var s=e.getExtendedValue();n.push(s===Xe?0:s)}});return{startTime2000:xt(n),days:a,channelList:i}};var Zr=1;var $r=2;var ta=3;var ea=4;var na=5;var ra=6;var aa=7;var ia=8;var sa=9;var oa=10;var ua=11;var fa=12;var va=13;var ca=14;var ha=15;var ga=16;var la=17;var da=18;var pa=19;var Ua=20;var Ea=21;var ma=22;var ya=23;var wa=24;var Ta=25;var Sa=26;var Ca=Object.freeze({__proto__:null,ACTIVATE:ta,ACTIVATE_MTX:ua,BATTERY_ALARM:na,BINARY_SENSOR_OFF:ya,BINARY_SENSOR_ON:ma,CAN_OFF:ra,CONNECT:fa,COUNTER_OVER:sa,DEACTIVATE:ea,DEPASS_DONE:ca,DISCONNECT:va,INSERT:aa,JOIN_ACCEPT:da,MAGNET_OFF:$r,MAGNET_ON:Zr,MTX:la,OPTOFLASH:ga,OPTOLOW:ha,OPTOSENSOR_ERROR:Ea,REMOVE:ia,SET_TIME:oa,TEMPERATURE_SENSOR_HIGH_TEMPERATURE:Sa,TEMPERATURE_SENSOR_HYSTERESIS:wa,TEMPERATURE_SENSOR_LOW_TEMPERATURE:Ta,WATER_EVENT:pa,WATER_NO_RESPONSE:Ua});var Ia=Tt(Ca);var _a=G;var La=function(t){var e=t.getTime();var n=t.getUint8();var r=t.getUint8();return{time2000:e,id:n,name:Ia[n],sequenceNumber:r}};var Aa=function(t){var e=new Jn(t);var n=[];while(e.bytesLeft>0){n.push(La(e))}return{eventList:n}};var ba=F;var Na=function(t){var e=new Jn(t);return e.getLegacyHourCounterWithDiff(true)};var Ma=Z;var Oa=164;var Ra=function(t){if(t.length>Oa){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);return e.getChannelsValuesWithHourDiff(true)};var Ba=pt;var Da=255;var Va=function(t){if(t.length>Da){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);return e.getChannelsValuesWithHourDiffExtended(true)};var xa=it;var Pa=function(t){var e=new Jn(t);return{voltageUnderLowLoad:e.getUint16(),voltageUnderHighLoad:e.getUint16(),internalResistance:e.getUint16(),temperature:e.getUint8(),remainingCapacity:e.getUint8(),isLastDayOverconsumption:e.getUint8()===1,averageDailyOverconsumptionCounter:e.getUint16()}};var Ha=Tt(en);var Fa=Et;var Wa=function(t){return{state:t.getUint8()!==0}};var za=function(t){return{temperature:t.getInt8(),time2000:t.getTime()}};var ka=function(t){var e=new Jn(t);var n=[];while(e.bytesLeft!==0){var r=e.getUint8();var a={type:r,typeName:Ha[r],channel:e.getChannelValue()};switch(a.type){case $e:a.status=Wa(e);break;case tn:a.status=za(e);break}n.push(a)}return n};var Ga=mt;var Ya=function(t){return{channels:t.map(function(t){return{type:t,typeName:Ha[t]}})}};var ja=vt;var qa=function(t){var e=new Jn(t);var n=e.getDate();var r=e.getChannels();var a=e.getUint8();var i=[];r.forEach(function(t){var n=[];var r=e.getPulseCoefficient();i.push({pulseCoefficient:r,dayList:n,index:t});for(var s=0;s<a;++s){var o=e.getExtendedValue();n.push(o===Xe?0:o)}});return{channelList:i,days:a,startTime2000:xt(n)}};var Qa=ft;var Xa=function(t){var e=new Jn(t);return e.getChannelsValuesWithHourDiff(true)};var Ka=at;var Ja=2;var Za={isMulticastSupported:1<<0,isFragmentedDataSupported:1<<1};var $a=function(t){if(t.length!==Ja){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new R(t);var n=At(Za,e.getUint8());var r=e.getUint8();if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return{capabilities:n,version:r}};var ti=H;var ei=function(t){var e=new Jn(t);return e.getResponseParameter()};var ni=yt;var ri=6;var ai=function(t){if(t.length!==ri){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new R(t,false);var n={rssi:e.getInt8(),rsrp:e.getInt8(),rsrq:e.getInt8(),sinr:e.getInt8(),txPower:e.getInt8(),ecl:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var ii=nt;var si=function(t){var e=new Jn(t);return e.getLegacyHourCounterWithDiff()};var oi=X;var ui=164;var fi=function(t){if(t.length>ui){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);return e.getChannelsValuesWithHourDiff()};var vi=Ut;var ci=255;var hi=function(t){if(t.length>ci){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);return e.getChannelsValuesWithHourDiffExtended()};var gi=rt;var li=function(t,e){if(!e.hardwareType){throw new Error("hardwareType in config is mandatory")}var n=new Jn(t);var r=n.getUint8();var a=n.getEventStatus(e.hardwareType);return{sequenceNumber:r,status:a}};var di=q;var pi=14;var Ui=8;var Ei=function(t){return t.getUint16()};var mi=function(t){return Mt(t.getBytes(Ui))};var yi=function(t){if(t.length>pi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);var n=e.getUint8();var r=Ia[n];var a=e.getUint8();var i;switch(n){case Zr:case $r:case ta:case ea:case ra:case aa:case ia:case sa:case ha:case ga:case da:case ca:case Ua:case Ea:i={time2000:e.getTime()};break;case na:i={voltage:Ei(e)};break;case ua:i={time2000:e.getTime(),deviceId:mi(e)};break;case fa:case va:i={channel:e.getUint8()+1,value:e.getExtendedValue()};break;case la:i={status:e.getEventStatus(Gt)};break;case ma:case ya:i={time2000:e.getTime(),channel:e.getChannelValue()};break;case wa:case Ta:case Sa:i={time2000:e.getTime(),channel:e.getChannelValue(),temperature:e.getInt8()};break;case pa:i={time2000:e.getTime(),status:e.getEventStatus(Kt)};break;default:throw new Error("Event ".concat(n," is not supported"))}return{id:n,name:r,sequenceNumber:a,data:i}};var wi=P;var Ti=2;var Si=function(t){if(t.length!==Ti){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);var n={id:e.getUint8(),status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var Ci=x;var Ii=1;var _i=function(t){if(t.length!==Ii){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new R(t,false);var n={status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var Li=J;var Ai=0;var bi=function(t){if(t.length!==Ai){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ni=j;var Mi=65535;var Oi=255;var Ri=function(t){var e=new Jn(t);var n={type:e.getUint8(),version:e.getUint8()};var r={type:e.getUint8(),version:e.getUint8()};var a;switch(r.type){case Pt:case Ht:case Ft:case Wt:case zt:case kt:case Yt:case jt:case qt:case Xt:case $t:case Kt:{var i={batteryVoltage:e.getBatteryVoltage(),batteryInternalResistance:e.getUint16(),temperature:e.getUint8(),remainingBatteryCapacity:e.getUint8(),lastEventSequenceNumber:e.getUint8()};if(i.batteryInternalResistance===Mi){i.batteryInternalResistance=undefined}if(i.remainingBatteryCapacity===Oi){i.remainingBatteryCapacity=undefined}else if(i.remainingBatteryCapacity!==undefined){i.remainingBatteryCapacity=Rt(i.remainingBatteryCapacity*100/(Oi-1),1)}if(!e.isEmpty){i.downlinkQuality=e.getUint8()}a=i}break;case Gt:case Jt:case Zt:a={time2000:e.getUint32(),resetReason:e.getUint8(),rssiLastDownlinkFrame:e.getUint8(),snrLastDownlinkFrame:e.getUint8(),downlinkRequestsNumber:e.getUint8(),downlinkFragmentsNumber:e.getUint8(),uplinkResponsesNumber:e.getUint8(),uplinkFragmentsNumber:e.getUint8(),signalMarginToGateway:e.getUint8(),signalMarginFromGateway:e.getUint8(),detectedGatewaysNumber:e.getUint8(),gatewayDownlinkErrorRate:e.getUint8(),lastEventSequenceNumber:e.getUint8()};break;case Qt:default:throw new Error("".concat(Ni,": hardware type ").concat(r.type," is not supported"))}return{software:n,hardware:r,data:a}};var Bi=k;var Di=5;var Vi=function(t){if(t.length!==Di){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);var n={sequenceNumber:e.getUint8(),time2000:e.getTime()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var xi=dt;var Pi=0;var Hi=function(t){if(t.length!==Pi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Fi=ht;var Wi=function(t){var e=new Jn(t);return{voltage:e.getBatteryVoltage(),internalResistance:e.getUint16(),lastDepassivationTime:e.getUint16()}};var zi=st;var ki=function(t){var e=new Jn(t);var n=e.getUint8();return{length:n,data:t.slice(1)}};var Gi=lt;var Yi=1;var ji=function(t){if(t.length!==Yi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Jn(t);return{status:e.getUint8()}};var qi=gt;var Qi=function(t){var e=new Jn(t);return{offset:e.getUint32(),status:e.getUint8()}};var Xi=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var n=e;t.forEach(function(t){n^=t});return n};var Ki=3;var Ji=function(t,e){return function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var r=arguments.length>1?arguments[1]:undefined;var a=[];var s={commands:a,bytes:n,lrc:{received:undefined,calculated:0}};var o=0;var u;var f;if(!n.length){return s}do{var v=V(n.slice(o,o+Ki));var c=n.slice(o,o+v.headerSize);var h=n.slice(o+v.headerSize,o+v.headerSize+v.commandSize);var g={id:v.commandId,name:e[v.commandId],headerSize:v.headerSize,bytes:[].concat(i(c),i(h))};o=o+v.headerSize+v.commandSize;if(r){g.config=r}try{if(!t[v.commandId]){throw new Error("Unsupported command id: ".concat(v.commandId,"!"))}g.parameters=t[v.commandId](h,r);a.push(g)}catch(t){a.push({command:g,error:t.message})}}while(o<n.length-1);if(n.length-o===1){u=n[n.length-1];f=Xi(n.slice(0,-1))}else{f=Xi(n)}s.lrc.calculated=f;s.lrc.received=u;if(u===f){return s}return{message:s,error:"Mismatch LRC."}}};var Zi={};var $i=St;var ts=Ji(Zi,$i);Zi[Ct]=_t;Zi[Zn]=tr;Zi[er]=rr;Zi[Rr]=Br;Zi[Dr]=Vr;Zi[xr]=Hr;Zi[Fr]=Wr;Zi[zr]=Gr;Zi[Yr]=qr;Zi[Qr]=Xr;Zi[Kr]=Jr;Zi[_a]=Aa;Zi[ba]=Na;Zi[Ma]=Ra;Zi[Ba]=Va;Zi[xa]=Pa;Zi[Fa]=ka;Zi[Ga]=Ya;Zi[ja]=qa;Zi[Qa]=Xa;Zi[Ka]=$a;Zi[ti]=ei;Zi[ii]=si;Zi[oi]=fi;Zi[vi]=hi;Zi[gi]=li;Zi[di]=yi;Zi[wi]=Si;Zi[Ci]=_i;Zi[ni]=ai;Zi[Li]=bi;Zi[Ni]=Ri;Zi[Bi]=Vi;Zi[xi]=Hi;Zi[Fi]=Wi;Zi[zi]=ki;Zi[Gi]=ji;Zi[qi]=Qi;fromBytes=ts})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var message = fromBytes(payload, config);

// there may be a message.error (e.g. mismatched LRC)
// in that case message.message will contain everything parsed successfully
// it should be used with caution

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
