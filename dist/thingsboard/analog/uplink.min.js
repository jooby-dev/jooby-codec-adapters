// these options can be edited
// available hardware types can be found here:
// https://github.com/jooby-dev/jooby-docs/blob/main/docs/analog/basics.md#hardware-types
var config = {
    hardwareType: 0
};


//#region [autogenerated jooby-codec bundle]
var fromBytes;(function(){"use strict";function t(t){return e(t)||n(t)||r(t)||i()}function e(t){if(Array.isArray(t))return a(t)}function n(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r(t,e){if(!t)return;if(typeof t==="string")return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}function a(t,e){if(e==null||e>t.length)e=t.length;for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s={separator:" ",prefix:""};var o=1;var u=2;var f=3;var c=4;var v=Math.log,h=Math.pow,l=Math.LN2;var g=function(t,e,n,r,a){var i,s,o=a*8-r-1,u=(1<<o)-1,f=u>>1,c=-7,v=n?a-1:0,l=n?-1:1,g=t[e+v];v+=l;i=g&(1<<-c)-1;g>>=-c;c+=o;for(;c>0;i=i*256+t[e+v],v+=l,c-=8);s=i&(1<<-c)-1;i>>=-c;c+=r;for(;c>0;s=s*256+t[e+v],v+=l,c-=8);if(i===0){i=1-f}else if(i===u){return s?NaN:g?-Infinity:Infinity}else{s=s+h(2,r);i=i-f}return(g?-1:1)*s*h(2,i-r)};var d=function(t,e,n,r,a,i){var s,o,u,f=i*8-a-1,c=(1<<f)-1,g=c>>1,d=a===23?h(2,-24)-h(2,-77):0,p=r?0:i-1,U=r?1:-1,w=n<0||n===0&&1/n<0?1:0;n<0&&(n=-n);if(n!==n||n===Infinity){o=n!==n?1:0;s=c}else{s=v(n)/l|0;if(n*(u=h(2,-s))<1){s--;u*=2}if(s+g>=1){n+=d/u}else{n+=d*h(2,1-g)}if(n*u>=2){s++;u/=2}if(s+g>=c){o=0;s=c}else if(s+g>=1){o=(n*u-1)*h(2,a);s=s+g}else{o=n*h(2,g-1)*h(2,a);s=0}}for(;a>=8;t[e+p]=o&255,p+=U,o/=256,a-=8);s=s<<a|o;f+=a;for(;f>0;t[e+p]=s&255,p+=U,s/=256,f-=8);t[e+p-U]|=w*128};var p=[1,0];var U=[2,1,0];var w=[3,2,1,0];var m=[0,1];var y=[0,1,2];var E=[0,1,2,3];var C=function(t,e){return t[e]};var b=function(t,e,n){var r=n?m:p;var a=t[e+r[0]];var i=t[e+r[1]]<<8;return a|i};var L=function(t,e,n){var r=n?y:U;var a=t[e+r[0]];var i=t[e+r[1]]<<8;var s=t[e+r[2]]<<16;return a|i|s};var M=function(t,e,n){var r=n?E:w;var a=t[e+r[3]]*16777216;var i=t[e+r[2]]*65536;var s=t[e+r[1]]*256;var o=t[e+r[0]];return a+i+s+o};var x=function(t,e,n){t[e]=n&255};var S=function(t,e,n,r){var a=r?m:p;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255};var T=function(t,e,n,r){var a=r?y:U;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255};var I=function(t,e,n,r){var a=r?E:w;t[e+a[0]]=n&255;t[e+a[1]]=n>>>8&255;t[e+a[2]]=n>>>16&255;t[e+a[3]]=n>>>24&255};function V(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var n=new Array(t).fill(0);this.data=n}else{this.data=t}this.offset=0;this.isLittleEndian=e}V.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){x(this.data,this.offset,t<0?t|256:t);this.offset+=o},getInt8:function(){var t=C(this.data,this.offset);this.offset+=o;return t&128?t^-256:t},setUint8:function(t){x(this.data,this.offset,t);this.offset+=o},getUint8:function(){var t=C(this.data,this.offset);this.offset+=o;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;S(this.data,this.offset,t<0?t|65536:t,e);this.offset+=u},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=b(this.data,this.offset,t);this.offset+=u;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;S(this.data,this.offset,t,e);this.offset+=u},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=b(this.data,this.offset,t);this.offset+=u;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;T(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=f},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=L(this.data,this.offset,t);this.offset+=f;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;T(this.data,this.offset,t,e);this.offset+=f},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=L(this.data,this.offset,t);this.offset+=f;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;I(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=c},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=M(this.data,this.offset,t);this.offset+=c;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;I(this.data,this.offset,t,e);this.offset+=c},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=M(this.data,this.offset,t);this.offset+=c;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;d(this.data,this.offset,t,e,23,4);this.offset+=c},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=g(this.data,this.offset,t,23,4);this.offset+=c;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var n=[];while(this.offset<e){n.push(String.fromCharCode(this.getUint8()))}return n.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[n,e.length].concat(t(e)));this.data=r;this.offset=n+e.length}};Object.defineProperties(V.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var D=224;var B=31;var H=function(t){if(t.length===0){throw new Error("Invalid buffer size")}var e={shortCode:t[0]&D,extraCode:t[0]&B};if(e.shortCode!==0){return{headerSize:1,commandId:t[0]&~e.extraCode,commandSize:e.extraCode}}if(e.extraCode===B){if(t.length<3){throw new Error("Invalid buffer size")}return{headerSize:3,commandId:t[1]<<8|B,commandSize:t[2]}}if(t.length<2){throw new Error("Invalid buffer size")}return{headerSize:2,commandId:e.extraCode,commandSize:t[1]}};var z=12;var k="correctTime2000";var A=1;var W=function(t){if(t.length!==A){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new V(t,false);var n={status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var P=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=0;for(var r in e){if(r in t&&e[r]){n|=t[r]}}return n};var F=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n={};for(var r in t){n[r]=(e&t[r])!==0}return n};var O=function(t,e,n){return(1<<e)-1&t>>n-1};var R=function(t,e,n,r){var a=(1<<e)-1<<n-1;var i=r;var s=t;s&=~a;i<<=n-1;s|=i;return s};var N=9466848e5;var q=1e3;var j=function(t){return new Date(N+t*q)};var G=function(t){return(t.getTime()-N)/q};var Y=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=Object.assign({},s,e),r=n.separator,a=n.prefix;return t.map((function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))})).join(r)};var $=function(t){var e=t.replace(/\s+|0x/g,"");if(e.length%2!==0){e="0".concat(e)}var n=e.length/2;var r=new Array(n);for(var a=0;a<n;a++){r[a]=parseInt(e.substring(a*2,a*2+2),16)}return r};var J=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var n=Math.pow(10,e);return Math.round(t*n*(1+Number.EPSILON))/n};var K=1;var Q=2;var X=3;var Z=4;var _=5;var tt=6;var et=7;var nt=8;var rt=9;var at=10;var it=11;var st=12;var ot=24;var ut=1;var ft=4;var ct=5;var vt=8;var ht=9;var lt=10;var gt=11;var dt=13;var pt=18;var Ut=23;var wt=24;var mt=25;var yt=26;var Et=28;var Ct=29;var bt=30;var Lt=31;var Mt=32;var xt=33;var St=34;var Tt=35;var It=36;var Vt=37;var Dt=38;var Bt=39;var Ht=40;var zt=41;var kt=42;var At=43;var Wt=44;var Pt=45;var Ft=46;var Ot=47;var Rt=48;var Nt=49;var qt=50;var jt=function(t){var e={};for(var n in t){var r=t[n];e[r]=n}return e};var Gt=2e3;var Yt=4;var $t=5;var Jt=1;var Kt=4095;var Qt=128;var Xt=7;var Zt=600;var _t=3;var te=100;var ee=6;var ne=8;var re=2+4;var ae=2;var ie=[Q,X,K,st];var se=[nt,_,rt,Z];var oe=[it];var ue=[tt,at];var fe=[et];var ce={isBatteryLow:Math.pow(2,0),isMagneticInfluence:Math.pow(2,1),isButtonReleased:Math.pow(2,2),isConnectionLost:Math.pow(2,3)};var ve={isBatteryLow:Math.pow(2,0),isConnectionLost:Math.pow(2,3),isFirstChannelInactive:Math.pow(2,4),isSecondChannelInactive:Math.pow(2,5)};var he={isConnectionLost:Math.pow(2,3)};var le={isBatteryLow:Math.pow(2,0),isConnectionLost:Math.pow(2,3),isFirstChannelInactive:Math.pow(2,4),isSecondChannelInactive:Math.pow(2,5),isThirdChannelInactive:Math.pow(2,6),isForthChannelInactive:Math.pow(2,7)};var ge={isMeterCaseOpen:Math.pow(2,0),isMagneticInfluence:Math.pow(2,1),isParametersSetRemotely:Math.pow(2,2),isParametersSetLocally:Math.pow(2,3),isMeterProgramRestarted:Math.pow(2,4),isLockedOut:Math.pow(2,5),isTimeSet:Math.pow(2,6),isTimeCorrected:Math.pow(2,7),isMeterFailure:Math.pow(2,8),isMeterTerminalBoxOpen:Math.pow(2,9),isModuleCompartmentOpen:Math.pow(2,10),isTariffPlanChanged:Math.pow(2,11),isNewTariffPlanReceived:Math.pow(2,12)};var de={channel1:Math.pow(2,0),channel2:Math.pow(2,1),channel3:Math.pow(2,2),channel4:Math.pow(2,3)};var pe={128:1,129:5,130:10,131:100,132:1e3,133:1e4,134:1e5};var Ue=jt(pe);var we=function(t){return!!(t&128)};var me=function(t){return t.getUint8()+1};var ye=function(t,e){if(e<1){throw new Error("channel must be 1 or greater")}t.setUint8(e-1)};var Ee=function(t){return{size:t.getUint16(false),position:t.getUint16(false),chunk:t.getBytesLeft()}};var Ce=function(t,e){if(e.size!==e.chunk.length){throw new Error("ssl chunk size parameter doesn't match actual ssl chunk size")}t.setUint16(e.size,false);t.setUint16(e.position,false);t.setBytes(e.chunk)};var be=function(t){return{crc32:t.getUint32(false)}};var Le=function(t,e){t.setUint32(e.crc32,false)};var Me={[ut]:{get:function(t){t.seek(t.offset+_t);return{value:t.getUint8()*Zt}},set:function(t,e){t.seek(t.offset+_t);t.setUint8(e.value/Zt)}},[ft]:{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}},[ct]:{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}},[vt]:{get:function(t){return{value:t.getUint8()}},set:function(t,e){t.setUint8(e.value)}},[ht]:{get:function(t){return{type:t.getUint8()}},set:function(t,e){t.setUint8(e.type)}},[lt]:{get:function(t){return{loadTime:t.getUint16(false),internalResistance:t.getUint16(false),lowVoltage:t.getUint16(false)}},set:function(t,e){t.setUint16(e.loadTime,false);t.setUint16(e.internalResistance,false);t.setUint16(e.lowVoltage,false)}},[gt]:{get:function(t){return{value:t.getUint32(false)}},set:function(t,e){t.setUint32(e.value,false)}},[dt]:{get:function(t){return{value:t.getUint8()}},set:function(t,e){if(e.value<0||e.value>18){throw new Error("channels config must be between 0-18")}t.setUint8(e.value)}},[pt]:{get:function(t){return{spreadFactor:t.getUint8(),frequency:t.getUint24(false)*te}},set:function(t,e){t.setUint8(e.spreadFactor);t.setUint24(e.frequency/te,false)}},[Ut]:{get:function(t){return{meterValue:t.getUint32(false),pulseCoefficient:t.getPulseCoefficient(),value:t.getUint32(false)}},set:function(t,e){t.setUint32(e.meterValue,false);t.setPulseCoefficient(e.pulseCoefficient);t.setUint32(e.value,false)}},[wt]:{get:function(t){return{state:t.getUint8()}},set:function(t,e){t.setUint8(e.state)}},[mt]:{get:function(t){return{value:Y(t.getBytes(ee))}},set:function(t,e){$(e.value).forEach((function(e){return t.setUint8(e)}))}},[yt]:{get:function(t){return{latitude:J(t.getFloat32()),longitude:J(t.getFloat32()),altitude:J(t.getUint16())}},set:function(t,e){t.setFloat32(J(e.latitude));t.setFloat32(J(e.longitude));t.setUint16(J(e.altitude))}},[Et]:{get:function(t){return{value:t.getUint16()}},set:function(t,e){t.setUint16(e.value)}},[Ct]:{get:function(t){return{channel:me(t),meterValue:t.getUint32(false),pulseCoefficient:t.getPulseCoefficient(),value:t.getUint32(false)}},set:function(t,e){ye(t,e.channel);t.setUint32(e.meterValue,false);t.setPulseCoefficient(e.pulseCoefficient);t.setUint32(e.value,false)}},[bt]:{get:function(t){return{channel:me(t),state:t.getUint8()}},set:function(t,e){ye(t,e.channel);t.setUint8(e.state)}},[Lt]:{get:function(t){return{channelList:t.getChannels(),pullUpTime:t.getUint8(),scanTime:t.getUint8()}},set:function(t,e){if(e.pullUpTime<17){throw new Error("minimal value for pullUpTime - 17")}if(e.scanTime<15){throw new Error("minimal value for scanTime - 15")}t.setChannels(e.channelList.map((function(t){return{index:t}})));t.setUint8(e.pullUpTime);t.setUint8(e.scanTime)}},[Mt]:{get:function(t){var e=F(de,t.getUint8());return{channel1:e.channel1,channel2:e.channel2,channel3:e.channel3,channel4:e.channel4}},set:function(t,e){var n=e.channel1,r=e.channel2,a=e.channel3,i=e.channel4;t.setUint8(P(de,{channel1:n,channel2:r,channel3:a,channel4:i}))}},[xt]:{get:function(t){return{resistanceStartThreshold:t.getUint16(false),resistanceStopThreshold:t.getUint16(false)}},set:function(t,e){t.setUint16(e.resistanceStartThreshold,false);t.setUint16(e.resistanceStopThreshold,false)}},[St]:{get:function(t){return{clientId:t.getString(),username:t.getString(),password:t.getString(),cleanSession:t.getUint8()}},set:function(t,e){t.setString(e.clientId);t.setString(e.username);t.setString(e.password);t.setUint8(e.cleanSession)}},[Tt]:{get:function(t){return{hostName:t.getString(),port:t.getUint16(false)}},set:function(t,e){t.setString(e.hostName);t.setUint16(e.port,false)}},[It]:{get:function(t){return{enable:t.getUint8()}},set:function(t,e){t.setUint8(e.enable)}},[Vt]:{get:function(t){return{topicPrefix:t.getString()}},set:function(t,e){t.setString(e.topicPrefix)}},[Dt]:{get:function(t){return{qos:t.getUint8()}},set:function(t,e){t.setUint8(e.qos)}},[Bt]:{get:function(t){return{qos:t.getUint8(),retain:t.getUint8(),newestSendFirst:t.getUint8(),sendCountAttempts:t.getUint8(),sendTimeoutBetweenAttempts:t.getUint8()}},set:function(t,e){t.setUint8(e.qos);t.setUint8(e.retain);t.setUint8(e.newestSendFirst);t.setUint8(e.sendCountAttempts);t.setUint8(e.sendTimeoutBetweenAttempts)}},[Ht]:{get:function(t){return{securityLevel:t.getUint8(),version:t.getUint8()}},set:function(t,e){t.setUint8(e.securityLevel);t.setUint8(e.version)}},[zt]:{get:Ee,set:Ce},[kt]:{get:be,set:Le},[At]:{get:Ee,set:Ce},[Wt]:{get:be,set:Le},[Pt]:{get:Ee,set:Ce},[Ft]:{get:be,set:Le},[Ot]:{get:function(t){return{softwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.softwareImageUrl)}},[Rt]:{get:function(t){return{moduleFirmwareImageUrl:t.getString()}},set:function(t,e){t.setString(e.moduleFirmwareImageUrl)}},[Nt]:{get:function(t){return{dataType:t.getUint8(),hour:t.getUint8(),minutes:t.getUint8(),countToSend:t.getUint8()}},set:function(t,e){t.setUint8(e.dataType);t.setUint8(e.hour);t.setUint8(e.minutes);t.setUint8(e.countToSend)}},[qt]:{get:function(t){return{eventId:t.getUint8(),enableEvent:t.getUint8(),sendEvent:t.getUint8(),saveEvent:t.getUint8()}},set:function(t,e){t.setUint8(e.eventId);t.setUint8(e.enableEvent);t.setUint8(e.sendEvent);t.setUint8(e.saveEvent)}}};function xe(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;V.call(this,t,e)}xe.prototype=Object.create(V.prototype);xe.prototype.constructor=xe;xe.getMagneticInfluenceBit=function(t){return!!O(t,1,ne)};xe.setMagneticInfluenceBit=function(t,e){return R(t,1,ne,+e)};xe.getLegacyHourCounterSize=function(t){return re+t.diff.length*ae};xe.prototype.getExtendedValue=function(){var t=0;var e=true;var n=0;while(e&&this.offset<=this.data.length){var r=this.getUint8();e=!!(r&Qt);t+=(r&127)<<7*n;++n}if(t<0){t=0}return t};xe.prototype.setExtendedValue=function(t){var e=this;if(t===0){this.setUint8(0);return}var n=[];var r=t;while(r){n.push(Qt|r&127);r>>=7}var a=n.pop();if(a){n.push(a&127)}n.forEach((function(t){return e.setUint8(t)}))};xe.prototype.getExtendedValueSize=function(t){var e=Math.ceil(t/7);var n=t+e;var r=Math.ceil(n/8);return r};xe.prototype.getTime=function(){return this.getUint32(false)};xe.prototype.setTime=function(t){this.setUint32(t,false)};xe.prototype.getBatteryVoltage=function(){var t=this.getUint8();var e=this.getUint8();var n=this.getUint8();var r=t<<4;r|=(e&240)>>4;var a=(e&15)<<8|n;if(a===Kt){a=undefined}if(r===Kt){r=undefined}return{underLowLoad:r,underHighLoad:a}};xe.prototype.setBatteryVoltage=function(t){var e=this;var n=t.underLowLoad,r=t.underHighLoad;if(n===undefined){n=Kt}if(r===undefined){r=Kt}var a=n>>4&255;var i=(n&15)<<4|r>>8&15;var s=r&255;[a,i,s].forEach((function(t){return e.setUint8(t)}))};xe.prototype.getLegacyCounterValue=function(){return this.getUint24(false)};xe.prototype.setLegacyCounterValue=function(t){this.setUint24(t,false)};xe.prototype.getLegacyCounter=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getUint8();return{isMagneticInfluence:xe.getMagneticInfluenceBit(t),value:this.getLegacyCounterValue()}};xe.prototype.setLegacyCounter=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.setUint8(xe.setMagneticInfluenceBit(e,t.isMagneticInfluence));this.setLegacyCounterValue(t.value)};xe.prototype.getChannels=function(){var t=[];var e=true;var n=1;while(e){var r=this.getUint8();var a=r.toString(2).padStart(Xt+1,"0").split("").reverse();a.forEach((function(r,a){var i=Number(r);if(a===Xt){e=!!i}else{if(i){t.push(n)}++n}}))}return t};xe.prototype.setChannels=function(e){var n=this;if(e.length===0){this.setUint8(0);return}e.sort((function(t,e){return t.index-e.index}));var r=Math.max.apply(Math,t(e.map((function(t){var e=t.index;return e}))));var a=(r-r%8)/8;var i=new Array(a+1).fill(0);var s=0;i.forEach((function(t,n){var r=n*Xt+1;var a=r+Xt;while(r<a){var o=e.find((function(t){return t.index===r}));if(o!==undefined){s|=1<<(o.index-1)%Xt}++r}if(i[n+1]!==undefined){s|=1<<Xt}i[n]=s;s=0}));i.forEach((function(t){return n.setUint8(t)}))};xe.prototype.getChannelsValuesWithHourDiff=function(){var t=this;var e=this.getDate();var n=this.getHours(),r=n.hour,a=n.hours;var i=this.getChannels();var s=[];e.setUTCHours(r);i.forEach((function(e){var n=[];var r=t.getExtendedValue();for(var i=1;i<a;++i){n.push(t.getExtendedValue())}s.push({value:r,diff:n,index:e})}));return{startTime2000:G(e),hours:a,channelList:s}};xe.prototype.setChannelsValuesWithHourDiff=function(t,e,n){var r=this;var a=j(e);var i=a.getUTCHours();this.setDate(a);this.setHours(i,t);this.setChannels(n);n.forEach((function(t){var e=t.value,n=t.diff;r.setExtendedValue(e);n.forEach((function(t){return r.setExtendedValue(t)}))}))};xe.prototype.getHours=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getUint8();if(t===0){return{hours:0,hour:0}}var e=((t&224)>>5)+1;var n=t&31;return{hours:e,hour:n}};xe.prototype.setHours=function(t,e){if(t===0&&e===0){this.setUint8(0);return}this.setUint8((e-1&7)<<5|t&31)};xe.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();var n=t>>Jt;var r=(t&1)<<Yt-Jt|e>>$t;var a=e&31;return new Date(Date.UTC(n+Gt,r-1,a,0,0,0,0))};xe.prototype.setDate=function(t){var e=this;var n;if(t instanceof Date){n=t}else{n=j(t)}var r=n.getUTCFullYear()-Gt;var a=n.getUTCMonth()+1;var i=n.getUTCDate();var s=r<<Jt|a>>Yt-Jt;var o=(a&7)<<$t|i;[s,o].forEach((function(t){return e.setUint8(t)}))};xe.prototype.getPulseCoefficient=function(){var t=this.getUint8();if(we(t)){var e=pe[t];if(e){return e}throw new Error("pulseCoefficient MSB is set, but value unknown")}return t};xe.prototype.setPulseCoefficient=function(t){if(t in Ue){var e=Ue[t];if(e){this.setUint8(e)}else{throw new Error("pulseCoefficient MSB is set, but value unknown")}}else{this.setUint8(t)}};xe.prototype.getChannelsWithAbsoluteValues=function(){var t=this;var e=this.getChannels();var n=[];e.forEach((function(e){n.push({pulseCoefficient:t.getPulseCoefficient(),value:t.getExtendedValue(),index:e})}));return n};xe.prototype.setChannelsWithAbsoluteValues=function(t){var e=this;this.setChannels(t);t.forEach((function(t){var n=t.value,r=t.pulseCoefficient;e.setPulseCoefficient(r);e.setExtendedValue(n)}))};xe.prototype.getChannelsAbsoluteValuesWithHourDiff=function(t){var e=this;var n=this.getChannels();var r=[];n.forEach((function(n){var a=e.getPulseCoefficient();var i=e.getExtendedValue();var s=[];for(var o=1;o<t;++o){s.push(e.getExtendedValue())}r.push({diff:s,value:i,pulseCoefficient:a,index:n})}));return r};xe.prototype.setChannelsAbsoluteValuesWithHourDiff=function(t){var e=this;this.setChannels(t);t.forEach((function(t){var n=t.value,r=t.diff,a=t.pulseCoefficient;e.setPulseCoefficient(a);e.setExtendedValue(n);r.forEach((function(t){return e.setExtendedValue(t)}))}))};xe.prototype.getEventStatus=function(t){var e;if(ie.indexOf(t)!==-1){e=F(ce,this.getUint8())}else if(se.indexOf(t)!==-1){e=F(ve,this.getUint8())}else if(oe.indexOf(t)!==-1){e=F(he,this.getUint8())}else if(ue.indexOf(t)!==-1){e=F(le,this.getExtendedValue())}else if(fe.indexOf(t)!==-1){e=F(ge,this.getUint16())}else{throw new Error("wrong hardwareType")}return e};xe.prototype.setEventStatus=function(t,e){if(ie.indexOf(t)!==-1){this.setUint8(P(ce,e))}else if(se.indexOf(t)!==-1){this.setUint8(P(ve,e))}else if(oe.indexOf(t)!==-1){this.setUint8(P(he,e))}else if(ue.indexOf(t)!==-1){this.setExtendedValue(P(le,e))}else if(fe.indexOf(t)!==-1){this.setUint16(P(ge,e))}else{throw new Error("wrong hardwareType")}};xe.prototype.getParameter=function(){var t=this.getUint8();if(!Me[t]||!Me[t].get){throw new Error("parameter ".concat(t," is not supported"))}var e=Me[t].get(this);return{id:t,data:e}};xe.prototype.setParameter=function(t){var e=t.id,n=t.data;if(!Me[e]||!Me[e].set){throw new Error("parameter ".concat(e," is not supported"))}this.setUint8(e);Me[e].set(this,n)};xe.prototype.getRequestParameter=function(){var t=this.getUint8();var e=null;switch(t){case bt:case Ct:e={channel:me(this)};break;case Nt:e={dataType:this.getUint8()};break;case qt:e={eventId:this.getUint8()};break}return{id:t,data:e}};xe.prototype.setRequestParameter=function(t){var e=t.id,n=t.data;var r;this.setUint8(e);switch(e){case Ct:case bt:r=n;ye(this,r.channel);break;case Nt:r=n;this.setUint8(r.dataType);break;case qt:r=n;this.setUint8(r.eventId);break}};xe.prototype.getResponseParameter=function(){var t=this.getUint8();var e;if(!Me[t]||!Me[t].get){throw new Error("parameter ".concat(t," is not supported"))}switch(t){case St:case zt:case At:case Pt:case kt:case Wt:case Ft:case Ot:case Rt:e=null;break;default:e=Me[t].get(this)}return{id:t,data:e}};xe.prototype.setResponseParameter=function(t){var e=t.id,n=t.data;if(!Me[e]||!Me[e].set){throw new Error("parameter ".concat(e," is not supported"))}this.setUint8(e);switch(e){case St:case zt:case At:case Pt:case kt:case Wt:case Ft:case Ot:case Rt:break;default:Me[e].set(this,n)}};xe.prototype.getLegacyHourDiff=function(){var t=this.getUint8();var e=this.getUint8();return{isMagneticInfluence:xe.getMagneticInfluenceBit(t),value:(t&31)<<8|e}};xe.prototype.setLegacyHourDiff=function(t){var e=this;var n=[t.value>>8,t.value&255];n[0]=xe.setMagneticInfluenceBit(n[0],t.isMagneticInfluence);n.forEach((function(t){return e.setUint8(t)}))};xe.prototype.getLegacyHourCounterWithDiff=function(){var t=this.getDate();var e=this.getUint8();var n=this.getHours(e),r=n.hour;var a={isMagneticInfluence:xe.getMagneticInfluenceBit(e),value:this.getLegacyCounterValue()};var i=[];while(this.offset<this.data.length){i.push(this.getLegacyHourDiff())}t.setUTCHours(r);return{startTime2000:G(t),counter:a,diff:i}};xe.prototype.setLegacyHourCounterWithDiff=function(t){var e=this;var n=j(t.startTime2000);var r=n.getUTCHours();this.setDate(n);this.setHours(r,1);this.seek(this.offset-1);var a=this.getUint8();this.seek(this.offset-1);this.setUint8(xe.setMagneticInfluenceBit(a,t.counter.isMagneticInfluence));this.setLegacyCounterValue(t.counter.value);t.diff.forEach((function(t){return e.setLegacyHourDiff(t)}))};xe.prototype.getChannelsValuesWithHourDiffExtended=function(){var t=this;var e=this.getDate();var n=this.getUint8();var r=this.getUint8();var a=this.getChannels();var i=[];e.setUTCHours(n);a.forEach((function(e){var n=[];var a=t.getExtendedValue();for(var s=1;s<r;++s){n.push(t.getExtendedValue())}i.push({value:a,diff:n,index:e})}));return{startTime2000:G(e),hour:n,hours:r,channelList:i}};xe.prototype.setChannelsValuesWithHourDiffExtended=function(t){var e=this;var n=j(t.startTime2000);this.setDate(n);this.setUint8(t.hour);this.setUint8(t.hours);this.setChannels(t.channelList);t.channelList.forEach((function(t){var n=t.value,r=t.diff;e.setExtendedValue(n);r.forEach((function(t){return e.setExtendedValue(t)}))}))};var Se=7;var Te="current";var Ie=4;var Ve=function(t){if(t.length>Ie){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);return e.getLegacyCounter()};var De=24;var Be="currentMc";var He=37;var ze=function(t){if(t.length>He){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e={channelList:[]};var n=new xe(t);var r=n.getChannels();e.channelList=r.map((function(t){return{value:n.getExtendedValue(),index:t}}));return e};var ke=32;var Ae="day";var We=function(t){var e=new xe(t);var n=e.getDate();var r=e.getUint8();var a=e.getHours(r),i=a.hour;var s=xe.getMagneticInfluenceBit(r);var o=e.getLegacyCounterValue();n.setUTCHours(i);return{value:o,isMagneticInfluence:s,startTime2000:G(n)}};var Pe=22;var Fe="dayMc";var Oe=32;var Re=function(t){if(t.length>Oe){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);var n=e.getDate();var r=e.getChannels();var a=r.map((function(t){return{value:e.getExtendedValue(),index:t}}));return{startTime2000:G(n),channelList:a}};var Ne=2847;var qe="exAbsDayMc";var je=89;var Ge=function(t){if(t.length>je){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);var n=e.getDate();var r=e.getChannelsWithAbsoluteValues();return{startTime2000:G(n),channelList:r}};var Ye=2591;var $e="exAbsHourMc";var Je=168;var Ke=function(t){if(t.length>Je){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);var n=e.getDate();var r=e.getHours(),a=r.hour,i=r.hours;var s=e.getChannelsAbsoluteValuesWithHourDiff(i);n.setUTCHours(a);return{startTime2000:G(n),hours:i,channelList:s}};var Qe=6;var Xe="getArchiveDays";var Ze=function(t){var e=new xe(t);var n=e.getDate();var r=[];while(e.offset<e.data.length){r.push(e.getLegacyCounter())}return{startTime2000:G(n),dayList:r}};var _e=27;var tn="getArchiveDaysMc";var en=function(t){var e=new xe(t);var n=e.getDate();var r=e.getChannels();var a=e.getUint8();var i=[];r.forEach((function(t){var n=[];i.push({dayList:n,index:t});for(var r=0;r<a;++r){n.push(e.getExtendedValue())}}));return{startTime2000:G(n),days:a,channelList:i}};var nn=11;var rn="getArchiveEvents";var an=function(t){return{time2000:t.getTime(),id:t.getUint8(),sequenceNumber:t.getUint8()}};var sn=function(t){var e=new xe(t,false);var n=[];while(e.bytesLeft>0){n.push(an(e))}return{eventList:n}};var on=5;var un="getArchiveHours";var fn=function(t){var e=new xe(t);return e.getLegacyHourCounterWithDiff()};var cn=26;var vn="getArchiveHoursMc";var hn=164;var ln=function(t){if(t.length>hn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);return e.getChannelsValuesWithHourDiff()};var gn=1311;var dn="getBatteryStatus";var pn=function(t){var e=new xe(t);return{voltageUnderLowLoad:e.getUint16(),voltageUnderHighLoad:e.getUint16(),internalResistance:e.getUint16(),temperature:e.getUint8(),remainingCapacity:e.getUint8(),isLastDayOverconsumption:e.getUint8()===1,averageDailyOverconsumptionCounter:e.getUint16()}};var Un=3359;var wn="getExAbsArchiveDaysMc";var mn=function(t){var e=new xe(t);var n=e.getDate();var r=e.getChannels();var a=e.getUint8();var i=[];r.forEach((function(t){var n=[];var r=e.getPulseCoefficient();i.push({pulseCoefficient:r,dayList:n,index:t});for(var s=0;s<a;++s){n.push(e.getExtendedValue())}}));return{channelList:i,days:a,startTime2000:G(n)}};var yn=26;var En="getExAbsArchiveHoursMc";var Cn=function(t){var e=new xe(t);return e.getChannelsValuesWithHourDiff()};var bn=12319;var Ln="getExAbsArchiveHoursMcEx";var Mn=164;var xn=function(t){if(t.length>Mn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);return e.getChannelsValuesWithHourDiffExtended()};var Sn=543;var Tn="getLmicInfo";var In=2;var Vn={isMulticastSupported:1<<0,isFragmentedDataSupported:1<<1};var Dn=function(t){if(t.length!==In){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new V(t);var n=F(Vn,e.getUint8());var r=e.getUint8();if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return{capabilities:n,version:r}};var Bn=4;var Hn="getParameter";var zn=function(t){var e=new xe(t);return e.getResponseParameter()};var kn=64;var An="hour";var Wn=function(t){var e=new xe(t);return e.getLegacyHourCounterWithDiff()};var Pn=23;var Fn="hourMc";var On=164;var Rn=function(t){if(t.length>On){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);return e.getChannelsValuesWithHourDiff()};var Nn=12575;var qn="hourMcEx";var jn=5125;var Gn=function(t){if(t.length>jn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);return e.getChannelsValuesWithHourDiffExtended()};var Yn=96;var $n="lastEvent";var Jn=function(t,e){if(!e.hardwareType){throw new Error("hardwareType in config is mandatory")}var n=new xe(t);var r=n.getUint8();var a=n.getEventStatus(e.hardwareType);return{sequenceNumber:r,status:a}};var Kn=1;var Qn=2;var Xn=3;var Zn=4;var _n=5;var tr=6;var er=7;var nr=8;var rr=9;var ar=11;var ir=12;var sr=13;var or=15;var ur=16;var fr=17;var cr=18;var vr=21;var hr="newEvent";var lr=14;var gr=8;var dr=function(t){return t.getUint16(false)};var pr=function(t){return Y(t.getBytes(gr))};var Ur=function(t){if(t.length>lr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);var n=e.getUint8();var r=e.getUint8();var a;switch(n){case Kn:case Qn:case Xn:case Zn:case tr:case er:case nr:case rr:case or:case ur:case cr:a={time2000:e.getTime()};break;case _n:a={voltage:dr(e)};break;case ar:a={time2000:e.getTime(),deviceId:pr(e)};break;case ir:case sr:a={channel:e.getUint8()+1,value:e.getExtendedValue()};break;case fr:a={status:e.getEventStatus(et)};break;default:throw new Error("Event ".concat(vr," is not supported"))}return{id:n,sequenceNumber:r,data:a}};var wr=3;var mr="setParameter";var yr=2;var Er=function(t){if(t.length!==yr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);var n={id:e.getUint8(),status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var Cr=2;var br="setTime2000";var Lr=1;var Mr=function(t){if(t.length!==Lr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new V(t,false);var n={status:e.getUint8()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var xr=25;var Sr="softRestart";var Tr=0;var Ir=function(t){if(t.length!==Tr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Vr=20;var Dr="status";var Br=65535;var Hr=255;var zr=function(t){var e=new xe(t);var n={type:e.getUint8(),version:e.getUint8()};var r={type:e.getUint8(),version:e.getUint8()};var a;switch(r.type){case K:case Q:case X:case Z:case _:case tt:case nt:case rt:case at:case st:case ot:{var i={batteryVoltage:e.getBatteryVoltage(),batteryInternalResistance:e.getUint16(false),temperature:e.getUint8(),remainingBatteryCapacity:e.getUint8(),lastEventSequenceNumber:e.getUint8()};if(i.batteryInternalResistance===Br){i.batteryInternalResistance=undefined}if(i.remainingBatteryCapacity===Hr){i.remainingBatteryCapacity=undefined}else if(i.remainingBatteryCapacity!==undefined){i.remainingBatteryCapacity=J(i.remainingBatteryCapacity*100/(Hr-1),0)}a=i}break;case et:a={time2000:e.getUint32(),resetReason:e.getUint8(),rssiLastDownlinkFrame:e.getUint8(),snrLastDownlinkFrame:e.getUint8(),downlinkRequestsNumber:e.getUint8(),downlinkFragmentsNumber:e.getUint8(),uplinkResponsesNumber:e.getUint8(),uplinkFragmentsNumber:e.getUint8(),signalMarginToGateway:e.getUint8(),signalMarginFromGateway:e.getUint8(),detectedGatewaysNumber:e.getUint8(),gatewayDownlinkErrorRate:e.getUint8(),lastEventSequenceNumber:e.getUint8()};break;case it:default:throw new Error("".concat(Vr,": hardware type ").concat(r.type," is not supported"))}return{software:n,hardware:r,data:a}};var kr=9;var Ar="time2000";var Wr=5;var Pr=function(t){if(t.length!==Wr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new xe(t);var n={sequenceNumber:e.getUint8(),time2000:e.getTime()};if(!e.isEmpty){throw new Error("BinaryBuffer is not empty.")}return n};var Fr=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var n=e;t.forEach((function(t){n^=t}));return n};var Or=3;var Rr=function(e,n){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1?arguments[1]:undefined;var i=[];var s={commands:i,bytes:r,lrc:{expected:undefined,actual:0}};var o=0;var u;var f;if(!r.length){return s}do{var c=H(r.slice(o,o+Or));var v=r.slice(o,o+c.headerSize);var h=r.slice(o+c.headerSize,o+c.headerSize+c.commandSize);var l={id:c.commandId,name:n[c.commandId],headerSize:c.headerSize,bytes:[].concat(t(v),t(h))};o=o+c.headerSize+c.commandSize;if(a){l.config=a}try{l.parameters=e[c.commandId](h,a);i.push(l)}catch(t){i.push({command:l,error:t.message})}}while(o<r.length-1);if(r.length-o===1){u=r[r.length-1];f=Fr(r.slice(0,-1))}else{f=Fr(r)}s.lrc.actual=f;s.lrc.expected=u;if(u===f){return s}return{message:s,error:"mismatch LRC"}}};var Nr={};var qr={};var jr=Rr(Nr,qr);Nr[z]=W;Nr[Se]=Ve;Nr[De]=ze;Nr[ke]=We;Nr[Pe]=Re;Nr[Ne]=Ge;Nr[Ye]=Ke;Nr[Qe]=Ze;Nr[_e]=en;Nr[nn]=sn;Nr[gn]=pn;Nr[on]=fn;Nr[cn]=ln;Nr[Un]=mn;Nr[yn]=Cn;Nr[bn]=xn;Nr[Sn]=Dn;Nr[Bn]=zn;Nr[kn]=Wn;Nr[Pn]=Rn;Nr[Nn]=Gn;Nr[Yn]=Jn;Nr[vr]=Ur;Nr[wr]=Er;Nr[Cr]=Mr;Nr[xr]=Ir;Nr[Vr]=zr;Nr[kr]=Pr;qr[z]=k;qr[Se]=Te;qr[De]=Be;qr[ke]=Ae;qr[Pe]=Fe;qr[Ne]=qe;qr[Ye]=$e;qr[Qe]=Xe;qr[_e]=tn;qr[nn]=rn;qr[gn]=dn;qr[on]=un;qr[cn]=vn;qr[Un]=wn;qr[yn]=En;qr[bn]=Ln;qr[Sn]=Tn;qr[Bn]=Hn;qr[kn]=An;qr[Pn]=Fn;qr[Nn]=qn;qr[Yn]=$n;qr[vr]=hr;qr[wr]=mr;qr[Cr]=br;qr[xr]=Sr;qr[Vr]=Dr;qr[kr]=Ar;fromBytes=jr})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var message = fromBytes(payload, config);

// there may be a message.error (e.g. mismatched LRC)
// in that case message.message will contain everything parsed successfully
// it should be used with caution

var result = {
    deviceName: 'Some Device Name',
    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    message: message.message || message,
    metadata: metadata
};

return result;
