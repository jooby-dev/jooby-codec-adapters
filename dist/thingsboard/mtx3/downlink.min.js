// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// encoded message should be less than this size
// to be able to send to a device
var MAX_DATA_SEGMENT_SIZE = 50;


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,setDataSegment,getBase64FromBytes;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,E=Array(a);e<a;e++)E[e]=r[e];return E}function a(a){if(Array.isArray(a))return r(a)}function e(r,a,e){return(a=A(a))in r?Object.defineProperty(r,a,{value:e,enumerable:true,configurable:true,writable:true}):r[a]=e,r}function E(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(r){return a(r)||E(r)||n(r)||_()}function v(r,a){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var E=e.call(r,a);if("object"!=typeof E)return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function A(r){var a=v(r,"string");return"symbol"==typeof a?a:a+""}function n(a,e){if(a){if("string"==typeof a)return r(a,e);var E={}.toString.call(a).slice(8,-1);return"Object"===E&&a.constructor&&(E=a.constructor.name),"Map"===E||"Set"===E?Array.from(a):"Arguments"===E||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?r(a,e):void 0}}var T=1;var R=3;var O=4;var i=5;var o=7;var s=8;var P=9;var N=13;var C=15;var D=16;var S=17;var I=18;var f=19;var M=20;var g=21;var u=22;var d=23;var l=24;var L=25;var V=28;var c=30;var h=31;var m=40;var H=41;var p=42;var y=44;var G=45;var X=46;var F=47;var U=49;var Y=50;var W=51;var B=52;var x=53;var K=54;var b=57;var w=58;var Z=59;var Q=60;var j=61;var z=62;var k=65;var $=70;var q=74;var J=75;var rr=79;var ar=80;var er=82;var Er=83;var _r=88;var tr=89;var vr=91;var Ar=92;var nr=93;var Tr=94;var Rr=100;var Or=109;var ir=111;var or=112;var sr=113;var Pr=114;var Nr=116;var Cr=117;var Dr=118;var Sr=122;var Ir=Object.freeze({__proto__:null,activateRatePlan:f,getBv:or,getCorrectTime:z,getCriticalEvent:k,getCurrentStatusMeter:b,getCurrentValues:N,getDateTime:o,getDayDemand:u,getDayDemandExport:rr,getDayMaxDemand:U,getDayMaxDemandExport:_r,getDayMaxDemandPrevious:q,getDayProfile:Z,getDemand:Dr,getDemandParameters:Cr,getDeviceId:i,getDeviceType:O,getDisplayParam:Tr,getEnergy:C,getEnergyDayPrevious:R,getEnergyExport:vr,getEnergyExportDayPrevious:ar,getEventStatus:T,getEvents:W,getEventsCounters:B,getExtendedCurrentValues:w,getExtendedCurrentValues2:G,getHalfHourDemand:g,getHalfHourDemandExport:Er,getHalfHourDemandPrevious:J,getHalfHourEnergies:ir,getMagneticFieldThreshold:Or,getMeterInfo:Sr,getMonthDemand:d,getMonthDemandExport:er,getMonthMaxDemand:Y,getMonthMaxDemandExport:tr,getOperatorParameters:c,getOperatorParametersExtended3:sr,getRatePlanInfo:y,getSaldo:H,getSaldoParameters:X,getSeasonProfile:Q,getSpecialDay:j,getVersion:m,prepareRatePlan:M,resetPowerMaxDay:x,resetPowerMaxMonth:K,runTariffPlan:$,setAccessKey:P,setCorrectDateTime:Ar,setCorrectTime:V,setDateTime:s,setDayProfile:D,setDemandParameters:Nr,setDisplayParam:nr,setOperatorParameters:h,setOperatorParametersExtended3:Pr,setSaldo:p,setSaldoParameters:F,setSeasonProfile:S,setSpecialDay:I,setSpecialOperation:Rr,turnRelayOff:L,turnRelayOn:l});var fr=120;var Mr=121;var gr=254;var ur=255;var dr=Object.freeze({__proto__:null,activateRatePlan:f,errorDataFrameResponse:ur,errorResponse:gr,getBv:or,getCorrectTime:z,getCriticalEvent:k,getCurrentStatusMeter:b,getCurrentValues:N,getDateTime:o,getDayDemand:u,getDayDemandExport:rr,getDayEnergies:fr,getDayMaxDemand:U,getDayMaxDemandExport:_r,getDayMaxDemandPrevious:q,getDayMaxPower:Mr,getDayProfile:Z,getDemand:Dr,getDemandParameters:Cr,getDeviceId:i,getDeviceType:O,getDisplayParam:Tr,getEnergy:C,getEnergyDayPrevious:R,getEnergyExport:vr,getEnergyExportDayPrevious:ar,getEventStatus:T,getEvents:W,getEventsCounters:B,getExtendedCurrentValues:w,getExtendedCurrentValues2:G,getHalfHourDemand:g,getHalfHourDemandExport:Er,getHalfHourDemandPrevious:J,getHalfHourEnergies:ir,getMagneticFieldThreshold:Or,getMeterInfo:Sr,getMonthDemand:d,getMonthDemandExport:er,getMonthMaxDemand:Y,getMonthMaxDemandExport:tr,getOperatorParameters:c,getOperatorParametersExtended3:sr,getRatePlanInfo:y,getSaldo:H,getSaldoParameters:X,getSeasonProfile:Q,getSpecialDay:j,getVersion:m,prepareRatePlan:M,resetPowerMaxDay:x,resetPowerMaxMonth:K,runTariffPlan:$,setAccessKey:P,setCorrectDateTime:Ar,setCorrectTime:V,setDateTime:s,setDayProfile:D,setDemandParameters:Nr,setDisplayParam:nr,setOperatorParameters:h,setOperatorParametersExtended3:Pr,setSaldo:p,setSaldoParameters:F,setSeasonProfile:S,setSpecialDay:I,setSpecialOperation:Rr,turnRelayOff:L,turnRelayOn:l});var lr=function(r){return btoa(r.map(function(r){return String.fromCharCode(r)}).join(""))};var Lr=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(t(a))};var Vr=function(r){var a={};for(var e in r){var E=r[e];a[E]=e}return a};Vr(dr);var cr=0;var hr=128;var mr=129;var Hr=130;var pr=131;var yr=132;var Gr=133;var Xr=134;var Fr=135;var Ur=136;var Yr=137;var Wr=144;var Br=145;var xr=146;var Kr=147;var br=149;var wr=151;var Zr=152;var Qr=153;var jr=154;var zr=155;var kr=156;var $r=159;var qr=160;var Jr=240;var ra=Object.freeze({__proto__:null,ACCESS_DENIED:Kr,BAD_ARRAY_INDEX:Xr,BAD_BLOCK_NUMBER:kr,BAD_DATA_LENGTH:Gr,BAD_MESSAGE:yr,BAD_RATE_PLAN_ID:Ur,BAD_RATE_PLAN_SIZE:Yr,BAD_RESPONSE_LENGTH:Wr,BAD_SALDO_WRITE:br,BLOCKED_METER:wr,CALIBRATION_DISABLED:xr,DECRYPTION_FAILURE:Hr,INTERNAL:Jr,INVALID_CORRECTION_INTERVAL:jr,NOT_ALIGNED_DATA:mr,NOT_PREPARED_RATE_PLAN:Fr,NO_DATA_FOR_DATE:Br,OK:cr,OUT_OFF_RANGE:$r,SET_METER_TYPE_FAILURE:qr,TIME_CORRECTION_FAILURE:Qr,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:zr,UNENCRYPTED_COMMAND_DISABLED:Zr,UNKNOWN_COMMAND:hr,UNKNOWN_PROTOCOL:pr});Vr(ra);var aa=0;var ea=1;var Ea=2;var _a=3;var ta=Object.freeze({__proto__:null,READ_ONLY:_a,READ_WRITE:Ea,ROOT:ea,UNENCRYPTED:aa});var va=ur;var Aa={encrypt:function(){},decrypt:function(){}};var na=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=a;r.forEach(function(r){e^=r});return e};var Ta=16;var Ra=[0];var Oa=function(r){return function(a,e){var E=e.messageId,_=E===void 0?1:E,v=e.accessLevel,A=v===void 0?_a:v,n=e.aesKey;var T=a.flatMap(function(a){if("id"in a){return r[a.id](a.parameters||{})}if("command"in a){return a.command.bytes}throw new Error("wrong command format")});var R=A|16;var O=[_,R];var i=a.length===1&&"id"in a[0]&&a[0].id===va;if(i){return O.concat(T)}var o=[].concat(R,T,Ra);if(A!==aa){var s=(o.length+1)%Ta;if(s){o=o.concat(new Array(Ta-s).fill(0))}}o=o.concat(na(o));if(n&&A!==aa){o=t(Aa.encrypt(n,o))}return O.concat(o)}};Vr(Ir);var ia=T;var oa=function(){return Lr(ia)};var sa=R;var Pa=function(r){if(r.energyType){return Lr(sa,[r.energyType])}return Lr(sa)};var Na=O;var Ca=function(){return Lr(Na)};var Da=i;var Sa=function(){return Lr(Da)};var Ia=o;var fa=function(){return Lr(Ia)};var Ma=1;var ga=2;var ua=3;var da=4;var la=Math.log,La=Math.pow,Va=Math.LN2;var ca=function(r,a,e,E,_){var t,v,A=_*8-E-1,n=(1<<A)-1,T=n>>1,R=-7,O=e?_-1:0,i=e?-1:1,o=r[a+O];O+=i;t=o&(1<<-R)-1;o>>=-R;R+=A;for(;R>0;t=t*256+r[a+O],O+=i,R-=8);v=t&(1<<-R)-1;t>>=-R;R+=E;for(;R>0;v=v*256+r[a+O],O+=i,R-=8);if(t===0){t=1-T}else if(t===n){return v?NaN:o?-Infinity:Infinity}else{v=v+La(2,E);t=t-T}return(o?-1:1)*v*La(2,t-E)};var ha=function(r,a,e,E,_,t){var v,A,n,T=t*8-_-1,R=(1<<T)-1,O=R>>1,i=_===23?La(2,-24)-La(2,-77):0,o=E?0:t-1,s=E?1:-1,P=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){A=e!==e?1:0;v=R}else{v=la(e)/Va|0;if(e*(n=La(2,-v))<1){v--;n*=2}if(v+O>=1){e+=i/n}else{e+=i*La(2,1-O)}if(e*n>=2){v++;n/=2}if(v+O>=R){A=0;v=R}else if(v+O>=1){A=(e*n-1)*La(2,_);v=v+O}else{A=e*La(2,O-1)*La(2,_);v=0}}for(;_>=8;r[a+o]=A&255,o+=s,A/=256,_-=8);v=v<<_|A;T+=_;for(;T>0;r[a+o]=v&255,o+=s,v/=256,T-=8);r[a+o-s]|=P*128};var ma=[1,0];var Ha=[2,1,0];var pa=[3,2,1,0];var ya=[0,1];var Ga=[0,1,2];var Xa=[0,1,2,3];var Fa=function(r,a){return r[a]};var Ua=function(r,a,e){var E=e?ya:ma;var _=r[a+E[0]];var t=r[a+E[1]]<<8;return _|t};var Ya=function(r,a,e){var E=e?Ga:Ha;var _=r[a+E[0]];var t=r[a+E[1]]<<8;var v=r[a+E[2]]<<16;return _|t|v};var Wa=function(r,a,e){var E=e?Xa:pa;var _=r[a+E[3]]*16777216;var t=r[a+E[2]]*65536;var v=r[a+E[1]]*256;var A=r[a+E[0]];return _+t+v+A};var Ba=function(r,a,e){r[a]=e&255};var xa=function(r,a,e,E){var _=E?ya:ma;r[a+_[0]]=e&255;r[a+_[1]]=e>>>8&255};var Ka=function(r,a,e,E){var _=E?Ga:Ha;r[a+_[0]]=e&255;r[a+_[1]]=e>>>8&255;r[a+_[2]]=e>>>16&255};var ba=function(r,a,e,E){var _=E?Xa:pa;r[a+_[0]]=e&255;r[a+_[1]]=e>>>8&255;r[a+_[2]]=e>>>16&255;r[a+_[3]]=e>>>24&255};function wa(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=a}wa.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){Ba(this.data,this.offset,r<0?r|256:r);this.offset+=Ma},getInt8:function(){var r=Fa(this.data,this.offset);this.offset+=Ma;return r&128?r^-256:r},setUint8:function(r){Ba(this.data,this.offset,r);this.offset+=Ma},getUint8:function(){var r=Fa(this.data,this.offset);this.offset+=Ma;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;xa(this.data,this.offset,r<0?r|65536:r,a);this.offset+=ga},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ua(this.data,this.offset,r);this.offset+=ga;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;xa(this.data,this.offset,r,a);this.offset+=ga},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ua(this.data,this.offset,r);this.offset+=ga;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Ka(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=ua},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ya(this.data,this.offset,r);this.offset+=ua;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Ka(this.data,this.offset,r,a);this.offset+=ua},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ya(this.data,this.offset,r);this.offset+=ua;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ba(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=da},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Wa(this.data,this.offset,r);this.offset+=da;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ba(this.data,this.offset,r,a);this.offset+=da},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Wa(this.data,this.offset,r);this.offset+=da;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ha(this.data,this.offset,r,a,23,4);this.offset+=da},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ca(this.data,this.offset,r,23,4);this.offset+=da;return a},setString:function(r){this.setUint8(r.length);for(var a=0;a<r.length;++a){this.setUint8(r.charCodeAt(a))}},getString:function(){var r=this.getUint8();var a=this.offset+r;var e=[];while(this.offset<a){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[a,r.length].concat(t(r)));this.data=e;this.offset=a+r.length}};Object.defineProperties(wa.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var Za=80;var Qa=81;var ja=82;var za=83;var ka=84;var $a=85;var qa=86;var Ja=87;var re=88;var ae=89;var ee=90;var Ee=91;var _e=255;var te=Object.freeze({__proto__:null,DATA_REQUEST:Za,DATA_RESPONSE:Qa,FRAGMENT_REQUEST:ee,FRAGMENT_RESPONSE:Ee,IDENT_REQUEST:ja,IDENT_RESPONSE:za,INVALID:_e,L2_CHECK_ADDRESS_REQUEST:qa,L2_CHECK_ADDRESS_RESPONSE:Ja,L2_RM_ADDRESS_REQUEST:re,L2_RM_ADDRESS_RESPONSE:ae,L2_SET_ADDRESS_REQUEST:ka,L2_SET_ADDRESS_RESPONSE:$a});Vr(te);Vr(ta);var ve=0;var Ae=1;var ne=2;var Te=3;var Re=4;var Oe=5;var ie=6;var oe=7;var se=8;var Pe=9;var Ne=10;var Ce=11;var De=12;var Se=13;var Ie=14;var fe=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Ne,CASE_OPEN:ve,CASE_TERMINAL_OPEN:Pe,DEVICE_FAILURE:se,ERROR_ACCESS:Oe,MAGNETIC_ON:Ae,PARAMETERS_UPDATE_LOCAL:Te,PARAMETERS_UPDATE_REMOTE:ne,PROTECTION_RESET_EM:Se,PROTECTION_RESET_MAGNETIC:Ie,RESTART:Re,TARIFF_TABLE_GET:De,TARIFF_TABLE_SET:Ce,TIME_CORRECT:oe,TIME_SET:ie});Vr(fe);var Me=1;var ge=2;var ue=3;var de=16;var le=17;var Le=18;var Ve=19;var ce=20;var he=21;var me=32;var He=33;var pe=34;var ye=35;var Ge=36;var Xe=37;var Fe=38;var Ue=39;var Ye=40;var We=41;var Be=49;var xe=50;var Ke=51;var be=52;var we=53;var Ze=54;var Qe=55;var je=56;var ze=57;var ke=60;var $e=61;var qe=62;var Je=63;var rE=64;var aE=65;var eE=66;var EE=67;var _E=68;var tE=69;var vE=70;var AE=71;var nE=72;var TE=73;var RE=74;var OE=75;var iE=76;var oE=77;var sE=78;var PE=79;var NE=80;var CE=81;var DE=82;var SE=83;var IE=84;var fE=85;var ME=86;var gE=87;var uE=88;var dE=89;var lE=96;var LE=97;var VE=98;var cE=99;var hE=100;var mE=101;var HE=102;var pE=103;var yE=104;var GE=105;var XE=112;var FE=113;var UE=114;var YE=115;var WE=116;var BE=117;var xE=118;var KE=119;var bE=120;var wE=121;var ZE=122;var QE=123;var jE=124;var zE=125;var kE=126;var $E=144;var qE=145;var JE=147;var r_=148;var a_=152;var e_=156;var E_=157;var __=158;var t_=159;var v_=160;var A_=161;var n_=162;var T_=176;var R_=177;var O_=178;var i_=179;var o_=180;var s_=181;var P_=182;var N_=183;var C_=185;var D_=186;var S_=224;var I_=225;var f_=226;var M_=227;var g_=228;var u_=229;var d_=230;var l_=231;var L_=232;var V_=Object.freeze({__proto__:null,ACCESS_LOCKED:de,ACC_PARAM_BAD:UE,ACC_PARAM_EXT_BAD:YE,BAD_TEST_EEPROM:yE,BAD_TEST_FRAM:GE,BATTERY_FAULT:SE,BATTERY_OK:DE,BIPOLAR_POWER_FAULT:o_,BIPOLAR_POWER_OK:s_,BLOCK_TARIFF_BAD:BE,CALC_PERIOD_BAD:WE,CALIBRATION_FAULT:fE,CALIBRATION_FLAG_RESET:pE,CALIBRATION_FLAG_SET:HE,CALIBRATION_OK:IE,CALIBRATION_PARAM_BAD:xE,CASE_CLOSE:Ve,CASE_KLEMA_CLOSE:QE,CASE_KLEMA_OPEN:ZE,CASE_MODULE_CLOSE:zE,CASE_MODULE_OPEN:jE,CASE_OPEN:Le,CHANGE_ACCESS_KEY0:me,CHANGE_ACCESS_KEY1:He,CHANGE_ACCESS_KEY2:pe,CHANGE_ACCESS_KEY3:ye,CHANGE_COR_TIME:We,CHANGE_PARAM_CANAL:C_,CHANGE_PAR_LOCAL:Ge,CHANGE_PAR_REMOTE:Xe,CHANGE_TARIFF_TABLE:xe,CHANGE_TARIFF_TBL_2:a_,CLOCK_FAULT:gE,CLOCK_OK:ME,CMD_CHANGE_TIME:Fe,CMD_RELAY_2_OFF:LE,CMD_RELAY_2_ON:lE,CMD_RELAY_OFF:Ye,CMD_RELAY_ON:Ue,CROSS_ZERO_ENT0:VE,CROSS_ZERO_ENT1:cE,CROSS_ZERO_ENT2:hE,CROSS_ZERO_ENT3:mE,CROSS_ZERO_EXPORT_ENT0:__,CROSS_ZERO_EXPORT_ENT1:t_,CROSS_ZERO_EXPORT_ENT2:v_,CROSS_ZERO_EXPORT_ENT3:A_,CURRENT_UNEQUAL_FAULT:O_,CURRENT_UNEQUAL_OK:i_,EM_MAGNETIC_OFF:R_,EM_MAGNETIC_ON:T_,ENERGY_REGISTER_FAULT:Me,ENERGY_REGISTER_OVERFLOW:Be,ERR_ACCESS:le,F_MAX_OK:nE,F_MAX_OVER:TE,F_MIN_OK:RE,F_MIN_OVER:OE,I_MAX_OK:iE,I_MAX_OVER:oE,MAGNETIC_OFF:he,MAGNETIC_ON:ce,OP_PAR_FAULT:ue,POWER_A_OFF:uE,POWER_A_ON:dE,POWER_B_OFF:$e,POWER_B_ON:ke,POWER_C_OFF:Je,POWER_C_ON:qe,POWER_GOOD_DIO:kE,POWER_OVER_RELAY_OFF:E_,POWER_SALDO_OK:NE,POWER_SALDO_OVER:CE,P_MAX_A_MINUS_OK:l_,P_MAX_A_MINUS_OVER:L_,P_MAX_OK:sE,P_MAX_OVER:PE,RELAY_HARD_BAD_OFF:$E,RELAY_HARD_BAD_ON:JE,RELAY_HARD_OFF:r_,RELAY_HARD_ON:qE,RELAY_OFF:Qe,RELAY_OFF_BAD_SALDO:D_,RELAY_ON:Ze,RESET_EM_FLAG:P_,RESET_MAGNET_FLAG:N_,RESTART:je,SALDO_EN_BAD:bE,SALDO_PARAM_BAD:FE,SET_DEMAND_EN_10MIN:M_,SET_DEMAND_EN_15MIN:g_,SET_DEMAND_EN_1MIN:S_,SET_DEMAND_EN_30MIN:u_,SET_DEMAND_EN_3MIN:I_,SET_DEMAND_EN_5MIN:f_,SET_DEMAND_EN_60MIN:d_,SET_NEW_SALDO:XE,SET_SALDO_PARAM:e_,SET_TARIFF_TABLE:Ke,SUMMER_TIME:be,TIME_CORRECT:wE,TIME_CORRECT_NEW:n_,T_MAX_OK:_E,T_MAX_OVER:tE,T_MIN_OK:vE,T_MIN_OVER:AE,VENDOR_PAR_FAULT:ge,V_MAX_OK:rE,V_MAX_OVER:aE,V_MIN_OK:eE,V_MIN_OVER:EE,WD_RESTART:ze,WINTER_SUMMER_BAD:KE,WINTER_TIME:we});Vr(V_);var c_=1;var h_=2;var m_=3;var H_=4;var p_=5;var y_=6;var G_=7;var X_=8;var F_=9;var U_=10;var Y_=11;var W_=12;var B_=13;var x_=14;var K_=15;var b_=16;var w_=17;var Z_=18;var Q_=19;var j_=20;var z_=21;var k_=22;var $_=23;var q_=24;var J_=25;var rt=26;var at=28;var et=30;var Et=31;var _t=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:H_,ACTIVE_ENERGY_T2:p_,ACTIVE_ENERGY_T3:y_,ACTIVE_ENERGY_T4:G_,ACTIVE_POWER_IN_NEUTRAL:F_,ACTIVE_POWER_PER_PHASE:X_,BATTERY_VOLTAGE:k_,CURRENT_BALANCE:et,CURRENT_IN_NEUTRAL:Y_,CURRENT_IN_PHASE:U_,DATE_MONTH_YEAR:x_,EXPORTED_ACTIVE_ENERGY_T1:b_,EXPORTED_ACTIVE_ENERGY_T2:w_,EXPORTED_ACTIVE_ENERGY_T3:Z_,EXPORTED_ACTIVE_ENERGY_T4:Q_,HOUR_MINUTE_SECOND:B_,MAGNET_INDUCTION:at,OPTOPORT_SPEED:Et,POWER_FACTOR_PHASE_A:j_,POWER_FACTOR_PHASE_B:z_,POWER_THRESHOLD_T1:$_,POWER_THRESHOLD_T2:q_,POWER_THRESHOLD_T3:J_,POWER_THRESHOLD_T4:rt,SET_ALL_SEGMENT_DISPLAY:c_,SOFTWARE_VERSION:h_,TOTAL_ACTIVE_ENERGY:m_,TOTAL_EXPORTED_ACTIVE_ENERGY:K_,VOLTAGE:W_});Vr(_t);var tt=2400;var vt=9600;var At={rs485orTwi:{0:vt,2:tt,4:vt},optoport:{0:tt,2:tt,4:vt}};({rs485orTwi:Vr(At.rs485orTwi),optoport:Vr(At.optoport)});var nt=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var Tt=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var Rt=s;var Ot=8;var it=function(r){var a=new wa(Ot,false);nt(a,r);return Lr(Rt,a.data)};var ot=0;var st=1;var Pt=C;var Nt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=new wa(r?.energyType?st:ot,false);if(r?.energyType){a.setUint8(r.energyType)}return Lr(Pt,a.data)};var Ct=g;var Dt=3;var St=function(r){var a=new wa(Dt,false);Tt(a,r.date);return Lr(Ct,a.data)};var It=1;var ft=3;var Mt=4;var gt=5;var ut=7;var dt=8;var lt=9;var Lt=13;var Vt=15;var ct=16;var ht=17;var mt=18;var Ht=19;var pt=20;var yt=21;var Gt=22;var Xt=23;var Ft=24;var Ut=25;var Yt=28;var Wt=30;var Bt=31;var xt=40;var Kt=41;var bt=42;var wt=44;var Zt=46;var Qt=47;var jt=49;var zt=50;var kt=51;var $t=52;var qt=53;var Jt=54;var rv=57;var av=58;var ev=59;var Ev=60;var _v=61;var tv=62;var vv=63;var Av=64;var nv=69;var Tv=70;var Rv=71;var Ov=72;var iv=73;var ov=78;var sv=79;var Pv=80;var Nv=82;var Cv=83;var Dv=84;var Sv=85;var Iv=86;var fv=88;var Mv=89;var gv=90;var uv=92;var dv=93;var lv=94;var Lv=100;var Vv=109;var cv=111;var hv=112;var mv=113;var Hv=114;var pv=116;var yv=117;var Gv=118;var Xv=122;var Fv=Object.freeze({__proto__:null,activateRatePlan:Ht,getBv:hv,getCorrectTime:tv,getCriticalEvent:Iv,getCurrentStatusMeter:rv,getCurrentValues:Lt,getDateTime:ut,getDayDemand:Gt,getDayDemandExport:sv,getDayMaxDemand:jt,getDayMaxDemandExport:fv,getDayProfile:ev,getDemand:Gv,getDeviceId:gt,getDeviceType:Mt,getDisplayParam:lv,getEnergy:Vt,getEnergyDayPrevious:ft,getEnergyExport:ov,getEnergyExportDayPrevious:Pv,getEventStatus:It,getEvents:kt,getEventsCounters:$t,getExtendedCurrentValues:av,getHalfHourDemand:yt,getHalfHourDemandChannel:gv,getHalfHourDemandExport:Cv,getHalfHourDemandVare:iv,getHalfHourDemandVareExport:Sv,getHalfHourDemandVari:Ov,getHalfHourDemandVariExport:Dv,getHalfHourEnergies:cv,getMagneticFieldThreshold:Vv,getMeterInfo:Xv,getMonthDemand:Xt,getMonthDemandExport:Nv,getMonthMaxDemand:zt,getMonthMaxDemandExport:Mv,getOperatorParameters:Wt,getOperatorParametersExtended:vv,getOperatorParametersExtended2:Rv,getOperatorParametersExtended3:mv,getOperatorParametersExtended4:yv,getRatePlanInfo:wt,getSaldo:Kt,getSaldoParameters:Zt,getSeasonProfile:Ev,getSpecialDay:_v,getVersion:xt,prepareRatePlan:pt,resetPowerMaxDay:qt,resetPowerMaxMonth:Jt,runTariffPlan:Tv,setAccessKey:lt,setCorrectDateTime:uv,setCorrectTime:Yt,setDateTime:dt,setDayProfile:ct,setDisplayParam:dv,setOperatorParameters:Bt,setOperatorParametersExtended:Av,setOperatorParametersExtended2:nv,setOperatorParametersExtended3:Hv,setOperatorParametersExtended4:pv,setSaldo:bt,setSaldoParameters:Qt,setSeasonProfile:ht,setSpecialDay:mt,setSpecialOperation:Lv,turnRelayOff:Ut,turnRelayOn:Ft});Vr(Fv);var Uv=3;var Yv=4;var Wv=Gt;var Bv=function(r){var a=new wa(r?.energyType?Yv:Uv,false);Tt(a,r?.date);if(r?.energyType){a.setUint8(r.energyType)}return Lr(Wv,a.data)};var xv=m;var Kv=function(){return Lr(xv)};var bv=Iv;var wv=function(r){return Lr(bv,[r.event,r.index])};var Zv=1;var Qv=2;var jv=3;var zv=4;var kv=17;var $v=18;var qv=19;var Jv=20;var rA=21;var aA=22;var eA=23;var EA=32;var _A=33;var tA=34;var vA=35;var AA=36;var nA=37;var TA=38;var RA=39;var OA=40;var iA=49;var oA=50;var sA=51;var PA=52;var NA=53;var CA=54;var DA=55;var SA=56;var IA=57;var fA=64;var MA=65;var gA=66;var uA=67;var dA=68;var lA=69;var LA=70;var VA=71;var cA=72;var hA=73;var mA=74;var HA=75;var pA=76;var yA=77;var GA=78;var XA=79;var FA=80;var UA=81;var YA=82;var WA=83;var BA=84;var xA=85;var KA=86;var bA=87;var wA=88;var ZA=89;var QA=90;var jA=91;var zA=92;var kA=93;var $A=94;var qA=95;var JA=96;var rn=97;var an=98;var en=99;var En=100;var _n=101;var tn=102;var vn=103;var An=104;var nn=105;var Tn=106;var Rn=107;var On=108;var on=109;var sn=110;var Pn=111;var Nn=112;var Cn=113;var Dn=114;var Sn=115;var In=116;var fn=117;var Mn=118;var gn=119;var un=120;var dn=121;var ln=122;var Ln=123;var Vn=124;var cn=125;var hn=126;var mn=127;var Hn=128;var pn=129;var yn=130;var Gn=131;var Xn=132;var Fn=133;var Un=134;var Yn=135;var Wn=136;var Bn=137;var xn=138;var Kn=139;var bn=140;var wn=141;var Zn=142;var Qn=143;var jn=144;var zn=145;var kn=147;var $n=148;var qn=149;var Jn=150;var rT=151;var aT=152;var eT=153;var ET=154;var _T=155;var tT=156;var vT=157;var AT=158;var nT=159;var TT=160;var RT=161;var OT=162;var iT=163;var oT=164;var sT=165;var PT=166;var NT=167;var CT=168;var DT=169;var ST=170;var IT=171;var fT=172;var MT=173;var gT=174;var uT=175;var dT=176;var lT=177;var LT=178;var VT=179;var cT=224;var hT=225;var mT=226;var HT=227;var pT=228;var yT=229;var GT=230;var XT=231;var FT=232;var UT=Object.freeze({__proto__:null,ACCESS_LOCKED:kv,ACCESS_UNLOCKED:$v,ACCUMULATION_PARAM_BAD:Fn,ACCUMULATION_PARAM_EXT_BAD:Un,BAD_TEST_EEPROM:pn,BAD_TEST_FRAM:yn,BATTERY_FAULT:nn,BATTERY_OK:An,BLOCK_TARIFF_BAD:Wn,CALCULATION_PERIOD_BAD:Yn,CALIBRATION_FAULT:Rn,CALIBRATION_FLAG_RESET:Hn,CALIBRATION_FLAG_SET:mn,CALIBRATION_OK:Tn,CALIBRATION_PARAM_BAD:Bn,CASE_CLOSE:rA,CASE_KLEMA_CLOSE:rT,CASE_KLEMA_OPEN:Jn,CASE_MODULE_CLOSE:_T,CASE_MODULE_OPEN:ET,CASE_OPEN:Jv,CHANGE_ACCESS_KEY0:EA,CHANGE_ACCESS_KEY1:_A,CHANGE_ACCESS_KEY2:tA,CHANGE_ACCESS_KEY3:vA,CHANGE_COR_TIME:Nn,CHANGE_PARAMETERS_LOCAL:AA,CHANGE_PARAMETERS_REMOTE:nA,CHANGE_PARAM_CHANNEL1:AT,CHANGE_PARAM_CHANNEL2:nT,CHANGE_PARAM_CHANNEL3:TT,CHANGE_PARAM_CHANNEL4:RT,CHANGE_PARAM_CHANNEL5:OT,CHANGE_PARAM_CHANNEL6:iT,CHANGE_TARIFF_TABLE:oA,CHANGE_TARIFF_TABLE_2:aT,CHANGE_TARIFF_TABLE_3:eT,CLOCK_FAULT:rn,CLOCK_OK:JA,CMD_CHANGE_TIME:TA,CMD_RELAY_2_OFF:Dn,CMD_RELAY_2_ON:Cn,CMD_RELAY_OFF:OA,CMD_RELAY_ON:RA,COEFFICIENT_TRANSFORMATION_CHANGE:Qn,CROSS_ZERO_ENT1:Sn,CROSS_ZERO_ENT2:In,CROSS_ZERO_ENT3:fn,CROSS_ZERO_ENT4:Mn,CROSS_ZERO_EXPORT_ENT1:oT,CROSS_ZERO_EXPORT_ENT2:sT,CROSS_ZERO_EXPORT_ENT3:PT,CROSS_ZERO_EXPORT_ENT4:NT,CROSS_ZERO_EXPORT_VARE1:fT,CROSS_ZERO_EXPORT_VARE2:MT,CROSS_ZERO_EXPORT_VARE3:gT,CROSS_ZERO_EXPORT_VARE4:uT,CROSS_ZERO_EXPORT_VARI1:CT,CROSS_ZERO_EXPORT_VARI2:DT,CROSS_ZERO_EXPORT_VARI3:ST,CROSS_ZERO_EXPORT_VARI4:IT,CROSS_ZERO_VARE1:Ln,CROSS_ZERO_VARE2:Vn,CROSS_ZERO_VARE3:cn,CROSS_ZERO_VARE4:hn,CROSS_ZERO_VARI1:gn,CROSS_ZERO_VARI2:un,CROSS_ZERO_VARI3:dn,CROSS_ZERO_VARI4:ln,EM_MAGNETIC_OFF:lT,EM_MAGNETIC_ON:dT,ENERGY_REGISTER_OVERFLOW:iA,ENERGY_T1_FAULT:Zv,ENERGY_T2_FAULT:Qv,ENERGY_T3_FAULT:jv,ENERGY_T4_FAULT:zv,ERR_ACCESS:qv,F_MAX_OK:pA,F_MAX_OVER:yA,F_MIN_OK:GA,F_MIN_UNDER:XA,IA_MAX_OK:BA,IA_MAX_OVER:xA,IB_MAX_OK:KA,IB_MAX_OVER:bA,IC_MAX_OK:wA,IC_MAX_OVER:ZA,IDIFF_OK:$A,IDIFF_OVER:qA,MAGNETIC_OFF:eA,MAGNETIC_ON:aA,METER_TROUBLE:qn,OP_PARAM_BAD:Kn,OP_PARAM_EXT_BAD:bn,O_PARAMETERS_FAULT:Pn,O_PARAMETERS_OK:sn,PA_MAX_OK:QA,PA_MAX_OVER:jA,POWER_A_OFF:vn,POWER_A_ON:tn,POWER_B_OFF:_n,POWER_B_ON:En,POWER_C_OFF:en,POWER_C_ON:an,POWER_OVER_RELAY_OFF:vT,PV_MAX_OK:zA,PV_MAX_OVER:kA,P_MAX_A_MINUS_OK:XT,P_MAX_A_MINUS_OVER:FT,RELAY_HARD_BAD_OFF:jn,RELAY_HARD_BAD_ON:kn,RELAY_HARD_OFF:$n,RELAY_HARD_ON:zn,RELAY_OFF:DA,RELAY_ON:CA,RESET_EM_FLAG:LT,RESET_MAGNETIC_FLAG:VT,RESTART:SA,SALDO_ENERGY_BAD:wn,SALDO_PARAM_BAD:Xn,SET_DEMAND_EN_10_MIN:HT,SET_DEMAND_EN_15_MIN:pT,SET_DEMAND_EN_1_MIN:cT,SET_DEMAND_EN_30_MIN:yT,SET_DEMAND_EN_3_MIN:hT,SET_DEMAND_EN_5_MIN:mT,SET_DEMAND_EN_60_MIN:GT,SET_NEW_SALDO:Gn,SET_SALDO_PARAM:tT,SET_TARIFF_TABLE:sA,SUMMER_TIME:PA,TIME_CORRECT:Zn,T_MAX_OK:FA,T_MAX_OVER:UA,T_MIN_OK:YA,T_MIN_UNDER:WA,VA_MAX_OK:fA,VA_MAX_OVER:MA,VA_MIN_OK:gA,VA_MIN_UNDER:uA,VB_MAX_OK:dA,VB_MAX_OVER:lA,VB_MIN_OK:LA,VB_MIN_UNDER:VA,VC_MAX_OK:cA,VC_MAX_OVER:hA,VC_MIN_OK:mA,VC_MIN_UNDER:HA,V_PARAMETERS_FAULT:on,V_PARAMETERS_OK:On,WD_RESTART:IA,WINTER_SUMMER_BAD:xn,WINTER_TIME:NA});Vr(UT);var YT=1;var WT=2;var BT=3;var xT=4;var KT=5;var bT=6;var wT=7;var ZT=8;var QT=9;var jT=10;var zT=11;var kT=12;var $T=13;var qT=14;var JT=15;var rR=16;var aR=17;var eR=18;var ER=19;var _R=20;var tR=21;var vR=22;var AR=23;var nR=24;var TR=25;var RR=26;var OR=27;var iR=28;var oR=29;var sR=30;var PR=31;var NR=32;var CR=33;var DR=34;var SR=35;var IR=36;var fR=37;var MR=38;var gR=39;var uR=40;var dR=41;var lR=42;var LR=43;var VR=44;var cR=45;var hR=46;var mR=47;var HR=48;var pR=49;var yR=50;var GR=51;var XR=52;var FR=53;var UR=54;var YR=55;var WR=56;var BR=57;var xR=58;var KR=59;var bR=60;var wR=61;var ZR=62;var QR=63;var jR=64;var zR=65;var kR=66;var $R=67;var qR=68;var JR=69;var rO=70;var aO=71;var eO=72;var EO=73;var _O=74;var tO=75;var vO=76;var AO=77;var nO=78;var TO=79;var RO=80;var OO=81;var iO=82;var oO=83;var sO=84;var PO=85;var NO=86;var CO=87;var DO=88;var SO=89;var IO=90;var fO=91;var MO=92;var gO=93;var uO=94;var dO=95;var lO=96;var LO=97;var VO=98;var cO=99;var hO=100;var mO=101;var HO=102;var pO=103;var yO=104;var GO=105;var XO=106;var FO=107;var UO=108;var YO=109;var WO=110;var BO=111;var xO=112;var KO=113;var bO=114;var wO=115;var ZO=116;var QO=117;var jO=118;var zO=119;var kO=120;var $O=121;var qO=122;var JO=123;var ri=124;var ai=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:xT,ACTIVE_ENERGY_T2:KT,ACTIVE_ENERGY_T3:bT,ACTIVE_ENERGY_T4:wT,ACTIVE_POWER_PHASE_A:LR,ACTIVE_POWER_PHASE_B:VR,ACTIVE_POWER_PHASE_C:cR,APPARENT_POWER_QMINUS_PHASE_A:QR,APPARENT_POWER_QMINUS_PHASE_B:jR,APPARENT_POWER_QMINUS_PHASE_C:zR,APPARENT_POWER_QPLUS_PHASE_A:KR,APPARENT_POWER_QPLUS_PHASE_B:bR,APPARENT_POWER_QPLUS_PHASE_C:wR,BATTERY_VOLTAGE:uR,CURRENT_BALANCE:jO,CURRENT_IN_NEUTRAL:IR,CURRENT_IN_PHASE_A:CR,CURRENT_IN_PHASE_B:DR,CURRENT_IN_PHASE_C:SR,CURRENT_TRANSFORMATION_RATIO:ZO,DATE_MONTH_YEAR:wO,EXPORTED_ACTIVE_ENERGY_T1:ER,EXPORTED_ACTIVE_ENERGY_T2:_R,EXPORTED_ACTIVE_ENERGY_T3:tR,EXPORTED_ACTIVE_ENERGY_T4:vR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:oR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:sR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:PR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:NR,EXPORTED_REACTIVE_ENERGY_T1:nR,EXPORTED_REACTIVE_ENERGY_T2:TR,EXPORTED_REACTIVE_ENERGY_T3:RR,EXPORTED_REACTIVE_ENERGY_T4:OR,HOUR_MINUTE_SECOND:bO,MAGNET_INDUCTION:ri,MAX_ACTIVE_POWER_DAY_T1:kR,MAX_ACTIVE_POWER_DAY_T2:$R,MAX_ACTIVE_POWER_DAY_T3:qR,MAX_ACTIVE_POWER_DAY_T4:JR,MAX_ACTIVE_POWER_MONTH_T1:rO,MAX_ACTIVE_POWER_MONTH_T2:aO,MAX_ACTIVE_POWER_MONTH_T3:eO,MAX_ACTIVE_POWER_MONTH_T4:EO,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:IO,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:fO,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:MO,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:gO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:uO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:dO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:lO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:LO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:XO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:FO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:UO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:YO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:WO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:BO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:xO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:KO,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:VO,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:cO,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:hO,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:mO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:HO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:pO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:yO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:GO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:iO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:oO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:sO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:PO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:NO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:CO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:DO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:SO,MAX_REACTIVE_POWER_DAY_T1:_O,MAX_REACTIVE_POWER_DAY_T2:tO,MAX_REACTIVE_POWER_DAY_T3:vO,MAX_REACTIVE_POWER_DAY_T4:AO,MAX_REACTIVE_POWER_MONTH_T1:nO,MAX_REACTIVE_POWER_MONTH_T2:TO,MAX_REACTIVE_POWER_MONTH_T3:RO,MAX_REACTIVE_POWER_MONTH_T4:OO,NEGATIVE_REACTIVE_ENERGY_T1:qT,NEGATIVE_REACTIVE_ENERGY_T2:JT,NEGATIVE_REACTIVE_ENERGY_T3:rR,NEGATIVE_REACTIVE_ENERGY_T4:aR,OPTOPORT_SPEED:JO,POWER_FACTOR_PHASE_A:YR,POWER_FACTOR_PHASE_B:WR,POWER_FACTOR_PHASE_C:BR,POWER_THRESHOLD_T1:zO,POWER_THRESHOLD_T2:kO,POWER_THRESHOLD_T3:$O,POWER_THRESHOLD_T4:qO,REACTIVE_ENERGY_T1:QT,REACTIVE_ENERGY_T2:jT,REACTIVE_ENERGY_T3:zT,REACTIVE_ENERGY_T4:kT,REACTIVE_POWER_QMINUS_PHASE_A:GR,REACTIVE_POWER_QMINUS_PHASE_B:XR,REACTIVE_POWER_QMINUS_PHASE_C:FR,REACTIVE_POWER_QPLUS_PHASE_A:mR,REACTIVE_POWER_QPLUS_PHASE_B:HR,REACTIVE_POWER_QPLUS_PHASE_C:pR,SET_ALL_SEGMENT_DISPLAY:YT,SOFTWARE_VERSION:WT,SUPPLY_FREQUENCY:dR,TOTAL_ACTIVE_ENERGY:BT,TOTAL_ACTIVE_POWER:lR,TOTAL_APPARENT_POWER_QMINUS:ZR,TOTAL_APPARENT_POWER_QPLUS:xR,TOTAL_EXPORTED_ACTIVE_ENERGY:eR,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:iR,TOTAL_EXPORTED_REACTIVE_ENERGY:AR,TOTAL_NEGATIVE_REACTIVE_ENERGY:$T,TOTAL_POWER_FACTOR:UR,TOTAL_REACTIVE_ENERGY:ZT,TOTAL_REACTIVE_POWER_QMINUS:yR,TOTAL_REACTIVE_POWER_QPLUS:hR,VOLTAGE_IN_PHASE_A:fR,VOLTAGE_IN_PHASE_B:MR,VOLTAGE_IN_PHASE_C:gR,VOLTAGE_TRANSFORMATION_RATIO:QO});Vr(ai);var ei=120;var Ei=254;var _i=255;var ti=Object.freeze({__proto__:null,activateRatePlan:Ht,errorDataFrameResponse:_i,errorResponse:Ei,getBv:hv,getCorrectTime:tv,getCriticalEvent:Iv,getCurrentStatusMeter:rv,getCurrentValues:Lt,getDateTime:ut,getDayDemand:Gt,getDayDemandExport:sv,getDayEnergies:ei,getDayMaxDemand:jt,getDayMaxDemandExport:fv,getDayProfile:ev,getDemand:Gv,getDeviceId:gt,getDeviceType:Mt,getDisplayParam:lv,getEnergy:Vt,getEnergyDayPrevious:ft,getEnergyExport:ov,getEnergyExportDayPrevious:Pv,getEventStatus:It,getEvents:kt,getEventsCounters:$t,getExtendedCurrentValues:av,getHalfHourDemand:yt,getHalfHourDemandChannel:gv,getHalfHourDemandExport:Cv,getHalfHourDemandVare:iv,getHalfHourDemandVareExport:Sv,getHalfHourDemandVari:Ov,getHalfHourDemandVariExport:Dv,getHalfHourEnergies:cv,getMagneticFieldThreshold:Vv,getMeterInfo:Xv,getMonthDemand:Xt,getMonthDemandExport:Nv,getMonthMaxDemand:zt,getMonthMaxDemandExport:Mv,getOperatorParameters:Wt,getOperatorParametersExtended:vv,getOperatorParametersExtended2:Rv,getOperatorParametersExtended3:mv,getOperatorParametersExtended4:yv,getRatePlanInfo:wt,getSaldo:Kt,getSaldoParameters:Zt,getSeasonProfile:Ev,getSpecialDay:_v,getVersion:xt,prepareRatePlan:pt,resetPowerMaxDay:qt,resetPowerMaxMonth:Jt,runTariffPlan:Tv,setAccessKey:lt,setCorrectDateTime:uv,setCorrectTime:Yt,setDateTime:dt,setDayProfile:ct,setDisplayParam:dv,setOperatorParameters:Bt,setOperatorParametersExtended:Av,setOperatorParametersExtended2:nv,setOperatorParametersExtended3:Hv,setOperatorParametersExtended4:pv,setSaldo:bt,setSaldoParameters:Qt,setSeasonProfile:ht,setSpecialDay:mt,setSpecialOperation:Lv,turnRelayOff:Ut,turnRelayOn:Ft});Vr(ti);var vi=2400;var Ai=9600;var ni={rs485orTwi:{0:Ai,2:vi,4:Ai},optoport:{0:Ai,2:vi,4:Ai}};({rs485orTwi:Vr(ni.rs485orTwi),optoport:Vr(ni.optoport)});var Ti=function(r,a){var e=a.date.year<<1|a.date.month>>3&1;var E=a.date.month<<5&224|a.date.date&31;r.setUint8(e);r.setUint8(E);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var Ri=Gv;var Oi=7;var ii=function(r){var a=new wa(Oi,false);Ti(a,r);return Lr(Ri,a.data)};var oi=145;var si=30;var Pi=function(r){var a=[si,r.length+2,0,oi].concat(t(r));return[].concat(t(a),[na(a)])};var Ni;var Ci=(Ni={},e(e(e(e(e(e(e(e(e(e(Ni,ia,oa),sa,Pa),Na,Ca),Da,Sa),Ia,fa),Rt,it),Pt,Nt),Ct,St),Wv,Bv),xv,Kv),e(e(Ni,bv,wv),Ri,ii));toBytes=Oa(Ci);getBase64FromBytes=lr;setDataSegment=Pi})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var bytes = toBytes(msg.commands);

// send nothing if not fit in a single data segment
if ( bytes.length > MAX_DATA_SEGMENT_SIZE ) {
    bytes = [];
} else {
    bytes = setDataSegment(bytes);
}

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(bytes)
};

return result;
