// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// encoded message should be less than this size
// to be able to send to a device
var MAX_DATA_SEGMENT_SIZE = 50;


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,setDataSegment,getBase64FromBytes;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var E=0,e=Array(a);E<a;E++)e[E]=r[E];return e}function a(a){if(Array.isArray(a))return r(a)}function E(r,a,E){return(a=A(a))in r?Object.defineProperty(r,a,{value:E,enumerable:true,configurable:true,writable:true}):r[a]=E,r}function e(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(r){return a(r)||e(r)||T(r)||_()}function v(r,a){if("object"!=typeof r||!r)return r;var E=r[Symbol.toPrimitive];if(void 0!==E){var e=E.call(r,a);if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function A(r){var a=v(r,"string");return"symbol"==typeof a?a:a+""}function T(a,E){if(a){if("string"==typeof a)return r(a,E);var e={}.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(a,E):void 0}}var R=function(r){return btoa(r.map(function(r){return String.fromCharCode(r)}).join(""))};var n=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(t(a))};var O=1;var i=3;var o=4;var s=5;var N=7;var C=8;var P=9;var D=13;var S=15;var I=16;var f=17;var M=18;var g=19;var u=20;var d=21;var L=22;var l=23;var V=24;var c=25;var h=28;var m=30;var H=31;var F=40;var p=41;var U=42;var y=44;var X=45;var G=46;var Y=47;var W=49;var B=50;var x=51;var K=52;var b=53;var w=54;var Z=57;var Q=58;var j=59;var z=60;var k=61;var $=62;var q=65;var J=70;var rr=74;var ar=75;var Er=79;var er=80;var _r=82;var tr=83;var vr=88;var Ar=89;var Tr=91;var Rr=92;var nr=93;var Or=94;var ir=100;var or=109;var sr=111;var Nr=112;var Cr=113;var Pr=114;var Dr=115;var Sr=116;var Ir=117;var fr=118;var Mr=122;var gr=Object.freeze({__proto__:null,activateRatePlan:g,getBv:Nr,getCorrectTime:$,getCriticalEvent:q,getCurrentStatusMeter:Z,getCurrentValues:D,getDateTime:N,getDayDemand:L,getDayDemandExport:Er,getDayMaxDemand:W,getDayMaxDemandExport:vr,getDayMaxDemandPrevious:rr,getDayProfile:j,getDemand:fr,getDemandParameters:Ir,getDeviceId:s,getDeviceType:o,getDisplayParam:Or,getEnergy:S,getEnergyDayPrevious:i,getEnergyExport:Tr,getEnergyExportDayPrevious:er,getEventStatus:O,getEvents:x,getEventsCounters:K,getExtendedCurrentValues:Q,getExtendedCurrentValues2:X,getHalfHourDemand:d,getHalfHourDemandExport:tr,getHalfHourDemandPrevious:ar,getHalfHourEnergies:sr,getMagneticFieldThreshold:or,getMeterInfo:Mr,getMonthDemand:l,getMonthDemandExport:_r,getMonthMaxDemand:B,getMonthMaxDemandExport:Ar,getOperatorParameters:m,getOperatorParametersExtended3:Cr,getQuality:Dr,getRatePlanInfo:y,getSaldo:p,getSaldoParameters:G,getSeasonProfile:z,getSpecialDay:k,getVersion:F,prepareRatePlan:u,resetPowerMaxDay:b,resetPowerMaxMonth:w,runTariffPlan:J,setAccessKey:P,setCorrectDateTime:Rr,setCorrectTime:h,setDateTime:C,setDayProfile:I,setDemandParameters:Sr,setDisplayParam:nr,setOperatorParameters:H,setOperatorParametersExtended3:Pr,setSaldo:U,setSaldoParameters:Y,setSeasonProfile:f,setSpecialDay:M,setSpecialOperation:ir,turnRelayOff:c,turnRelayOn:V});var ur=120;var dr=121;var Lr=254;var lr=255;var Vr=Object.freeze({__proto__:null,activateRatePlan:g,errorDataFrameResponse:lr,errorResponse:Lr,getBv:Nr,getCorrectTime:$,getCriticalEvent:q,getCurrentStatusMeter:Z,getCurrentValues:D,getDateTime:N,getDayDemand:L,getDayDemandExport:Er,getDayEnergies:ur,getDayMaxDemand:W,getDayMaxDemandExport:vr,getDayMaxDemandPrevious:rr,getDayMaxPower:dr,getDayProfile:j,getDemand:fr,getDemandParameters:Ir,getDeviceId:s,getDeviceType:o,getDisplayParam:Or,getEnergy:S,getEnergyDayPrevious:i,getEnergyExport:Tr,getEnergyExportDayPrevious:er,getEventStatus:O,getEvents:x,getEventsCounters:K,getExtendedCurrentValues:Q,getExtendedCurrentValues2:X,getHalfHourDemand:d,getHalfHourDemandExport:tr,getHalfHourDemandPrevious:ar,getHalfHourEnergies:sr,getMagneticFieldThreshold:or,getMeterInfo:Mr,getMonthDemand:l,getMonthDemandExport:_r,getMonthMaxDemand:B,getMonthMaxDemandExport:Ar,getOperatorParameters:m,getOperatorParametersExtended3:Cr,getQuality:Dr,getRatePlanInfo:y,getSaldo:p,getSaldoParameters:G,getSeasonProfile:z,getSpecialDay:k,getVersion:F,prepareRatePlan:u,resetPowerMaxDay:b,resetPowerMaxMonth:w,runTariffPlan:J,setAccessKey:P,setCorrectDateTime:Rr,setCorrectTime:h,setDateTime:C,setDayProfile:I,setDemandParameters:Sr,setDisplayParam:nr,setOperatorParameters:H,setOperatorParametersExtended3:Pr,setSaldo:U,setSaldoParameters:Y,setSeasonProfile:f,setSpecialDay:M,setSpecialOperation:ir,turnRelayOff:c,turnRelayOn:V});var cr=function(r){var a={};for(var E in r){var e=r[E];a[e]=E}return a};cr(Vr);var hr=0;var mr=128;var Hr=129;var Fr=130;var pr=131;var Ur=132;var yr=133;var Xr=134;var Gr=135;var Yr=136;var Wr=137;var Br=144;var xr=145;var Kr=146;var br=147;var wr=149;var Zr=151;var Qr=152;var jr=153;var zr=154;var kr=155;var $r=156;var qr=159;var Jr=160;var ra=240;var aa=Object.freeze({__proto__:null,ACCESS_DENIED:br,BAD_ARRAY_INDEX:Xr,BAD_BLOCK_NUMBER:$r,BAD_DATA_LENGTH:yr,BAD_MESSAGE:Ur,BAD_RATE_PLAN_ID:Yr,BAD_RATE_PLAN_SIZE:Wr,BAD_RESPONSE_LENGTH:Br,BAD_SALDO_WRITE:wr,BLOCKED_METER:Zr,CALIBRATION_DISABLED:Kr,DECRYPTION_FAILURE:Fr,INTERNAL:ra,INVALID_CORRECTION_INTERVAL:zr,NOT_ALIGNED_DATA:Hr,NOT_PREPARED_RATE_PLAN:Gr,NO_DATA_FOR_DATE:xr,OK:hr,OUT_OFF_RANGE:qr,SET_METER_TYPE_FAILURE:Jr,TIME_CORRECTION_FAILURE:jr,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:kr,UNENCRYPTED_COMMAND_DISABLED:Qr,UNKNOWN_COMMAND:mr,UNKNOWN_PROTOCOL:pr});cr(aa);var Ea=0;var ea=1;var _a=2;var ta=3;var va=Object.freeze({__proto__:null,READ_ONLY:ta,READ_WRITE:_a,ROOT:ea,UNENCRYPTED:Ea});var Aa=lr;var Ta={encrypt:function(){},decrypt:function(){}};var Ra=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var E=a;r.forEach(function(r){E^=r});return E};var na=E(E(E(E({},Ea,0),ta,1),_a,2),ea,3);var Oa=function(r){var a=ta;r.forEach(function(r){var E;if("accessLevel"in r){E=r.accessLevel}if("command"in r){E=r.command.accessLevel}if(na[E]>na[a]){a=E}});return a};var ia=16;var oa=[0];var sa=function(r){return function(a,E){var e=E.messageId,_=e===void 0?1:e,v=E.accessLevel,A=v===void 0?Oa(a):v,T=E.aesKey;var R=a.flatMap(function(a){if("id"in a){return r[a.id](a.parameters||{})}if("command"in a){return a.command.bytes}throw new Error("wrong command format")});var n=A|16;var O=[_,n];var i=a.length===1&&"id"in a[0]&&a[0].id===Aa;if(i){return O.concat(R)}var o=[].concat(n,R,oa);if(A!==Ea){var s=(o.length+1)%ia;if(s){o=o.concat(new Array(ia-s).fill(0))}}o=o.concat(Ra(o));if(T&&A!==Ea){o=t(Ta.encrypt(T,o))}return O.concat(o)}};cr(gr);var Na=O;var Ca=function(){return n(Na)};var Pa=i;var Da=function(r){if(r.energyType){return n(Pa,[r.energyType])}return n(Pa)};var Sa=o;var Ia=function(){return n(Sa)};var fa=s;var Ma=function(){return n(fa)};var ga=N;var ua=function(){return n(ga)};var da=1;var La=2;var la=3;var Va=4;var ca=Math.log,ha=Math.pow,ma=Math.LN2;var Ha=function(r,a,E,e,_){var t,v,A=_*8-e-1,T=(1<<A)-1,R=T>>1,n=-7,O=E?_-1:0,i=E?-1:1,o=r[a+O];O+=i;t=o&(1<<-n)-1;o>>=-n;n+=A;for(;n>0;t=t*256+r[a+O],O+=i,n-=8);v=t&(1<<-n)-1;t>>=-n;n+=e;for(;n>0;v=v*256+r[a+O],O+=i,n-=8);if(t===0){t=1-R}else if(t===T){return v?NaN:o?-Infinity:Infinity}else{v=v+ha(2,e);t=t-R}return(o?-1:1)*v*ha(2,t-e)};var Fa=function(r,a,E,e,_,t){var v,A,T,R=t*8-_-1,n=(1<<R)-1,O=n>>1,i=_===23?ha(2,-24)-ha(2,-77):0,o=e?0:t-1,s=e?1:-1,N=E<0||E===0&&1/E<0?1:0;E<0&&(E=-E);if(E!==E||E===Infinity){A=E!==E?1:0;v=n}else{v=ca(E)/ma|0;if(E*(T=ha(2,-v))<1){v--;T*=2}if(v+O>=1){E+=i/T}else{E+=i*ha(2,1-O)}if(E*T>=2){v++;T/=2}if(v+O>=n){A=0;v=n}else if(v+O>=1){A=(E*T-1)*ha(2,_);v=v+O}else{A=E*ha(2,O-1)*ha(2,_);v=0}}for(;_>=8;r[a+o]=A&255,o+=s,A/=256,_-=8);v=v<<_|A;R+=_;for(;R>0;r[a+o]=v&255,o+=s,v/=256,R-=8);r[a+o-s]|=N*128};var pa=[1,0];var Ua=[2,1,0];var ya=[3,2,1,0];var Xa=[0,1];var Ga=[0,1,2];var Ya=[0,1,2,3];var Wa=function(r,a){return r[a]};var Ba=function(r,a,E){var e=E?Xa:pa;var _=r[a+e[0]];var t=r[a+e[1]]<<8;return _|t};var xa=function(r,a,E){var e=E?Ga:Ua;var _=r[a+e[0]];var t=r[a+e[1]]<<8;var v=r[a+e[2]]<<16;return _|t|v};var Ka=function(r,a,E){var e=E?Ya:ya;var _=r[a+e[3]]*16777216;var t=r[a+e[2]]*65536;var v=r[a+e[1]]*256;var A=r[a+e[0]];return _+t+v+A};var ba=function(r,a,E){r[a]=E&255};var wa=function(r,a,E,e){var _=e?Xa:pa;r[a+_[0]]=E&255;r[a+_[1]]=E>>>8&255};var Za=function(r,a,E,e){var _=e?Ga:Ua;r[a+_[0]]=E&255;r[a+_[1]]=E>>>8&255;r[a+_[2]]=E>>>16&255};var Qa=function(r,a,E,e){var _=e?Ya:ya;r[a+_[0]]=E&255;r[a+_[1]]=E>>>8&255;r[a+_[2]]=E>>>16&255;r[a+_[3]]=E>>>24&255};function ja(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var E=new Array(r).fill(0);this.data=E}else{this.data=r}this.offset=0;this.isLittleEndian=a}ja.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){ba(this.data,this.offset,r<0?r|256:r);this.offset+=da},getInt8:function(){var r=Wa(this.data,this.offset);this.offset+=da;return r&128?r^-256:r},setUint8:function(r){ba(this.data,this.offset,r);this.offset+=da},getUint8:function(){var r=Wa(this.data,this.offset);this.offset+=da;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;wa(this.data,this.offset,r<0?r|65536:r,a);this.offset+=La},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ba(this.data,this.offset,r);this.offset+=La;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;wa(this.data,this.offset,r,a);this.offset+=La},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ba(this.data,this.offset,r);this.offset+=La;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Za(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=la},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=xa(this.data,this.offset,r);this.offset+=la;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Za(this.data,this.offset,r,a);this.offset+=la},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=xa(this.data,this.offset,r);this.offset+=la;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Qa(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=Va},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ka(this.data,this.offset,r);this.offset+=Va;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Qa(this.data,this.offset,r,a);this.offset+=Va},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ka(this.data,this.offset,r);this.offset+=Va;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Fa(this.data,this.offset,r,a,23,4);this.offset+=Va},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ha(this.data,this.offset,r,23,4);this.offset+=Va;return a},setString:function(r){this.setUint8(r.length);for(var a=0;a<r.length;++a){this.setUint8(r.charCodeAt(a))}},getString:function(){var r=this.getUint8();var a=this.offset+r;var E=[];while(this.offset<a){E.push(String.fromCharCode(this.getUint8()))}return E.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var E=this.data;E.splice.apply(E,[a,r.length].concat(t(r)));this.data=E;this.offset=a+r.length}};Object.defineProperties(ja.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var za=80;var ka=81;var $a=82;var qa=83;var Ja=84;var rE=85;var aE=86;var EE=87;var eE=88;var _E=89;var tE=90;var vE=91;var AE=255;var TE=Object.freeze({__proto__:null,DATA_REQUEST:za,DATA_RESPONSE:ka,FRAGMENT_REQUEST:tE,FRAGMENT_RESPONSE:vE,IDENT_REQUEST:$a,IDENT_RESPONSE:qa,INVALID:AE,L2_CHECK_ADDRESS_REQUEST:aE,L2_CHECK_ADDRESS_RESPONSE:EE,L2_RM_ADDRESS_REQUEST:eE,L2_RM_ADDRESS_RESPONSE:_E,L2_SET_ADDRESS_REQUEST:Ja,L2_SET_ADDRESS_RESPONSE:rE});cr(TE);cr(va);var RE=0;var nE=1;var OE=2;var iE=3;var oE=4;var sE=5;var NE=6;var CE=7;var PE=8;var DE=9;var SE=10;var IE=11;var fE=12;var ME=13;var gE=14;var uE=Object.freeze({__proto__:null,CASE_MODULE_OPEN:SE,CASE_OPEN:RE,CASE_TERMINAL_OPEN:DE,DEVICE_FAILURE:PE,ERROR_ACCESS:sE,MAGNETIC_ON:nE,PARAMETERS_UPDATE_LOCAL:iE,PARAMETERS_UPDATE_REMOTE:OE,PROTECTION_RESET_EM:ME,PROTECTION_RESET_MAGNETIC:gE,RESTART:oE,TARIFF_TABLE_GET:fE,TARIFF_TABLE_SET:IE,TIME_CORRECT:CE,TIME_SET:NE});cr(uE);var dE=1;var LE=2;var lE=3;var VE=16;var cE=17;var hE=18;var mE=19;var HE=20;var FE=21;var pE=32;var UE=33;var yE=34;var XE=35;var GE=36;var YE=37;var WE=38;var BE=39;var xE=40;var KE=41;var bE=49;var wE=50;var ZE=51;var QE=52;var jE=53;var zE=54;var kE=55;var $E=56;var qE=57;var JE=58;var re=59;var ae=64;var Ee=65;var ee=66;var _e=67;var te=68;var ve=69;var Ae=70;var Te=71;var Re=72;var ne=73;var Oe=74;var ie=75;var oe=76;var se=77;var Ne=78;var Ce=79;var Pe=80;var De=81;var Se=82;var Ie=83;var fe=84;var Me=85;var ge=86;var ue=87;var de=88;var Le=89;var le=96;var Ve=97;var ce=98;var he=99;var me=100;var He=101;var Fe=102;var pe=103;var Ue=104;var ye=105;var Xe=112;var Ge=113;var Ye=114;var We=115;var Be=116;var xe=117;var Ke=118;var be=119;var we=120;var Ze=121;var Qe=122;var je=123;var ze=124;var ke=125;var $e=144;var qe=145;var Je=147;var r_=148;var a_=152;var E_=156;var e_=157;var __=158;var t_=159;var v_=160;var A_=161;var T_=162;var R_=176;var n_=177;var O_=178;var i_=179;var o_=180;var s_=181;var N_=182;var C_=183;var P_=185;var D_=186;var S_=224;var I_=225;var f_=226;var M_=227;var g_=228;var u_=229;var d_=230;var L_=231;var l_=232;var V_=Object.freeze({__proto__:null,ACCESS_ERROR:cE,ACCESS_LOCKED:VE,ACC_PARAMETERS_EXT_FAULT:We,ACC_PARAMETERS_FAULT:Ye,BAD_TEST_EEPROM:Ue,BAD_TEST_FRAM:ye,BATTERY_FAULT:Ie,BATTERY_OK:Se,BIPOLAR_POWER_FAULT:o_,BIPOLAR_POWER_OK:s_,BLOCK_TARIFF_FAULT:xe,CALC_PERIOD_FAULT:Be,CALIBRATION_FAULT:Me,CALIBRATION_FLAG_RESET:pe,CALIBRATION_FLAG_SET:Fe,CALIBRATION_OK:fe,CALIBRATION_PARAMETERS_FAULT:Ke,CASE_CLOSED:mE,CASE_MODULE_CLOSED:ke,CASE_MODULE_OPENED:ze,CASE_OPENED:hE,CASE_TERMINAL_BOX_CLOSED:je,CASE_TERMINAL_BOX_OPENED:Qe,CHANGE_ACCESS_KEY0:pE,CHANGE_ACCESS_KEY1:UE,CHANGE_ACCESS_KEY2:yE,CHANGE_ACCESS_KEY3:XE,CHANGE_COR_TIME:KE,CHANGE_PARAMETERS_CHANNEL:P_,CHANGE_PARAMETERS_LOCAL:GE,CHANGE_PARAMETERS_REMOTE:YE,CHANGE_TARIFF_TABLE:wE,CHANGE_TARIFF_TABLE_2:a_,CLOCK_FAULT:ue,CLOCK_OK:ge,CMD_RELAY_2_OFF:Ve,CMD_RELAY_2_ON:le,CMD_RELAY_OFF:xE,CMD_RELAY_ON:BE,CMD_SET_DATETIME:WE,COSF_MIN_OVER:re,COSF_OK:JE,CROSS_ZERO_EN_T1:ce,CROSS_ZERO_EN_T2:he,CROSS_ZERO_EN_T3:me,CROSS_ZERO_EN_T4:He,CROSS_ZERO_EXPORT_EN_T1:__,CROSS_ZERO_EXPORT_EN_T2:t_,CROSS_ZERO_EXPORT_EN_T3:v_,CROSS_ZERO_EXPORT_EN_T4:A_,CURRENT_UNEQUAL_FAULT:O_,CURRENT_UNEQUAL_OK:i_,EM_MAGNETIC_INFLUENCE_OFF:n_,EM_MAGNETIC_INFLUENCE_ON:R_,ENERGY_REGISTER_FAULT:dE,ENERGY_REGISTER_OVERFLOW:bE,F_MAX_OK:Re,F_MAX_OVER:ne,F_MIN_OK:Oe,F_MIN_OVER:ie,I_MAX_OK:oe,I_MAX_OVER:se,MAGNETIC_INFLUENCE_OFF:FE,MAGNETIC_INFLUENCE_ON:HE,OPERATOR_PARAMETERS_VALUES_FAULT:lE,POWER_A_OFF:de,POWER_A_ON:Le,POWER_OVER_RELAY_OFF:e_,POWER_SALDO_OK:Pe,POWER_SALDO_OVER:De,P_MAX_A_MINUS_OK:L_,P_MAX_A_MINUS_OVER:l_,P_MAX_OK:Ne,P_MAX_OVER:Ce,RELAY_HARD_BAD_OFF:$e,RELAY_HARD_BAD_ON:Je,RELAY_HARD_OFF:r_,RELAY_HARD_ON:qe,RELAY_OFF:kE,RELAY_OFF_BAD_SALDO:D_,RELAY_ON:zE,RESET_EM_FLAG:N_,RESET_MAGNET_FLAG:C_,RESTART:$E,SALDO_EN_FAULT:we,SALDO_PARAMETERS_FAULT:Ge,SET_DEMAND_EN_10MIN:M_,SET_DEMAND_EN_15MIN:g_,SET_DEMAND_EN_1MIN:S_,SET_DEMAND_EN_30MIN:u_,SET_DEMAND_EN_3MIN:I_,SET_DEMAND_EN_5MIN:f_,SET_DEMAND_EN_60MIN:d_,SET_NEW_SALDO:Xe,SET_SALDO_PARAM:E_,SET_TARIFF_TABLE:ZE,SUMMER_TIME:QE,TIME_CORRECT:Ze,TIME_CORRECT_NEW:T_,T_MAX_OK:te,T_MAX_OVER:ve,T_MIN_OK:Ae,T_MIN_OVER:Te,VENDOR_PAR_FAULT:LE,V_MAX_OK:ae,V_MAX_OVER:Ee,V_MIN_OK:ee,V_MIN_OVER:_e,WATCHDOG_RESTART:qE,WINTER_SUMMER_FAULT:be,WINTER_TIME:jE});cr(V_);var c_=1;var h_=2;var m_=3;var H_=4;var F_=5;var p_=6;var U_=7;var y_=8;var X_=9;var G_=10;var Y_=11;var W_=12;var B_=13;var x_=14;var K_=15;var b_=16;var w_=17;var Z_=18;var Q_=19;var j_=20;var z_=21;var k_=22;var $_=23;var q_=24;var J_=25;var rt=26;var at=28;var Et=30;var et=31;var _t=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:H_,ACTIVE_ENERGY_T2:F_,ACTIVE_ENERGY_T3:p_,ACTIVE_ENERGY_T4:U_,ACTIVE_POWER_IN_NEUTRAL:X_,ACTIVE_POWER_PER_PHASE:y_,BATTERY_VOLTAGE:k_,CURRENT_BALANCE:Et,CURRENT_IN_NEUTRAL:Y_,CURRENT_IN_PHASE:G_,DATE_MONTH_YEAR:x_,EXPORTED_ACTIVE_ENERGY_T1:b_,EXPORTED_ACTIVE_ENERGY_T2:w_,EXPORTED_ACTIVE_ENERGY_T3:Z_,EXPORTED_ACTIVE_ENERGY_T4:Q_,HOUR_MINUTE_SECOND:B_,MAGNET_INDUCTION:at,OPTOPORT_SPEED:et,POWER_FACTOR_PHASE_A:j_,POWER_FACTOR_PHASE_B:z_,POWER_THRESHOLD_T1:$_,POWER_THRESHOLD_T2:q_,POWER_THRESHOLD_T3:J_,POWER_THRESHOLD_T4:rt,SET_ALL_SEGMENT_DISPLAY:c_,SOFTWARE_VERSION:h_,TOTAL_ACTIVE_ENERGY:m_,TOTAL_EXPORTED_ACTIVE_ENERGY:K_,VOLTAGE:W_});cr(_t);var tt=2400;var vt=9600;var At={rs485orTwi:{0:vt,2:tt,4:vt},optoport:{0:tt,2:tt,4:vt}};({rs485orTwi:cr(At.rs485orTwi),optoport:cr(At.optoport)});var Tt=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var Rt=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var nt=C;var Ot=8;var it=function(r){var a=new ja(Ot,false);Tt(a,r);return n(nt,a.data)};var ot=0;var st=1;var Nt=S;var Ct=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=new ja(r?.energyType?st:ot,false);if(r?.energyType){a.setUint8(r.energyType)}return n(Nt,a.data)};var Pt=d;var Dt=3;var St=function(r){var a=new ja(Dt,false);Rt(a,r.date);return n(Pt,a.data)};var It=1;var ft=3;var Mt=4;var gt=5;var ut=7;var dt=8;var Lt=9;var lt=13;var Vt=15;var ct=16;var ht=17;var mt=18;var Ht=19;var Ft=20;var pt=21;var Ut=22;var yt=23;var Xt=24;var Gt=25;var Yt=28;var Wt=30;var Bt=31;var xt=40;var Kt=41;var bt=42;var wt=44;var Zt=46;var Qt=47;var jt=49;var zt=50;var kt=51;var $t=52;var qt=53;var Jt=54;var rv=57;var av=58;var Ev=59;var ev=60;var _v=61;var tv=62;var vv=63;var Av=64;var Tv=69;var Rv=70;var nv=71;var Ov=72;var iv=73;var ov=78;var sv=79;var Nv=80;var Cv=82;var Pv=83;var Dv=84;var Sv=85;var Iv=86;var fv=88;var Mv=89;var gv=90;var uv=92;var dv=93;var Lv=94;var lv=100;var Vv=109;var cv=111;var hv=112;var mv=113;var Hv=114;var Fv=115;var pv=116;var Uv=117;var yv=118;var Xv=122;var Gv=Object.freeze({__proto__:null,activateRatePlan:Ht,getBv:hv,getCorrectTime:tv,getCriticalEvent:Iv,getCurrentStatusMeter:rv,getCurrentValues:lt,getDateTime:ut,getDayDemand:Ut,getDayDemandExport:sv,getDayMaxDemand:jt,getDayMaxDemandExport:fv,getDayProfile:Ev,getDemand:yv,getDeviceId:gt,getDeviceType:Mt,getDisplayParam:Lv,getEnergy:Vt,getEnergyDayPrevious:ft,getEnergyExport:ov,getEnergyExportDayPrevious:Nv,getEventStatus:It,getEvents:kt,getEventsCounters:$t,getExtendedCurrentValues:av,getHalfHourDemand:pt,getHalfHourDemandChannel:gv,getHalfHourDemandExport:Pv,getHalfHourDemandVare:iv,getHalfHourDemandVareExport:Sv,getHalfHourDemandVari:Ov,getHalfHourDemandVariExport:Dv,getHalfHourEnergies:cv,getMagneticFieldThreshold:Vv,getMeterInfo:Xv,getMonthDemand:yt,getMonthDemandExport:Cv,getMonthMaxDemand:zt,getMonthMaxDemandExport:Mv,getOperatorParameters:Wt,getOperatorParametersExtended:vv,getOperatorParametersExtended2:nv,getOperatorParametersExtended3:mv,getOperatorParametersExtended4:Uv,getQuality:Fv,getRatePlanInfo:wt,getSaldo:Kt,getSaldoParameters:Zt,getSeasonProfile:ev,getSpecialDay:_v,getVersion:xt,prepareRatePlan:Ft,resetPowerMaxDay:qt,resetPowerMaxMonth:Jt,runTariffPlan:Rv,setAccessKey:Lt,setCorrectDateTime:uv,setCorrectTime:Yt,setDateTime:dt,setDayProfile:ct,setDisplayParam:dv,setOperatorParameters:Bt,setOperatorParametersExtended:Av,setOperatorParametersExtended2:Tv,setOperatorParametersExtended3:Hv,setOperatorParametersExtended4:pv,setSaldo:bt,setSaldoParameters:Qt,setSeasonProfile:ht,setSpecialDay:mt,setSpecialOperation:lv,turnRelayOff:Gt,turnRelayOn:Xt});cr(Gv);var Yv=3;var Wv=4;var Bv=Ut;var xv=function(r){var a=new ja(r?.energyType?Wv:Yv,false);Rt(a,r?.date);if(r?.energyType){a.setUint8(r.energyType)}return n(Bv,a.data)};var Kv=F;var bv=function(){return n(Kv)};var wv=Iv;var Zv=function(r){return n(wv,[r.event,r.index])};var Qv=1;var jv=2;var zv=3;var kv=4;var $v=17;var qv=18;var Jv=19;var rA=20;var aA=21;var EA=22;var eA=23;var _A=32;var tA=33;var vA=34;var AA=35;var TA=36;var RA=37;var nA=38;var OA=39;var iA=40;var oA=49;var sA=50;var NA=51;var CA=52;var PA=53;var DA=54;var SA=55;var IA=56;var fA=57;var MA=64;var gA=65;var uA=66;var dA=67;var LA=68;var lA=69;var VA=70;var cA=71;var hA=72;var mA=73;var HA=74;var FA=75;var pA=76;var UA=77;var yA=78;var XA=79;var GA=80;var YA=81;var WA=82;var BA=83;var xA=84;var KA=85;var bA=86;var wA=87;var ZA=88;var QA=89;var jA=90;var zA=91;var kA=92;var $A=93;var qA=94;var JA=95;var rT=96;var aT=97;var ET=98;var eT=99;var _T=100;var tT=101;var vT=102;var AT=103;var TT=104;var RT=105;var nT=106;var OT=107;var iT=108;var oT=109;var sT=110;var NT=111;var CT=112;var PT=113;var DT=114;var ST=115;var IT=116;var fT=117;var MT=118;var gT=119;var uT=120;var dT=121;var LT=122;var lT=123;var VT=124;var cT=125;var hT=126;var mT=127;var HT=128;var FT=129;var pT=130;var UT=131;var yT=132;var XT=133;var GT=134;var YT=135;var WT=136;var BT=137;var xT=138;var KT=139;var bT=140;var wT=141;var ZT=142;var QT=143;var jT=144;var zT=145;var kT=147;var $T=148;var qT=149;var JT=150;var rR=151;var aR=152;var ER=153;var eR=154;var _R=155;var tR=156;var vR=157;var AR=158;var TR=159;var RR=160;var nR=161;var OR=162;var iR=163;var oR=164;var sR=165;var NR=166;var CR=167;var PR=168;var DR=169;var SR=170;var IR=171;var fR=172;var MR=173;var gR=174;var uR=175;var dR=176;var LR=177;var lR=178;var VR=179;var cR=186;var hR=224;var mR=225;var HR=226;var FR=227;var pR=228;var UR=229;var yR=230;var XR=231;var GR=232;var YR=Object.freeze({__proto__:null,ACCESS_ERROR:Jv,ACCESS_LOCKED:$v,ACCESS_UNLOCKED:qv,ACCUMULATION_PARAMETERS_EXT_FAULT:GT,ACCUMULATION_PARAMETERS_FAULT:XT,BAD_TEST_EEPROM:FT,BAD_TEST_FRAM:pT,BATTERY_FAULT:RT,BATTERY_OK:TT,BLOCK_TARIFF_FAULT:WT,CALCULATION_PERIOD_FAULT:YT,CALIBRATION_FAULT:OT,CALIBRATION_FLAG_RESET:HT,CALIBRATION_FLAG_SET:mT,CALIBRATION_OK:nT,CALIBRATION_PARAMETERS_FAULT:BT,CASE_CLOSED:aA,CASE_MODULE_CLOSED:_R,CASE_MODULE_OPENED:eR,CASE_OPENED:rA,CASE_TERMINAL_BOX_CLOSED:rR,CASE_TERMINAL_BOX_OPENED:JT,CHANGE_ACCESS_KEY0:_A,CHANGE_ACCESS_KEY1:tA,CHANGE_ACCESS_KEY2:vA,CHANGE_ACCESS_KEY3:AA,CHANGE_COR_TIME:CT,CHANGE_PARAMETERS_LOCAL:TA,CHANGE_PARAMETERS_REMOTE:RA,CHANGE_PARAMETER_CHANNEL1:AR,CHANGE_PARAMETER_CHANNEL2:TR,CHANGE_PARAMETER_CHANNEL3:RR,CHANGE_PARAMETER_CHANNEL4:nR,CHANGE_PARAMETER_CHANNEL5:OR,CHANGE_PARAMETER_CHANNEL6:iR,CHANGE_TARIFF_TABLE:sA,CHANGE_TARIFF_TABLE_2:aR,CHANGE_TARIFF_TABLE_3:ER,CLOCK_FAULT:aT,CLOCK_OK:rT,CMD_RELAY_2_OFF:DT,CMD_RELAY_2_ON:PT,CMD_RELAY_OFF:iA,CMD_RELAY_ON:OA,CMD_SET_DATETIME:nA,COEFFICIENT_TRANSFORMATION_CHANGE:QT,CROSS_ZERO_EN_T1:ST,CROSS_ZERO_EN_T2:IT,CROSS_ZERO_EN_T3:fT,CROSS_ZERO_EN_T4:MT,CROSS_ZERO_EXPORT_EN_T1:oR,CROSS_ZERO_EXPORT_EN_T2:sR,CROSS_ZERO_EXPORT_EN_T3:NR,CROSS_ZERO_EXPORT_EN_T4:CR,CROSS_ZERO_EXPORT_VARE1:fR,CROSS_ZERO_EXPORT_VARE2:MR,CROSS_ZERO_EXPORT_VARE3:gR,CROSS_ZERO_EXPORT_VARE4:uR,CROSS_ZERO_EXPORT_VARI1:PR,CROSS_ZERO_EXPORT_VARI2:DR,CROSS_ZERO_EXPORT_VARI3:SR,CROSS_ZERO_EXPORT_VARI4:IR,CROSS_ZERO_VARE_T1:lT,CROSS_ZERO_VARE_T2:VT,CROSS_ZERO_VARE_T3:cT,CROSS_ZERO_VARE_T4:hT,CROSS_ZERO_VARI_T1:gT,CROSS_ZERO_VARI_T2:uT,CROSS_ZERO_VARI_T3:dT,CROSS_ZERO_VARI_T4:LT,EM_MAGNETIC_INFLUENCE_OFF:LR,EM_MAGNETIC_INFLUENCE_ON:dR,ENERGY_REGISTER_OVERFLOW:oA,ENERGY_T1_FAULT:Qv,ENERGY_T2_FAULT:jv,ENERGY_T3_FAULT:zv,ENERGY_T4_FAULT:kv,F_MAX_OK:pA,F_MAX_OVER:UA,F_MIN_OK:yA,F_MIN_UNDER:XA,IA_MAX_OK:xA,IA_MAX_OVER:KA,IB_MAX_OK:bA,IB_MAX_OVER:wA,IC_MAX_OK:ZA,IC_MAX_OVER:QA,IDIFF_OK:qA,IDIFF_OVER:JA,MAGNETIC_INFLUENCE_OFF:eA,MAGNETIC_INFLUENCE_ON:EA,METER_TROUBLE:qT,OPERATOR_PARAMETERS_EXT_VALUES_FAULT:bT,OPERATOR_PARAMETERS_VALUES_FAULT:KT,O_PARAMETERS_FAULT:NT,O_PARAMETERS_OK:sT,PA_MAX_OK:jA,PA_MAX_OVER:zA,POWER_A_OFF:AT,POWER_A_ON:vT,POWER_B_OFF:tT,POWER_B_ON:_T,POWER_C_OFF:eT,POWER_C_ON:ET,POWER_OVER_RELAY_OFF:vR,PV_MAX_OK:kA,PV_MAX_OVER:$A,P_MAX_A_MINUS_OK:XR,P_MAX_A_MINUS_OVER:GR,RELAY_HARD_BAD_OFF:jT,RELAY_HARD_BAD_ON:kT,RELAY_HARD_OFF:$T,RELAY_HARD_ON:zT,RELAY_OFF:SA,RELAY_OFF_BAD_SALDO:cR,RELAY_ON:DA,RESET_EM_FLAG:lR,RESET_MAGNETIC_FLAG:VR,RESTART:IA,SALDO_ENERGY_FAULT:wT,SALDO_PARAMETERS_FAULT:yT,SET_DEMAND_EN_10_MIN:FR,SET_DEMAND_EN_15_MIN:pR,SET_DEMAND_EN_1_MIN:hR,SET_DEMAND_EN_30_MIN:UR,SET_DEMAND_EN_3_MIN:mR,SET_DEMAND_EN_5_MIN:HR,SET_DEMAND_EN_60_MIN:yR,SET_NEW_SALDO:UT,SET_SALDO_PARAM:tR,SET_TARIFF_TABLE:NA,SUMMER_TIME:CA,TIME_CORRECT:ZT,T_MAX_OK:GA,T_MAX_OVER:YA,T_MIN_OK:WA,T_MIN_UNDER:BA,VA_MAX_OK:MA,VA_MAX_OVER:gA,VA_MIN_OK:uA,VA_MIN_UNDER:dA,VB_MAX_OK:LA,VB_MAX_OVER:lA,VB_MIN_OK:VA,VB_MIN_UNDER:cA,VC_MAX_OK:hA,VC_MAX_OVER:mA,VC_MIN_OK:HA,VC_MIN_UNDER:FA,V_PARAMETERS_FAULT:oT,V_PARAMETERS_OK:iT,WATCHDOG_RESTART:fA,WINTER_SUMMER_FAULT:xT,WINTER_TIME:PA});cr(YR);var WR=1;var BR=2;var xR=3;var KR=4;var bR=5;var wR=6;var ZR=7;var QR=8;var jR=9;var zR=10;var kR=11;var $R=12;var qR=13;var JR=14;var rn=15;var an=16;var En=17;var en=18;var _n=19;var tn=20;var vn=21;var An=22;var Tn=23;var Rn=24;var nn=25;var On=26;var on=27;var sn=28;var Nn=29;var Cn=30;var Pn=31;var Dn=32;var Sn=33;var In=34;var fn=35;var Mn=36;var gn=37;var un=38;var dn=39;var Ln=40;var ln=41;var Vn=42;var cn=43;var hn=44;var mn=45;var Hn=46;var Fn=47;var pn=48;var Un=49;var yn=50;var Xn=51;var Gn=52;var Yn=53;var Wn=54;var Bn=55;var xn=56;var Kn=57;var bn=58;var wn=59;var Zn=60;var Qn=61;var jn=62;var zn=63;var kn=64;var $n=65;var qn=66;var Jn=67;var rO=68;var aO=69;var EO=70;var eO=71;var _O=72;var tO=73;var vO=74;var AO=75;var TO=76;var RO=77;var nO=78;var OO=79;var iO=80;var oO=81;var sO=82;var NO=83;var CO=84;var PO=85;var DO=86;var SO=87;var IO=88;var fO=89;var MO=90;var gO=91;var uO=92;var dO=93;var LO=94;var lO=95;var VO=96;var cO=97;var hO=98;var mO=99;var HO=100;var FO=101;var pO=102;var UO=103;var yO=104;var XO=105;var GO=106;var YO=107;var WO=108;var BO=109;var xO=110;var KO=111;var bO=112;var wO=113;var ZO=114;var QO=115;var jO=116;var zO=117;var kO=118;var $O=119;var qO=120;var JO=121;var ri=122;var ai=123;var Ei=124;var ei=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:KR,ACTIVE_ENERGY_T2:bR,ACTIVE_ENERGY_T3:wR,ACTIVE_ENERGY_T4:ZR,ACTIVE_POWER_PHASE_A:cn,ACTIVE_POWER_PHASE_B:hn,ACTIVE_POWER_PHASE_C:mn,APPARENT_POWER_QMINUS_PHASE_A:zn,APPARENT_POWER_QMINUS_PHASE_B:kn,APPARENT_POWER_QMINUS_PHASE_C:$n,APPARENT_POWER_QPLUS_PHASE_A:wn,APPARENT_POWER_QPLUS_PHASE_B:Zn,APPARENT_POWER_QPLUS_PHASE_C:Qn,BATTERY_VOLTAGE:Ln,CURRENT_BALANCE:kO,CURRENT_IN_NEUTRAL:Mn,CURRENT_IN_PHASE_A:Sn,CURRENT_IN_PHASE_B:In,CURRENT_IN_PHASE_C:fn,CURRENT_TRANSFORMATION_RATIO:jO,DATE_MONTH_YEAR:QO,EXPORTED_ACTIVE_ENERGY_T1:_n,EXPORTED_ACTIVE_ENERGY_T2:tn,EXPORTED_ACTIVE_ENERGY_T3:vn,EXPORTED_ACTIVE_ENERGY_T4:An,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:Nn,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:Cn,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:Pn,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:Dn,EXPORTED_REACTIVE_ENERGY_T1:Rn,EXPORTED_REACTIVE_ENERGY_T2:nn,EXPORTED_REACTIVE_ENERGY_T3:On,EXPORTED_REACTIVE_ENERGY_T4:on,HOUR_MINUTE_SECOND:ZO,MAGNET_INDUCTION:Ei,MAX_ACTIVE_POWER_DAY_T1:qn,MAX_ACTIVE_POWER_DAY_T2:Jn,MAX_ACTIVE_POWER_DAY_T3:rO,MAX_ACTIVE_POWER_DAY_T4:aO,MAX_ACTIVE_POWER_MONTH_T1:EO,MAX_ACTIVE_POWER_MONTH_T2:eO,MAX_ACTIVE_POWER_MONTH_T3:_O,MAX_ACTIVE_POWER_MONTH_T4:tO,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:MO,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:gO,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:uO,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:dO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:LO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:lO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:VO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:cO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:GO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:YO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:WO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:BO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:xO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:KO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:bO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:wO,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:hO,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:mO,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:HO,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:FO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:pO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:UO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:yO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:XO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:sO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:NO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:CO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:PO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:DO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:SO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:IO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:fO,MAX_REACTIVE_POWER_DAY_T1:vO,MAX_REACTIVE_POWER_DAY_T2:AO,MAX_REACTIVE_POWER_DAY_T3:TO,MAX_REACTIVE_POWER_DAY_T4:RO,MAX_REACTIVE_POWER_MONTH_T1:nO,MAX_REACTIVE_POWER_MONTH_T2:OO,MAX_REACTIVE_POWER_MONTH_T3:iO,MAX_REACTIVE_POWER_MONTH_T4:oO,NEGATIVE_REACTIVE_ENERGY_T1:JR,NEGATIVE_REACTIVE_ENERGY_T2:rn,NEGATIVE_REACTIVE_ENERGY_T3:an,NEGATIVE_REACTIVE_ENERGY_T4:En,OPTOPORT_SPEED:ai,POWER_FACTOR_PHASE_A:Bn,POWER_FACTOR_PHASE_B:xn,POWER_FACTOR_PHASE_C:Kn,POWER_THRESHOLD_T1:$O,POWER_THRESHOLD_T2:qO,POWER_THRESHOLD_T3:JO,POWER_THRESHOLD_T4:ri,REACTIVE_ENERGY_T1:jR,REACTIVE_ENERGY_T2:zR,REACTIVE_ENERGY_T3:kR,REACTIVE_ENERGY_T4:$R,REACTIVE_POWER_QMINUS_PHASE_A:Xn,REACTIVE_POWER_QMINUS_PHASE_B:Gn,REACTIVE_POWER_QMINUS_PHASE_C:Yn,REACTIVE_POWER_QPLUS_PHASE_A:Fn,REACTIVE_POWER_QPLUS_PHASE_B:pn,REACTIVE_POWER_QPLUS_PHASE_C:Un,SET_ALL_SEGMENT_DISPLAY:WR,SOFTWARE_VERSION:BR,SUPPLY_FREQUENCY:ln,TOTAL_ACTIVE_ENERGY:xR,TOTAL_ACTIVE_POWER:Vn,TOTAL_APPARENT_POWER_QMINUS:jn,TOTAL_APPARENT_POWER_QPLUS:bn,TOTAL_EXPORTED_ACTIVE_ENERGY:en,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:sn,TOTAL_EXPORTED_REACTIVE_ENERGY:Tn,TOTAL_NEGATIVE_REACTIVE_ENERGY:qR,TOTAL_POWER_FACTOR:Wn,TOTAL_REACTIVE_ENERGY:QR,TOTAL_REACTIVE_POWER_QMINUS:yn,TOTAL_REACTIVE_POWER_QPLUS:Hn,VOLTAGE_IN_PHASE_A:gn,VOLTAGE_IN_PHASE_B:un,VOLTAGE_IN_PHASE_C:dn,VOLTAGE_TRANSFORMATION_RATIO:zO});cr(ei);var _i=120;var ti=254;var vi=255;var Ai=Object.freeze({__proto__:null,activateRatePlan:Ht,errorDataFrameResponse:vi,errorResponse:ti,getBv:hv,getCorrectTime:tv,getCriticalEvent:Iv,getCurrentStatusMeter:rv,getCurrentValues:lt,getDateTime:ut,getDayDemand:Ut,getDayDemandExport:sv,getDayEnergies:_i,getDayMaxDemand:jt,getDayMaxDemandExport:fv,getDayProfile:Ev,getDemand:yv,getDeviceId:gt,getDeviceType:Mt,getDisplayParam:Lv,getEnergy:Vt,getEnergyDayPrevious:ft,getEnergyExport:ov,getEnergyExportDayPrevious:Nv,getEventStatus:It,getEvents:kt,getEventsCounters:$t,getExtendedCurrentValues:av,getHalfHourDemand:pt,getHalfHourDemandChannel:gv,getHalfHourDemandExport:Pv,getHalfHourDemandVare:iv,getHalfHourDemandVareExport:Sv,getHalfHourDemandVari:Ov,getHalfHourDemandVariExport:Dv,getHalfHourEnergies:cv,getMagneticFieldThreshold:Vv,getMeterInfo:Xv,getMonthDemand:yt,getMonthDemandExport:Cv,getMonthMaxDemand:zt,getMonthMaxDemandExport:Mv,getOperatorParameters:Wt,getOperatorParametersExtended:vv,getOperatorParametersExtended2:nv,getOperatorParametersExtended3:mv,getOperatorParametersExtended4:Uv,getQuality:Fv,getRatePlanInfo:wt,getSaldo:Kt,getSaldoParameters:Zt,getSeasonProfile:ev,getSpecialDay:_v,getVersion:xt,prepareRatePlan:Ft,resetPowerMaxDay:qt,resetPowerMaxMonth:Jt,runTariffPlan:Rv,setAccessKey:Lt,setCorrectDateTime:uv,setCorrectTime:Yt,setDateTime:dt,setDayProfile:ct,setDisplayParam:dv,setOperatorParameters:Bt,setOperatorParametersExtended:Av,setOperatorParametersExtended2:Tv,setOperatorParametersExtended3:Hv,setOperatorParametersExtended4:pv,setSaldo:bt,setSaldoParameters:Qt,setSeasonProfile:ht,setSpecialDay:mt,setSpecialOperation:lv,turnRelayOff:Gt,turnRelayOn:Xt});cr(Ai);var Ti=2400;var Ri=9600;var ni={rs485orTwi:{0:Ri,2:Ti,4:Ri},optoport:{0:Ri,2:Ti,4:Ri}};({rs485orTwi:cr(ni.rs485orTwi),optoport:cr(ni.optoport)});var Oi=function(r,a){var E=a.date.year<<1|a.date.month>>3&1;var e=a.date.month<<5&224|a.date.date&31;r.setUint8(E);r.setUint8(e);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var ii=yv;var oi=7;var si=function(r){var a=new ja(oi,false);Oi(a,r);return n(ii,a.data)};var Ni=145;var Ci=30;var Pi=function(r){var a=[Ci,r.length+2,0,Ni].concat(t(r));return[].concat(t(a),[Ra(a)])};var Di;var Si=(Di={},E(E(E(E(E(E(E(E(E(E(Di,Na,Ca),Pa,Da),Sa,Ia),fa,Ma),ga,ua),nt,it),Nt,Ct),Pt,St),Bv,xv),Kv,bv),E(E(Di,wv,Zv),ii,si));toBytes=sa(Si);getBase64FromBytes=R;setDataSegment=Pi})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var bytes = toBytes(msg.commands);

// send nothing if not fit in a single data segment
if ( bytes.length > MAX_DATA_SEGMENT_SIZE ) {
    bytes = [];
} else {
    bytes = setDataSegment(bytes);
}

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(bytes)
};

return result;
