// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// encoded message should be less than this size
// to be able to send to a device
var MAX_DATA_SEGMENT_SIZE = 50;


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,setDataSegment,getBase64FromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function a(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,i,n,s,E=[],_=!0,o=!1;try{if(n=(r=r.call(t)).next,0===e);else for(;!(_=(a=n.call(r)).done)&&(E.push(a.value),E.length!==e);_=!0);}catch(t){o=!0,i=t}finally{try{if(!_&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(o)throw i}}return E}}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(t,r){return e(t)||i(t,r)||o(t,r)||n()}function _(t){return r(t)||a(t)||o(t)||s()}function o(e,r){if(e){if("string"==typeof e)return t(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):void 0}}var v={separator:" ",prefix:""};var h=1;var A=2;var T=3;var R=4;var u=Math.log,f=Math.pow,O=Math.LN2;var U=function(t,e,r,a,i){var n,s,E=i*8-a-1,_=(1<<E)-1,o=_>>1,v=-7,h=r?i-1:0,A=r?-1:1,T=t[e+h];h+=A;n=T&(1<<-v)-1;T>>=-v;v+=E;for(;v>0;n=n*256+t[e+h],h+=A,v-=8);s=n&(1<<-v)-1;n>>=-v;v+=a;for(;v>0;s=s*256+t[e+h],h+=A,v-=8);if(n===0){n=1-o}else if(n===_){return s?NaN:T?-Infinity:Infinity}else{s=s+f(2,a);n=n-o}return(T?-1:1)*s*f(2,n-a)};var g=function(t,e,r,a,i,n){var s,E,_,o=n*8-i-1,v=(1<<o)-1,h=v>>1,A=i===23?f(2,-24)-f(2,-77):0,T=a?0:n-1,R=a?1:-1,U=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){E=r!==r?1:0;s=v}else{s=u(r)/O|0;if(r*(_=f(2,-s))<1){s--;_*=2}if(s+h>=1){r+=A/_}else{r+=A*f(2,1-h)}if(r*_>=2){s++;_/=2}if(s+h>=v){E=0;s=v}else if(s+h>=1){E=(r*_-1)*f(2,i);s=s+h}else{E=r*f(2,h-1)*f(2,i);s=0}}for(;i>=8;t[e+T]=E&255,T+=R,E/=256,i-=8);s=s<<i|E;o+=i;for(;o>0;t[e+T]=s&255,T+=R,s/=256,o-=8);t[e+T-R]|=U*128};var d=[1,0];var l=[2,1,0];var p=[3,2,1,0];var c=[0,1];var P=[0,1,2];var N=[0,1,2,3];var I=function(t,e){return t[e]};var M=function(t,e,r){var a=r?c:d;var i=t[e+a[0]];var n=t[e+a[1]]<<8;return i|n};var S=function(t,e,r){var a=r?P:l;var i=t[e+a[0]];var n=t[e+a[1]]<<8;var s=t[e+a[2]]<<16;return i|n|s};var C=function(t,e,r){var a=r?N:p;var i=t[e+a[3]]*16777216;var n=t[e+a[2]]*65536;var s=t[e+a[1]]*256;var E=t[e+a[0]];return i+n+s+E};var y=function(t,e,r){t[e]=r&255};var D=function(t,e,r,a){var i=a?c:d;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255};var m=function(t,e,r,a){var i=a?P:l;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255};var L=function(t,e,r,a){var i=a?N:p;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255;t[e+i[3]]=r>>>24&255};function F(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}F.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){y(this.data,this.offset,t<0?t|256:t);this.offset+=h},getInt8:function(){var t=I(this.data,this.offset);this.offset+=h;return t&128?t^-256:t},setUint8:function(t){y(this.data,this.offset,t);this.offset+=h},getUint8:function(){var t=I(this.data,this.offset);this.offset+=h;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;D(this.data,this.offset,t<0?t|65536:t,e);this.offset+=A},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=M(this.data,this.offset,t);this.offset+=A;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;D(this.data,this.offset,t,e);this.offset+=A},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=M(this.data,this.offset,t);this.offset+=A;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=T},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=S(this.data,this.offset,t);this.offset+=T;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t,e);this.offset+=T},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=S(this.data,this.offset,t);this.offset+=T;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=R},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=C(this.data,this.offset,t);this.offset+=R;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t,e);this.offset+=R},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=C(this.data,this.offset,t);this.offset+=R;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;g(this.data,this.offset,t,e,23,4);this.offset+=R},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=U(this.data,this.offset,t,23,4);this.offset+=R;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(_(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(F.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var V=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var a in e){if(a in t&&e[a]){r|=t[a]}}return r};var Y=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var a in t){r[a]=(e&t[a])!==0}return r};var x=function(t,e,r){return(1<<e)-1&t>>r-1};var H=function(t,e,r,a){var i=(1<<e)-1<<r-1;var n=a;var s=t;s&=~i;n<<=r-1;s|=n;return s};var G=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map((function(t){return t.padStart(2,"0")})).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var a=new Array(r);for(var i=0;i<r;i++){a[i]=parseInt(e.substring(i*2,i*2+2),16)}return a};var X="x";var w=[".","1","3","R","M"];var W=[".","A","G","R","T","D"];var B=[".","0","1","2","3","4","5"];var K=[".","A","B","C","D","E","F"];var b=[".","A","B","C","D","E","F","H","K","G"];var Z=[".","1","2","3","4"];var Q=[".","L","M","Z","K"];var j=[".","0","1","2","3","4","5","6","7","8","9"];var z=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var k=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var q=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var $=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var J=function(t){return[t>>4,t&15]};var tt=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var a=J(t),i=E(a,2),n=i[0],s=i[1];e[r*2]=n;e[r*2+1]=s}));return e};var et=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return G(e.join(""))};var rt=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(w[t[0]]??X);e.push(W[t[1]]??X);e.push(B[t[2]]??X);e.push(B[t[3]]??X);e.push(".");e.push(K[t[4]]??X);e.push(b[t[5]]??X);e.push(".");e.push(Z[t[6]]??X);e.push(Q[t[7]]??X);var r=t[8];e.push(j[t[9]]??X);e.push("-");var a;if(t.length<14||t[12]===0&&t[13]===0){e.push(z[t[10]]??X);a=11}else if(t[13]===0){e.push(z[t[10]]??X);e.push(z[t[11]]??X);a=12}else{e.push(z[t[10]]??X);e.push(z[t[11]]??X);e.push(z[t[12]]??X);a=13}var i=t[a];if(i&&i!==0){e.push(q[i]??X)}return{type:e.join(""),revision:r,meterType:0}};var at=function(t,e,r){var a=[];if(t.length<11){throw new Error("Wrong format")}a.push(w.indexOf(t[0]));a.push(W.indexOf(t[1]));a.push(B.indexOf(t[2]));a.push(B.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}a.push(K.indexOf(t[5]));a.push(b.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}a.push(Z.indexOf(t[8]));a.push(Q.indexOf(t[9]));a.push(r??0);a.push(j.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var i=t.length>13?t.length-1:t.length;for(var n=12;n<i;n++){a.push(z.indexOf(t[n]))}if(i<t.length){a.push(q.indexOf(t[i]))}var s=et(a);var E=new Array(9).fill(0);E[0]=0;for(var _=0;_<s.length;_++){E[_+(s.length<8?1:0)]=s[_]}return E};var it=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(w[t[0]]??X);e.push(W[t[1]]??X);e.push(r);for(var a=2;a<t.length;a++){if(t[a]!==0){e.push(k[t[a]]??X)}}return{type:e.join(""),meterType:0}};var nt=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(w.indexOf(t[0]));e.push(W.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(k.indexOf(t[r]))}var a=et(e);if(a.length===8){return a}if(a.length>8){throw new Error("Wrong format")}var i=new Array(8).fill(0);for(var n=0;n<a.length;n++){i[n]=a[n]}return i};var st=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(w[t[0]]??X);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push($[t[r]]??X)}}return{type:e.join(""),meterType:0}};var Et=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(w.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push($.indexOf(t[r]))}var a=et(e);var i=new Array(8).fill(0);for(var n=0;n<a.length&&n<8;n++){i[n]=a[n]}return i};var _t=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var a=r.indexOf(t[0])!==-1?2:0;var i=tt(t.slice(0,8));var n=i[a];var s=w[n];if(s==="1"||s==="3"){e=rt(i.slice(a))}else{e=s==="M"?st(i):it(i)}e.meterType=t[8];return e};var ot=function(t,e){var r=t.type,a=t.revision,i=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var n;var s=r.substring(4);var E=r[4];if(E==="1"||E==="3"){n=at(s,e,a)}else{n=E==="M"?Et(s):nt(s)}n[8]=i;return n};var vt=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},v,e),a=r.separator,i=r.prefix;return t.map((function(t){return"".concat(i).concat(t.toString(16).padStart(2,"0"))})).join(a)};var ht=80;var At=81;var Tt=82;var Rt=83;var ut=84;var ft=85;var Ot=86;var Ut=87;var gt=88;var dt=89;var lt=90;var pt=91;var ct=255;var Pt=Object.freeze({__proto__:null,DATA_REQUEST:ht,DATA_RESPONSE:At,FRAGMENT_REQUEST:lt,FRAGMENT_RESPONSE:pt,IDENT_REQUEST:Tt,IDENT_RESPONSE:Rt,INVALID:ct,L2_CHECK_ADDRESS_REQUEST:Ot,L2_CHECK_ADDRESS_RESPONSE:Ut,L2_RM_ADDRESS_REQUEST:gt,L2_RM_ADDRESS_RESPONSE:dt,L2_SET_ADDRESS_REQUEST:ut,L2_SET_ADDRESS_RESPONSE:ft});var Nt=function(t){var e={};for(var r in t){var a=t[r];e[a]=r}return e};var It=Nt(Pt);var Mt=1;var St=2;var Ct=3;var yt=16;var Dt=17;var mt=18;var Lt=19;var Ft=20;var Vt=21;var Yt=32;var xt=33;var Ht=34;var Gt=35;var Xt=36;var wt=37;var Wt=38;var Bt=39;var Kt=40;var bt=41;var Zt=49;var Qt=50;var jt=51;var zt=52;var kt=53;var qt=54;var $t=55;var Jt=56;var te=57;var ee=64;var re=65;var ae=66;var ie=67;var ne=68;var se=69;var Ee=70;var _e=71;var oe=72;var ve=73;var he=74;var Ae=75;var Te=76;var Re=77;var ue=78;var fe=79;var Oe=80;var Ue=81;var ge=82;var de=83;var le=84;var pe=85;var ce=86;var Pe=87;var Ne=88;var Ie=89;var Me=96;var Se=97;var Ce=98;var ye=99;var De=100;var me=101;var Le=102;var Fe=103;var Ve=104;var Ye=105;var xe=112;var He=113;var Ge=114;var Xe=115;var we=116;var We=117;var Be=118;var Ke=119;var be=120;var Ze=121;var Qe=122;var je=123;var ze=124;var ke=125;var qe=144;var $e=145;var Je=147;var tr=148;var er=156;var rr=157;var ar=158;var ir=159;var nr=160;var sr=161;var Er=162;var _r=176;var or=177;var vr=178;var hr=179;var Ar=180;var Tr=181;var Rr=182;var ur=183;var fr=208;var Or=224;var Ur=225;var gr=226;var dr=227;var lr=228;var pr=229;var cr=230;var Pr=Object.freeze({__proto__:null,ACCESS_CLOSED:yt,ACCPARAM_BAD:Ge,ACCPARAM_EXT_BAD:Xe,BAD_TEST_EEPROM:Ve,BAD_TEST_FRAM:Ye,BAT_FAULT:de,BAT_OK:ge,BIPOLAR_POWER_FAULT:Ar,BIPOLAR_POWER_OK:Tr,BLOCK_TARIFF_BAD:We,CALC_PERIOD_BAD:we,CALFLAG_RESET:Fe,CALFLAG_SET:Le,CALIBR_PARAM_BAD:Be,CAL_FAULT:pe,CAL_OK:le,CASE_CLOSE:Lt,CASE_MODULE_CLOSE:ke,CASE_MODULE_OPEN:ze,CASE_OPEN:mt,CASE_TERMINAL_CLOSE:je,CASE_TERMINAL_OPEN:Qe,CHANGE_ACCESS_KEY0:Yt,CHANGE_ACCESS_KEY1:xt,CHANGE_ACCESS_KEY2:Ht,CHANGE_ACCESS_KEY3:Gt,CHANGE_COR_TIME:bt,CHANGE_PAR_LOCAL:Xt,CHANGE_PAR_REMOTE:wt,CHANGE_TARIFF_TBL:Qt,CLOCK_FAULT:Pe,CLOCK_OK:ce,CMD_CHANGE_TIME:Wt,CMD_RELAY_2_OFF:Se,CMD_RELAY_2_ON:Me,CMD_RELAY_OFF:Kt,CMD_RELAY_ON:Bt,CROSSZERO_ENT0:Ce,CROSSZERO_ENT1:ye,CROSSZERO_ENT2:De,CROSSZERO_ENT3:me,CROSSZERO_EXP_ENT0:ar,CROSSZERO_EXP_ENT1:ir,CROSSZERO_EXP_ENT2:nr,CROSSZERO_EXP_ENT3:sr,CURRENT_UNEQUIL_FAULT:vr,CURRENT_UNEQUIL_OK:hr,EM_MAGNETIC_OFF:or,EM_MAGNETIC_ON:_r,ENERGY_REG_FAULT:Mt,ENERGY_REG_OVERFLOW:Zt,ERR_ACCESS:Dt,F_MAX_OK:oe,F_MAX_OVER:ve,F_MIN_OK:he,F_MIN_OVER:Ae,I_MAX_OK:Te,I_MAX_OVER:Re,MAGNETIC_OFF:Vt,MAGNETIC_ON:Ft,NVRAM_FAULT:fr,OP_PAR_FAULT:Ct,POWERSALDO_OK:Oe,POWERSALDO_OVER:Ue,POWER_A_OFF:Ne,POWER_A_ON:Ie,POWER_OVER_RELAY_OFF:rr,P_MAX_OK:ue,P_MAX_OVER:fe,RELAY_HARD_BAD_OFF:qe,RELAY_HARD_BAD_ON:Je,RELAY_HARD_OFF:tr,RELAY_HARD_ON:$e,RELAY_OFF:$t,RELAY_ON:qt,RESET_EM_FLAG:Rr,RESET_MAGN_FLAG:ur,RESTART:Jt,SALDO_EN_BAD:be,SALDO_PARAM_BAD:He,SET_DEMAND_EN_10MIN:dr,SET_DEMAND_EN_15MIN:lr,SET_DEMAND_EN_1MIN:Or,SET_DEMAND_EN_30MIN:pr,SET_DEMAND_EN_3MIN:Ur,SET_DEMAND_EN_5MIN:gr,SET_DEMAND_EN_60MIN:cr,SET_NEW_SALDO:xe,SET_SALDO_PARAM:er,SET_TARIFF_TBL:jt,SUMMER_TIME:zt,TIME_CORRECT:Ze,TIME_CORRECT_NEW:Er,T_MAX_OK:ne,T_MAX_OVER:se,T_MIN_OK:Ee,T_MIN_OVER:_e,VENDOR_PAR_FAULT:St,V_MAX_OK:ee,V_MAX_OVER:re,V_MIN_OK:ae,V_MIN_OVER:ie,WD_RESTART:te,WINTER_SUMMER_BAD:Ke,WINTER_TIME:kt});var Nr=Nt(Pr);var Ir={type:ht,destination:65535,source:65534};var Mr=11;var Sr=7;var Cr=2+Sr;var yr=4;var Dr={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var mr={...Dr,AUTO_SCREEN_SCROLLING:2147483648};var Lr={...Dr,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Fr={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var Vr={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Yr={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var xr={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var Hr={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var Gr={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Xr={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var wr={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Wr={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var Br={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var Kr={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var br={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Zr={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function Qr(t,e,r){var a=r>>yr;var i=new Array(yr).fill(0);i.forEach((function(e,r){var n=!!x(a,1,r+1);if(n){i[r]=t.getUint32()}else{i[r]=null}}));return i}function jr(t,e,r){var a=1+yr;var i=e;r.forEach((function(t,e){i=H(i,1,e+a,Number(!!t))}));t.setUint8(i)}function zr(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function kr(t,e){var r=e.tariff,a=e.energy;if(r!==undefined&&a!==undefined){t.setUint16(r<<14|a&16383)}else{t.setUint16(65535)}}function qr(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;F.call(this,t,e)}qr.prototype=Object.create(F.prototype);qr.prototype.constructor=qr;qr.getDayProfileFromByte=function(t){return{tariff:x(t,2,1),isFirstHalfHour:!x(t,1,3),hour:x(t,5,4)}};qr.getByteFromDayProfile=function(t){var e=0;e=H(e,2,1,t.tariff);e=H(e,1,3,+!t.isFirstHalfHour);e=H(e,5,4,t.hour);return e};qr.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};qr.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:Y(mr,2147496324),relaySet4:Y(xr,0),relaySet3:Y(Yr,0),relaySet2:Y(Vr,3),relaySet1:Y(Fr,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:Y(Gr,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:Y(Lr,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:Y(Hr,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};qr.prototype.getFrameHeader=function(){var t=this.getUint8();var e=It[t];var r=this.getUint16();var a=this.getUint16();return{type:t,typeName:e,destination:r,source:a}};qr.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?Ir.type:e,a=t.destination,i=a===void 0?Ir.destination:a,n=t.source,s=n===void 0?Ir.source:n;this.setUint8(r);this.setUint16(i);this.setUint16(s)};qr.prototype.getDeviceId=function(){var t=vt(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var a=vt(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:a}};qr.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,a=t.year,i=t.serial;this.setBytes(G(e));this.setUint8(r);this.setUint8(a);this.setBytes(G(i))};qr.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};qr.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};qr.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};qr.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};qr.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};qr.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};qr.prototype.getDayProfile=function(){return qr.getDayProfileFromByte(this.getUint8())};qr.prototype.setDayProfile=function(t){this.setUint8(qr.getByteFromDayProfile(t))};qr.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(Sr).fill(0).map((function(){return t.getUint8()}))}};qr.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};qr.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};qr.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};qr.prototype.getDeviceType=function(){return _t(this.getBytes(9))};qr.prototype.setDeviceType=function(t){this.setBytes(ot(t))};qr.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:Y(mr,this.getUint32()),relaySet4:Y(xr,this.getUint8()),relaySet3:Y(Yr,this.getUint8()),relaySet2:Y(Vr,this.getUint8()),relaySet1:Y(Fr,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:Y(Gr,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:Y(Lr,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:Y(Hr,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};qr.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(V(mr,t.displaySet));this.setUint8(V(xr,t.relaySet4));this.setUint8(V(Yr,t.relaySet3));this.setUint8(V(Vr,t.relaySet2));this.setUint8(V(Fr,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(V(Gr,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(V(Lr,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(V(Hr,t.relaySet5));this.setUint8(e)};qr.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=x(t,yr,1);var r=Qr(this,e,t);return{energyType:e,energies:r}};qr.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,a=t.energies;if(r){jr(this,r,a)}a.forEach((function(t){if(t!==null){e.setUint32(t)}}))};qr.prototype.getEnergies=function(){var t=this;return new Array(yr).fill(0).map((function(){return t.getInt32()}))};qr.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};qr.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};qr.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};qr.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};qr.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};qr.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return zr(t)}))};qr.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return kr(e,t)}))};qr.prototype.getEventStatus=function(){var t=this.getUint16();return Y(Xr,t)};qr.prototype.setEventStatus=function(t){this.setUint16(V(Xr,t))};qr.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=Y(wr,this.getUint8());var r=Y(Wr,this.getUint8());var a=Y(Br,this.getUint8());var i=Y(Kr,this.getUint8());var n=Y(br,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:a,status2:i,status3:n}};qr.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,a=t.relayStatus2,i=t.status1,n=t.status2,s=t.status3;this.setUint16(e);this.setUint8(V(wr,r));this.setUint8(V(Wr,a));this.setUint8(V(Br,i));this.setUint8(V(Kr,n));this.setUint8(V(br,s))};qr.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Nr[e];switch(e){case rr:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case Wt:case Ze:if(r<8){return t}t.newDate=this.getDateTime();break}return t};qr.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case rr:for(var e of t.power){this.setUint8(e)}break;case Wt:case Ze:this.setDateTime(t.newDate);break}};qr.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};qr.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};qr.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(yr).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};qr.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};qr.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:Y(Zr,this.getUint8())}};qr.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,a=t.pmaxMinusThreshold2,i=t.pmaxMinusThreshold3,n=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(a);this.setUint32(i);this.setUint8(V(Zr,n))};qr.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(yr).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};qr.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var $r=function(t){return btoa(t.map((function(t){return String.fromCharCode(t)})).join(""))};var Jr=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[t,e.length].concat(_(e))};var ta=0;var ea=3;var ra=1;var aa=3;var ia=4;var na=5;var sa=7;var Ea=8;var _a=9;var oa=13;var va=15;var ha=16;var Aa=17;var Ta=18;var Ra=19;var ua=20;var fa=21;var Oa=22;var Ua=23;var ga=24;var da=25;var la=28;var pa=30;var ca=31;var Pa=40;var Na=41;var Ia=42;var Ma=44;var Sa=45;var Ca=46;var ya=47;var Da=49;var ma=50;var La=51;var Fa=52;var Va=53;var Ya=54;var xa=57;var Ha=58;var Ga=59;var Xa=60;var wa=61;var Wa=62;var Ba=65;var Ka=70;var ba=74;var Za=75;var Qa=79;var ja=80;var za=82;var ka=83;var qa=88;var $a=89;var Ja=91;var ti=92;var ei=93;var ri=94;var ai=100;var ii=109;var ni=111;var si=112;var Ei=113;var _i=114;var oi=118;var vi=122;var hi=Object.freeze({__proto__:null,activateRatePlan:Ra,getBuildVersion:si,getCorrectTime:Wa,getCriticalEvent:Ba,getCurrentStatusMeter:xa,getCurrentValues:oa,getDateTime:sa,getDayDemand:Oa,getDayDemandExport:Qa,getDayMaxDemand:Da,getDayMaxDemandExport:qa,getDayMaxDemandPrevious:ba,getDayProfile:Ga,getDemand:oi,getDeviceId:na,getDeviceType:ia,getDisplayParam:ri,getEnergy:va,getEnergyDayPrevious:aa,getEnergyExport:Ja,getEnergyExportDayPrevious:ja,getEventStatus:ra,getEvents:La,getEventsCounters:Fa,getExtendedCurrentValues:Ha,getExtendedCurrentValues2:Sa,getHalfHourDemand:fa,getHalfHourDemandExport:ka,getHalfHourDemandPrevious:Za,getHalfhoursEnergies:ni,getMagneticFieldThreshold:ii,getMeterInfo:vi,getMonthDemand:Ua,getMonthDemandExport:za,getMonthMaxDemand:ma,getMonthMaxDemandExport:$a,getOperatorParameters:pa,getOperatorParametersExtended3:Ei,getRatePlanInfo:Ma,getSaldo:Na,getSaldoParameters:Ca,getSeasonProfile:Xa,getSpecialDay:wa,getVersion:Pa,prepareRatePlan:ua,resetPowerMaxDay:Va,resetPowerMaxMonth:Ya,runTariffPlan:Ka,setAccessKey:_a,setCorrectDateTime:ti,setCorrectTime:la,setDateTime:Ea,setDayProfile:ha,setDisplayParam:ei,setOperatorParameters:ca,setOperatorParametersExtended3:_i,setSaldo:Ia,setSaldoParameters:ya,setSeasonProfile:Aa,setSpecialDay:Ta,setSpecialOperation:ai,turnRelayOff:da,turnRelayOn:ga});Nt(hi);var Ai=Ra;var Ti=1+Mr;var Ri=function(t){var e=new qr(Ti);e.setUint8(t.tariffTable);e.setTariffPlan(t.tariffPlan);return Jr(Ai,e.data)};var ui=si;var fi=function(){return Jr(ui)};var Oi=Wa;var Ui=function(){return Jr(Oi)};var gi=0;var di=1;var li=2;var pi=3;var ci=4;var Pi=5;var Ni=6;var Ii=7;var Mi=8;var Si=9;var Ci=10;var yi=11;var Di=12;var mi=13;var Li=14;var Fi=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Ci,CASE_OPEN:gi,CASE_TERMINAL_OPEN:Si,DEVICE_FAILURE:Mi,ERROR_ACCESS:Pi,MAGNETIC_ON:di,PARAMETERS_UPDATE_LOCAL:pi,PARAMETERS_UPDATE_REMOTE:li,PROTECTION_RESET_EM:mi,PROTECTION_RESET_MAGNETIC:Li,RESTART:ci,TARIFF_TABLE_GET:Di,TARIFF_TABLE_SET:yi,TIME_CORRECT:Ii,TIME_SET:Ni});Nt(Fi);var Vi=xa;var Yi=function(){return Jr(Vi)};var xi=oa;var Hi=function(){return Jr(xi)};var Gi=sa;var Xi=function(){return Jr(Gi)};var wi=Da;var Wi=3;var Bi=function(t){var e=new qr(Wi);e.setDate(t.date);return Jr(wi,e.data)};var Ki=qa;var bi=3;var Zi=function(t){var e=new qr(bi);e.setDate(t.date);return Jr(Ki,e.data)};var Qi=Ga;var ji=3;var zi=function(t){var e=new qr(ji);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(Qi,e.data)};var ki=na;var qi=function(){return Jr(ki)};var $i=ia;var Ji=function(){return Jr($i)};var tn=La;var en=4;var rn=function(t){var e=new qr(en);e.setDate(t.date);e.setUint8(t.offset);return Jr(tn,e.data)};var an=Fa;var nn=function(){return Jr(an)};var sn=ra;var En=function(){return Jr(sn)};var _n=Ha;var on=function(){return Jr(_n)};var vn=fa;var hn=3;var An=function(t){var e=new qr(hn);e.setDate(t.date);return Jr(vn,e.data)};var Tn=ka;var Rn=3;var un=function(t){var e=new qr(Rn);e.setDate(t.date);return Jr(Tn,e.data)};var fn=4;var On=4294967295;var Un={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var gn=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return V(Un,e)};var dn=function(t){return t<fn?1<<t:0};var ln=function(t){return t<fn?1<<t<<4:0};var pn=function(t,e){var r=0;if(t<fn){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=dn(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=ln(t)}}return r};function cn(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;F.call(this,t,e)}cn.prototype=Object.create(F.prototype);cn.prototype.constructor=cn;cn.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};cn.prototype.setDate=function(t){var e=t.year,r=t.month,a=t.date;var i=e<<1|r>>3&1;var n=r<<5&224|a&31;this.setUint8(i);this.setUint8(n)};cn.prototype.getEnergiesFlags=function(){var t=this.getUint8();return Y(Un,t)};cn.prototype.setEnergiesFlags=function(t){this.setUint8(gn(t))};cn.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var a=this.getUint16();e.push(a===On?undefined:a)}return e};cn.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?On:r)}}};cn.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};cn.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};cn.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&Un["A+"]){e["A+"]=this.getUint32()}if(t&Un["A+R+"]){e["A+R+"]=this.getUint32()}if(t&Un["A+R-"]){e["A+R-"]=this.getUint32()}return e};cn.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};cn.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&Un["A-"]){e["A-"]=this.getUint32()}if(t&Un["A-R+"]){e["A-R+"]=this.getUint32()}if(t&Un["A-R-"]){e["A-R-"]=this.getUint32()}return e};cn.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};cn.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(fn).fill(null);for(var a=0;a<fn;a++){if(e&dn(a)){r[a]=this.getAPlusTariffEnergies(t)}}for(var i=0;i<fn;i++){if(e&ln(i)){r[i]={...r[i],...this.getAMinusTariffEnergies(t)}}}return r};cn.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=gn(t);a|=pn(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};cn.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};cn.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,a=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(a)}};cn.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&Un["A+"]){e["A+"]=this.getPowerMax()}if(t&Un["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&Un["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};cn.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};cn.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&Un["A-"]){e["A-"]=this.getPowerMax()}if(t&Un["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&Un["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};cn.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};cn.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(fn).fill(null);for(var a=0;a<fn;a++){if(e&dn(a)){r[a]=this.getAPlusTariffPowerMax(t)}}for(var i=0;i<fn;i++){if(e&ln(i)){r[i]={...r[i],...this.getAMinusTariffPowerMax(t)}}}return r};cn.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=gn(t);a|=pn(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var Pn=ni;var Nn=5;var In=function(t){var e=new cn(Nn);e.setDate(t.date);e.setEnergiesFlags(t.energies);e.setUint8(t.firstHalfhour);e.setUint8(t.halfhoursNumber);return Jr(Pn,e.data)};var Mn=ii;var Sn=function(){return Jr(Mn)};var Cn=vi;var yn=function(){return Jr(Cn)};var Dn=Ua;var mn=2;var Ln=function(t){var e=new qr(mn);e.setUint8(t.year);e.setUint8(t.month);return Jr(Dn,e.data)};var Fn=za;var Vn=2;var Yn=function(t){var e=new qr(Vn);e.setUint8(t.year);e.setUint8(t.month);return Jr(Fn,e.data)};var xn=ma;var Hn=function(t){var e=t.year,r=t.month;return Jr(xn,[e,r])};var Gn=$a;var Xn=function(t){var e=t.year,r=t.month;return Jr(Gn,[e,r])};var wn=Ei;var Wn=function(){return Jr(wn)};var Bn=pa;var Kn=function(){return Jr(Bn)};var bn=Ma;var Zn=function(t){return Jr(bn,[t.tariffTable])};var Qn=Na;var jn=function(){return Jr(Qn)};var zn=Ca;var kn=function(){return Jr(zn)};var qn=Xa;var $n=3;var Jn=function(t){var e=new qr($n);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(qn,e.data)};var ts=wa;var es=3;var rs=function(t){var e=new qr(es);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(ts,e.data)};var as=Pa;var is=function(){return Jr(as)};var ns=ua;var ss=5;var Es=function(t){var e=new qr(ss);e.setUint8(t.tariffTable);e.setUint32(t.id);return Jr(ns,e.data)};var _s=Va;var os=function(){return Jr(_s)};var vs=Ya;var hs=function(){return Jr(vs)};var As=Ka;var Ts=function(t){return Jr(As,[t.tariffTable])};var Rs=16;var us=_a;var fs=1+Rs;var Os=function(t){var e=new qr(fs);e.setUint8(t.accessLevel);e.setBytes(t.key);return Jr(us,e.data)};var Us=ti;var gs=2;var ds=function(t){var e=new qr(gs);e.setInt16(t.seconds);return Jr(Us,e.data)};var ls=la;var ps=9;var cs=function(t){var e=new qr(ps);e.setTimeCorrectionParameters(t);return Jr(ls,e.data)};var Ps=Ea;var Ns=8;var Is=function(t){var e=new qr(Ns);e.setDateTime(t);return Jr(Ps,e.data)};var Ms=8;var Ss=255;var Cs=ha;var ys=function(t){var e=t.periods.length<Ms;var r=2+t.periods.length+ +e;var a=new qr(r);a.setUint8(t.tariffTable);a.setUint8(t.index);t.periods.forEach((function(t){a.setDayProfile(t)}));if(e){a.setUint8(Ss)}return Jr(Cs,a.data)};var Ds=_i;var ms=17;var Ls=function(t){var e=new qr(ms);e.setOperatorParametersExtended3(t);return Jr(Ds,e.data)};var Fs=Ia;var Vs=12;var Ys=function(t){var e=new qr(Vs);e.setUint8(t.date.month);e.setUint8(t.date.date);e.setUint8(t.date.hours);e.setUint8(t.date.minutes);e.setInt32(t.saldoNew);e.setInt32(t.saldoOld);return Jr(Fs,e.data)};var xs=ya;var Hs=37;var Gs=function(t){var e=new qr(Hs);e.setSaldoParameters(t);return Jr(xs,e.data)};var Xs=Aa;var ws=Cr;var Ws=function(t){var e=new qr(ws);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSeasonProfile(t);return Jr(Xs,e.data)};var Bs=Ta;var Ks=6;var bs=function(t){var e=new qr(Ks);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSpecialDay(t);return Jr(Bs,e.data)};var Zs=ai;var Qs=2;var js=function(t){var e=new qr(Qs);var r=0;if(t.readScreensInfo){r|=128}if(t.resetElectroMagneticIndication){r|=1}if(t.resetMagneticIndication){r|=2}e.setUint8(t.type);e.setUint8(r);return Jr(Zs,e.data)};var zs=da;var ks=function(){return Jr(zs)};var qs=ga;var $s=function(){return Jr(qs)};var Js={encrypt:function(){},decrypt:function(){}};var tE=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var eE=16;var rE=[0];var aE=function(t){return function(e,r){var a;var i=r.messageId,n=r.accessLevel,s=n===void 0?ea:n,E=r.aesKey;var o=e.map((function(e){if("id"in e){return t[e.id](e.parameters||{})}if("command"in e){return e.command.bytes}throw new Error("wrong command format")}));var v=s|16;var h=[i,v];var A=(a=[]).concat.apply(a,[v].concat(_(o),[rE]));if(s!==ta){var T=(A.length+1)%eE;if(T){A=A.concat(new Array(eE-T).fill(0))}}A=A.concat(tE(A));if(E&&s!==ta){A=_(Js.encrypt(E,A))}return h.concat(A)}};var iE=0;var nE=128;var sE=129;var EE=130;var _E=131;var oE=132;var vE=133;var hE=134;var AE=135;var TE=136;var RE=137;var uE=144;var fE=145;var OE=146;var UE=147;var gE=149;var dE=151;var lE=152;var pE=153;var cE=154;var PE=155;var NE=156;var IE=159;var ME=160;var SE=240;var CE=Object.freeze({__proto__:null,ACCESS_DENIED:UE,BAD_ARRAY_INDEX:hE,BAD_BLOCK_NUMBER:NE,BAD_DATA_LENGTH:vE,BAD_MESSAGE:oE,BAD_RATE_PLAN_ID:TE,BAD_RATE_PLAN_SIZE:RE,BAD_RESPONSE_LENGTH:uE,BAD_SALDO_WRITE:gE,BLOCKED_METER:dE,CALIBRATION_DISABLED:OE,DECRYPTION_FAILURE:EE,INTERNAL:SE,INVALID_CORRECTION_INTERVAL:cE,NOT_ALIGNED_DATA:sE,NOT_PREPARED_RATE_PLAN:AE,NO_DATA_FOR_DATE:fE,OK:iE,OUT_OFF_RANGE:IE,SET_METER_TYPE_FAILURE:ME,TIME_CORRECTION_FAILURE:pE,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:PE,UNENCRYPTED_COMMAND_DISABLED:lE,UNKNOWN_COMMAND:nE,UNKNOWN_PROTOCOL:_E});Nt(CE);var yE=1;var DE=2;var mE=3;var LE=4;var FE=5;var VE=6;var YE=7;var xE=8;var HE=9;var GE=10;var XE=11;var wE=12;var WE=13;var BE=14;var KE=15;var bE=16;var ZE=17;var QE=18;var jE=19;var zE=20;var kE=21;var qE=22;var $E=23;var JE=24;var t_=25;var e_=26;var r_=28;var a_=30;var i_=31;var n_=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:LE,ACTIVE_ENERGY_T2:FE,ACTIVE_ENERGY_T3:VE,ACTIVE_ENERGY_T4:YE,ACTIVE_POWER_IN_NEUTRAL:HE,ACTIVE_POWER_PER_PHASE:xE,BATTERY_VOLTAGE:qE,CURRENT_BALANCE:a_,CURRENT_IN_NEUTRAL:XE,CURRENT_IN_PHASE:GE,DATE_MONTH_YEAR:BE,EXPORTED_ACTIVE_ENERGY_T1:bE,EXPORTED_ACTIVE_ENERGY_T2:ZE,EXPORTED_ACTIVE_ENERGY_T3:QE,EXPORTED_ACTIVE_ENERGY_T4:jE,HOUR_MINUTE_SECOND:WE,MAGNET_INDUCTION:r_,OPTOPORT_SPEED:i_,POWER_COEFFICIENT_PHASE_A:zE,POWER_COEFFICIENT_PHASE_B:kE,POWER_THRESHOLD_T1:$E,POWER_THRESHOLD_T2:JE,POWER_THRESHOLD_T3:t_,POWER_THRESHOLD_T4:e_,SET_ALL_SEGMENT_DISPLAY:yE,SOFTWARE_VERSION:DE,TOTAL_ACTIVE_ENERGY:mE,TOTAL_EXPORTED_ACTIVE_ENERGY:KE,VOLTAGE:wE});Nt(n_);var s_=2400;var E_=9600;var __={plc:{0:E_,2:s_,4:E_},optoport:{0:s_,2:s_,4:E_}};var o_={plc:Nt(__.plc),optoport:Nt(__.optoport)};var v_=1;var h_=2;var A_=3;var T_=4;var R_=17;var u_=18;var f_=19;var O_=20;var U_=21;var g_=22;var d_=23;var l_=32;var p_=33;var c_=34;var P_=35;var N_=36;var I_=37;var M_=38;var S_=39;var C_=40;var y_=49;var D_=50;var m_=51;var L_=52;var F_=53;var V_=54;var Y_=55;var x_=56;var H_=57;var G_=64;var X_=65;var w_=66;var W_=67;var B_=68;var K_=69;var b_=70;var Z_=71;var Q_=72;var j_=73;var z_=74;var k_=75;var q_=76;var $_=77;var J_=78;var to=79;var eo=80;var ro=81;var ao=82;var io=83;var no=84;var so=85;var Eo=86;var _o=87;var oo=88;var vo=89;var ho=90;var Ao=91;var To=92;var Ro=93;var uo=94;var fo=95;var Oo=96;var Uo=97;var go=98;var lo=99;var po=100;var co=101;var Po=102;var No=103;var Io=104;var Mo=105;var So=106;var Co=107;var yo=108;var Do=109;var mo=110;var Lo=111;var Fo=112;var Vo=113;var Yo=114;var xo=115;var Ho=116;var Go=117;var Xo=118;var wo=119;var Wo=120;var Bo=121;var Ko=122;var bo=123;var Zo=124;var Qo=125;var jo=126;var zo=127;var ko=128;var qo=129;var $o=130;var Jo=131;var tv=132;var ev=133;var rv=134;var av=135;var iv=136;var nv=137;var sv=138;var Ev=139;var _v=140;var ov=141;var vv=142;var hv=143;var Av=144;var Tv=145;var Rv=147;var uv=148;var fv=149;var Ov=150;var Uv=151;var gv=152;var dv=153;var lv=154;var pv=155;var cv=156;var Pv=157;var Nv=158;var Iv=159;var Mv=160;var Sv=161;var Cv=162;var yv=163;var Dv=164;var mv=165;var Lv=166;var Fv=167;var Vv=168;var Yv=169;var xv=170;var Hv=171;var Gv=172;var Xv=173;var wv=174;var Wv=175;var Bv=176;var Kv=177;var bv=178;var Zv=179;var Qv=224;var jv=225;var zv=226;var kv=227;var qv=228;var $v=229;var Jv=230;var th=231;var eh=232;var rh=Object.freeze({__proto__:null,ACCESS_LOCKED:R_,ACCESS_UNLOCKED:u_,ACCUMULATION_PARAM_BAD:ev,ACCUMULATION_PARAM_EXT_BAD:rv,BAD_TEST_EEPROM:qo,BAD_TEST_FRAM:$o,BATTERY_FAULT:Mo,BATTERY_OK:Io,BLOCK_TARIFF_BAD:iv,CALCULATION_PERIOD_BAD:av,CALIBRATION_FAULT:Co,CALIBRATION_FLAG_RESET:ko,CALIBRATION_FLAG_SET:zo,CALIBRATION_OK:So,CALIBRATION_PARAM_BAD:nv,CASE_CLOSE:U_,CASE_KLEMA_CLOSE:Uv,CASE_KLEMA_OPEN:Ov,CASE_MODULE_CLOSE:pv,CASE_MODULE_OPEN:lv,CASE_OPEN:O_,CHANGE_ACCESS_KEY0:l_,CHANGE_ACCESS_KEY1:p_,CHANGE_ACCESS_KEY2:c_,CHANGE_ACCESS_KEY3:P_,CHANGE_COR_TIME:Fo,CHANGE_PARAMETERS_LOCAL:N_,CHANGE_PARAMETERS_REMOTE:I_,CHANGE_PARAM_CHANNEL1:Nv,CHANGE_PARAM_CHANNEL2:Iv,CHANGE_PARAM_CHANNEL3:Mv,CHANGE_PARAM_CHANNEL4:Sv,CHANGE_PARAM_CHANNEL5:Cv,CHANGE_PARAM_CHANNEL6:yv,CHANGE_TARIFF_TABLE:D_,CHANGE_TARIFF_TABLE_2:gv,CHANGE_TARIFF_TABLE_3:dv,CLOCK_FAULT:Uo,CLOCK_OK:Oo,CMD_CHANGE_TIME:M_,CMD_RELAY_2_OFF:Yo,CMD_RELAY_2_ON:Vo,CMD_RELAY_OFF:C_,CMD_RELAY_ON:S_,COEFFICIENT_TRANSFORMATION_CHANGE:hv,CROSS_ZERO_ENT0:xo,CROSS_ZERO_ENT1:Ho,CROSS_ZERO_ENT2:Go,CROSS_ZERO_ENT3:Xo,CROSS_ZERO_EXPORT_ENT0:Dv,CROSS_ZERO_EXPORT_ENT1:mv,CROSS_ZERO_EXPORT_ENT2:Lv,CROSS_ZERO_EXPORT_ENT3:Fv,CROSS_ZERO_EXPORT_VARE0:Gv,CROSS_ZERO_EXPORT_VARE1:Xv,CROSS_ZERO_EXPORT_VARE2:wv,CROSS_ZERO_EXPORT_VARE3:Wv,CROSS_ZERO_EXPORT_VARI0:Vv,CROSS_ZERO_EXPORT_VARI1:Yv,CROSS_ZERO_EXPORT_VARI2:xv,CROSS_ZERO_EXPORT_VARI3:Hv,CROSS_ZERO_VARE0:bo,CROSS_ZERO_VARE1:Zo,CROSS_ZERO_VARE2:Qo,CROSS_ZERO_VARE3:jo,CROSS_ZERO_VARI0:wo,CROSS_ZERO_VARI1:Wo,CROSS_ZERO_VARI2:Bo,CROSS_ZERO_VARI3:Ko,EM_MAGNETIC_OFF:Kv,EM_MAGNETIC_ON:Bv,ENERGY_REGISTER_OVERFLOW:y_,ENERGY_T0_FAULT:v_,ENERGY_T1_FAULT:h_,ENERGY_T2_FAULT:A_,ENERGY_T3_FAULT:T_,ERR_ACCESS:f_,F_MAX_OK:q_,F_MAX_OVER:$_,F_MIN_OK:J_,F_MIN_UNDER:to,IA_MAX_OK:no,IA_MAX_OVER:so,IB_MAX_OK:Eo,IB_MAX_OVER:_o,IC_MAX_OK:oo,IC_MAX_OVER:vo,IDIFF_OK:uo,IDIFF_OVER:fo,MAGNETIC_OFF:d_,MAGNETIC_ON:g_,METER_TROUBLE:fv,OP_PARAM_BAD:Ev,OP_PARAM_EXT_BAD:_v,O_PARAMETERS_FAULT:Lo,O_PARAMETERS_OK:mo,PA_MAX_OK:ho,PA_MAX_OVER:Ao,POWER_A_OFF:No,POWER_A_ON:Po,POWER_B_OFF:co,POWER_B_ON:po,POWER_C_OFF:lo,POWER_C_ON:go,POWER_OVER_RELAY_OFF:Pv,PV_MAX_OK:To,PV_MAX_OVER:Ro,P_MAX_A_MINUS_OK:th,P_MAX_A_MINUS_OVER:eh,RELAY_HARD_BAD_OFF:Av,RELAY_HARD_BAD_ON:Rv,RELAY_HARD_OFF:uv,RELAY_HARD_ON:Tv,RELAY_OFF:Y_,RELAY_ON:V_,RESET_EM_FLAG:bv,RESET_MAGNETIC_FLAG:Zv,RESTART:x_,SALDO_ENERGY_BAD:ov,SALDO_PARAM_BAD:tv,SET_DEMAND_EN_10_MIN:kv,SET_DEMAND_EN_15_MIN:qv,SET_DEMAND_EN_1_MIN:Qv,SET_DEMAND_EN_30_MIN:$v,SET_DEMAND_EN_3_MIN:jv,SET_DEMAND_EN_5_MIN:zv,SET_DEMAND_EN_60_MIN:Jv,SET_NEW_SALDO:Jo,SET_SALDO_PARAM:cv,SET_TARIFF_TABLE:m_,SUMMER_TIME:L_,TIME_CORRECT:vv,T_MAX_OK:eo,T_MAX_OVER:ro,T_MIN_OK:ao,T_MIN_UNDER:io,VA_MAX_OK:G_,VA_MAX_OVER:X_,VA_MIN_OK:w_,VA_MIN_UNDER:W_,VB_MAX_OK:B_,VB_MAX_OVER:K_,VB_MIN_OK:b_,VB_MIN_UNDER:Z_,VC_MAX_OK:Q_,VC_MAX_OVER:j_,VC_MIN_OK:z_,VC_MIN_UNDER:k_,V_PARAMETERS_FAULT:Do,V_PARAMETERS_OK:yo,WD_RESTART:H_,WINTER_SUMMER_BAD:sv,WINTER_TIME:F_});var ah=Nt(rh);var ih=1;var nh=3;var sh=4;var Eh=5;var _h=7;var oh=8;var vh=9;var hh=13;var Ah=15;var Th=16;var Rh=17;var uh=18;var fh=19;var Oh=20;var Uh=21;var gh=22;var dh=23;var lh=24;var ph=25;var ch=28;var Ph=30;var Nh=31;var Ih=40;var Mh=41;var Sh=42;var Ch=44;var yh=46;var Dh=47;var mh=49;var Lh=50;var Fh=51;var Vh=52;var Yh=53;var xh=54;var Hh=57;var Gh=58;var Xh=59;var wh=60;var Wh=61;var Bh=62;var Kh=63;var bh=64;var Zh=69;var Qh=70;var jh=71;var zh=72;var kh=73;var qh=78;var $h=79;var Jh=80;var tA=82;var eA=83;var rA=84;var aA=85;var iA=86;var nA=88;var sA=89;var EA=90;var _A=92;var oA=93;var vA=94;var hA=100;var AA=109;var TA=111;var RA=112;var uA=113;var fA=114;var OA=117;var UA=118;var gA=122;var dA=Object.freeze({__proto__:null,activateRatePlan:fh,getBuildVersion:RA,getCorrectTime:Bh,getCriticalEvent:iA,getCurrentStatusMeter:Hh,getCurrentValues:hh,getDateTime:_h,getDayDemand:gh,getDayDemandExport:$h,getDayMaxDemand:mh,getDayMaxDemandExport:nA,getDayProfile:Xh,getDemand:UA,getDeviceId:Eh,getDeviceType:sh,getDisplayParam:vA,getEnergy:Ah,getEnergyDayPrevious:nh,getEnergyExport:qh,getEnergyExportDayPrevious:Jh,getEventStatus:ih,getEvents:Fh,getEventsCounters:Vh,getExtendedCurrentValues:Gh,getHalfHourDemand:Uh,getHalfHourDemandChannel:EA,getHalfHourDemandExport:eA,getHalfHourDemandVare:kh,getHalfHourDemandVareExport:aA,getHalfHourDemandVari:zh,getHalfHourDemandVariExport:rA,getHalfhoursEnergies:TA,getMagneticFieldThreshold:AA,getMeterInfo:gA,getMonthDemand:dh,getMonthDemandExport:tA,getMonthMaxDemand:Lh,getMonthMaxDemandExport:sA,getOperatorParameters:Ph,getOperatorParametersExtended:Kh,getOperatorParametersExtended2:jh,getOperatorParametersExtended3:uA,getRatePlanInfo:Ch,getSaldo:Mh,getSaldoParameters:yh,getSeasonProfile:wh,getSpecialDay:Wh,getVersion:Ih,prepareRatePlan:Oh,resetPowerMaxDay:Yh,resetPowerMaxMonth:xh,runTariffPlan:Qh,setAccessKey:vh,setCorrectDateTime:_A,setCorrectTime:ch,setDateTime:oh,setDayProfile:Th,setDisplayParam:oA,setOperatorParameters:Nh,setOperatorParametersExtended:bh,setOperatorParametersExtended2:Zh,setOperatorParametersExtended3:fA,setOperatorParametersExtended4:OA,setSaldo:Sh,setSaldoParameters:Dh,setSeasonProfile:Rh,setSpecialDay:uh,setSpecialOperation:hA,turnRelayOff:ph,turnRelayOn:lh});Nt(dA);var lA=iA;var pA=function(t){return Jr(lA,[t.event,t.index])};var cA=95;var PA=9;var NA=28;var IA=28;var MA=4;var SA={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var CA={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var yA={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var DA={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var mA={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var LA={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var FA={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var VA={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var YA={OPTOPORT_SPEED:1<<26};var xA={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var HA=function(t){return{plc:__.plc[x(t,4,1)],optoport:__.optoport[x(t,4,5)]}};var GA=function(t){var e=0;e=H(e,4,1,Number(o_.plc[t.plc]));e=H(e,4,5,Number(o_.optoport[t.optoport]));return e};function XA(t,e,r){var a=r>>MA;var i=[];var n=[];var s=[];for(var E=0;E<yr;E++){var _=!!x(a,1,E+1);if(_){i.push(t.getInt32());n.push(t.getInt32());s.push(t.getInt32())}else{i.push(null);n.push(null);s.push(null)}}return{wh:i,vari:n,vare:s}}function wA(t,e){var r=e.wh,a=e.vari,i=e.vare;var n=1+MA;var s=t;for(var E=0;E<yr;E++){s=H(s,1,E+n,Number(!!r[E]&&!!a[E]&&!!i[E]))}return s}function WA(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;qr.call(this,t,e)}WA.prototype=Object.create(qr.prototype);WA.prototype.constructor=WA;WA.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:Y(SA,4229),displaySet2:Y(CA,139776),displaySet3:Y(yA,0),relaySet:Y(LA,771),speedOptoPort:HA(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:Y(FA,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:Y(DA,2147876864)}};WA.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:Y(SA,this.getUint32()),displaySet2:Y(CA,this.getUint32()),displaySet3:Y(yA,this.getUint32()),relaySet:Y(LA,this.getUint32()),speedOptoPort:HA(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:Y(FA,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:Y(DA,this.getUint32())}};WA.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(V(SA,t.displaySet1));this.setUint32(V(CA,t.displaySet2));this.setUint32(V(yA,t.displaySet3));this.setUint32(V(LA,t.relaySet));this.setUint8(GA(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(V(FA,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(V(DA,t.displaySet4))};WA.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:Y(VA,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};WA.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(V(VA,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};WA.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var a=0;a<yr;a++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};WA.prototype.setEnergies=function(t){for(var e=0;e<yr;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};WA.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=x(t,MA,1);var r=XA(this,e,t);return{energyType:e,energies:r}};WA.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var a=wA(e,r);var i=a>>MA;this.setUint8(a);for(var n=0;n<yr;n++){var s=!!x(i,1,n+1);if(s){this.setInt32(r.wh[n]);this.setInt32(r.vari[n]);this.setInt32(r.vare[n])}}return}for(var E=0;E<yr;E++){this.setInt32(r.wh[E]);this.setInt32(r.vari[E]);this.setInt32(r.vare[E])}};WA.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};WA.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};WA.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};WA.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};WA.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(yr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};WA.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};WA.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(yr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};WA.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};WA.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=ah[e];switch(e){case Pv:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case M_:case vv:if(r<8){return t}t.newDate=this.getDateTime();break}return t};WA.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Pv:for(var e of t.power){this.setUint8(e)}break;case M_:case vv:this.setDateTime(t.newDate);break}};WA.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};WA.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};WA.prototype.getOperatorParametersExtended2=function(){return{deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:Y(xA,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:Y(YA,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:this.getUint8()}};WA.prototype.setOperatorParametersExtended2=function(t){this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(V(xA,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(V(YA,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(t.timeCorrectPeriod)};WA.prototype.getOperatorParametersExtended4=function(){return{displaySet5:Y(mA,this.getUint32()),displaySet25:Y(mA,this.getUint32()),displaySet31:Y(SA,this.getUint32()),displaySet32:Y(SA,this.getUint32()),displaySet33:Y(SA,this.getUint32()),displaySet34:Y(SA,this.getUint32()),displaySet35:Y(mA,this.getUint32())}};WA.prototype.setOperatorParametersExtended4=function(t){this.setUint32(V(mA,t.displaySet5));this.setUint32(V(mA,t.displaySet25));this.setUint32(V(SA,t.displaySet31));this.setUint32(V(SA,t.displaySet32));this.setUint32(V(SA,t.displaySet33));this.setUint32(V(SA,t.displaySet34));this.setUint32(V(mA,t.displaySet35))};var BA=3;var KA=4;var bA=gh;var ZA=function(t){var e=new WA(t?.energyType?KA:BA);e.setDate(t?.date);if(t?.energyType){e.setUint8(t.energyType)}return Jr(bA,e.data)};var QA=$h;var jA=3;var zA=function(t){var e=new WA(jA);e.setDate(t.date);return Jr(QA,e.data)};var kA=UA;var qA=7;var $A=function(t){var e=new WA(qA);e.setDemand(t);return Jr(kA,e.data)};var JA=vA;var tT=1;var eT=function(t){var e=new WA(tT);e.setUint8(t.displayMode);return Jr(JA,e.data)};var rT=Ah;var aT=function(){return Jr(rT)};var iT=nh;var nT=function(t){if(t.energyType){return Jr(iT,[t.energyType])}return Jr(iT)};var sT=qh;var ET=function(){return Jr(sT)};var _T=Jh;var oT=function(){return Jr(_T)};var vT=EA;var hT=5;var AT=function(t){var e=new WA(hT);e.setUint8(t.channel);e.setUint8(t.channelParameter);e.setDate(t.date);return Jr(vT,e.data)};var TT=kh;var RT=3;var uT=function(t){var e=new WA(RT);e.setDate(t.date);return Jr(TT,e.data)};var fT=aA;var OT=3;var UT=function(t){var e=new WA(OT);e.setDate(t.date);return Jr(fT,e.data)};var gT=zh;var dT=3;var lT=function(t){var e=new WA(dT);e.setDate(t.date);return Jr(gT,e.data)};var pT=rA;var cT=3;var PT=function(t){var e=new WA(cT);e.setDate(t.date);return Jr(pT,e.data)};var NT=Kh;var IT=function(){return Jr(NT)};var MT=jh;var ST=function(){return Jr(MT)};var CT=oA;var yT=function(t){return Jr(CT,[t.displayMode].concat(_(t.order)))};var DT=Nh;var mT=cA;var LT=function(t){var e=new WA(mT);e.setOperatorParameters(t);return Jr(DT,e.data)};var FT=bh;var VT=PA;var YT=function(t){var e=new WA(VT);e.setOperatorParametersExtended(t);return Jr(FT,e.data)};var xT=Zh;var HT=NA;var GT=function(t){var e=new WA(HT);e.setOperatorParametersExtended2(t);return Jr(xT,e.data)};var XT=OA;var wT=IA;var WT=function(t){var e=new WA(wT);e.setOperatorParametersExtended4(t);return Jr(XT,e.data)};var BT={};var KT=aE(BT);BT[Ai]=Ri;BT[ui]=fi;BT[Oi]=Ui;BT[Vi]=Yi;BT[xi]=Hi;BT[Gi]=Xi;BT[Gi]=Xi;BT[wi]=Bi;BT[Ki]=Zi;BT[Qi]=zi;BT[ki]=qi;BT[$i]=Ji;BT[tn]=rn;BT[an]=nn;BT[sn]=En;BT[_n]=on;BT[vn]=An;BT[Tn]=un;BT[Pn]=In;BT[Mn]=Sn;BT[Cn]=yn;BT[Dn]=Ln;BT[Fn]=Yn;BT[xn]=Hn;BT[Gn]=Xn;BT[Bn]=Kn;BT[wn]=Wn;BT[bn]=Zn;BT[Qn]=jn;BT[zn]=kn;BT[qn]=Jn;BT[ts]=rs;BT[as]=is;BT[ns]=Es;BT[_s]=os;BT[vs]=hs;BT[As]=Ts;BT[us]=Os;BT[Us]=ds;BT[ls]=cs;BT[Ps]=Is;BT[Cs]=ys;BT[Ds]=Ls;BT[Fs]=Ys;BT[xs]=Gs;BT[Xs]=Ws;BT[Bs]=bs;BT[Zs]=js;BT[zs]=ks;BT[qs]=$s;BT[lA]=pA;BT[bA]=ZA;BT[QA]=zA;BT[kA]=$A;BT[JA]=eT;BT[rT]=aT;BT[iT]=nT;BT[sT]=ET;BT[_T]=oT;BT[vT]=AT;BT[TT]=uT;BT[fT]=UT;BT[gT]=lT;BT[pT]=PT;BT[NT]=IT;BT[MT]=ST;BT[CT]=yT;BT[DT]=LT;BT[FT]=YT;BT[xT]=GT;BT[XT]=WT;var bT=145;var ZT=30;var QT=function(t){var e=[ZT,t.length+2,0,bT].concat(_(t));return[].concat(_(e),[tE(e)])};getBase64FromBytes=$r;toBytes=KT;setDataSegment=QT})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var bytes = toBytes(msg.commands);

// send nothing if not fit in a single data segment
if ( bytes.length > MAX_DATA_SEGMENT_SIZE ) {
    bytes = [];
} else {
    bytes = setDataSegment(bytes);
}

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(bytes)
};

return result;
