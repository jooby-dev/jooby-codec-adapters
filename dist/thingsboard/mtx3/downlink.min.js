// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// encoded message should be less than this size
// to be able to send to a device
var MAX_DATA_SEGMENT_SIZE = 50;


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,setDataSegment,getBase64FromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function a(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,i,E,_=[],s=true,o=false;try{if(i=(r=r.call(t)).next,0===e);else for(;!(s=(a=i.call(r)).done)&&(_.push(a.value),_.length!==e);s=!0);}catch(t){o=true,n=t}finally{try{if(!s&&null!=r.return&&(E=r.return(),Object(E)!==E))return}finally{if(o)throw n}}return _}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,r){return e(t)||n(t,r)||o(t,r)||i()}function s(t){return r(t)||a(t)||o(t)||E()}function o(e,r){if(e){if("string"==typeof e)return t(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):void 0}}var A={separator:" ",prefix:""};var v=1;var T=2;var R=3;var h=4;var O=Math.log,u=Math.pow,f=Math.LN2;var P=function(t,e,r,a,n){var i,E,_=n*8-a-1,s=(1<<_)-1,o=s>>1,A=-7,v=r?n-1:0,T=r?-1:1,R=t[e+v];v+=T;i=R&(1<<-A)-1;R>>=-A;A+=_;for(;A>0;i=i*256+t[e+v],v+=T,A-=8);E=i&(1<<-A)-1;i>>=-A;A+=a;for(;A>0;E=E*256+t[e+v],v+=T,A-=8);if(i===0){i=1-o}else if(i===s){return E?NaN:R?-Infinity:Infinity}else{E=E+u(2,a);i=i-o}return(R?-1:1)*E*u(2,i-a)};var g=function(t,e,r,a,n,i){var E,_,s,o=i*8-n-1,A=(1<<o)-1,v=A>>1,T=n===23?u(2,-24)-u(2,-77):0,R=a?0:i-1,h=a?1:-1,P=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){_=r!==r?1:0;E=A}else{E=O(r)/f|0;if(r*(s=u(2,-E))<1){E--;s*=2}if(E+v>=1){r+=T/s}else{r+=T*u(2,1-v)}if(r*s>=2){E++;s/=2}if(E+v>=A){_=0;E=A}else if(E+v>=1){_=(r*s-1)*u(2,n);E=E+v}else{_=r*u(2,v-1)*u(2,n);E=0}}for(;n>=8;t[e+R]=_&255,R+=h,_/=256,n-=8);E=E<<n|_;o+=n;for(;o>0;t[e+R]=E&255,R+=h,E/=256,o-=8);t[e+R-h]|=P*128};var U=[1,0];var d=[2,1,0];var I=[3,2,1,0];var l=[0,1];var N=[0,1,2];var p=[0,1,2,3];var M=function(t,e){return t[e]};var C=function(t,e,r){var a=r?l:U;var n=t[e+a[0]];var i=t[e+a[1]]<<8;return n|i};var c=function(t,e,r){var a=r?N:d;var n=t[e+a[0]];var i=t[e+a[1]]<<8;var E=t[e+a[2]]<<16;return n|i|E};var D=function(t,e,r){var a=r?p:I;var n=t[e+a[3]]*16777216;var i=t[e+a[2]]*65536;var E=t[e+a[1]]*256;var _=t[e+a[0]];return n+i+E+_};var S=function(t,e,r){t[e]=r&255};var m=function(t,e,r,a){var n=a?l:U;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255};var y=function(t,e,r,a){var n=a?N:d;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255};var L=function(t,e,r,a){var n=a?p:I;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255;t[e+n[3]]=r>>>24&255};function V(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}V.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){S(this.data,this.offset,t<0?t|256:t);this.offset+=v},getInt8:function(){var t=M(this.data,this.offset);this.offset+=v;return t&128?t^-256:t},setUint8:function(t){S(this.data,this.offset,t);this.offset+=v},getUint8:function(){var t=M(this.data,this.offset);this.offset+=v;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t<0?t|65536:t,e);this.offset+=T},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=C(this.data,this.offset,t);this.offset+=T;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t,e);this.offset+=T},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=C(this.data,this.offset,t);this.offset+=T;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;y(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=R},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=c(this.data,this.offset,t);this.offset+=R;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;y(this.data,this.offset,t,e);this.offset+=R},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=c(this.data,this.offset,t);this.offset+=R;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=h},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=D(this.data,this.offset,t);this.offset+=h;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t,e);this.offset+=h},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=D(this.data,this.offset,t);this.offset+=h;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;g(this.data,this.offset,t,e,23,4);this.offset+=h},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=P(this.data,this.offset,t,23,4);this.offset+=h;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(s(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(V.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var F=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var a in e){if(a in t&&e[a]){r|=t[a]}}return r};var Y=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var a in t){r[a]=(e&t[a])!==0}return r};var H=function(t,e,r){return(1<<e)-1&t>>r-1};var x=function(t,e,r,a){var n=(1<<e)-1<<r-1;var i=a;var E=t;E&=~n;i<<=r-1;E|=i;return E};var X=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map((function(t){return t.padStart(2,"0")})).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var a=new Array(r);for(var n=0;n<r;n++){a[n]=parseInt(e.substring(n*2,n*2+2),16)}return a};var G="x";var W=[".","1","3","R","M"];var B=[".","A","G","R","T","D"];var w=[".","0","1","2","3","4","5"];var K=[".","A","B","C","D","E","F"];var b=[".","A","B","C","D","E","F","H","K","G"];var Q=[".","1","2","3","4"];var Z=[".","L","M","Z","K"];var j=[".","0","1","2","3","4","5","6","7","8","9"];var z=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var k=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var q=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var $=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var J=function(t){return[t>>4,t&15]};var tt=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var a=J(t),n=_(a,2),i=n[0],E=n[1];e[r*2]=i;e[r*2+1]=E}));return e};var et=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return X(e.join(""))};var rt=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(W[t[0]]??G);e.push(B[t[1]]??G);e.push(w[t[2]]??G);e.push(w[t[3]]??G);e.push(".");e.push(K[t[4]]??G);e.push(b[t[5]]??G);e.push(".");e.push(Q[t[6]]??G);e.push(Z[t[7]]??G);var r=t[8];e.push(j[t[9]]??G);e.push("-");var a;if(t.length<14||t[12]===0&&t[13]===0){e.push(z[t[10]]??G);a=11}else if(t[13]===0){e.push(z[t[10]]??G);e.push(z[t[11]]??G);a=12}else{e.push(z[t[10]]??G);e.push(z[t[11]]??G);e.push(z[t[12]]??G);a=13}var n=t[a];if(n&&n!==0){e.push(q[n]??G)}return{type:e.join(""),revision:r,meterType:0}};var at=function(t,e,r){var a=[];if(t.length<11){throw new Error("Wrong format")}a.push(W.indexOf(t[0]));a.push(B.indexOf(t[1]));a.push(w.indexOf(t[2]));a.push(w.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}a.push(K.indexOf(t[5]));a.push(b.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}a.push(Q.indexOf(t[8]));a.push(Z.indexOf(t[9]));a.push(r??0);a.push(j.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var n=t.length>13?t.length-1:t.length;for(var i=12;i<n;i++){a.push(z.indexOf(t[i]))}if(n<t.length){a.push(q.indexOf(t[n]))}var E=et(a);var _=new Array(9).fill(0);_[0]=0;for(var s=0;s<E.length;s++){_[s+(E.length<8?1:0)]=E[s]}return _};var nt=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(W[t[0]]??G);e.push(B[t[1]]??G);e.push(r);for(var a=2;a<t.length;a++){if(t[a]!==0){e.push(k[t[a]]??G)}}return{type:e.join(""),meterType:0}};var it=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(W.indexOf(t[0]));e.push(B.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(k.indexOf(t[r]))}var a=et(e);if(a.length===8){return a}if(a.length>8){throw new Error("Wrong format")}var n=new Array(8).fill(0);for(var i=0;i<a.length;i++){n[i]=a[i]}return n};var Et=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(W[t[0]]??G);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push($[t[r]]??G)}}return{type:e.join(""),meterType:0}};var _t=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(W.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push($.indexOf(t[r]))}var a=et(e);var n=new Array(8).fill(0);for(var i=0;i<a.length&&i<8;i++){n[i]=a[i]}return n};var st=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var a=r.indexOf(t[0])!==-1?2:0;var n=tt(t.slice(0,8));var i=n[a];var E=W[i];if(E==="1"||E==="3"){e=rt(n.slice(a))}else{e=E==="M"?Et(n):nt(n)}e.meterType=t[8];return e};var ot=function(t,e){var r=t.type,a=t.revision,n=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var i;var E=r.substring(4);var _=r[4];if(_==="1"||_==="3"){i=at(E,e,a)}else{i=_==="M"?_t(E):it(E)}i[8]=n;return i};var At=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},A,e),a=r.separator,n=r.prefix;return t.map((function(t){return"".concat(n).concat(t.toString(16).padStart(2,"0"))})).join(a)};var vt=80;var Tt=81;var Rt=82;var ht=83;var Ot=84;var ut=85;var ft=86;var Pt=87;var gt=88;var Ut=89;var dt=90;var It=91;var lt=255;var Nt=Object.freeze({__proto__:null,DATA_REQUEST:vt,DATA_RESPONSE:Tt,FRAGMENT_REQUEST:dt,FRAGMENT_RESPONSE:It,IDENT_REQUEST:Rt,IDENT_RESPONSE:ht,INVALID:lt,L2_CHECK_ADDRESS_REQUEST:ft,L2_CHECK_ADDRESS_RESPONSE:Pt,L2_RM_ADDRESS_REQUEST:gt,L2_RM_ADDRESS_RESPONSE:Ut,L2_SET_ADDRESS_REQUEST:Ot,L2_SET_ADDRESS_RESPONSE:ut});var pt=function(t){var e={};for(var r in t){var a=t[r];e[a]=r}return e};var Mt=pt(Nt);var Ct=1;var ct=2;var Dt=3;var St=16;var mt=17;var yt=18;var Lt=19;var Vt=20;var Ft=21;var Yt=32;var Ht=33;var xt=34;var Xt=35;var Gt=36;var Wt=37;var Bt=38;var wt=39;var Kt=40;var bt=41;var Qt=49;var Zt=50;var jt=51;var zt=52;var kt=53;var qt=54;var $t=55;var Jt=56;var te=57;var ee=64;var re=65;var ae=66;var ne=67;var ie=68;var Ee=69;var _e=70;var se=71;var oe=72;var Ae=73;var ve=74;var Te=75;var Re=76;var he=77;var Oe=78;var ue=79;var fe=80;var Pe=81;var ge=82;var Ue=83;var de=84;var Ie=85;var le=86;var Ne=87;var pe=88;var Me=89;var Ce=96;var ce=97;var De=98;var Se=99;var me=100;var ye=101;var Le=102;var Ve=103;var Fe=104;var Ye=105;var He=112;var xe=113;var Xe=114;var Ge=115;var We=116;var Be=117;var we=118;var Ke=119;var be=120;var Qe=121;var Ze=122;var je=123;var ze=124;var ke=125;var qe=144;var $e=145;var Je=147;var tr=148;var er=156;var rr=157;var ar=158;var nr=159;var ir=160;var Er=161;var _r=162;var sr=176;var or=177;var Ar=178;var vr=179;var Tr=180;var Rr=181;var hr=182;var Or=183;var ur=208;var fr=224;var Pr=225;var gr=226;var Ur=227;var dr=228;var Ir=229;var lr=230;var Nr=Object.freeze({__proto__:null,ACCESS_CLOSED:St,ACCPARAM_BAD:Xe,ACCPARAM_EXT_BAD:Ge,BAD_TEST_EEPROM:Fe,BAD_TEST_FRAM:Ye,BAT_FAULT:Ue,BAT_OK:ge,BIPOLAR_POWER_FAULT:Tr,BIPOLAR_POWER_OK:Rr,BLOCK_TARIFF_BAD:Be,CALC_PERIOD_BAD:We,CALFLAG_RESET:Ve,CALFLAG_SET:Le,CALIBR_PARAM_BAD:we,CAL_FAULT:Ie,CAL_OK:de,CASE_CLOSE:Lt,CASE_MODULE_CLOSE:ke,CASE_MODULE_OPEN:ze,CASE_OPEN:yt,CASE_TERMINAL_CLOSE:je,CASE_TERMINAL_OPEN:Ze,CHANGE_ACCESS_KEY0:Yt,CHANGE_ACCESS_KEY1:Ht,CHANGE_ACCESS_KEY2:xt,CHANGE_ACCESS_KEY3:Xt,CHANGE_COR_TIME:bt,CHANGE_PAR_LOCAL:Gt,CHANGE_PAR_REMOTE:Wt,CHANGE_TARIFF_TBL:Zt,CLOCK_FAULT:Ne,CLOCK_OK:le,CMD_CHANGE_TIME:Bt,CMD_RELAY_2_OFF:ce,CMD_RELAY_2_ON:Ce,CMD_RELAY_OFF:Kt,CMD_RELAY_ON:wt,CROSSZERO_ENT0:De,CROSSZERO_ENT1:Se,CROSSZERO_ENT2:me,CROSSZERO_ENT3:ye,CROSSZERO_EXP_ENT0:ar,CROSSZERO_EXP_ENT1:nr,CROSSZERO_EXP_ENT2:ir,CROSSZERO_EXP_ENT3:Er,CURRENT_UNEQUIL_FAULT:Ar,CURRENT_UNEQUIL_OK:vr,EM_MAGNETIC_OFF:or,EM_MAGNETIC_ON:sr,ENERGY_REG_FAULT:Ct,ENERGY_REG_OVERFLOW:Qt,ERR_ACCESS:mt,F_MAX_OK:oe,F_MAX_OVER:Ae,F_MIN_OK:ve,F_MIN_OVER:Te,I_MAX_OK:Re,I_MAX_OVER:he,MAGNETIC_OFF:Ft,MAGNETIC_ON:Vt,NVRAM_FAULT:ur,OP_PAR_FAULT:Dt,POWERSALDO_OK:fe,POWERSALDO_OVER:Pe,POWER_A_OFF:pe,POWER_A_ON:Me,POWER_OVER_RELAY_OFF:rr,P_MAX_OK:Oe,P_MAX_OVER:ue,RELAY_HARD_BAD_OFF:qe,RELAY_HARD_BAD_ON:Je,RELAY_HARD_OFF:tr,RELAY_HARD_ON:$e,RELAY_OFF:$t,RELAY_ON:qt,RESET_EM_FLAG:hr,RESET_MAGN_FLAG:Or,RESTART:Jt,SALDO_EN_BAD:be,SALDO_PARAM_BAD:xe,SET_DEMAND_EN_10MIN:Ur,SET_DEMAND_EN_15MIN:dr,SET_DEMAND_EN_1MIN:fr,SET_DEMAND_EN_30MIN:Ir,SET_DEMAND_EN_3MIN:Pr,SET_DEMAND_EN_5MIN:gr,SET_DEMAND_EN_60MIN:lr,SET_NEW_SALDO:He,SET_SALDO_PARAM:er,SET_TARIFF_TBL:jt,SUMMER_TIME:zt,TIME_CORRECT:Qe,TIME_CORRECT_NEW:_r,T_MAX_OK:ie,T_MAX_OVER:Ee,T_MIN_OK:_e,T_MIN_OVER:se,VENDOR_PAR_FAULT:ct,V_MAX_OK:ee,V_MAX_OVER:re,V_MIN_OK:ae,V_MIN_OVER:ne,WD_RESTART:te,WINTER_SUMMER_BAD:Ke,WINTER_TIME:kt});var pr=pt(Nr);var Mr={type:vt,destination:65535,source:65534};var Cr=11;var cr=7;var Dr=2+cr;var Sr=4;var mr={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var yr={...mr,AUTO_SCREEN_SCROLLING:2147483648};var Lr={...mr,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Vr={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var Fr={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Yr={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var Hr={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var xr={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var Xr={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Gr={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var Wr={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Br={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var wr={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var Kr={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var br={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Qr={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function Zr(t,e,r){var a=r>>Sr;var n=new Array(Sr).fill(0);n.forEach((function(e,r){var i=!!H(a,1,r+1);if(i){n[r]=t.getUint32()}else{n[r]=null}}));return n}function jr(t,e,r){var a=1+Sr;var n=e;r.forEach((function(t,e){n=x(n,1,e+a,Number(!!t))}));t.setUint8(n)}function zr(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function kr(t,e){var r=e.tariff,a=e.energy;if(r!==undefined&&a!==undefined){t.setUint16(r<<14|a&16383)}else{t.setUint16(65535)}}function qr(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;V.call(this,t,e)}qr.prototype=Object.create(V.prototype);qr.prototype.constructor=qr;qr.getDayProfileFromByte=function(t){return{tariff:H(t,2,1),isFirstHalfHour:!H(t,1,3),hour:H(t,5,4)}};qr.getByteFromDayProfile=function(t){var e=0;e=x(e,2,1,t.tariff);e=x(e,1,3,+!t.isFirstHalfHour);e=x(e,5,4,t.hour);return e};qr.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};qr.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:Y(yr,2147496324),relaySet4:Y(Hr,0),relaySet3:Y(Yr,0),relaySet2:Y(Fr,3),relaySet1:Y(Vr,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:Y(Xr,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:Y(Lr,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:Y(xr,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};qr.prototype.getFrameHeader=function(){var t=this.getUint8();var e=Mt[t];var r=this.getUint16();var a=this.getUint16();return{type:t,typeName:e,destination:r,source:a}};qr.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?Mr.type:e,a=t.destination,n=a===void 0?Mr.destination:a,i=t.source,E=i===void 0?Mr.source:i;this.setUint8(r);this.setUint16(n);this.setUint16(E)};qr.prototype.getDeviceId=function(){var t=At(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var a=At(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:a}};qr.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,a=t.year,n=t.serial;this.setBytes(X(e));this.setUint8(r);this.setUint8(a);this.setBytes(X(n))};qr.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};qr.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};qr.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};qr.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};qr.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};qr.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};qr.prototype.getDayProfile=function(){return qr.getDayProfileFromByte(this.getUint8())};qr.prototype.setDayProfile=function(t){this.setUint8(qr.getByteFromDayProfile(t))};qr.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(cr).fill(0).map((function(){return t.getUint8()}))}};qr.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};qr.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};qr.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};qr.prototype.getDeviceType=function(){return st(this.getBytes(9))};qr.prototype.setDeviceType=function(t){this.setBytes(ot(t))};qr.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:Y(yr,this.getUint32()),relaySet4:Y(Hr,this.getUint8()),relaySet3:Y(Yr,this.getUint8()),relaySet2:Y(Fr,this.getUint8()),relaySet1:Y(Vr,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:Y(Xr,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:Y(Lr,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:Y(xr,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};qr.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(F(yr,t.displaySet));this.setUint8(F(Hr,t.relaySet4));this.setUint8(F(Yr,t.relaySet3));this.setUint8(F(Fr,t.relaySet2));this.setUint8(F(Vr,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(F(Xr,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(F(Lr,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(F(xr,t.relaySet5));this.setUint8(e)};qr.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=H(t,Sr,1);var r=Zr(this,e,t);return{energyType:e,energies:r}};qr.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,a=t.energies;if(r){jr(this,r,a)}a.forEach((function(t){if(t!==null){e.setUint32(t)}}))};qr.prototype.getEnergies=function(){var t=this;return new Array(Sr).fill(0).map((function(){return t.getInt32()}))};qr.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};qr.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};qr.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};qr.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};qr.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};qr.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return zr(t)}))};qr.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return kr(e,t)}))};qr.prototype.getEventStatus=function(){var t=this.getUint16();return Y(Gr,t)};qr.prototype.setEventStatus=function(t){this.setUint16(F(Gr,t))};qr.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=Y(Wr,this.getUint8());var r=Y(Br,this.getUint8());var a=Y(wr,this.getUint8());var n=Y(Kr,this.getUint8());var i=Y(br,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:a,status2:n,status3:i}};qr.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,a=t.relayStatus2,n=t.status1,i=t.status2,E=t.status3;this.setUint16(e);this.setUint8(F(Wr,r));this.setUint8(F(Br,a));this.setUint8(F(wr,n));this.setUint8(F(Kr,i));this.setUint8(F(br,E))};qr.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=pr[e];switch(e){case rr:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case Bt:case Qe:if(r<8){return t}t.newDate=this.getDateTime();break}return t};qr.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case rr:for(var e of t.power){this.setUint8(e)}break;case Bt:case Qe:this.setDateTime(t.newDate);break}};qr.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};qr.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};qr.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(Sr).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};qr.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};qr.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:Y(Qr,this.getUint8())}};qr.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,a=t.pmaxMinusThreshold2,n=t.pmaxMinusThreshold3,i=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(a);this.setUint32(n);this.setUint8(F(Qr,i))};qr.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(Sr).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};qr.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var $r=function(t){return btoa(t.map((function(t){return String.fromCharCode(t)})).join(""))};var Jr=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[t,e.length].concat(s(e))};var ta=0;var ea=3;var ra=1;var aa=3;var na=4;var ia=5;var Ea=7;var _a=8;var sa=9;var oa=13;var Aa=15;var va=16;var Ta=17;var Ra=18;var ha=19;var Oa=20;var ua=21;var fa=22;var Pa=23;var ga=24;var Ua=25;var da=28;var Ia=30;var la=31;var Na=40;var pa=41;var Ma=42;var Ca=44;var ca=45;var Da=46;var Sa=47;var ma=49;var ya=50;var La=51;var Va=52;var Fa=53;var Ya=54;var Ha=57;var xa=58;var Xa=59;var Ga=60;var Wa=61;var Ba=62;var wa=65;var Ka=70;var ba=74;var Qa=75;var Za=79;var ja=80;var za=82;var ka=83;var qa=88;var $a=89;var Ja=91;var tn=92;var en=93;var rn=94;var an=100;var nn=109;var En=111;var _n=112;var sn=113;var on=114;var An=118;var vn=122;var Tn=Object.freeze({__proto__:null,activateRatePlan:ha,getBuildVersion:_n,getCorrectTime:Ba,getCriticalEvent:wa,getCurrentStatusMeter:Ha,getCurrentValues:oa,getDateTime:Ea,getDayDemand:fa,getDayDemandExport:Za,getDayMaxDemand:ma,getDayMaxDemandExport:qa,getDayMaxDemandPrevious:ba,getDayProfile:Xa,getDemand:An,getDeviceId:ia,getDeviceType:na,getDisplayParam:rn,getEnergy:Aa,getEnergyDayPrevious:aa,getEnergyExport:Ja,getEnergyExportDayPrevious:ja,getEventStatus:ra,getEvents:La,getEventsCounters:Va,getExtendedCurrentValues:xa,getExtendedCurrentValues2:ca,getHalfHourDemand:ua,getHalfHourDemandExport:ka,getHalfHourDemandPrevious:Qa,getHalfhoursEnergies:En,getMagneticFieldThreshold:nn,getMeterInfo:vn,getMonthDemand:Pa,getMonthDemandExport:za,getMonthMaxDemand:ya,getMonthMaxDemandExport:$a,getOperatorParameters:Ia,getOperatorParametersExtended3:sn,getRatePlanInfo:Ca,getSaldo:pa,getSaldoParameters:Da,getSeasonProfile:Ga,getSpecialDay:Wa,getVersion:Na,prepareRatePlan:Oa,resetPowerMaxDay:Fa,resetPowerMaxMonth:Ya,runTariffPlan:Ka,setAccessKey:sa,setCorrectDateTime:tn,setCorrectTime:da,setDateTime:_a,setDayProfile:va,setDisplayParam:en,setOperatorParameters:la,setOperatorParametersExtended3:on,setSaldo:Ma,setSaldoParameters:Sa,setSeasonProfile:Ta,setSpecialDay:Ra,setSpecialOperation:an,turnRelayOff:Ua,turnRelayOn:ga});pt(Tn);var Rn=ha;var hn=1+Cr;var On=function(t){var e=new qr(hn);e.setUint8(t.tariffTable);e.setTariffPlan(t.tariffPlan);return Jr(Rn,e.data)};var un=_n;var fn=function(){return Jr(un)};var Pn=Ba;var gn=function(){return Jr(Pn)};var Un=0;var dn=1;var In=2;var ln=3;var Nn=4;var pn=5;var Mn=6;var Cn=7;var cn=8;var Dn=9;var Sn=10;var mn=11;var yn=12;var Ln=13;var Vn=14;var Fn=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Sn,CASE_OPEN:Un,CASE_TERMINAL_OPEN:Dn,DEVICE_FAILURE:cn,ERROR_ACCESS:pn,MAGNETIC_ON:dn,PARAMETERS_UPDATE_LOCAL:ln,PARAMETERS_UPDATE_REMOTE:In,PROTECTION_RESET_EM:Ln,PROTECTION_RESET_MAGNETIC:Vn,RESTART:Nn,TARIFF_TABLE_GET:yn,TARIFF_TABLE_SET:mn,TIME_CORRECT:Cn,TIME_SET:Mn});pt(Fn);var Yn=Ha;var Hn=function(){return Jr(Yn)};var xn=oa;var Xn=function(){return Jr(xn)};var Gn=Ea;var Wn=function(){return Jr(Gn)};var Bn=ma;var wn=3;var Kn=function(t){var e=new qr(wn);e.setDate(t.date);return Jr(Bn,e.data)};var bn=qa;var Qn=3;var Zn=function(t){var e=new qr(Qn);e.setDate(t.date);return Jr(bn,e.data)};var jn=Xa;var zn=3;var kn=function(t){var e=new qr(zn);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(jn,e.data)};var qn=ia;var $n=function(){return Jr(qn)};var Jn=na;var ti=function(){return Jr(Jn)};var ei=0;var ri=128;var ai=129;var ni=130;var ii=131;var Ei=132;var _i=133;var si=134;var oi=135;var Ai=136;var vi=137;var Ti=144;var Ri=145;var hi=146;var Oi=147;var ui=149;var fi=151;var Pi=152;var gi=153;var Ui=154;var di=155;var Ii=156;var li=159;var Ni=160;var pi=240;var Mi=Object.freeze({__proto__:null,ACCESS_DENIED:Oi,BAD_ARRAY_INDEX:si,BAD_BLOCK_NUMBER:Ii,BAD_DATA_LENGTH:_i,BAD_MESSAGE:Ei,BAD_RATE_PLAN_ID:Ai,BAD_RATE_PLAN_SIZE:vi,BAD_RESPONSE_LENGTH:Ti,BAD_SALDO_WRITE:ui,BLOCKED_METER:fi,CALIBRATION_DISABLED:hi,DECRYPTION_FAILURE:ni,INTERNAL:pi,INVALID_CORRECTION_INTERVAL:Ui,NOT_ALIGNED_DATA:ai,NOT_PREPARED_RATE_PLAN:oi,NO_DATA_FOR_DATE:Ri,OK:ei,OUT_OFF_RANGE:li,SET_METER_TYPE_FAILURE:Ni,TIME_CORRECTION_FAILURE:gi,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:di,UNENCRYPTED_COMMAND_DISABLED:Pi,UNKNOWN_COMMAND:ri,UNKNOWN_PROTOCOL:ii});pt(Mi);var Ci=1;var ci=2;var Di=3;var Si=4;var mi=5;var yi=6;var Li=7;var Vi=8;var Fi=9;var Yi=10;var Hi=11;var xi=12;var Xi=13;var Gi=14;var Wi=15;var Bi=16;var wi=17;var Ki=18;var bi=19;var Qi=20;var Zi=21;var ji=22;var zi=23;var ki=24;var qi=25;var $i=26;var Ji=28;var tE=30;var eE=31;var rE=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:Si,ACTIVE_ENERGY_T2:mi,ACTIVE_ENERGY_T3:yi,ACTIVE_ENERGY_T4:Li,ACTIVE_POWER_IN_NEUTRAL:Fi,ACTIVE_POWER_PER_PHASE:Vi,BATTERY_VOLTAGE:ji,CURRENT_BALANCE:tE,CURRENT_IN_NEUTRAL:Hi,CURRENT_IN_PHASE:Yi,DATE_MONTH_YEAR:Gi,EXPORTED_ACTIVE_ENERGY_T1:Bi,EXPORTED_ACTIVE_ENERGY_T2:wi,EXPORTED_ACTIVE_ENERGY_T3:Ki,EXPORTED_ACTIVE_ENERGY_T4:bi,HOUR_MINUTE_SECOND:Xi,MAGNET_INDUCTION:Ji,OPTOPORT_SPEED:eE,POWER_COEFFICIENT_PHASE_A:Qi,POWER_COEFFICIENT_PHASE_B:Zi,POWER_THRESHOLD_T1:zi,POWER_THRESHOLD_T2:ki,POWER_THRESHOLD_T3:qi,POWER_THRESHOLD_T4:$i,SET_ALL_SEGMENT_DISPLAY:Ci,SOFTWARE_VERSION:ci,TOTAL_ACTIVE_ENERGY:Di,TOTAL_EXPORTED_ACTIVE_ENERGY:Wi,VOLTAGE:xi});pt(rE);var aE=120;var nE=121;var iE=254;var EE=Object.freeze({__proto__:null,activateRatePlan:ha,errorResponse:iE,getBuildVersion:_n,getCorrectTime:Ba,getCriticalEvent:wa,getCurrentStatusMeter:Ha,getCurrentValues:oa,getDateTime:Ea,getDayDemand:fa,getDayDemandExport:Za,getDayEnergies:aE,getDayMaxDemand:ma,getDayMaxDemandExport:qa,getDayMaxDemandPrevious:ba,getDayMaxPower:nE,getDayProfile:Xa,getDemand:An,getDeviceId:ia,getDeviceType:na,getDisplayParam:rn,getEnergy:Aa,getEnergyDayPrevious:aa,getEnergyExport:Ja,getEnergyExportDayPrevious:ja,getEventStatus:ra,getEvents:La,getEventsCounters:Va,getExtendedCurrentValues:xa,getExtendedCurrentValues2:ca,getHalfHourDemand:ua,getHalfHourDemandExport:ka,getHalfHourDemandPrevious:Qa,getHalfhoursEnergies:En,getMagneticFieldThreshold:nn,getMeterInfo:vn,getMonthDemand:Pa,getMonthDemandExport:za,getMonthMaxDemand:ya,getMonthMaxDemandExport:$a,getOperatorParameters:Ia,getOperatorParametersExtended3:sn,getRatePlanInfo:Ca,getSaldo:pa,getSaldoParameters:Da,getSeasonProfile:Ga,getSpecialDay:Wa,getVersion:Na,prepareRatePlan:Oa,resetPowerMaxDay:Fa,resetPowerMaxMonth:Ya,runTariffPlan:Ka,setAccessKey:sa,setCorrectDateTime:tn,setCorrectTime:da,setDateTime:_a,setDayProfile:va,setDisplayParam:en,setOperatorParameters:la,setOperatorParametersExtended3:on,setSaldo:Ma,setSaldoParameters:Sa,setSeasonProfile:Ta,setSpecialDay:Ra,setSpecialOperation:an,turnRelayOff:Ua,turnRelayOn:ga});pt(EE);var _E=La;var sE=4;var oE=function(t){var e=new qr(sE);e.setDate(t.date);e.setUint8(t.offset);return Jr(_E,e.data)};var AE=Va;var vE=function(){return Jr(AE)};var TE=ra;var RE=function(){return Jr(TE)};var hE=xa;var OE=function(){return Jr(hE)};var uE=ua;var fE=3;var PE=function(t){var e=new qr(fE);e.setDate(t.date);return Jr(uE,e.data)};var gE=ka;var UE=3;var dE=function(t){var e=new qr(UE);e.setDate(t.date);return Jr(gE,e.data)};var IE=4;var lE=4294967295;var NE={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var pE=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return F(NE,e)};var ME=function(t){return t<IE?1<<t:0};var CE=function(t){return t<IE?1<<t<<4:0};var cE=function(t,e){var r=0;if(t<IE){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=ME(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=CE(t)}}return r};function DE(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;V.call(this,t,e)}DE.prototype=Object.create(V.prototype);DE.prototype.constructor=DE;DE.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};DE.prototype.setDate=function(t){var e=t.year,r=t.month,a=t.date;var n=e<<1|r>>3&1;var i=r<<5&224|a&31;this.setUint8(n);this.setUint8(i)};DE.prototype.getEnergiesFlags=function(){var t=this.getUint8();return Y(NE,t)};DE.prototype.setEnergiesFlags=function(t){this.setUint8(pE(t))};DE.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var a=this.getUint16();e.push(a===lE?undefined:a)}return e};DE.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?lE:r)}}};DE.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};DE.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};DE.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&NE["A+"]){e["A+"]=this.getUint32()}if(t&NE["A+R+"]){e["A+R+"]=this.getUint32()}if(t&NE["A+R-"]){e["A+R-"]=this.getUint32()}return e};DE.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};DE.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&NE["A-"]){e["A-"]=this.getUint32()}if(t&NE["A-R+"]){e["A-R+"]=this.getUint32()}if(t&NE["A-R-"]){e["A-R-"]=this.getUint32()}return e};DE.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};DE.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(IE).fill(null);for(var a=0;a<IE;a++){if(e&ME(a)){r[a]=this.getAPlusTariffEnergies(t)}}for(var n=0;n<IE;n++){if(e&CE(n)){r[n]={...r[n],...this.getAMinusTariffEnergies(t)}}}return r};DE.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=pE(t);a|=cE(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};DE.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};DE.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,a=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(a)}};DE.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&NE["A+"]){e["A+"]=this.getPowerMax()}if(t&NE["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&NE["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};DE.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};DE.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&NE["A-"]){e["A-"]=this.getPowerMax()}if(t&NE["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&NE["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};DE.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};DE.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(IE).fill(null);for(var a=0;a<IE;a++){if(e&ME(a)){r[a]=this.getAPlusTariffPowerMax(t)}}for(var n=0;n<IE;n++){if(e&CE(n)){r[n]={...r[n],...this.getAMinusTariffPowerMax(t)}}}return r};DE.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=pE(t);a|=cE(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var SE=En;var mE=5;var yE=function(t){var e=new DE(mE);e.setDate(t.date);e.setEnergiesFlags(t.energies);e.setUint8(t.firstHalfhour);e.setUint8(t.halfhoursNumber);return Jr(SE,e.data)};var LE=nn;var VE=function(){return Jr(LE)};var FE=vn;var YE=function(){return Jr(FE)};var HE=Pa;var xE=2;var XE=function(t){var e=new qr(xE);e.setUint8(t.year);e.setUint8(t.month);return Jr(HE,e.data)};var GE=za;var WE=2;var BE=function(t){var e=new qr(WE);e.setUint8(t.year);e.setUint8(t.month);return Jr(GE,e.data)};var wE=ya;var KE=function(t){var e=t.year,r=t.month;return Jr(wE,[e,r])};var bE=$a;var QE=function(t){var e=t.year,r=t.month;return Jr(bE,[e,r])};var ZE=sn;var jE=function(){return Jr(ZE)};var zE=Ia;var kE=function(){return Jr(zE)};var qE=Ca;var $E=function(t){return Jr(qE,[t.tariffTable])};var JE=pa;var t_=function(){return Jr(JE)};var e_=Da;var r_=function(){return Jr(e_)};var a_=Ga;var n_=3;var i_=function(t){var e=new qr(n_);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(a_,e.data)};var E_=Wa;var __=3;var s_=function(t){var e=new qr(__);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(E_,e.data)};var o_=Na;var A_=function(){return Jr(o_)};var v_=Oa;var T_=5;var R_=function(t){var e=new qr(T_);e.setUint8(t.tariffTable);e.setUint32(t.id);return Jr(v_,e.data)};var h_=Fa;var O_=function(){return Jr(h_)};var u_=Ya;var f_=function(){return Jr(u_)};var P_=Ka;var g_=function(t){return Jr(P_,[t.tariffTable])};var U_=16;var d_=sa;var I_=1+U_;var l_=function(t){var e=new qr(I_);e.setUint8(t.accessLevel);e.setBytes(t.key);return Jr(d_,e.data)};var N_=tn;var p_=2;var M_=function(t){var e=new qr(p_);e.setInt16(t.seconds);return Jr(N_,e.data)};var C_=da;var c_=9;var D_=function(t){var e=new qr(c_);e.setTimeCorrectionParameters(t);return Jr(C_,e.data)};var S_=_a;var m_=8;var y_=function(t){var e=new qr(m_);e.setDateTime(t);return Jr(S_,e.data)};var L_=8;var V_=255;var F_=va;var Y_=function(t){var e=t.periods.length<L_;var r=2+t.periods.length+ +e;var a=new qr(r);a.setUint8(t.tariffTable);a.setUint8(t.index);t.periods.forEach((function(t){a.setDayProfile(t)}));if(e){a.setUint8(V_)}return Jr(F_,a.data)};var H_=on;var x_=17;var X_=function(t){var e=new qr(x_);e.setOperatorParametersExtended3(t);return Jr(H_,e.data)};var G_=Ma;var W_=12;var B_=function(t){var e=new qr(W_);e.setUint8(t.date.month);e.setUint8(t.date.date);e.setUint8(t.date.hours);e.setUint8(t.date.minutes);e.setInt32(t.saldoNew);e.setInt32(t.saldoOld);return Jr(G_,e.data)};var w_=Sa;var K_=37;var b_=function(t){var e=new qr(K_);e.setSaldoParameters(t);return Jr(w_,e.data)};var Q_=Ta;var Z_=Dr;var j_=function(t){var e=new qr(Z_);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSeasonProfile(t);return Jr(Q_,e.data)};var z_=Ra;var k_=6;var q_=function(t){var e=new qr(k_);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSpecialDay(t);return Jr(z_,e.data)};var $_=an;var J_=2;var ts=function(t){var e=new qr(J_);var r=0;if(t.readScreensInfo){r|=128}if(t.resetElectroMagneticIndication){r|=1}if(t.resetMagneticIndication){r|=2}e.setUint8(t.type);e.setUint8(r);return Jr($_,e.data)};var es=Ua;var rs=function(){return Jr(es)};var as=ga;var ns=function(){return Jr(as)};var is={encrypt:function(){},decrypt:function(){}};var Es=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var _s=16;var ss=[0];var os=function(t){return function(e,r){var a;var n=r.messageId,i=n===void 0?1:n,E=r.accessLevel,_=E===void 0?ea:E,o=r.aesKey;var A=e.map((function(e){if("id"in e){return t[e.id](e.parameters||{})}if("command"in e){return e.command.bytes}throw new Error("wrong command format")}));var v=_|16;var T=[i,v];var R=(a=[]).concat.apply(a,[v].concat(s(A),[ss]));if(_!==ta){var h=(R.length+1)%_s;if(h){R=R.concat(new Array(_s-h).fill(0))}}R=R.concat(Es(R));if(o&&_!==ta){R=s(is.encrypt(o,R))}return T.concat(R)}};var As=1;var vs=3;var Ts=4;var Rs=5;var hs=7;var Os=8;var us=9;var fs=13;var Ps=15;var gs=16;var Us=17;var ds=18;var Is=19;var ls=20;var Ns=21;var ps=22;var Ms=23;var Cs=24;var cs=25;var Ds=28;var Ss=30;var ms=31;var ys=40;var Ls=41;var Vs=42;var Fs=44;var Ys=46;var Hs=47;var xs=49;var Xs=50;var Gs=51;var Ws=52;var Bs=53;var ws=54;var Ks=57;var bs=58;var Qs=59;var Zs=60;var js=61;var zs=62;var ks=63;var qs=64;var $s=69;var Js=70;var to=71;var eo=72;var ro=73;var ao=78;var no=79;var io=80;var Eo=82;var _o=83;var so=84;var oo=85;var Ao=86;var vo=88;var To=89;var Ro=90;var ho=92;var Oo=93;var uo=94;var fo=100;var Po=109;var go=111;var Uo=112;var Io=113;var lo=114;var No=117;var po=118;var Mo=122;var Co=Object.freeze({__proto__:null,activateRatePlan:Is,getBuildVersion:Uo,getCorrectTime:zs,getCriticalEvent:Ao,getCurrentStatusMeter:Ks,getCurrentValues:fs,getDateTime:hs,getDayDemand:ps,getDayDemandExport:no,getDayMaxDemand:xs,getDayMaxDemandExport:vo,getDayProfile:Qs,getDemand:po,getDeviceId:Rs,getDeviceType:Ts,getDisplayParam:uo,getEnergy:Ps,getEnergyDayPrevious:vs,getEnergyExport:ao,getEnergyExportDayPrevious:io,getEventStatus:As,getEvents:Gs,getEventsCounters:Ws,getExtendedCurrentValues:bs,getHalfHourDemand:Ns,getHalfHourDemandChannel:Ro,getHalfHourDemandExport:_o,getHalfHourDemandVare:ro,getHalfHourDemandVareExport:oo,getHalfHourDemandVari:eo,getHalfHourDemandVariExport:so,getHalfhoursEnergies:go,getMagneticFieldThreshold:Po,getMeterInfo:Mo,getMonthDemand:Ms,getMonthDemandExport:Eo,getMonthMaxDemand:Xs,getMonthMaxDemandExport:To,getOperatorParameters:Ss,getOperatorParametersExtended:ks,getOperatorParametersExtended2:to,getOperatorParametersExtended3:Io,getRatePlanInfo:Fs,getSaldo:Ls,getSaldoParameters:Ys,getSeasonProfile:Zs,getSpecialDay:js,getVersion:ys,prepareRatePlan:ls,resetPowerMaxDay:Bs,resetPowerMaxMonth:ws,runTariffPlan:Js,setAccessKey:us,setCorrectDateTime:ho,setCorrectTime:Ds,setDateTime:Os,setDayProfile:gs,setDisplayParam:Oo,setOperatorParameters:ms,setOperatorParametersExtended:qs,setOperatorParametersExtended2:$s,setOperatorParametersExtended3:lo,setOperatorParametersExtended4:No,setSaldo:Vs,setSaldoParameters:Hs,setSeasonProfile:Us,setSpecialDay:ds,setSpecialOperation:fo,turnRelayOff:cs,turnRelayOn:Cs});pt(Co);var co=1;var Do=2;var So=3;var mo=4;var yo=17;var Lo=18;var Vo=19;var Fo=20;var Yo=21;var Ho=22;var xo=23;var Xo=32;var Go=33;var Wo=34;var Bo=35;var wo=36;var Ko=37;var bo=38;var Qo=39;var Zo=40;var jo=49;var zo=50;var ko=51;var qo=52;var $o=53;var Jo=54;var tA=55;var eA=56;var rA=57;var aA=64;var nA=65;var iA=66;var EA=67;var _A=68;var sA=69;var oA=70;var AA=71;var vA=72;var TA=73;var RA=74;var hA=75;var OA=76;var uA=77;var fA=78;var PA=79;var gA=80;var UA=81;var dA=82;var IA=83;var lA=84;var NA=85;var pA=86;var MA=87;var CA=88;var cA=89;var DA=90;var SA=91;var mA=92;var yA=93;var LA=94;var VA=95;var FA=96;var YA=97;var HA=98;var xA=99;var XA=100;var GA=101;var WA=102;var BA=103;var wA=104;var KA=105;var bA=106;var QA=107;var ZA=108;var jA=109;var zA=110;var kA=111;var qA=112;var $A=113;var JA=114;var tv=115;var ev=116;var rv=117;var av=118;var nv=119;var iv=120;var Ev=121;var _v=122;var sv=123;var ov=124;var Av=125;var vv=126;var Tv=127;var Rv=128;var hv=129;var Ov=130;var uv=131;var fv=132;var Pv=133;var gv=134;var Uv=135;var dv=136;var Iv=137;var lv=138;var Nv=139;var pv=140;var Mv=141;var Cv=142;var cv=143;var Dv=144;var Sv=145;var mv=147;var yv=148;var Lv=149;var Vv=150;var Fv=151;var Yv=152;var Hv=153;var xv=154;var Xv=155;var Gv=156;var Wv=157;var Bv=158;var wv=159;var Kv=160;var bv=161;var Qv=162;var Zv=163;var jv=164;var zv=165;var kv=166;var qv=167;var $v=168;var Jv=169;var tT=170;var eT=171;var rT=172;var aT=173;var nT=174;var iT=175;var ET=176;var _T=177;var sT=178;var oT=179;var AT=224;var vT=225;var TT=226;var RT=227;var hT=228;var OT=229;var uT=230;var fT=231;var PT=232;var gT=Object.freeze({__proto__:null,ACCESS_LOCKED:yo,ACCESS_UNLOCKED:Lo,ACCUMULATION_PARAM_BAD:Pv,ACCUMULATION_PARAM_EXT_BAD:gv,BAD_TEST_EEPROM:hv,BAD_TEST_FRAM:Ov,BATTERY_FAULT:KA,BATTERY_OK:wA,BLOCK_TARIFF_BAD:dv,CALCULATION_PERIOD_BAD:Uv,CALIBRATION_FAULT:QA,CALIBRATION_FLAG_RESET:Rv,CALIBRATION_FLAG_SET:Tv,CALIBRATION_OK:bA,CALIBRATION_PARAM_BAD:Iv,CASE_CLOSE:Yo,CASE_KLEMA_CLOSE:Fv,CASE_KLEMA_OPEN:Vv,CASE_MODULE_CLOSE:Xv,CASE_MODULE_OPEN:xv,CASE_OPEN:Fo,CHANGE_ACCESS_KEY0:Xo,CHANGE_ACCESS_KEY1:Go,CHANGE_ACCESS_KEY2:Wo,CHANGE_ACCESS_KEY3:Bo,CHANGE_COR_TIME:qA,CHANGE_PARAMETERS_LOCAL:wo,CHANGE_PARAMETERS_REMOTE:Ko,CHANGE_PARAM_CHANNEL1:Bv,CHANGE_PARAM_CHANNEL2:wv,CHANGE_PARAM_CHANNEL3:Kv,CHANGE_PARAM_CHANNEL4:bv,CHANGE_PARAM_CHANNEL5:Qv,CHANGE_PARAM_CHANNEL6:Zv,CHANGE_TARIFF_TABLE:zo,CHANGE_TARIFF_TABLE_2:Yv,CHANGE_TARIFF_TABLE_3:Hv,CLOCK_FAULT:YA,CLOCK_OK:FA,CMD_CHANGE_TIME:bo,CMD_RELAY_2_OFF:JA,CMD_RELAY_2_ON:$A,CMD_RELAY_OFF:Zo,CMD_RELAY_ON:Qo,COEFFICIENT_TRANSFORMATION_CHANGE:cv,CROSS_ZERO_ENT0:tv,CROSS_ZERO_ENT1:ev,CROSS_ZERO_ENT2:rv,CROSS_ZERO_ENT3:av,CROSS_ZERO_EXPORT_ENT0:jv,CROSS_ZERO_EXPORT_ENT1:zv,CROSS_ZERO_EXPORT_ENT2:kv,CROSS_ZERO_EXPORT_ENT3:qv,CROSS_ZERO_EXPORT_VARE0:rT,CROSS_ZERO_EXPORT_VARE1:aT,CROSS_ZERO_EXPORT_VARE2:nT,CROSS_ZERO_EXPORT_VARE3:iT,CROSS_ZERO_EXPORT_VARI0:$v,CROSS_ZERO_EXPORT_VARI1:Jv,CROSS_ZERO_EXPORT_VARI2:tT,CROSS_ZERO_EXPORT_VARI3:eT,CROSS_ZERO_VARE0:sv,CROSS_ZERO_VARE1:ov,CROSS_ZERO_VARE2:Av,CROSS_ZERO_VARE3:vv,CROSS_ZERO_VARI0:nv,CROSS_ZERO_VARI1:iv,CROSS_ZERO_VARI2:Ev,CROSS_ZERO_VARI3:_v,EM_MAGNETIC_OFF:_T,EM_MAGNETIC_ON:ET,ENERGY_REGISTER_OVERFLOW:jo,ENERGY_T0_FAULT:co,ENERGY_T1_FAULT:Do,ENERGY_T2_FAULT:So,ENERGY_T3_FAULT:mo,ERR_ACCESS:Vo,F_MAX_OK:OA,F_MAX_OVER:uA,F_MIN_OK:fA,F_MIN_UNDER:PA,IA_MAX_OK:lA,IA_MAX_OVER:NA,IB_MAX_OK:pA,IB_MAX_OVER:MA,IC_MAX_OK:CA,IC_MAX_OVER:cA,IDIFF_OK:LA,IDIFF_OVER:VA,MAGNETIC_OFF:xo,MAGNETIC_ON:Ho,METER_TROUBLE:Lv,OP_PARAM_BAD:Nv,OP_PARAM_EXT_BAD:pv,O_PARAMETERS_FAULT:kA,O_PARAMETERS_OK:zA,PA_MAX_OK:DA,PA_MAX_OVER:SA,POWER_A_OFF:BA,POWER_A_ON:WA,POWER_B_OFF:GA,POWER_B_ON:XA,POWER_C_OFF:xA,POWER_C_ON:HA,POWER_OVER_RELAY_OFF:Wv,PV_MAX_OK:mA,PV_MAX_OVER:yA,P_MAX_A_MINUS_OK:fT,P_MAX_A_MINUS_OVER:PT,RELAY_HARD_BAD_OFF:Dv,RELAY_HARD_BAD_ON:mv,RELAY_HARD_OFF:yv,RELAY_HARD_ON:Sv,RELAY_OFF:tA,RELAY_ON:Jo,RESET_EM_FLAG:sT,RESET_MAGNETIC_FLAG:oT,RESTART:eA,SALDO_ENERGY_BAD:Mv,SALDO_PARAM_BAD:fv,SET_DEMAND_EN_10_MIN:RT,SET_DEMAND_EN_15_MIN:hT,SET_DEMAND_EN_1_MIN:AT,SET_DEMAND_EN_30_MIN:OT,SET_DEMAND_EN_3_MIN:vT,SET_DEMAND_EN_5_MIN:TT,SET_DEMAND_EN_60_MIN:uT,SET_NEW_SALDO:uv,SET_SALDO_PARAM:Gv,SET_TARIFF_TABLE:ko,SUMMER_TIME:qo,TIME_CORRECT:Cv,T_MAX_OK:gA,T_MAX_OVER:UA,T_MIN_OK:dA,T_MIN_UNDER:IA,VA_MAX_OK:aA,VA_MAX_OVER:nA,VA_MIN_OK:iA,VA_MIN_UNDER:EA,VB_MAX_OK:_A,VB_MAX_OVER:sA,VB_MIN_OK:oA,VB_MIN_UNDER:AA,VC_MAX_OK:vA,VC_MAX_OVER:TA,VC_MIN_OK:RA,VC_MIN_UNDER:hA,V_PARAMETERS_FAULT:jA,V_PARAMETERS_OK:ZA,WD_RESTART:rA,WINTER_SUMMER_BAD:lv,WINTER_TIME:$o});var UT=pt(gT);var dT=1;var IT=2;var lT=3;var NT=4;var pT=5;var MT=6;var CT=7;var cT=8;var DT=9;var ST=10;var mT=11;var yT=12;var LT=13;var VT=14;var FT=15;var YT=16;var HT=17;var xT=18;var XT=19;var GT=20;var WT=21;var BT=22;var wT=23;var KT=24;var bT=25;var QT=26;var ZT=27;var jT=28;var zT=29;var kT=30;var qT=31;var $T=32;var JT=33;var tR=34;var eR=35;var rR=36;var aR=37;var nR=38;var iR=39;var ER=40;var _R=41;var sR=42;var oR=43;var AR=44;var vR=45;var TR=46;var RR=47;var hR=48;var OR=49;var uR=50;var fR=51;var PR=52;var gR=53;var UR=54;var dR=55;var IR=56;var lR=57;var NR=58;var pR=59;var MR=60;var CR=61;var cR=62;var DR=63;var SR=64;var mR=65;var yR=66;var LR=67;var VR=68;var FR=69;var YR=70;var HR=71;var xR=72;var XR=73;var GR=74;var WR=75;var BR=76;var wR=77;var KR=78;var bR=79;var QR=80;var ZR=81;var jR=82;var zR=83;var kR=84;var qR=85;var $R=86;var JR=87;var th=88;var eh=89;var rh=90;var ah=91;var nh=92;var ih=93;var Eh=94;var _h=95;var sh=96;var oh=97;var Ah=98;var vh=99;var Th=100;var Rh=101;var hh=102;var Oh=103;var uh=104;var fh=105;var Ph=106;var gh=107;var Uh=108;var dh=109;var Ih=110;var lh=111;var Nh=112;var ph=113;var Mh=114;var Ch=115;var ch=116;var Dh=117;var Sh=118;var mh=119;var yh=120;var Lh=121;var Vh=122;var Fh=123;var Yh=124;var Hh=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:NT,ACTIVE_ENERGY_T2:pT,ACTIVE_ENERGY_T3:MT,ACTIVE_ENERGY_T4:CT,ACTIVE_POWER_PHASE_A:oR,ACTIVE_POWER_PHASE_B:AR,ACTIVE_POWER_PHASE_C:vR,ACTIVE_POWER_SUM:sR,APPARENT_POWER_QMINUS_PHASE_A:DR,APPARENT_POWER_QMINUS_PHASE_B:SR,APPARENT_POWER_QMINUS_PHASE_C:mR,APPARENT_POWER_QMINUS_SUM:cR,APPARENT_POWER_QPLUS_PHASE_A:pR,APPARENT_POWER_QPLUS_PHASE_B:MR,APPARENT_POWER_QPLUS_PHASE_C:CR,APPARENT_POWER_QPLUS_SUM:NR,BATTERY_VOLTAGE:ER,CURRENT_BALANCE:Sh,CURRENT_IN_NEUTRAL:rR,CURRENT_IN_PHASE_A:JT,CURRENT_IN_PHASE_B:tR,CURRENT_IN_PHASE_C:eR,CURRENT_TRANSFORMATION_RATIO:ch,DATE_MONTH_YEAR:Ch,EXPORTED_ACTIVE_ENERGY_T1:XT,EXPORTED_ACTIVE_ENERGY_T2:GT,EXPORTED_ACTIVE_ENERGY_T3:WT,EXPORTED_ACTIVE_ENERGY_T4:BT,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:zT,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:kT,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:qT,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:$T,EXPORTED_REACTIVE_ENERGY_T1:KT,EXPORTED_REACTIVE_ENERGY_T2:bT,EXPORTED_REACTIVE_ENERGY_T3:QT,EXPORTED_REACTIVE_ENERGY_T4:ZT,FREQUENCY:_R,HOUR_MINUTE_SECOND:Mh,MAGNET_INDUCTION:Yh,MAX_ACTIVE_POWER_DAY_T1:yR,MAX_ACTIVE_POWER_DAY_T2:LR,MAX_ACTIVE_POWER_DAY_T3:VR,MAX_ACTIVE_POWER_DAY_T4:FR,MAX_ACTIVE_POWER_MONTH_T1:YR,MAX_ACTIVE_POWER_MONTH_T2:HR,MAX_ACTIVE_POWER_MONTH_T3:xR,MAX_ACTIVE_POWER_MONTH_T4:XR,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:rh,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:ah,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:nh,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:ih,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:Eh,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:_h,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:sh,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:oh,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:Ah,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:vh,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:Th,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:Rh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:hh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:Oh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:uh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:fh,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:Ph,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:gh,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:Uh,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:dh,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:Ih,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:lh,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:Nh,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:ph,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:jR,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:zR,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:kR,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:qR,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:$R,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:JR,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:th,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:eh,MAX_REACTIVE_POWER_DAY_T1:GR,MAX_REACTIVE_POWER_DAY_T2:WR,MAX_REACTIVE_POWER_DAY_T3:BR,MAX_REACTIVE_POWER_DAY_T4:wR,MAX_REACTIVE_POWER_MONTH_T1:KR,MAX_REACTIVE_POWER_MONTH_T2:bR,MAX_REACTIVE_POWER_MONTH_T3:QR,MAX_REACTIVE_POWER_MONTH_T4:ZR,NEGATIVE_REACTIVE_ENERGY_T1:VT,NEGATIVE_REACTIVE_ENERGY_T2:FT,NEGATIVE_REACTIVE_ENERGY_T3:YT,NEGATIVE_REACTIVE_ENERGY_T4:HT,OPTOPORT_SPEED:Fh,POWER_COEFFICIENT_PHASE_A:dR,POWER_COEFFICIENT_PHASE_B:IR,POWER_COEFFICIENT_PHASE_C:lR,POWER_COEFFICIENT_SUM:UR,POWER_THRESHOLD_T1:mh,POWER_THRESHOLD_T2:yh,POWER_THRESHOLD_T3:Lh,POWER_THRESHOLD_T4:Vh,REACTIVE_ENERGY_T1:DT,REACTIVE_ENERGY_T2:ST,REACTIVE_ENERGY_T3:mT,REACTIVE_ENERGY_T4:yT,REACTIVE_POWER_QMINUS_PHASE_A:fR,REACTIVE_POWER_QMINUS_PHASE_B:PR,REACTIVE_POWER_QMINUS_PHASE_C:gR,REACTIVE_POWER_QMINUS_SUM:uR,REACTIVE_POWER_QPLUS_PHASE_A:RR,REACTIVE_POWER_QPLUS_PHASE_B:hR,REACTIVE_POWER_QPLUS_PHASE_C:OR,REACTIVE_POWER_QPLUS_SUM:TR,SET_ALL_SEGMENT_DISPLAY:dT,SOFTWARE_VERSION:IT,TOTAL_ACTIVE_ENERGY:lT,TOTAL_EXPORTED_ACTIVE_ENERGY:xT,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:jT,TOTAL_EXPORTED_REACTIVE_ENERGY:wT,TOTAL_NEGATIVE_REACTIVE_ENERGY:LT,TOTAL_REACTIVE_ENERGY:cT,VOLTAGE_IN_PHASE_A:aR,VOLTAGE_IN_PHASE_B:nR,VOLTAGE_IN_PHASE_C:iR,VOLTAGE_TRANSFORMATION_RATIO:Dh});pt(Hh);var xh=254;var Xh=Object.freeze({__proto__:null,activateRatePlan:Is,errorResponse:xh,getBuildVersion:Uo,getCorrectTime:zs,getCriticalEvent:Ao,getCurrentStatusMeter:Ks,getCurrentValues:fs,getDateTime:hs,getDayDemand:ps,getDayDemandExport:no,getDayMaxDemand:xs,getDayMaxDemandExport:vo,getDayProfile:Qs,getDemand:po,getDeviceId:Rs,getDeviceType:Ts,getDisplayParam:uo,getEnergy:Ps,getEnergyDayPrevious:vs,getEnergyExport:ao,getEnergyExportDayPrevious:io,getEventStatus:As,getEvents:Gs,getEventsCounters:Ws,getExtendedCurrentValues:bs,getHalfHourDemand:Ns,getHalfHourDemandChannel:Ro,getHalfHourDemandExport:_o,getHalfHourDemandVare:ro,getHalfHourDemandVareExport:oo,getHalfHourDemandVari:eo,getHalfHourDemandVariExport:so,getHalfhoursEnergies:go,getMagneticFieldThreshold:Po,getMeterInfo:Mo,getMonthDemand:Ms,getMonthDemandExport:Eo,getMonthMaxDemand:Xs,getMonthMaxDemandExport:To,getOperatorParameters:Ss,getOperatorParametersExtended:ks,getOperatorParametersExtended2:to,getOperatorParametersExtended3:Io,getRatePlanInfo:Fs,getSaldo:Ls,getSaldoParameters:Ys,getSeasonProfile:Zs,getSpecialDay:js,getVersion:ys,prepareRatePlan:ls,resetPowerMaxDay:Bs,resetPowerMaxMonth:ws,runTariffPlan:Js,setAccessKey:us,setCorrectDateTime:ho,setCorrectTime:Ds,setDateTime:Os,setDayProfile:gs,setDisplayParam:Oo,setOperatorParameters:ms,setOperatorParametersExtended:qs,setOperatorParametersExtended2:$s,setOperatorParametersExtended3:lo,setOperatorParametersExtended4:No,setSaldo:Vs,setSaldoParameters:Hs,setSeasonProfile:Us,setSpecialDay:ds,setSpecialOperation:fo,turnRelayOff:cs,turnRelayOn:Cs});pt(Xh);var Gh=2400;var Wh=9600;var Bh={plc:{0:Wh,2:Gh,4:Wh},optoport:{0:Gh,2:Gh,4:Wh}};var wh={plc:pt(Bh.plc),optoport:pt(Bh.optoport)};var Kh=Ao;var bh=function(t){return Jr(Kh,[t.event,t.index])};var Qh=95;var Zh=9;var jh=28;var zh=28;var kh=4;var qh={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var $h={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var Jh={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var tO={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var eO={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var rO={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var aO={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var nO={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var iO={OPTOPORT_SPEED:1<<26};var EO={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var _O=function(t){return{plc:Bh.plc[H(t,4,1)],optoport:Bh.optoport[H(t,4,5)]}};var sO=function(t){var e=0;e=x(e,4,1,Number(wh.plc[t.plc]));e=x(e,4,5,Number(wh.optoport[t.optoport]));return e};function oO(t,e,r){var a=r>>kh;var n=[];var i=[];var E=[];for(var _=0;_<Sr;_++){var s=!!H(a,1,_+1);if(s){n.push(t.getInt32());i.push(t.getInt32());E.push(t.getInt32())}else{n.push(null);i.push(null);E.push(null)}}return{wh:n,vari:i,vare:E}}function AO(t,e){var r=e.wh,a=e.vari,n=e.vare;var i=1+kh;var E=t;for(var _=0;_<Sr;_++){E=x(E,1,_+i,Number(!!r[_]&&!!a[_]&&!!n[_]))}return E}function vO(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;qr.call(this,t,e)}vO.prototype=Object.create(qr.prototype);vO.prototype.constructor=vO;vO.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:Y(qh,4229),displaySet2:Y($h,139776),displaySet3:Y(Jh,0),relaySet:Y(rO,771),speedOptoPort:_O(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:Y(aO,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:Y(tO,2147876864)}};vO.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:Y(qh,this.getUint32()),displaySet2:Y($h,this.getUint32()),displaySet3:Y(Jh,this.getUint32()),relaySet:Y(rO,this.getUint32()),speedOptoPort:_O(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:Y(aO,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:Y(tO,this.getUint32())}};vO.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(F(qh,t.displaySet1));this.setUint32(F($h,t.displaySet2));this.setUint32(F(Jh,t.displaySet3));this.setUint32(F(rO,t.relaySet));this.setUint8(sO(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(F(aO,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(F(tO,t.displaySet4))};vO.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:Y(nO,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};vO.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(F(nO,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};vO.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var a=0;a<Sr;a++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};vO.prototype.setEnergies=function(t){for(var e=0;e<Sr;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};vO.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=H(t,kh,1);var r=oO(this,e,t);return{energyType:e,energies:r}};vO.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var a=AO(e,r);var n=a>>kh;this.setUint8(a);for(var i=0;i<Sr;i++){var E=!!H(n,1,i+1);if(E){this.setInt32(r.wh[i]);this.setInt32(r.vari[i]);this.setInt32(r.vare[i])}}return}for(var _=0;_<Sr;_++){this.setInt32(r.wh[_]);this.setInt32(r.vari[_]);this.setInt32(r.vare[_])}};vO.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};vO.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};vO.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};vO.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};vO.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(Sr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};vO.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};vO.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(Sr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};vO.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};vO.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=UT[e];switch(e){case Wv:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case bo:case Cv:if(r<8){return t}t.newDate=this.getDateTime();break}return t};vO.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Wv:for(var e of t.power){this.setUint8(e)}break;case bo:case Cv:this.setDateTime(t.newDate);break}};vO.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};vO.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};vO.prototype.getOperatorParametersExtended2=function(){var t={deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:Y(EO,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:Y(iO,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};vO.prototype.setOperatorParametersExtended2=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(F(EO,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(F(iO,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(e)};vO.prototype.getOperatorParametersExtended4=function(){return{displaySet5:Y(eO,this.getUint32()),displaySet25:Y(eO,this.getUint32()),displaySet31:Y(qh,this.getUint32()),displaySet32:Y(qh,this.getUint32()),displaySet33:Y(qh,this.getUint32()),displaySet34:Y(qh,this.getUint32()),displaySet35:Y(eO,this.getUint32())}};vO.prototype.setOperatorParametersExtended4=function(t){this.setUint32(F(eO,t.displaySet5));this.setUint32(F(eO,t.displaySet25));this.setUint32(F(qh,t.displaySet31));this.setUint32(F(qh,t.displaySet32));this.setUint32(F(qh,t.displaySet33));this.setUint32(F(qh,t.displaySet34));this.setUint32(F(eO,t.displaySet35))};var TO=3;var RO=4;var hO=ps;var OO=function(t){var e=new vO(t?.energyType?RO:TO);e.setDate(t?.date);if(t?.energyType){e.setUint8(t.energyType)}return Jr(hO,e.data)};var uO=no;var fO=3;var PO=function(t){var e=new vO(fO);e.setDate(t.date);return Jr(uO,e.data)};var gO=po;var UO=7;var dO=function(t){var e=new vO(UO);e.setDemand(t);return Jr(gO,e.data)};var IO=uo;var lO=1;var NO=function(t){var e=new vO(lO);e.setUint8(t.displayMode);return Jr(IO,e.data)};var pO=Ps;var MO=function(){return Jr(pO)};var CO=vs;var cO=function(t){if(t.energyType){return Jr(CO,[t.energyType])}return Jr(CO)};var DO=ao;var SO=function(){return Jr(DO)};var mO=io;var yO=function(){return Jr(mO)};var LO=Ro;var VO=5;var FO=function(t){var e=new vO(VO);e.setUint8(t.channel);e.setUint8(t.channelParameter);e.setDate(t.date);return Jr(LO,e.data)};var YO=ro;var HO=3;var xO=function(t){var e=new vO(HO);e.setDate(t.date);return Jr(YO,e.data)};var XO=oo;var GO=3;var WO=function(t){var e=new vO(GO);e.setDate(t.date);return Jr(XO,e.data)};var BO=eo;var wO=3;var KO=function(t){var e=new vO(wO);e.setDate(t.date);return Jr(BO,e.data)};var bO=so;var QO=3;var ZO=function(t){var e=new vO(QO);e.setDate(t.date);return Jr(bO,e.data)};var jO=ks;var zO=function(){return Jr(jO)};var kO=to;var qO=function(){return Jr(kO)};var $O=Oo;var JO=function(t){return Jr($O,[t.displayMode].concat(s(t.order)))};var tu=ms;var eu=Qh;var ru=function(t){var e=new vO(eu);e.setOperatorParameters(t);return Jr(tu,e.data)};var au=qs;var nu=Zh;var iu=function(t){var e=new vO(nu);e.setOperatorParametersExtended(t);return Jr(au,e.data)};var Eu=$s;var _u=jh;var su=function(t){var e=new vO(_u);e.setOperatorParametersExtended2(t);return Jr(Eu,e.data)};var ou=No;var Au=zh;var vu=function(t){var e=new vO(Au);e.setOperatorParametersExtended4(t);return Jr(ou,e.data)};var Tu={};var Ru=os(Tu);Tu[Rn]=On;Tu[un]=fn;Tu[Pn]=gn;Tu[Yn]=Hn;Tu[xn]=Xn;Tu[Gn]=Wn;Tu[Gn]=Wn;Tu[Bn]=Kn;Tu[bn]=Zn;Tu[jn]=kn;Tu[qn]=$n;Tu[Jn]=ti;Tu[_E]=oE;Tu[AE]=vE;Tu[TE]=RE;Tu[hE]=OE;Tu[uE]=PE;Tu[gE]=dE;Tu[SE]=yE;Tu[LE]=VE;Tu[FE]=YE;Tu[HE]=XE;Tu[GE]=BE;Tu[wE]=KE;Tu[bE]=QE;Tu[zE]=kE;Tu[ZE]=jE;Tu[qE]=$E;Tu[JE]=t_;Tu[e_]=r_;Tu[a_]=i_;Tu[E_]=s_;Tu[o_]=A_;Tu[v_]=R_;Tu[h_]=O_;Tu[u_]=f_;Tu[P_]=g_;Tu[d_]=l_;Tu[N_]=M_;Tu[C_]=D_;Tu[S_]=y_;Tu[F_]=Y_;Tu[H_]=X_;Tu[G_]=B_;Tu[w_]=b_;Tu[Q_]=j_;Tu[z_]=q_;Tu[$_]=ts;Tu[es]=rs;Tu[as]=ns;Tu[Kh]=bh;Tu[hO]=OO;Tu[uO]=PO;Tu[gO]=dO;Tu[IO]=NO;Tu[pO]=MO;Tu[CO]=cO;Tu[DO]=SO;Tu[mO]=yO;Tu[LO]=FO;Tu[YO]=xO;Tu[XO]=WO;Tu[BO]=KO;Tu[bO]=ZO;Tu[jO]=zO;Tu[kO]=qO;Tu[$O]=JO;Tu[tu]=ru;Tu[au]=iu;Tu[Eu]=su;Tu[ou]=vu;var hu=145;var Ou=30;var uu=function(t){var e=[Ou,t.length+2,0,hu].concat(s(t));return[].concat(s(e),[Es(e)])};getBase64FromBytes=$r;toBytes=Ru;setDataSegment=uu})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var bytes = toBytes(msg.commands);

// send nothing if not fit in a single data segment
if ( bytes.length > MAX_DATA_SEGMENT_SIZE ) {
    bytes = [];
} else {
    bytes = setDataSegment(bytes);
}

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(bytes)
};

return result;
