// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// encoded message should be less than this size
// to be able to send to a device
var MAX_DATA_SEGMENT_SIZE = 50;


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,setDataSegment,getBase64FromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function a(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,i,s,E=[],o=true,_=false;try{if(i=(r=r.call(t)).next,0===e);else for(;!(o=(a=i.call(r)).done)&&(E.push(a.value),E.length!==e);o=!0);}catch(t){_=true,n=t}finally{try{if(!o&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(_)throw n}}return E}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(t,r){return e(t)||n(t,r)||_(t,r)||i()}function o(t){return r(t)||a(t)||_(t)||s()}function _(e,r){if(e){if("string"==typeof e)return t(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):undefined}}var v={separator:" ",prefix:""};var h=1;var A=2;var T=3;var u=4;var R=Math.log,f=Math.pow,O=Math.LN2;var g=function(t,e,r,a,n){var i,s,E=n*8-a-1,o=(1<<E)-1,_=o>>1,v=-7,h=r?n-1:0,A=r?-1:1,T=t[e+h];h+=A;i=T&(1<<-v)-1;T>>=-v;v+=E;for(;v>0;i=i*256+t[e+h],h+=A,v-=8);s=i&(1<<-v)-1;i>>=-v;v+=a;for(;v>0;s=s*256+t[e+h],h+=A,v-=8);if(i===0){i=1-_}else if(i===o){return s?NaN:T?-Infinity:Infinity}else{s=s+f(2,a);i=i-_}return(T?-1:1)*s*f(2,i-a)};var d=function(t,e,r,a,n,i){var s,E,o,_=i*8-n-1,v=(1<<_)-1,h=v>>1,A=n===23?f(2,-24)-f(2,-77):0,T=a?0:i-1,u=a?1:-1,g=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){E=r!==r?1:0;s=v}else{s=R(r)/O|0;if(r*(o=f(2,-s))<1){s--;o*=2}if(s+h>=1){r+=A/o}else{r+=A*f(2,1-h)}if(r*o>=2){s++;o/=2}if(s+h>=v){E=0;s=v}else if(s+h>=1){E=(r*o-1)*f(2,n);s=s+h}else{E=r*f(2,h-1)*f(2,n);s=0}}for(;n>=8;t[e+T]=E&255,T+=u,E/=256,n-=8);s=s<<n|E;_+=n;for(;_>0;t[e+T]=s&255,T+=u,s/=256,_-=8);t[e+T-u]|=g*128};var U=[1,0];var l=[2,1,0];var p=[3,2,1,0];var P=[0,1];var c=[0,1,2];var M=[0,1,2,3];var I=function(t,e){return t[e]};var N=function(t,e,r){var a=r?P:U;var n=t[e+a[0]];var i=t[e+a[1]]<<8;return n|i};var S=function(t,e,r){var a=r?c:l;var n=t[e+a[0]];var i=t[e+a[1]]<<8;var s=t[e+a[2]]<<16;return n|i|s};var D=function(t,e,r){var a=r?M:p;var n=t[e+a[3]]*16777216;var i=t[e+a[2]]*65536;var s=t[e+a[1]]*256;var E=t[e+a[0]];return n+i+s+E};var y=function(t,e,r){t[e]=r&255};var m=function(t,e,r,a){var n=a?P:U;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255};var C=function(t,e,r,a){var n=a?c:l;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255};var L=function(t,e,r,a){var n=a?M:p;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255;t[e+n[3]]=r>>>24&255};function F(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}F.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){y(this.data,this.offset,t<0?t|256:t);this.offset+=h},getInt8:function(){var t=I(this.data,this.offset);this.offset+=h;return t&128?t^-256:t},setUint8:function(t){y(this.data,this.offset,t);this.offset+=h},getUint8:function(){var t=I(this.data,this.offset);this.offset+=h;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t<0?t|65536:t,e);this.offset+=A},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=N(this.data,this.offset,t);this.offset+=A;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t,e);this.offset+=A},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=N(this.data,this.offset,t);this.offset+=A;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=T},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=S(this.data,this.offset,t);this.offset+=T;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t,e);this.offset+=T},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=S(this.data,this.offset,t);this.offset+=T;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=u},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=D(this.data,this.offset,t);this.offset+=u;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t,e);this.offset+=u},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=D(this.data,this.offset,t);this.offset+=u;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;d(this.data,this.offset,t,e,23,4);this.offset+=u},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=g(this.data,this.offset,t,23,4);this.offset+=u;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(o(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(F.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var V=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var a in e){if(a in t&&e[a]){r|=t[a]}}return r};var x=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var a in t){r[a]=(e&t[a])!==0}return r};var Y=function(t,e,r){return(1<<e)-1&t>>r-1};var H=function(t,e,r,a){var n=(1<<e)-1<<r-1;var i=a;var s=t;s&=~n;i<<=r-1;s|=i;return s};var G=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map((function(t){return t.padStart(2,"0")})).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var a=new Array(r);for(var n=0;n<r;n++){a[n]=parseInt(e.substring(n*2,n*2+2),16)}return a};var w="x";var X=[".","1","3","R","M"];var B=[".","A","G","R","T","D"];var W=[".","0","1","2","3","4","5"];var K=[".","A","B","C","D","E","F"];var b=[".","A","B","C","D","E","F","H","K","G"];var Z=[".","1","2","3","4"];var Q=[".","L","M","Z","K"];var j=[".","0","1","2","3","4","5","6","7","8","9"];var z=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var k=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var q=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var $=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var J=function(t){return[t>>4,t&15]};var tt=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var a=J(t),n=E(a,2),i=n[0],s=n[1];e[r*2]=i;e[r*2+1]=s}));return e};var et=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return G(e.join(""))};var rt=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(X[t[0]]??w);e.push(B[t[1]]??w);e.push(W[t[2]]??w);e.push(W[t[3]]??w);e.push(".");e.push(K[t[4]]??w);e.push(b[t[5]]??w);e.push(".");e.push(Z[t[6]]??w);e.push(Q[t[7]]??w);var r=t[8];e.push(j[t[9]]??w);e.push("-");var a;if(t.length<14||t[12]===0&&t[13]===0){e.push(z[t[10]]??w);a=11}else if(t[13]===0){e.push(z[t[10]]??w);e.push(z[t[11]]??w);a=12}else{e.push(z[t[10]]??w);e.push(z[t[11]]??w);e.push(z[t[12]]??w);a=13}var n=t[a];if(n&&n!==0){e.push(q[n]??w)}return{type:e.join(""),revision:r,meterType:0}};var at=function(t,e,r){var a=[];if(t.length<11){throw new Error("Wrong format")}a.push(X.indexOf(t[0]));a.push(B.indexOf(t[1]));a.push(W.indexOf(t[2]));a.push(W.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}a.push(K.indexOf(t[5]));a.push(b.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}a.push(Z.indexOf(t[8]));a.push(Q.indexOf(t[9]));a.push(r??0);a.push(j.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var n=t.length>13?t.length-1:t.length;for(var i=12;i<n;i++){a.push(z.indexOf(t[i]))}if(n<t.length){a.push(q.indexOf(t[n]))}var s=et(a);var E=new Array(9).fill(0);E[0]=0;for(var o=0;o<s.length;o++){E[o+(s.length<8?1:0)]=s[o]}return E};var nt=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(X[t[0]]??w);e.push(B[t[1]]??w);e.push(r);for(var a=2;a<t.length;a++){if(t[a]!==0){e.push(k[t[a]]??w)}}return{type:e.join(""),meterType:0}};var it=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(X.indexOf(t[0]));e.push(B.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(k.indexOf(t[r]))}var a=et(e);if(a.length===8){return a}if(a.length>8){throw new Error("Wrong format")}var n=new Array(8).fill(0);for(var i=0;i<a.length;i++){n[i]=a[i]}return n};var st=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(X[t[0]]??w);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push($[t[r]]??w)}}return{type:e.join(""),meterType:0}};var Et=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(X.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push($.indexOf(t[r]))}var a=et(e);var n=new Array(8).fill(0);for(var i=0;i<a.length&&i<8;i++){n[i]=a[i]}return n};var ot=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var a=r.indexOf(t[0])!==-1?2:0;var n=tt(t.slice(0,8));var i=n[a];var s=X[i];if(s==="1"||s==="3"){e=rt(n.slice(a))}else{e=s==="M"?st(n):nt(n)}e.meterType=t[8];return e};var _t=function(t,e){var r=t.type,a=t.revision,n=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var i;var s=r.substring(4);var E=r[4];if(E==="1"||E==="3"){i=at(s,e,a)}else{i=E==="M"?Et(s):it(s)}i[8]=n;return i};var vt=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},v,e),a=r.separator,n=r.prefix;return t.map((function(t){return"".concat(n).concat(t.toString(16).padStart(2,"0"))})).join(a)};var ht=80;var At=81;var Tt=82;var ut=83;var Rt=84;var ft=85;var Ot=86;var gt=87;var dt=88;var Ut=89;var lt=90;var pt=91;var Pt=255;var ct=Object.freeze({__proto__:null,DATA_REQUEST:ht,DATA_RESPONSE:At,FRAGMENT_REQUEST:lt,FRAGMENT_RESPONSE:pt,IDENT_REQUEST:Tt,IDENT_RESPONSE:ut,INVALID:Pt,L2_CHECK_ADDRESS_REQUEST:Ot,L2_CHECK_ADDRESS_RESPONSE:gt,L2_RM_ADDRESS_REQUEST:dt,L2_RM_ADDRESS_RESPONSE:Ut,L2_SET_ADDRESS_REQUEST:Rt,L2_SET_ADDRESS_RESPONSE:ft});var Mt=function(t){var e={};for(var r in t){var a=t[r];e[a]=r}return e};var It=Mt(ct);var Nt=1;var St=2;var Dt=3;var yt=16;var mt=17;var Ct=18;var Lt=19;var Ft=20;var Vt=21;var xt=32;var Yt=33;var Ht=34;var Gt=35;var wt=36;var Xt=37;var Bt=38;var Wt=39;var Kt=40;var bt=41;var Zt=49;var Qt=50;var jt=51;var zt=52;var kt=53;var qt=54;var $t=55;var Jt=56;var te=57;var ee=64;var re=65;var ae=66;var ne=67;var ie=68;var se=69;var Ee=70;var oe=71;var _e=72;var ve=73;var he=74;var Ae=75;var Te=76;var ue=77;var Re=78;var fe=79;var Oe=80;var ge=81;var de=82;var Ue=83;var le=84;var pe=85;var Pe=86;var ce=87;var Me=88;var Ie=89;var Ne=96;var Se=97;var De=98;var ye=99;var me=100;var Ce=101;var Le=102;var Fe=103;var Ve=104;var xe=105;var Ye=112;var He=113;var Ge=114;var we=115;var Xe=116;var Be=117;var We=118;var Ke=119;var be=120;var Ze=121;var Qe=122;var je=123;var ze=124;var ke=125;var qe=144;var $e=145;var Je=147;var tr=148;var er=156;var rr=157;var ar=158;var nr=159;var ir=160;var sr=161;var Er=162;var or=176;var _r=177;var vr=178;var hr=179;var Ar=180;var Tr=181;var ur=182;var Rr=183;var fr=208;var Or=224;var gr=225;var dr=226;var Ur=227;var lr=228;var pr=229;var Pr=230;var cr=Object.freeze({__proto__:null,ACCESS_CLOSED:yt,ACCPARAM_BAD:Ge,ACCPARAM_EXT_BAD:we,BAD_TEST_EEPROM:Ve,BAD_TEST_FRAM:xe,BAT_FAULT:Ue,BAT_OK:de,BIPOLAR_POWER_FAULT:Ar,BIPOLAR_POWER_OK:Tr,BLOCK_TARIFF_BAD:Be,CALC_PERIOD_BAD:Xe,CALFLAG_RESET:Fe,CALFLAG_SET:Le,CALIBR_PARAM_BAD:We,CAL_FAULT:pe,CAL_OK:le,CASE_CLOSE:Lt,CASE_MODULE_CLOSE:ke,CASE_MODULE_OPEN:ze,CASE_OPEN:Ct,CASE_TERMINAL_CLOSE:je,CASE_TERMINAL_OPEN:Qe,CHANGE_ACCESS_KEY0:xt,CHANGE_ACCESS_KEY1:Yt,CHANGE_ACCESS_KEY2:Ht,CHANGE_ACCESS_KEY3:Gt,CHANGE_COR_TIME:bt,CHANGE_PAR_LOCAL:wt,CHANGE_PAR_REMOTE:Xt,CHANGE_TARIFF_TBL:Qt,CLOCK_FAULT:ce,CLOCK_OK:Pe,CMD_CHANGE_TIME:Bt,CMD_RELAY_2_OFF:Se,CMD_RELAY_2_ON:Ne,CMD_RELAY_OFF:Kt,CMD_RELAY_ON:Wt,CROSSZERO_ENT0:De,CROSSZERO_ENT1:ye,CROSSZERO_ENT2:me,CROSSZERO_ENT3:Ce,CROSSZERO_EXP_ENT0:ar,CROSSZERO_EXP_ENT1:nr,CROSSZERO_EXP_ENT2:ir,CROSSZERO_EXP_ENT3:sr,CURRENT_UNEQUIL_FAULT:vr,CURRENT_UNEQUIL_OK:hr,EM_MAGNETIC_OFF:_r,EM_MAGNETIC_ON:or,ENERGY_REG_FAULT:Nt,ENERGY_REG_OVERFLOW:Zt,ERR_ACCESS:mt,F_MAX_OK:_e,F_MAX_OVER:ve,F_MIN_OK:he,F_MIN_OVER:Ae,I_MAX_OK:Te,I_MAX_OVER:ue,MAGNETIC_OFF:Vt,MAGNETIC_ON:Ft,NVRAM_FAULT:fr,OP_PAR_FAULT:Dt,POWERSALDO_OK:Oe,POWERSALDO_OVER:ge,POWER_A_OFF:Me,POWER_A_ON:Ie,POWER_OVER_RELAY_OFF:rr,P_MAX_OK:Re,P_MAX_OVER:fe,RELAY_HARD_BAD_OFF:qe,RELAY_HARD_BAD_ON:Je,RELAY_HARD_OFF:tr,RELAY_HARD_ON:$e,RELAY_OFF:$t,RELAY_ON:qt,RESET_EM_FLAG:ur,RESET_MAGN_FLAG:Rr,RESTART:Jt,SALDO_EN_BAD:be,SALDO_PARAM_BAD:He,SET_DEMAND_EN_10MIN:Ur,SET_DEMAND_EN_15MIN:lr,SET_DEMAND_EN_1MIN:Or,SET_DEMAND_EN_30MIN:pr,SET_DEMAND_EN_3MIN:gr,SET_DEMAND_EN_5MIN:dr,SET_DEMAND_EN_60MIN:Pr,SET_NEW_SALDO:Ye,SET_SALDO_PARAM:er,SET_TARIFF_TBL:jt,SUMMER_TIME:zt,TIME_CORRECT:Ze,TIME_CORRECT_NEW:Er,T_MAX_OK:ie,T_MAX_OVER:se,T_MIN_OK:Ee,T_MIN_OVER:oe,VENDOR_PAR_FAULT:St,V_MAX_OK:ee,V_MAX_OVER:re,V_MIN_OK:ae,V_MIN_OVER:ne,WD_RESTART:te,WINTER_SUMMER_BAD:Ke,WINTER_TIME:kt});var Mr=Mt(cr);var Ir={type:ht,destination:65535,source:65534};var Nr=11;var Sr=7;var Dr=2+Sr;var yr=4;var mr={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var Cr={...mr,AUTO_SCREEN_SCROLLING:2147483648};var Lr={...mr,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Fr={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var Vr={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var xr={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var Yr={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var Hr={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var Gr={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var wr={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var Xr={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Br={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var Wr={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var Kr={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var br={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Zr={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function Qr(t,e,r){var a=r>>yr;var n=new Array(yr).fill(0);n.forEach((function(e,r){var i=!!Y(a,1,r+1);if(i){n[r]=t.getUint32()}else{n[r]=null}}));return n}function jr(t,e,r){var a=1+yr;var n=e;r.forEach((function(t,e){n=H(n,1,e+a,Number(!!t))}));t.setUint8(n)}function zr(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function kr(t,e){var r=e.tariff,a=e.energy;if(r!==undefined&&a!==undefined){t.setUint16(r<<14|a&16383)}else{t.setUint16(65535)}}function qr(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;F.call(this,t,e)}qr.prototype=Object.create(F.prototype);qr.prototype.constructor=qr;qr.getDayProfileFromByte=function(t){return{tariff:Y(t,2,1),isFirstHalfHour:!Y(t,1,3),hour:Y(t,5,4)}};qr.getByteFromDayProfile=function(t){var e=0;e=H(e,2,1,t.tariff);e=H(e,1,3,+!t.isFirstHalfHour);e=H(e,5,4,t.hour);return e};qr.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};qr.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:x(Cr,2147496324),relaySet4:x(Yr,0),relaySet3:x(xr,0),relaySet2:x(Vr,3),relaySet1:x(Fr,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:x(Gr,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:x(Lr,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:x(Hr,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};qr.prototype.getFrameHeader=function(){var t=this.getUint8();var e=It[t];var r=this.getUint16();var a=this.getUint16();return{type:t,typeName:e,destination:r,source:a}};qr.prototype.setFrameHeader=function(t){var e=t.type,r=e===undefined?Ir.type:e,a=t.destination,n=a===undefined?Ir.destination:a,i=t.source,s=i===undefined?Ir.source:i;this.setUint8(r);this.setUint16(n);this.setUint16(s)};qr.prototype.getDeviceId=function(){var t=vt(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var a=vt(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:a}};qr.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,a=t.year,n=t.serial;this.setBytes(G(e));this.setUint8(r);this.setUint8(a);this.setBytes(G(n))};qr.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};qr.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};qr.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};qr.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};qr.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};qr.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};qr.prototype.getDayProfile=function(){return qr.getDayProfileFromByte(this.getUint8())};qr.prototype.setDayProfile=function(t){this.setUint8(qr.getByteFromDayProfile(t))};qr.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(Sr).fill(0).map((function(){return t.getUint8()}))}};qr.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};qr.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};qr.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};qr.prototype.getDeviceType=function(){return ot(this.getBytes(9))};qr.prototype.setDeviceType=function(t){this.setBytes(_t(t))};qr.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:x(Cr,this.getUint32()),relaySet4:x(Yr,this.getUint8()),relaySet3:x(xr,this.getUint8()),relaySet2:x(Vr,this.getUint8()),relaySet1:x(Fr,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:x(Gr,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:x(Lr,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:x(Hr,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};qr.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(V(Cr,t.displaySet));this.setUint8(V(Yr,t.relaySet4));this.setUint8(V(xr,t.relaySet3));this.setUint8(V(Vr,t.relaySet2));this.setUint8(V(Fr,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(V(Gr,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(V(Lr,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(V(Hr,t.relaySet5));this.setUint8(e)};qr.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Y(t,yr,1);var r=Qr(this,e,t);return{energyType:e,energies:r}};qr.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,a=t.energies;if(r){jr(this,r,a)}a.forEach((function(t){if(t!==null){e.setUint32(t)}}))};qr.prototype.getEnergies=function(){var t=this;return new Array(yr).fill(0).map((function(){return t.getInt32()}))};qr.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};qr.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};qr.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};qr.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};qr.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};qr.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return zr(t)}))};qr.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return kr(e,t)}))};qr.prototype.getEventStatus=function(){var t=this.getUint16();return x(wr,t)};qr.prototype.setEventStatus=function(t){this.setUint16(V(wr,t))};qr.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=x(Xr,this.getUint8());var r=x(Br,this.getUint8());var a=x(Wr,this.getUint8());var n=x(Kr,this.getUint8());var i=x(br,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:a,status2:n,status3:i}};qr.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,a=t.relayStatus2,n=t.status1,i=t.status2,s=t.status3;this.setUint16(e);this.setUint8(V(Xr,r));this.setUint8(V(Br,a));this.setUint8(V(Wr,n));this.setUint8(V(Kr,i));this.setUint8(V(br,s))};qr.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Mr[e];switch(e){case rr:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case Bt:case Ze:if(r<8){return t}t.newDate=this.getDateTime();break}return t};qr.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case rr:for(var e of t.power){this.setUint8(e)}break;case Bt:case Ze:this.setDateTime(t.newDate);break}};qr.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};qr.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};qr.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(yr).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};qr.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};qr.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:x(Zr,this.getUint8())}};qr.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,a=t.pmaxMinusThreshold2,n=t.pmaxMinusThreshold3,i=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(a);this.setUint32(n);this.setUint8(V(Zr,i))};qr.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(yr).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};qr.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var $r=function(t){return btoa(t.map((function(t){return String.fromCharCode(t)})).join(""))};var Jr=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[t,e.length].concat(o(e))};var ta=0;var ea=3;var ra=1;var aa=3;var na=4;var ia=5;var sa=7;var Ea=8;var oa=9;var _a=13;var va=15;var ha=16;var Aa=17;var Ta=18;var ua=19;var Ra=20;var fa=21;var Oa=22;var ga=23;var da=24;var Ua=25;var la=28;var pa=30;var Pa=31;var ca=40;var Ma=41;var Ia=42;var Na=44;var Sa=45;var Da=46;var ya=47;var ma=49;var Ca=50;var La=51;var Fa=52;var Va=53;var xa=54;var Ya=57;var Ha=58;var Ga=59;var wa=60;var Xa=61;var Ba=62;var Wa=65;var Ka=70;var ba=74;var Za=75;var Qa=79;var ja=80;var za=82;var ka=83;var qa=88;var $a=89;var Ja=91;var tn=92;var en=93;var rn=94;var an=100;var nn=109;var sn=111;var En=112;var on=113;var _n=114;var vn=118;var hn=122;var An=Object.freeze({__proto__:null,activateRatePlan:ua,getBuildVersion:En,getCorrectTime:Ba,getCriticalEvent:Wa,getCurrentStatusMeter:Ya,getCurrentValues:_a,getDateTime:sa,getDayDemand:Oa,getDayDemandExport:Qa,getDayMaxDemand:ma,getDayMaxDemandExport:qa,getDayMaxDemandPrevious:ba,getDayProfile:Ga,getDemand:vn,getDeviceId:ia,getDeviceType:na,getDisplayParam:rn,getEnergy:va,getEnergyDayPrevious:aa,getEnergyExport:Ja,getEnergyExportDayPrevious:ja,getEventStatus:ra,getEvents:La,getEventsCounters:Fa,getExtendedCurrentValues:Ha,getExtendedCurrentValues2:Sa,getHalfHourDemand:fa,getHalfHourDemandExport:ka,getHalfHourDemandPrevious:Za,getHalfhoursEnergies:sn,getMagneticFieldThreshold:nn,getMeterInfo:hn,getMonthDemand:ga,getMonthDemandExport:za,getMonthMaxDemand:Ca,getMonthMaxDemandExport:$a,getOperatorParameters:pa,getOperatorParametersExtended3:on,getRatePlanInfo:Na,getSaldo:Ma,getSaldoParameters:Da,getSeasonProfile:wa,getSpecialDay:Xa,getVersion:ca,prepareRatePlan:Ra,resetPowerMaxDay:Va,resetPowerMaxMonth:xa,runTariffPlan:Ka,setAccessKey:oa,setCorrectDateTime:tn,setCorrectTime:la,setDateTime:Ea,setDayProfile:ha,setDisplayParam:en,setOperatorParameters:Pa,setOperatorParametersExtended3:_n,setSaldo:Ia,setSaldoParameters:ya,setSeasonProfile:Aa,setSpecialDay:Ta,setSpecialOperation:an,turnRelayOff:Ua,turnRelayOn:da});Mt(An);var Tn=ua;var un=1+Nr;var Rn=function(t){var e=new qr(un);e.setUint8(t.tariffTable);e.setTariffPlan(t.tariffPlan);return Jr(Tn,e.data)};var fn=En;var On=function(){return Jr(fn)};var gn=Ba;var dn=function(){return Jr(gn)};var Un=0;var ln=1;var pn=2;var Pn=3;var cn=4;var Mn=5;var In=6;var Nn=7;var Sn=8;var Dn=9;var yn=10;var mn=11;var Cn=12;var Ln=13;var Fn=14;var Vn=Object.freeze({__proto__:null,CASE_MODULE_OPEN:yn,CASE_OPEN:Un,CASE_TERMINAL_OPEN:Dn,DEVICE_FAILURE:Sn,ERROR_ACCESS:Mn,MAGNETIC_ON:ln,PARAMETERS_UPDATE_LOCAL:Pn,PARAMETERS_UPDATE_REMOTE:pn,PROTECTION_RESET_EM:Ln,PROTECTION_RESET_MAGNETIC:Fn,RESTART:cn,TARIFF_TABLE_GET:Cn,TARIFF_TABLE_SET:mn,TIME_CORRECT:Nn,TIME_SET:In});Mt(Vn);var xn=Ya;var Yn=function(){return Jr(xn)};var Hn=_a;var Gn=function(){return Jr(Hn)};var wn=sa;var Xn=function(){return Jr(wn)};var Bn=ma;var Wn=3;var Kn=function(t){var e=new qr(Wn);e.setDate(t.date);return Jr(Bn,e.data)};var bn=qa;var Zn=3;var Qn=function(t){var e=new qr(Zn);e.setDate(t.date);return Jr(bn,e.data)};var jn=Ga;var zn=3;var kn=function(t){var e=new qr(zn);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(jn,e.data)};var qn=ia;var $n=function(){return Jr(qn)};var Jn=na;var ti=function(){return Jr(Jn)};var ei=La;var ri=4;var ai=function(t){var e=new qr(ri);e.setDate(t.date);e.setUint8(t.offset);return Jr(ei,e.data)};var ni=Fa;var ii=function(){return Jr(ni)};var si=ra;var Ei=function(){return Jr(si)};var oi=Ha;var _i=function(){return Jr(oi)};var vi=fa;var hi=3;var Ai=function(t){var e=new qr(hi);e.setDate(t.date);return Jr(vi,e.data)};var Ti=ka;var ui=3;var Ri=function(t){var e=new qr(ui);e.setDate(t.date);return Jr(Ti,e.data)};var fi=4;var Oi=4294967295;var gi={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var di=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return V(gi,e)};var Ui=function(t){return t<fi?1<<t:0};var li=function(t){return t<fi?1<<t<<4:0};var pi=function(t,e){var r=0;if(t<fi){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=Ui(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=li(t)}}return r};function Pi(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;F.call(this,t,e)}Pi.prototype=Object.create(F.prototype);Pi.prototype.constructor=Pi;Pi.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};Pi.prototype.setDate=function(t){var e=t.year,r=t.month,a=t.date;var n=e<<1|r>>3&1;var i=r<<5&224|a&31;this.setUint8(n);this.setUint8(i)};Pi.prototype.getEnergiesFlags=function(){var t=this.getUint8();return x(gi,t)};Pi.prototype.setEnergiesFlags=function(t){this.setUint8(di(t))};Pi.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var a=this.getUint16();e.push(a===Oi?undefined:a)}return e};Pi.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?Oi:r)}}};Pi.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};Pi.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};Pi.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&gi["A+"]){e["A+"]=this.getUint32()}if(t&gi["A+R+"]){e["A+R+"]=this.getUint32()}if(t&gi["A+R-"]){e["A+R-"]=this.getUint32()}return e};Pi.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};Pi.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&gi["A-"]){e["A-"]=this.getUint32()}if(t&gi["A-R+"]){e["A-R+"]=this.getUint32()}if(t&gi["A-R-"]){e["A-R-"]=this.getUint32()}return e};Pi.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};Pi.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(fi).fill(null);for(var a=0;a<fi;a++){if(e&Ui(a)){r[a]=this.getAPlusTariffEnergies(t)}}for(var n=0;n<fi;n++){if(e&li(n)){r[n]={...r[n],...this.getAMinusTariffEnergies(t)}}}return r};Pi.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=di(t);a|=pi(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};Pi.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};Pi.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,a=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(a)}};Pi.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&gi["A+"]){e["A+"]=this.getPowerMax()}if(t&gi["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&gi["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};Pi.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};Pi.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&gi["A-"]){e["A-"]=this.getPowerMax()}if(t&gi["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&gi["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};Pi.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};Pi.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(fi).fill(null);for(var a=0;a<fi;a++){if(e&Ui(a)){r[a]=this.getAPlusTariffPowerMax(t)}}for(var n=0;n<fi;n++){if(e&li(n)){r[n]={...r[n],...this.getAMinusTariffPowerMax(t)}}}return r};Pi.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=di(t);a|=pi(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var ci=sn;var Mi=5;var Ii=function(t){var e=new Pi(Mi);e.setDate(t.date);e.setEnergiesFlags(t.energies);e.setUint8(t.firstHalfhour);e.setUint8(t.halfhoursNumber);return Jr(ci,e.data)};var Ni=nn;var Si=function(){return Jr(Ni)};var Di=hn;var yi=function(){return Jr(Di)};var mi=ga;var Ci=2;var Li=function(t){var e=new qr(Ci);e.setUint8(t.year);e.setUint8(t.month);return Jr(mi,e.data)};var Fi=za;var Vi=2;var xi=function(t){var e=new qr(Vi);e.setUint8(t.year);e.setUint8(t.month);return Jr(Fi,e.data)};var Yi=Ca;var Hi=function(t){var e=t.year,r=t.month;return Jr(Yi,[e,r])};var Gi=$a;var wi=function(t){var e=t.year,r=t.month;return Jr(Gi,[e,r])};var Xi=on;var Bi=function(){return Jr(Xi)};var Wi=pa;var Ki=function(){return Jr(Wi)};var bi=Na;var Zi=function(t){return Jr(bi,[t.tariffTable])};var Qi=Ma;var ji=function(){return Jr(Qi)};var zi=Da;var ki=function(){return Jr(zi)};var qi=wa;var $i=3;var Ji=function(t){var e=new qr($i);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(qi,e.data)};var ts=Xa;var es=3;var rs=function(t){var e=new qr(es);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return Jr(ts,e.data)};var as=ca;var ns=function(){return Jr(as)};var is=Ra;var ss=5;var Es=function(t){var e=new qr(ss);e.setUint8(t.tariffTable);e.setUint32(t.id);return Jr(is,e.data)};var os=Va;var _s=function(){return Jr(os)};var vs=xa;var hs=function(){return Jr(vs)};var As=Ka;var Ts=function(t){return Jr(As,[t.tariffTable])};var us=16;var Rs=oa;var fs=1+us;var Os=function(t){var e=new qr(fs);e.setUint8(t.accessLevel);e.setBytes(t.key);return Jr(Rs,e.data)};var gs=tn;var ds=2;var Us=function(t){var e=new qr(ds);e.setInt16(t.seconds);return Jr(gs,e.data)};var ls=la;var ps=9;var Ps=function(t){var e=new qr(ps);e.setTimeCorrectionParameters(t);return Jr(ls,e.data)};var cs=Ea;var Ms=8;var Is=function(t){var e=new qr(Ms);e.setDateTime(t);return Jr(cs,e.data)};var Ns=8;var Ss=255;var Ds=ha;var ys=function(t){var e=t.periods.length<Ns;var r=2+t.periods.length+ +e;var a=new qr(r);a.setUint8(t.tariffTable);a.setUint8(t.index);t.periods.forEach((function(t){a.setDayProfile(t)}));if(e){a.setUint8(Ss)}return Jr(Ds,a.data)};var ms=_n;var Cs=17;var Ls=function(t){var e=new qr(Cs);e.setOperatorParametersExtended3(t);return Jr(ms,e.data)};var Fs=Ia;var Vs=12;var xs=function(t){var e=new qr(Vs);e.setUint8(t.date.month);e.setUint8(t.date.date);e.setUint8(t.date.hours);e.setUint8(t.date.minutes);e.setInt32(t.saldoNew);e.setInt32(t.saldoOld);return Jr(Fs,e.data)};var Ys=ya;var Hs=37;var Gs=function(t){var e=new qr(Hs);e.setSaldoParameters(t);return Jr(Ys,e.data)};var ws=Aa;var Xs=Dr;var Bs=function(t){var e=new qr(Xs);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSeasonProfile(t);return Jr(ws,e.data)};var Ws=Ta;var Ks=6;var bs=function(t){var e=new qr(Ks);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSpecialDay(t);return Jr(Ws,e.data)};var Zs=an;var Qs=2;var js=function(t){var e=new qr(Qs);var r=0;if(t.readScreensInfo){r|=128}if(t.resetElectroMagneticIndication){r|=1}if(t.resetMagneticIndication){r|=2}e.setUint8(t.type);e.setUint8(r);return Jr(Zs,e.data)};var zs=Ua;var ks=function(){return Jr(zs)};var qs=da;var $s=function(){return Jr(qs)};var Js={encrypt:function(){},decrypt:function(){}};var tE=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var eE=16;var rE=[0];var aE=function(t){return function(e,r){var a;var n=r.messageId,i=n===undefined?1:n,s=r.accessLevel,E=s===undefined?ea:s,_=r.aesKey;var v=e.map((function(e){if("id"in e){return t[e.id](e.parameters||{})}if("command"in e){return e.command.bytes}throw new Error("wrong command format")}));var h=E|16;var A=[i,h];var T=(a=[]).concat.apply(a,[h].concat(o(v),[rE]));if(E!==ta){var u=(T.length+1)%eE;if(u){T=T.concat(new Array(eE-u).fill(0))}}T=T.concat(tE(T));if(_&&E!==ta){T=o(Js.encrypt(_,T))}return A.concat(T)}};var nE=0;var iE=128;var sE=129;var EE=130;var oE=131;var _E=132;var vE=133;var hE=134;var AE=135;var TE=136;var uE=137;var RE=144;var fE=145;var OE=146;var gE=147;var dE=149;var UE=151;var lE=152;var pE=153;var PE=154;var cE=155;var ME=156;var IE=159;var NE=160;var SE=240;var DE=Object.freeze({__proto__:null,ACCESS_DENIED:gE,BAD_ARRAY_INDEX:hE,BAD_BLOCK_NUMBER:ME,BAD_DATA_LENGTH:vE,BAD_MESSAGE:_E,BAD_RATE_PLAN_ID:TE,BAD_RATE_PLAN_SIZE:uE,BAD_RESPONSE_LENGTH:RE,BAD_SALDO_WRITE:dE,BLOCKED_METER:UE,CALIBRATION_DISABLED:OE,DECRYPTION_FAILURE:EE,INTERNAL:SE,INVALID_CORRECTION_INTERVAL:PE,NOT_ALIGNED_DATA:sE,NOT_PREPARED_RATE_PLAN:AE,NO_DATA_FOR_DATE:fE,OK:nE,OUT_OFF_RANGE:IE,SET_METER_TYPE_FAILURE:NE,TIME_CORRECTION_FAILURE:pE,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:cE,UNENCRYPTED_COMMAND_DISABLED:lE,UNKNOWN_COMMAND:iE,UNKNOWN_PROTOCOL:oE});Mt(DE);var yE=1;var mE=2;var CE=3;var LE=4;var FE=5;var VE=6;var xE=7;var YE=8;var HE=9;var GE=10;var wE=11;var XE=12;var BE=13;var WE=14;var KE=15;var bE=16;var ZE=17;var QE=18;var jE=19;var zE=20;var kE=21;var qE=22;var $E=23;var JE=24;var to=25;var eo=26;var ro=28;var ao=30;var no=31;var io=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:LE,ACTIVE_ENERGY_T2:FE,ACTIVE_ENERGY_T3:VE,ACTIVE_ENERGY_T4:xE,ACTIVE_POWER_IN_NEUTRAL:HE,ACTIVE_POWER_PER_PHASE:YE,BATTERY_VOLTAGE:qE,CURRENT_BALANCE:ao,CURRENT_IN_NEUTRAL:wE,CURRENT_IN_PHASE:GE,DATE_MONTH_YEAR:WE,EXPORTED_ACTIVE_ENERGY_T1:bE,EXPORTED_ACTIVE_ENERGY_T2:ZE,EXPORTED_ACTIVE_ENERGY_T3:QE,EXPORTED_ACTIVE_ENERGY_T4:jE,HOUR_MINUTE_SECOND:BE,MAGNET_INDUCTION:ro,OPTOPORT_SPEED:no,POWER_COEFFICIENT_PHASE_A:zE,POWER_COEFFICIENT_PHASE_B:kE,POWER_THRESHOLD_T1:$E,POWER_THRESHOLD_T2:JE,POWER_THRESHOLD_T3:to,POWER_THRESHOLD_T4:eo,SET_ALL_SEGMENT_DISPLAY:yE,SOFTWARE_VERSION:mE,TOTAL_ACTIVE_ENERGY:CE,TOTAL_EXPORTED_ACTIVE_ENERGY:KE,VOLTAGE:XE});Mt(io);var so=120;var Eo=121;var oo=254;var _o=Object.freeze({__proto__:null,activateRatePlan:ua,errorResponse:oo,getBuildVersion:En,getCorrectTime:Ba,getCriticalEvent:Wa,getCurrentStatusMeter:Ya,getCurrentValues:_a,getDateTime:sa,getDayDemand:Oa,getDayDemandExport:Qa,getDayEnergies:so,getDayMaxDemand:ma,getDayMaxDemandExport:qa,getDayMaxDemandPrevious:ba,getDayMaxPower:Eo,getDayProfile:Ga,getDemand:vn,getDeviceId:ia,getDeviceType:na,getDisplayParam:rn,getEnergy:va,getEnergyDayPrevious:aa,getEnergyExport:Ja,getEnergyExportDayPrevious:ja,getEventStatus:ra,getEvents:La,getEventsCounters:Fa,getExtendedCurrentValues:Ha,getExtendedCurrentValues2:Sa,getHalfHourDemand:fa,getHalfHourDemandExport:ka,getHalfHourDemandPrevious:Za,getHalfhoursEnergies:sn,getMagneticFieldThreshold:nn,getMeterInfo:hn,getMonthDemand:ga,getMonthDemandExport:za,getMonthMaxDemand:Ca,getMonthMaxDemandExport:$a,getOperatorParameters:pa,getOperatorParametersExtended3:on,getRatePlanInfo:Na,getSaldo:Ma,getSaldoParameters:Da,getSeasonProfile:wa,getSpecialDay:Xa,getVersion:ca,prepareRatePlan:Ra,resetPowerMaxDay:Va,resetPowerMaxMonth:xa,runTariffPlan:Ka,setAccessKey:oa,setCorrectDateTime:tn,setCorrectTime:la,setDateTime:Ea,setDayProfile:ha,setDisplayParam:en,setOperatorParameters:Pa,setOperatorParametersExtended3:_n,setSaldo:Ia,setSaldoParameters:ya,setSeasonProfile:Aa,setSpecialDay:Ta,setSpecialOperation:an,turnRelayOff:Ua,turnRelayOn:da});Mt(_o);var vo=1;var ho=3;var Ao=4;var To=5;var uo=7;var Ro=8;var fo=9;var Oo=13;var go=15;var Uo=16;var lo=17;var po=18;var Po=19;var co=20;var Mo=21;var Io=22;var No=23;var So=24;var Do=25;var yo=28;var mo=30;var Co=31;var Lo=40;var Fo=41;var Vo=42;var xo=44;var Yo=46;var Ho=47;var Go=49;var wo=50;var Xo=51;var Bo=52;var Wo=53;var Ko=54;var bo=57;var Zo=58;var Qo=59;var jo=60;var zo=61;var ko=62;var qo=63;var $o=64;var Jo=69;var t_=70;var e_=71;var r_=72;var a_=73;var n_=78;var i_=79;var s_=80;var E_=82;var o_=83;var __=84;var v_=85;var h_=86;var A_=88;var T_=89;var u_=90;var R_=92;var f_=93;var O_=94;var g_=100;var d_=109;var U_=111;var l_=112;var p_=113;var P_=114;var c_=117;var M_=118;var I_=122;var N_=Object.freeze({__proto__:null,activateRatePlan:Po,getBuildVersion:l_,getCorrectTime:ko,getCriticalEvent:h_,getCurrentStatusMeter:bo,getCurrentValues:Oo,getDateTime:uo,getDayDemand:Io,getDayDemandExport:i_,getDayMaxDemand:Go,getDayMaxDemandExport:A_,getDayProfile:Qo,getDemand:M_,getDeviceId:To,getDeviceType:Ao,getDisplayParam:O_,getEnergy:go,getEnergyDayPrevious:ho,getEnergyExport:n_,getEnergyExportDayPrevious:s_,getEventStatus:vo,getEvents:Xo,getEventsCounters:Bo,getExtendedCurrentValues:Zo,getHalfHourDemand:Mo,getHalfHourDemandChannel:u_,getHalfHourDemandExport:o_,getHalfHourDemandVare:a_,getHalfHourDemandVareExport:v_,getHalfHourDemandVari:r_,getHalfHourDemandVariExport:__,getHalfhoursEnergies:U_,getMagneticFieldThreshold:d_,getMeterInfo:I_,getMonthDemand:No,getMonthDemandExport:E_,getMonthMaxDemand:wo,getMonthMaxDemandExport:T_,getOperatorParameters:mo,getOperatorParametersExtended:qo,getOperatorParametersExtended2:e_,getOperatorParametersExtended3:p_,getRatePlanInfo:xo,getSaldo:Fo,getSaldoParameters:Yo,getSeasonProfile:jo,getSpecialDay:zo,getVersion:Lo,prepareRatePlan:co,resetPowerMaxDay:Wo,resetPowerMaxMonth:Ko,runTariffPlan:t_,setAccessKey:fo,setCorrectDateTime:R_,setCorrectTime:yo,setDateTime:Ro,setDayProfile:Uo,setDisplayParam:f_,setOperatorParameters:Co,setOperatorParametersExtended:$o,setOperatorParametersExtended2:Jo,setOperatorParametersExtended3:P_,setOperatorParametersExtended4:c_,setSaldo:Vo,setSaldoParameters:Ho,setSeasonProfile:lo,setSpecialDay:po,setSpecialOperation:g_,turnRelayOff:Do,turnRelayOn:So});Mt(N_);var S_=1;var D_=2;var y_=3;var m_=4;var C_=17;var L_=18;var F_=19;var V_=20;var x_=21;var Y_=22;var H_=23;var G_=32;var w_=33;var X_=34;var B_=35;var W_=36;var K_=37;var b_=38;var Z_=39;var Q_=40;var j_=49;var z_=50;var k_=51;var q_=52;var $_=53;var J_=54;var tv=55;var ev=56;var rv=57;var av=64;var nv=65;var iv=66;var sv=67;var Ev=68;var ov=69;var _v=70;var vv=71;var hv=72;var Av=73;var Tv=74;var uv=75;var Rv=76;var fv=77;var Ov=78;var gv=79;var dv=80;var Uv=81;var lv=82;var pv=83;var Pv=84;var cv=85;var Mv=86;var Iv=87;var Nv=88;var Sv=89;var Dv=90;var yv=91;var mv=92;var Cv=93;var Lv=94;var Fv=95;var Vv=96;var xv=97;var Yv=98;var Hv=99;var Gv=100;var wv=101;var Xv=102;var Bv=103;var Wv=104;var Kv=105;var bv=106;var Zv=107;var Qv=108;var jv=109;var zv=110;var kv=111;var qv=112;var $v=113;var Jv=114;var th=115;var eh=116;var rh=117;var ah=118;var nh=119;var ih=120;var sh=121;var Eh=122;var oh=123;var _h=124;var vh=125;var hh=126;var Ah=127;var Th=128;var uh=129;var Rh=130;var fh=131;var Oh=132;var gh=133;var dh=134;var Uh=135;var lh=136;var ph=137;var Ph=138;var ch=139;var Mh=140;var Ih=141;var Nh=142;var Sh=143;var Dh=144;var yh=145;var mh=147;var Ch=148;var Lh=149;var Fh=150;var Vh=151;var xh=152;var Yh=153;var Hh=154;var Gh=155;var wh=156;var Xh=157;var Bh=158;var Wh=159;var Kh=160;var bh=161;var Zh=162;var Qh=163;var jh=164;var zh=165;var kh=166;var qh=167;var $h=168;var Jh=169;var tA=170;var eA=171;var rA=172;var aA=173;var nA=174;var iA=175;var sA=176;var EA=177;var oA=178;var _A=179;var vA=224;var hA=225;var AA=226;var TA=227;var uA=228;var RA=229;var fA=230;var OA=231;var gA=232;var dA=Object.freeze({__proto__:null,ACCESS_LOCKED:C_,ACCESS_UNLOCKED:L_,ACCUMULATION_PARAM_BAD:gh,ACCUMULATION_PARAM_EXT_BAD:dh,BAD_TEST_EEPROM:uh,BAD_TEST_FRAM:Rh,BATTERY_FAULT:Kv,BATTERY_OK:Wv,BLOCK_TARIFF_BAD:lh,CALCULATION_PERIOD_BAD:Uh,CALIBRATION_FAULT:Zv,CALIBRATION_FLAG_RESET:Th,CALIBRATION_FLAG_SET:Ah,CALIBRATION_OK:bv,CALIBRATION_PARAM_BAD:ph,CASE_CLOSE:x_,CASE_KLEMA_CLOSE:Vh,CASE_KLEMA_OPEN:Fh,CASE_MODULE_CLOSE:Gh,CASE_MODULE_OPEN:Hh,CASE_OPEN:V_,CHANGE_ACCESS_KEY0:G_,CHANGE_ACCESS_KEY1:w_,CHANGE_ACCESS_KEY2:X_,CHANGE_ACCESS_KEY3:B_,CHANGE_COR_TIME:qv,CHANGE_PARAMETERS_LOCAL:W_,CHANGE_PARAMETERS_REMOTE:K_,CHANGE_PARAM_CHANNEL1:Bh,CHANGE_PARAM_CHANNEL2:Wh,CHANGE_PARAM_CHANNEL3:Kh,CHANGE_PARAM_CHANNEL4:bh,CHANGE_PARAM_CHANNEL5:Zh,CHANGE_PARAM_CHANNEL6:Qh,CHANGE_TARIFF_TABLE:z_,CHANGE_TARIFF_TABLE_2:xh,CHANGE_TARIFF_TABLE_3:Yh,CLOCK_FAULT:xv,CLOCK_OK:Vv,CMD_CHANGE_TIME:b_,CMD_RELAY_2_OFF:Jv,CMD_RELAY_2_ON:$v,CMD_RELAY_OFF:Q_,CMD_RELAY_ON:Z_,COEFFICIENT_TRANSFORMATION_CHANGE:Sh,CROSS_ZERO_ENT0:th,CROSS_ZERO_ENT1:eh,CROSS_ZERO_ENT2:rh,CROSS_ZERO_ENT3:ah,CROSS_ZERO_EXPORT_ENT0:jh,CROSS_ZERO_EXPORT_ENT1:zh,CROSS_ZERO_EXPORT_ENT2:kh,CROSS_ZERO_EXPORT_ENT3:qh,CROSS_ZERO_EXPORT_VARE0:rA,CROSS_ZERO_EXPORT_VARE1:aA,CROSS_ZERO_EXPORT_VARE2:nA,CROSS_ZERO_EXPORT_VARE3:iA,CROSS_ZERO_EXPORT_VARI0:$h,CROSS_ZERO_EXPORT_VARI1:Jh,CROSS_ZERO_EXPORT_VARI2:tA,CROSS_ZERO_EXPORT_VARI3:eA,CROSS_ZERO_VARE0:oh,CROSS_ZERO_VARE1:_h,CROSS_ZERO_VARE2:vh,CROSS_ZERO_VARE3:hh,CROSS_ZERO_VARI0:nh,CROSS_ZERO_VARI1:ih,CROSS_ZERO_VARI2:sh,CROSS_ZERO_VARI3:Eh,EM_MAGNETIC_OFF:EA,EM_MAGNETIC_ON:sA,ENERGY_REGISTER_OVERFLOW:j_,ENERGY_T0_FAULT:S_,ENERGY_T1_FAULT:D_,ENERGY_T2_FAULT:y_,ENERGY_T3_FAULT:m_,ERR_ACCESS:F_,F_MAX_OK:Rv,F_MAX_OVER:fv,F_MIN_OK:Ov,F_MIN_UNDER:gv,IA_MAX_OK:Pv,IA_MAX_OVER:cv,IB_MAX_OK:Mv,IB_MAX_OVER:Iv,IC_MAX_OK:Nv,IC_MAX_OVER:Sv,IDIFF_OK:Lv,IDIFF_OVER:Fv,MAGNETIC_OFF:H_,MAGNETIC_ON:Y_,METER_TROUBLE:Lh,OP_PARAM_BAD:ch,OP_PARAM_EXT_BAD:Mh,O_PARAMETERS_FAULT:kv,O_PARAMETERS_OK:zv,PA_MAX_OK:Dv,PA_MAX_OVER:yv,POWER_A_OFF:Bv,POWER_A_ON:Xv,POWER_B_OFF:wv,POWER_B_ON:Gv,POWER_C_OFF:Hv,POWER_C_ON:Yv,POWER_OVER_RELAY_OFF:Xh,PV_MAX_OK:mv,PV_MAX_OVER:Cv,P_MAX_A_MINUS_OK:OA,P_MAX_A_MINUS_OVER:gA,RELAY_HARD_BAD_OFF:Dh,RELAY_HARD_BAD_ON:mh,RELAY_HARD_OFF:Ch,RELAY_HARD_ON:yh,RELAY_OFF:tv,RELAY_ON:J_,RESET_EM_FLAG:oA,RESET_MAGNETIC_FLAG:_A,RESTART:ev,SALDO_ENERGY_BAD:Ih,SALDO_PARAM_BAD:Oh,SET_DEMAND_EN_10_MIN:TA,SET_DEMAND_EN_15_MIN:uA,SET_DEMAND_EN_1_MIN:vA,SET_DEMAND_EN_30_MIN:RA,SET_DEMAND_EN_3_MIN:hA,SET_DEMAND_EN_5_MIN:AA,SET_DEMAND_EN_60_MIN:fA,SET_NEW_SALDO:fh,SET_SALDO_PARAM:wh,SET_TARIFF_TABLE:k_,SUMMER_TIME:q_,TIME_CORRECT:Nh,T_MAX_OK:dv,T_MAX_OVER:Uv,T_MIN_OK:lv,T_MIN_UNDER:pv,VA_MAX_OK:av,VA_MAX_OVER:nv,VA_MIN_OK:iv,VA_MIN_UNDER:sv,VB_MAX_OK:Ev,VB_MAX_OVER:ov,VB_MIN_OK:_v,VB_MIN_UNDER:vv,VC_MAX_OK:hv,VC_MAX_OVER:Av,VC_MIN_OK:Tv,VC_MIN_UNDER:uv,V_PARAMETERS_FAULT:jv,V_PARAMETERS_OK:Qv,WD_RESTART:rv,WINTER_SUMMER_BAD:Ph,WINTER_TIME:$_});var UA=Mt(dA);var lA=254;var pA=Object.freeze({__proto__:null,activateRatePlan:Po,errorResponse:lA,getBuildVersion:l_,getCorrectTime:ko,getCriticalEvent:h_,getCurrentStatusMeter:bo,getCurrentValues:Oo,getDateTime:uo,getDayDemand:Io,getDayDemandExport:i_,getDayMaxDemand:Go,getDayMaxDemandExport:A_,getDayProfile:Qo,getDemand:M_,getDeviceId:To,getDeviceType:Ao,getDisplayParam:O_,getEnergy:go,getEnergyDayPrevious:ho,getEnergyExport:n_,getEnergyExportDayPrevious:s_,getEventStatus:vo,getEvents:Xo,getEventsCounters:Bo,getExtendedCurrentValues:Zo,getHalfHourDemand:Mo,getHalfHourDemandChannel:u_,getHalfHourDemandExport:o_,getHalfHourDemandVare:a_,getHalfHourDemandVareExport:v_,getHalfHourDemandVari:r_,getHalfHourDemandVariExport:__,getHalfhoursEnergies:U_,getMagneticFieldThreshold:d_,getMeterInfo:I_,getMonthDemand:No,getMonthDemandExport:E_,getMonthMaxDemand:wo,getMonthMaxDemandExport:T_,getOperatorParameters:mo,getOperatorParametersExtended:qo,getOperatorParametersExtended2:e_,getOperatorParametersExtended3:p_,getRatePlanInfo:xo,getSaldo:Fo,getSaldoParameters:Yo,getSeasonProfile:jo,getSpecialDay:zo,getVersion:Lo,prepareRatePlan:co,resetPowerMaxDay:Wo,resetPowerMaxMonth:Ko,runTariffPlan:t_,setAccessKey:fo,setCorrectDateTime:R_,setCorrectTime:yo,setDateTime:Ro,setDayProfile:Uo,setDisplayParam:f_,setOperatorParameters:Co,setOperatorParametersExtended:$o,setOperatorParametersExtended2:Jo,setOperatorParametersExtended3:P_,setOperatorParametersExtended4:c_,setSaldo:Vo,setSaldoParameters:Ho,setSeasonProfile:lo,setSpecialDay:po,setSpecialOperation:g_,turnRelayOff:Do,turnRelayOn:So});Mt(pA);var PA=2400;var cA=9600;var MA={plc:{0:cA,2:PA,4:cA},optoport:{0:PA,2:PA,4:cA}};var IA={plc:Mt(MA.plc),optoport:Mt(MA.optoport)};var NA=h_;var SA=function(t){return Jr(NA,[t.event,t.index])};var DA=95;var yA=9;var mA=28;var CA=28;var LA=4;var FA={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var VA={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var xA={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var YA={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var HA={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var GA={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var wA={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var XA={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var BA={OPTOPORT_SPEED:1<<26};var WA={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var KA=function(t){return{plc:MA.plc[Y(t,4,1)],optoport:MA.optoport[Y(t,4,5)]}};var bA=function(t){var e=0;e=H(e,4,1,Number(IA.plc[t.plc]));e=H(e,4,5,Number(IA.optoport[t.optoport]));return e};function ZA(t,e,r){var a=r>>LA;var n=[];var i=[];var s=[];for(var E=0;E<yr;E++){var o=!!Y(a,1,E+1);if(o){n.push(t.getInt32());i.push(t.getInt32());s.push(t.getInt32())}else{n.push(null);i.push(null);s.push(null)}}return{wh:n,vari:i,vare:s}}function QA(t,e){var r=e.wh,a=e.vari,n=e.vare;var i=1+LA;var s=t;for(var E=0;E<yr;E++){s=H(s,1,E+i,Number(!!r[E]&&!!a[E]&&!!n[E]))}return s}function jA(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;qr.call(this,t,e)}jA.prototype=Object.create(qr.prototype);jA.prototype.constructor=jA;jA.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:x(FA,4229),displaySet2:x(VA,139776),displaySet3:x(xA,0),relaySet:x(GA,771),speedOptoPort:KA(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:x(wA,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:x(YA,2147876864)}};jA.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:x(FA,this.getUint32()),displaySet2:x(VA,this.getUint32()),displaySet3:x(xA,this.getUint32()),relaySet:x(GA,this.getUint32()),speedOptoPort:KA(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:x(wA,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:x(YA,this.getUint32())}};jA.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(V(FA,t.displaySet1));this.setUint32(V(VA,t.displaySet2));this.setUint32(V(xA,t.displaySet3));this.setUint32(V(GA,t.relaySet));this.setUint8(bA(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(V(wA,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(V(YA,t.displaySet4))};jA.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:x(XA,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};jA.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(V(XA,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};jA.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var a=0;a<yr;a++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};jA.prototype.setEnergies=function(t){for(var e=0;e<yr;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};jA.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Y(t,LA,1);var r=ZA(this,e,t);return{energyType:e,energies:r}};jA.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var a=QA(e,r);var n=a>>LA;this.setUint8(a);for(var i=0;i<yr;i++){var s=!!Y(n,1,i+1);if(s){this.setInt32(r.wh[i]);this.setInt32(r.vari[i]);this.setInt32(r.vare[i])}}return}for(var E=0;E<yr;E++){this.setInt32(r.wh[E]);this.setInt32(r.vari[E]);this.setInt32(r.vare[E])}};jA.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};jA.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};jA.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};jA.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};jA.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(yr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};jA.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};jA.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(yr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};jA.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};jA.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=UA[e];switch(e){case Xh:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case b_:case Nh:if(r<8){return t}t.newDate=this.getDateTime();break}return t};jA.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Xh:for(var e of t.power){this.setUint8(e)}break;case b_:case Nh:this.setDateTime(t.newDate);break}};jA.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};jA.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};jA.prototype.getOperatorParametersExtended2=function(){return{deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:x(WA,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:x(BA,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:this.getUint8()}};jA.prototype.setOperatorParametersExtended2=function(t){this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(V(WA,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(V(BA,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(t.timeCorrectPeriod)};jA.prototype.getOperatorParametersExtended4=function(){return{displaySet5:x(HA,this.getUint32()),displaySet25:x(HA,this.getUint32()),displaySet31:x(FA,this.getUint32()),displaySet32:x(FA,this.getUint32()),displaySet33:x(FA,this.getUint32()),displaySet34:x(FA,this.getUint32()),displaySet35:x(HA,this.getUint32())}};jA.prototype.setOperatorParametersExtended4=function(t){this.setUint32(V(HA,t.displaySet5));this.setUint32(V(HA,t.displaySet25));this.setUint32(V(FA,t.displaySet31));this.setUint32(V(FA,t.displaySet32));this.setUint32(V(FA,t.displaySet33));this.setUint32(V(FA,t.displaySet34));this.setUint32(V(HA,t.displaySet35))};var zA=3;var kA=4;var qA=Io;var $A=function(t){var e=new jA(t?.energyType?kA:zA);e.setDate(t?.date);if(t?.energyType){e.setUint8(t.energyType)}return Jr(qA,e.data)};var JA=i_;var tT=3;var eT=function(t){var e=new jA(tT);e.setDate(t.date);return Jr(JA,e.data)};var rT=M_;var aT=7;var nT=function(t){var e=new jA(aT);e.setDemand(t);return Jr(rT,e.data)};var iT=O_;var sT=1;var ET=function(t){var e=new jA(sT);e.setUint8(t.displayMode);return Jr(iT,e.data)};var oT=go;var _T=function(){return Jr(oT)};var vT=ho;var hT=function(t){if(t.energyType){return Jr(vT,[t.energyType])}return Jr(vT)};var AT=n_;var TT=function(){return Jr(AT)};var uT=s_;var RT=function(){return Jr(uT)};var fT=u_;var OT=5;var gT=function(t){var e=new jA(OT);e.setUint8(t.channel);e.setUint8(t.channelParameter);e.setDate(t.date);return Jr(fT,e.data)};var dT=a_;var UT=3;var lT=function(t){var e=new jA(UT);e.setDate(t.date);return Jr(dT,e.data)};var pT=v_;var PT=3;var cT=function(t){var e=new jA(PT);e.setDate(t.date);return Jr(pT,e.data)};var MT=r_;var IT=3;var NT=function(t){var e=new jA(IT);e.setDate(t.date);return Jr(MT,e.data)};var ST=__;var DT=3;var yT=function(t){var e=new jA(DT);e.setDate(t.date);return Jr(ST,e.data)};var mT=qo;var CT=function(){return Jr(mT)};var LT=e_;var FT=function(){return Jr(LT)};var VT=f_;var xT=function(t){return Jr(VT,[t.displayMode].concat(o(t.order)))};var YT=Co;var HT=DA;var GT=function(t){var e=new jA(HT);e.setOperatorParameters(t);return Jr(YT,e.data)};var wT=$o;var XT=yA;var BT=function(t){var e=new jA(XT);e.setOperatorParametersExtended(t);return Jr(wT,e.data)};var WT=Jo;var KT=mA;var bT=function(t){var e=new jA(KT);e.setOperatorParametersExtended2(t);return Jr(WT,e.data)};var ZT=c_;var QT=CA;var jT=function(t){var e=new jA(QT);e.setOperatorParametersExtended4(t);return Jr(ZT,e.data)};var zT={};var kT=aE(zT);zT[Tn]=Rn;zT[fn]=On;zT[gn]=dn;zT[xn]=Yn;zT[Hn]=Gn;zT[wn]=Xn;zT[wn]=Xn;zT[Bn]=Kn;zT[bn]=Qn;zT[jn]=kn;zT[qn]=$n;zT[Jn]=ti;zT[ei]=ai;zT[ni]=ii;zT[si]=Ei;zT[oi]=_i;zT[vi]=Ai;zT[Ti]=Ri;zT[ci]=Ii;zT[Ni]=Si;zT[Di]=yi;zT[mi]=Li;zT[Fi]=xi;zT[Yi]=Hi;zT[Gi]=wi;zT[Wi]=Ki;zT[Xi]=Bi;zT[bi]=Zi;zT[Qi]=ji;zT[zi]=ki;zT[qi]=Ji;zT[ts]=rs;zT[as]=ns;zT[is]=Es;zT[os]=_s;zT[vs]=hs;zT[As]=Ts;zT[Rs]=Os;zT[gs]=Us;zT[ls]=Ps;zT[cs]=Is;zT[Ds]=ys;zT[ms]=Ls;zT[Fs]=xs;zT[Ys]=Gs;zT[ws]=Bs;zT[Ws]=bs;zT[Zs]=js;zT[zs]=ks;zT[qs]=$s;zT[NA]=SA;zT[qA]=$A;zT[JA]=eT;zT[rT]=nT;zT[iT]=ET;zT[oT]=_T;zT[vT]=hT;zT[AT]=TT;zT[uT]=RT;zT[fT]=gT;zT[dT]=lT;zT[pT]=cT;zT[MT]=NT;zT[ST]=yT;zT[mT]=CT;zT[LT]=FT;zT[VT]=xT;zT[YT]=GT;zT[wT]=BT;zT[WT]=bT;zT[ZT]=jT;var qT=145;var $T=30;var JT=function(t){var e=[$T,t.length+2,0,qT].concat(o(t));return[].concat(o(e),[tE(e)])};getBase64FromBytes=$r;toBytes=kT;setDataSegment=JT})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var bytes = toBytes(msg.commands);

// send nothing if not fit in a single data segment
if ( bytes.length > MAX_DATA_SEGMENT_SIZE ) {
    bytes = [];
} else {
    bytes = setDataSegment(bytes);
}

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(bytes)
};

return result;
