// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,t=Array(a);e<a;e++)t[e]=r[e];return t}function a(r){if(Array.isArray(r))return r}function e(a){if(Array.isArray(a))return r(a)}function t(r,a,e){return(a=i(a))in r?Object.defineProperty(r,a,{value:e,enumerable:true,configurable:true,writable:true}):r[a]=e,r}function E(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(r,a){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,E,_,v,n=[],A=true,T=false;try{if(_=(e=e.call(r)).next,0===a){if(Object(e)!==e)return;A=!1}else for(;!(A=(t=_.call(e)).done)&&(n.push(t.value),n.length!==a);A=!0);}catch(r){T=true,E=r}finally{try{if(!A&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw E}}return n}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(r,e){return a(r)||_(r,e)||o(r,e)||v()}function T(r){return e(r)||E(r)||o(r)||n()}function R(r,a){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,a);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function i(r){var a=R(r,"string");return"symbol"==typeof a?a:a+""}function o(a,e){if(a){if("string"==typeof a)return r(a,e);var t={}.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(a,e):void 0}}var O=function(r){var a=r.trim();if(!a){return[]}a=a.replace(/0x/g,"").split(/\s+/).map(function(r){return r.padStart(2,"0")}).join("");if(a.length%2!==0){a="0".concat(a)}var e=a.length/2;var t=new Array(e);for(var E=0;E<e;E++){t[E]=parseInt(a.substring(E*2,E*2+2),16)}return t};var s={separator:" ",prefix:""};var f=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},s,a),t=e.separator,E=e.prefix;return r.map(function(r){return"".concat(E).concat(r.toString(16).padStart(2,"0"))}).join(t)};var N=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(T(a))};var u=function(r,a,e){if(!r){throw new Error("Command name is required.")}if(a&&!Array.isArray(a)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof a,"."))}if(a.length<e.min||a.length>e.max){var t=f(a,{separator:""});var E="".concat(e.max);throw new Error("Wrong buffer size for ".concat(r,": ").concat(a.length,". Expected: ").concat(E,". Payload: 0x").concat(t,"."))}};var P=function(r,a,e){return u(r,a,{min:e,max:e})};var C=1;var S=3;var D=4;var I=5;var M=7;var l=8;var g=9;var d=13;var c=15;var h=16;var L=17;var m=18;var p=19;var V=20;var y=21;var F=22;var U=23;var H=24;var G=25;var X=28;var W=30;var Y=31;var x=40;var B=41;var w=42;var K=44;var b=45;var Z=46;var Q=47;var j=49;var z=50;var k=51;var q=52;var $=53;var J=54;var rr=57;var ar=58;var er=59;var tr=60;var Er=61;var _r=62;var vr=65;var nr=70;var Ar=74;var Tr=75;var Rr=79;var ir=80;var or=82;var Or=83;var sr=88;var fr=89;var Nr=91;var ur=92;var Pr=93;var Cr=94;var Sr=96;var Dr=97;var Ir=100;var Mr=109;var lr=111;var gr=112;var dr=113;var cr=114;var hr=115;var Lr=116;var mr=117;var pr=118;var Vr=122;var yr=Object.freeze({__proto__:null,activateRatePlan:p,getBv:gr,getCorrectTime:_r,getCriticalEvent:vr,getCurrentStatusMeter:rr,getCurrentValues:d,getDateTime:M,getDayDemand:F,getDayDemandExport:Rr,getDayMaxDemand:j,getDayMaxDemandExport:sr,getDayMaxDemandPrevious:Ar,getDayProfile:er,getDemand:pr,getDemandParameters:mr,getDeviceId:I,getDeviceType:D,getDisplayParam:Cr,getEnergy:c,getEnergyDayPrevious:S,getEnergyExport:Nr,getEnergyExportDayPrevious:ir,getEventStatus:C,getEvents:k,getEventsCounters:q,getExtendedCurrentValues:ar,getExtendedCurrentValues2:b,getGsmParameters:Dr,getHalfHourDemand:y,getHalfHourDemandExport:Or,getHalfHourDemandPrevious:Tr,getHalfHourEnergies:lr,getMagneticFieldThreshold:Mr,getMeterInfo:Vr,getMonthDemand:U,getMonthDemandExport:or,getMonthMaxDemand:z,getMonthMaxDemandExport:fr,getOperatorParameters:W,getOperatorParametersExtended3:dr,getQuality:hr,getRatePlanInfo:K,getSaldo:B,getSaldoParameters:Z,getSeasonProfile:tr,getSpecialDay:Er,getVersion:x,prepareRatePlan:V,resetPowerMaxDay:$,resetPowerMaxMonth:J,runTariffPlan:nr,setAccessKey:g,setCorrectDateTime:ur,setCorrectTime:X,setDateTime:l,setDayProfile:h,setDemandParameters:Lr,setDisplayParam:Pr,setGsmParameters:Sr,setOperatorParameters:Y,setOperatorParametersExtended3:cr,setSaldo:w,setSaldoParameters:Q,setSeasonProfile:L,setSpecialDay:m,setSpecialOperation:Ir,turnRelayOff:G,turnRelayOn:H});var Fr=120;var Ur=121;var Hr=123;var Gr=254;var Xr=255;var Wr=Object.freeze({__proto__:null,activateRatePlan:p,errorDataFrameResponse:Xr,errorResponse:Gr,getBv:gr,getCorrectTime:_r,getCriticalEvent:vr,getCurrentDemand:Hr,getCurrentStatusMeter:rr,getCurrentValues:d,getDateTime:M,getDayDemand:F,getDayDemandExport:Rr,getDayEnergies:Fr,getDayMaxDemand:j,getDayMaxDemandExport:sr,getDayMaxDemandPrevious:Ar,getDayMaxPower:Ur,getDayProfile:er,getDemand:pr,getDemandParameters:mr,getDeviceId:I,getDeviceType:D,getDisplayParam:Cr,getEnergy:c,getEnergyDayPrevious:S,getEnergyExport:Nr,getEnergyExportDayPrevious:ir,getEventStatus:C,getEvents:k,getEventsCounters:q,getExtendedCurrentValues:ar,getExtendedCurrentValues2:b,getGsmParameters:Dr,getHalfHourDemand:y,getHalfHourDemandExport:Or,getHalfHourDemandPrevious:Tr,getHalfHourEnergies:lr,getMagneticFieldThreshold:Mr,getMeterInfo:Vr,getMonthDemand:U,getMonthDemandExport:or,getMonthMaxDemand:z,getMonthMaxDemandExport:fr,getOperatorParameters:W,getOperatorParametersExtended3:dr,getQuality:hr,getRatePlanInfo:K,getSaldo:B,getSaldoParameters:Z,getSeasonProfile:tr,getSpecialDay:Er,getVersion:x,prepareRatePlan:V,resetPowerMaxDay:$,resetPowerMaxMonth:J,runTariffPlan:nr,setAccessKey:g,setCorrectDateTime:ur,setCorrectTime:X,setDateTime:l,setDayProfile:h,setDemandParameters:Lr,setDisplayParam:Pr,setGsmParameters:Sr,setOperatorParameters:Y,setOperatorParametersExtended3:cr,setSaldo:w,setSaldoParameters:Q,setSeasonProfile:L,setSpecialDay:m,setSpecialOperation:Ir,turnRelayOff:G,turnRelayOn:H});var Yr=function(r){var a={};for(var e in r){var t=r[e];a[t]=e}return a};var xr=Yr(Wr);var Br=0;var wr=128;var Kr=129;var br=130;var Zr=131;var Qr=132;var jr=133;var zr=134;var kr=135;var qr=136;var $r=137;var Jr=144;var ra=145;var aa=146;var ea=147;var ta=149;var Ea=151;var _a=152;var va=153;var na=154;var Aa=155;var Ta=156;var Ra=159;var ia=160;var oa=240;var Oa=Object.freeze({__proto__:null,ACCESS_DENIED:ea,BAD_ARRAY_INDEX:zr,BAD_BLOCK_NUMBER:Ta,BAD_DATA_LENGTH:jr,BAD_MESSAGE:Qr,BAD_RATE_PLAN_ID:qr,BAD_RATE_PLAN_SIZE:$r,BAD_RESPONSE_LENGTH:Jr,BAD_SALDO_WRITE:ta,BLOCKED_METER:Ea,CALIBRATION_DISABLED:aa,DECRYPTION_FAILURE:br,INTERNAL:oa,INVALID_CORRECTION_INTERVAL:na,NOT_ALIGNED_DATA:Kr,NOT_PREPARED_RATE_PLAN:kr,NO_DATA_FOR_DATE:ra,OK:Br,OUT_OFF_RANGE:Ra,SET_METER_TYPE_FAILURE:ia,TIME_CORRECTION_FAILURE:va,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:Aa,UNENCRYPTED_COMMAND_DISABLED:_a,UNKNOWN_COMMAND:wr,UNKNOWN_PROTOCOL:Zr});var sa=Yr(Oa);var fa=0;var Na=1;var ua=2;var Pa=3;var Ca=Object.freeze({__proto__:null,READ_ONLY:Pa,READ_WRITE:ua,ROOT:Na,UNENCRYPTED:fa});var Sa=Xr;var Da=xr[Xr];var Ia=1;var Ma=function(r){P(Da,r,Ia);var a=A(r,1),e=a[0];return{errorCode:e,errorName:sa[e]}};var la={encrypt:function(){},decrypt:function(){}};var ga=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=a;r.forEach(function(r){e^=r});return e};var da=2;var ca=2;var ha=function(r){var a=A(r,1),e=a[0];if(e===Sa){try{var t=Ma(r.slice(da));return{id:e,name:Da,headerSize:da,bytes:r,parameters:t}}catch{return null}}return null};var La=function(r,a){var e=A(a,1),t=e[0];var E=ha(a.slice(ca-1));var _=ha(a.slice(ca));var v={messageId:t,bytes:a};if(E){return{...v,accessLevel:fa,commands:[E]}}if(_){return{...v,accessLevel:r,commands:[_]}}return null};var ma=3;t(t(t(t({},fa,0),Pa,1),ua,2),Na,3);var pa=2;var Va=2;var ya=function(r,a){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var E=t?.aesKey;var _=[];var v=A(e,2),n=v[0],R=v[1];var i=R&ma;var o=La(i,e);var O={messageId:n,accessLevel:i,commands:_,bytes:e,lrc:{received:undefined,calculated:0}};var s=e.slice(pa);var f;if(o){return o}if(E&&i!==fa){s=T(la.decrypt(E,s))}var N=s[s.length-1];s=s.slice(0,-1);var u=ga(s);if(i!==fa||N!==0){if(N!==u){f="Mismatch LRC."}}var P=s[0]&ma;var C=s.slice(1);if(i!==P){f="Mismatch access levels."}var S=0;do{var D=C[S];var I=C[S+1];var M=Va+I;var l=C.slice(S+Va,S+M);var g={id:D,name:a[D],headerSize:Va,bytes:C.slice(S,S+M)};if(!D){break}try{if(!r[D]){throw new Error("Unsupported command id: ".concat(D,"!"))}g.parameters=r[D](l,t);_.push(g)}catch(r){_.push({command:g,error:r.message})}S+=M}while(S<=C.length);O.lrc.calculated=u;O.lrc.received=N;if(f){return{message:O,error:f}}return O}};var Fa=1;var Ua=3;var Ha=4;var Ga=5;var Xa=7;var Wa=8;var Ya=9;var xa=13;var Ba=15;var wa=16;var Ka=17;var ba=18;var Za=19;var Qa=20;var ja=21;var za=22;var ka=23;var qa=24;var $a=25;var Ja=28;var re=30;var ae=31;var ee=40;var te=41;var Ee=42;var _e=44;var ve=46;var ne=47;var Ae=49;var Te=50;var Re=51;var ie=52;var oe=53;var Oe=54;var se=57;var fe=58;var Ne=59;var ue=60;var Pe=61;var Ce=62;var Se=63;var De=64;var Ie=69;var Me=70;var le=71;var ge=72;var de=73;var ce=78;var he=79;var Le=80;var me=82;var pe=83;var Ve=84;var ye=85;var Fe=86;var Ue=88;var He=89;var Ge=90;var Xe=92;var We=93;var Ye=94;var xe=96;var Be=97;var we=100;var Ke=109;var be=111;var Ze=112;var Qe=113;var je=114;var ze=115;var ke=116;var qe=117;var $e=118;var Je=122;var rt=Object.freeze({__proto__:null,activateRatePlan:Za,getBv:Ze,getCorrectTime:Ce,getCriticalEvent:Fe,getCurrentStatusMeter:se,getCurrentValues:xa,getDateTime:Xa,getDayDemand:za,getDayDemandExport:he,getDayMaxDemand:Ae,getDayMaxDemandExport:Ue,getDayProfile:Ne,getDemand:$e,getDeviceId:Ga,getDeviceType:Ha,getDisplayParam:Ye,getEnergy:Ba,getEnergyDayPrevious:Ua,getEnergyExport:ce,getEnergyExportDayPrevious:Le,getEventStatus:Fa,getEvents:Re,getEventsCounters:ie,getExtendedCurrentValues:fe,getGsmParameters:Be,getHalfHourDemand:ja,getHalfHourDemandChannel:Ge,getHalfHourDemandExport:pe,getHalfHourDemandVare:de,getHalfHourDemandVareExport:ye,getHalfHourDemandVari:ge,getHalfHourDemandVariExport:Ve,getHalfHourEnergies:be,getMagneticFieldThreshold:Ke,getMeterInfo:Je,getMonthDemand:ka,getMonthDemandExport:me,getMonthMaxDemand:Te,getMonthMaxDemandExport:He,getOperatorParameters:re,getOperatorParametersExtended:Se,getOperatorParametersExtended2:le,getOperatorParametersExtended3:Qe,getOperatorParametersExtended4:qe,getQuality:ze,getRatePlanInfo:_e,getSaldo:te,getSaldoParameters:ve,getSeasonProfile:ue,getSpecialDay:Pe,getVersion:ee,prepareRatePlan:Qa,resetPowerMaxDay:oe,resetPowerMaxMonth:Oe,runTariffPlan:Me,setAccessKey:Ya,setCorrectDateTime:Xe,setCorrectTime:Ja,setDateTime:Wa,setDayProfile:wa,setDisplayParam:We,setGsmParameters:xe,setOperatorParameters:ae,setOperatorParametersExtended:De,setOperatorParametersExtended2:Ie,setOperatorParametersExtended3:je,setOperatorParametersExtended4:ke,setSaldo:Ee,setSaldoParameters:ne,setSeasonProfile:Ka,setSpecialDay:ba,setSpecialOperation:we,turnRelayOff:$a,turnRelayOn:qa});var at=120;var et=254;var tt=255;var Et=Object.freeze({__proto__:null,activateRatePlan:Za,errorDataFrameResponse:tt,errorResponse:et,getBv:Ze,getCorrectTime:Ce,getCriticalEvent:Fe,getCurrentStatusMeter:se,getCurrentValues:xa,getDateTime:Xa,getDayDemand:za,getDayDemandExport:he,getDayEnergies:at,getDayMaxDemand:Ae,getDayMaxDemandExport:Ue,getDayProfile:Ne,getDemand:$e,getDeviceId:Ga,getDeviceType:Ha,getDisplayParam:Ye,getEnergy:Ba,getEnergyDayPrevious:Ua,getEnergyExport:ce,getEnergyExportDayPrevious:Le,getEventStatus:Fa,getEvents:Re,getEventsCounters:ie,getExtendedCurrentValues:fe,getGsmParameters:Be,getHalfHourDemand:ja,getHalfHourDemandChannel:Ge,getHalfHourDemandExport:pe,getHalfHourDemandVare:de,getHalfHourDemandVareExport:ye,getHalfHourDemandVari:ge,getHalfHourDemandVariExport:Ve,getHalfHourEnergies:be,getMagneticFieldThreshold:Ke,getMeterInfo:Je,getMonthDemand:ka,getMonthDemandExport:me,getMonthMaxDemand:Te,getMonthMaxDemandExport:He,getOperatorParameters:re,getOperatorParametersExtended:Se,getOperatorParametersExtended2:le,getOperatorParametersExtended3:Qe,getOperatorParametersExtended4:qe,getQuality:ze,getRatePlanInfo:_e,getSaldo:te,getSaldoParameters:ve,getSeasonProfile:ue,getSpecialDay:Pe,getVersion:ee,prepareRatePlan:Qa,resetPowerMaxDay:oe,resetPowerMaxMonth:Oe,runTariffPlan:Me,setAccessKey:Ya,setCorrectDateTime:Xe,setCorrectTime:Ja,setDateTime:Wa,setDayProfile:wa,setDisplayParam:We,setGsmParameters:xe,setOperatorParameters:ae,setOperatorParametersExtended:De,setOperatorParametersExtended2:Ie,setOperatorParametersExtended3:je,setOperatorParametersExtended4:ke,setSaldo:Ee,setSaldoParameters:ne,setSeasonProfile:Ka,setSpecialDay:ba,setSpecialOperation:we,turnRelayOff:$a,turnRelayOn:qa});var _t=Yr(Et);var vt=1;var nt=2;var At=3;var Tt=4;var Rt=Math.log,it=Math.pow,ot=Math.LN2;var Ot=function(r,a,e,t,E){var _,v,n=E*8-t-1,A=(1<<n)-1,T=A>>1,R=-7,i=e?E-1:0,o=e?-1:1,O=r[a+i];i+=o;_=O&(1<<-R)-1;O>>=-R;R+=n;for(;R>0;_=_*256+r[a+i],i+=o,R-=8);v=_&(1<<-R)-1;_>>=-R;R+=t;for(;R>0;v=v*256+r[a+i],i+=o,R-=8);if(_===0){_=1-T}else if(_===A){return v?NaN:O?-Infinity:Infinity}else{v=v+it(2,t);_=_-T}return(O?-1:1)*v*it(2,_-t)};var st=function(r,a,e,t,E,_){var v,n,A,T=_*8-E-1,R=(1<<T)-1,i=R>>1,o=E===23?it(2,-24)-it(2,-77):0,O=t?0:_-1,s=t?1:-1,f=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){n=e!==e?1:0;v=R}else{v=Rt(e)/ot|0;if(e*(A=it(2,-v))<1){v--;A*=2}if(v+i>=1){e+=o/A}else{e+=o*it(2,1-i)}if(e*A>=2){v++;A/=2}if(v+i>=R){n=0;v=R}else if(v+i>=1){n=(e*A-1)*it(2,E);v=v+i}else{n=e*it(2,i-1)*it(2,E);v=0}}for(;E>=8;r[a+O]=n&255,O+=s,n/=256,E-=8);v=v<<E|n;T+=E;for(;T>0;r[a+O]=v&255,O+=s,v/=256,T-=8);r[a+O-s]|=f*128};var ft=[1,0];var Nt=[2,1,0];var ut=[3,2,1,0];var Pt=[0,1];var Ct=[0,1,2];var St=[0,1,2,3];var Dt=function(r,a){return r[a]};var It=function(r,a,e){var t=e?Pt:ft;var E=r[a+t[0]];var _=r[a+t[1]]<<8;return E|_};var Mt=function(r,a,e){var t=e?Ct:Nt;var E=r[a+t[0]];var _=r[a+t[1]]<<8;var v=r[a+t[2]]<<16;return E|_|v};var lt=function(r,a,e){var t=e?St:ut;var E=r[a+t[3]]*16777216;var _=r[a+t[2]]*65536;var v=r[a+t[1]]*256;var n=r[a+t[0]];return E+_+v+n};var gt=function(r,a,e){r[a]=e&255};var dt=function(r,a,e,t){var E=t?Pt:ft;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255};var ct=function(r,a,e,t){var E=t?Ct:Nt;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255};var ht=function(r,a,e,t){var E=t?St:ut;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255;r[a+E[3]]=e>>>24&255};function Lt(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=a}Lt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){gt(this.data,this.offset,r<0?r|256:r);this.offset+=vt},getInt8:function(){var r=Dt(this.data,this.offset);this.offset+=vt;return r&128?r^-256:r},setUint8:function(r){gt(this.data,this.offset,r);this.offset+=vt},getUint8:function(){var r=Dt(this.data,this.offset);this.offset+=vt;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;dt(this.data,this.offset,r<0?r|65536:r,a);this.offset+=nt},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=It(this.data,this.offset,r);this.offset+=nt;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;dt(this.data,this.offset,r,a);this.offset+=nt},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=It(this.data,this.offset,r);this.offset+=nt;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ct(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=At},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Mt(this.data,this.offset,r);this.offset+=At;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ct(this.data,this.offset,r,a);this.offset+=At},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Mt(this.data,this.offset,r);this.offset+=At;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ht(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=Tt},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=lt(this.data,this.offset,r);this.offset+=Tt;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ht(this.data,this.offset,r,a);this.offset+=Tt},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=lt(this.data,this.offset,r);this.offset+=Tt;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;st(this.data,this.offset,r,a,23,4);this.offset+=Tt},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ot(this.data,this.offset,r,23,4);this.offset+=Tt;return a},setFixedString:function(r,a){var e=r.length>a?a:r.length;var t=0;for(t=0;t<e;++t){this.setUint8(r.charCodeAt(t))}for(t=e;t<a;++t){this.setUint8(0)}},getFixedStringBase:function(r,a){var e=a.stopOnZero;var t=this.offset+r;var E=[];var _;while(this.offset<t){_=this.getUint8();if(e&&_===0){this.seek(t);break}E.push(String.fromCharCode(_))}return E.join("")},getFixedString:function(r){return this.getFixedStringBase(r,{stopOnZero:true})},setString:function(r){this.setUint8(r.length);this.setFixedString(r)},getString:function(){var r=this.getUint8();return this.getFixedStringBase(r,{stopOnZero:false})},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[a,r.length].concat(T(r)));this.data=e;this.offset=a+r.length}};Object.defineProperties(Lt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var mt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=0;for(var t in a){if(t in r&&a[t]){e|=r[t]}}return e};var pt=function(r,a,e){return(1<<a)-1&r>>e-1};var Vt=function(r,a,e,t){var E=(1<<a)-1<<e-1;var _=t;var v=r;v&=~E;_<<=e-1;v|=_;return v};var yt=[".","1","3","R","M"];var Ft=[".","A","G","R","T","D"];var Ut=[".","0","1","2","3","4","5"];var Ht=[".","A","B","C","D","E","F"];var Gt=[".","A","B","C","D","E","F","H","K","G"];var Xt=[".","1","2","3","4"];var Wt=[".","L","M","Z","K"];var Yt=[".","0","1","2","3","4","5","6","7","8","9"];var xt=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Bt=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var wt=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Kt=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var bt={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Zt={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var Qt=function(r){return mt(Zt,{...r,typeMeterG:!r.typeMeterG})};var jt=function(r){var a=[];r.forEach(function(r){return a.push(r.toString(16))});if(r.length&1){a.push("0")}return O(a.join(""))};var zt=function(r,a,e){var t=[];if(r.length<11){throw new Error("Wrong format")}t.push(yt.indexOf(r[0]));t.push(Ft.indexOf(r[1]));t.push(Ut.indexOf(r[2]));t.push(Ut.indexOf(r[3]));if(r[4]!=="."){throw new Error("Wrong format")}t.push(Ht.indexOf(r[5]));t.push(Gt.indexOf(r[6]));if(r[7]!=="."){throw new Error("Wrong format")}t.push(Xt.indexOf(r[8]));t.push(Wt.indexOf(r[9]));t.push(e??0);t.push(Yt.indexOf(r[10]));if(r[11]!=="-"){throw new Error("Wrong format")}var E=r.length>13?r.length-1:r.length;for(var _=12;_<E;_++){t.push(xt.indexOf(r[_]))}if(E<r.length){t.push(wt.indexOf(r[E]))}var v=jt(t);var n=new Array(9).fill(0);n[0]=0;for(var A=0;A<v.length;A++){n[A+(v.length<8?1:0)]=v[A]}return n};var kt=function(r){if(r.length<3){throw new Error("Wrong format")}var a=[];a.push(yt.indexOf(r[0]));a.push(Ft.indexOf(r[1]));for(var e=3;e<r.length;e++){a.push(Bt.indexOf(r[e]))}var t=jt(a);if(t.length===8){return t}if(t.length>8){throw new Error("Wrong format")}var E=new Array(8).fill(0);for(var _=0;_<t.length;_++){E[_]=t[_]}return E};var qt=function(r){if(r.length<1){throw new Error("Wrong format")}var a=[];a.push(yt.indexOf(r[0]));for(var e=1;e<r.length;e++){a.push(Kt.indexOf(r[e]))}var t=jt(a);var E=new Array(8).fill(0);for(var _=0;_<t.length&&_<8;_++){E[_]=t[_]}return E};var $t=function(r,a){var e=r.type,t=r.revision,E=r.descriptor;if(!e.startsWith("MTX ")){throw new Error("Wrong format")}var _;var v=e.substring(4);var n=e[4];if(n==="1"||n==="3"){_=zt(v,a,t)}else{_=n==="M"?qt(v):kt(v)}if(E?.meterType){_[8]=E.meterType==="mtx1"?mt(bt,E):Qt(E)}else{_[8]=0}return _};var Jt=80;var rE=81;var aE=82;var eE=83;var tE=84;var EE=85;var _E=86;var vE=87;var nE=88;var AE=89;var TE=90;var RE=91;var iE=255;var oE=Object.freeze({__proto__:null,DATA_REQUEST:Jt,DATA_RESPONSE:rE,FRAGMENT_REQUEST:TE,FRAGMENT_RESPONSE:RE,IDENT_REQUEST:aE,IDENT_RESPONSE:eE,INVALID:iE,L2_CHECK_ADDRESS_REQUEST:_E,L2_CHECK_ADDRESS_RESPONSE:vE,L2_RM_ADDRESS_REQUEST:nE,L2_RM_ADDRESS_RESPONSE:AE,L2_SET_ADDRESS_REQUEST:tE,L2_SET_ADDRESS_RESPONSE:EE});Yr(oE);Yr(Ca);var OE=0;var sE=1;var fE=2;var NE=3;var uE=4;var PE=5;var CE=6;var SE=7;var DE=8;var IE=9;var ME=10;var lE=11;var gE=12;var dE=13;var cE=14;var hE=Object.freeze({__proto__:null,CASE_MODULE_OPEN:ME,CASE_OPEN:OE,CASE_TERMINAL_OPEN:IE,DEVICE_FAILURE:DE,ERROR_ACCESS:PE,MAGNETIC_ON:sE,PARAMETERS_UPDATE_LOCAL:NE,PARAMETERS_UPDATE_REMOTE:fE,PROTECTION_RESET_EM:dE,PROTECTION_RESET_MAGNETIC:cE,RESTART:uE,TARIFF_TABLE_GET:gE,TARIFF_TABLE_SET:lE,TIME_CORRECT:SE,TIME_SET:CE});Yr(hE);Yr(yr);var LE=1;var mE=2;var pE=3;var VE=16;var yE=17;var FE=18;var UE=19;var HE=20;var GE=21;var XE=32;var WE=33;var YE=34;var xE=35;var BE=36;var wE=37;var KE=38;var bE=39;var ZE=40;var QE=41;var jE=49;var zE=50;var kE=51;var qE=52;var $E=53;var JE=54;var r_=55;var a_=56;var e_=57;var t_=58;var E_=59;var __=64;var v_=65;var n_=66;var A_=67;var T_=68;var R_=69;var i_=70;var o_=71;var O_=72;var s_=73;var f_=74;var N_=75;var u_=76;var P_=77;var C_=78;var S_=79;var D_=80;var I_=81;var M_=82;var l_=83;var g_=84;var d_=85;var c_=86;var h_=87;var L_=88;var m_=89;var p_=96;var V_=97;var y_=98;var F_=99;var U_=100;var H_=101;var G_=102;var X_=103;var W_=104;var Y_=105;var x_=112;var B_=113;var w_=114;var K_=115;var b_=116;var Z_=117;var Q_=118;var j_=119;var z_=120;var k_=121;var q_=122;var $_=123;var J_=124;var rv=125;var av=144;var ev=145;var tv=147;var Ev=148;var _v=152;var vv=156;var nv=157;var Av=158;var Tv=159;var Rv=160;var iv=161;var ov=162;var Ov=176;var sv=177;var fv=178;var Nv=179;var uv=180;var Pv=181;var Cv=182;var Sv=183;var Dv=185;var Iv=186;var Mv=224;var lv=225;var gv=226;var dv=227;var cv=228;var hv=229;var Lv=230;var mv=231;var pv=232;var Vv=Object.freeze({__proto__:null,ACCESS_ERROR:yE,ACCESS_LOCKED:VE,ACC_PARAMETERS_EXT_FAULT:K_,ACC_PARAMETERS_FAULT:w_,BAD_TEST_EEPROM:W_,BAD_TEST_FRAM:Y_,BATTERY_FAULT:l_,BATTERY_OK:M_,BIPOLAR_POWER_FAULT:uv,BIPOLAR_POWER_OK:Pv,BLOCK_TARIFF_FAULT:Z_,CALC_PERIOD_FAULT:b_,CALIBRATION_FAULT:d_,CALIBRATION_FLAG_RESET:X_,CALIBRATION_FLAG_SET:G_,CALIBRATION_OK:g_,CALIBRATION_PARAMETERS_FAULT:Q_,CASE_CLOSED:UE,CASE_MODULE_CLOSED:rv,CASE_MODULE_OPENED:J_,CASE_OPENED:FE,CASE_TERMINAL_BOX_CLOSED:$_,CASE_TERMINAL_BOX_OPENED:q_,CHANGE_ACCESS_KEY0:XE,CHANGE_ACCESS_KEY1:WE,CHANGE_ACCESS_KEY2:YE,CHANGE_ACCESS_KEY3:xE,CHANGE_COR_TIME:QE,CHANGE_PARAMETERS_CHANNEL:Dv,CHANGE_PARAMETERS_LOCAL:BE,CHANGE_PARAMETERS_REMOTE:wE,CHANGE_TARIFF_TABLE:zE,CHANGE_TARIFF_TABLE_2:_v,CLOCK_FAULT:h_,CLOCK_OK:c_,CMD_RELAY_2_OFF:V_,CMD_RELAY_2_ON:p_,CMD_RELAY_OFF:ZE,CMD_RELAY_ON:bE,CMD_SET_DATETIME:KE,COSF_MIN_OVER:E_,COSF_OK:t_,CROSS_ZERO_EN_T1:y_,CROSS_ZERO_EN_T2:F_,CROSS_ZERO_EN_T3:U_,CROSS_ZERO_EN_T4:H_,CROSS_ZERO_EXPORT_EN_T1:Av,CROSS_ZERO_EXPORT_EN_T2:Tv,CROSS_ZERO_EXPORT_EN_T3:Rv,CROSS_ZERO_EXPORT_EN_T4:iv,CURRENT_UNEQUAL_FAULT:fv,CURRENT_UNEQUAL_OK:Nv,EM_MAGNETIC_INFLUENCE_OFF:sv,EM_MAGNETIC_INFLUENCE_ON:Ov,ENERGY_REGISTER_FAULT:LE,ENERGY_REGISTER_OVERFLOW:jE,F_MAX_OK:O_,F_MAX_OVER:s_,F_MIN_OK:f_,F_MIN_OVER:N_,I_MAX_OK:u_,I_MAX_OVER:P_,MAGNETIC_INFLUENCE_OFF:GE,MAGNETIC_INFLUENCE_ON:HE,OPERATOR_PARAMETERS_VALUES_FAULT:pE,POWER_A_OFF:L_,POWER_A_ON:m_,POWER_OVER_RELAY_OFF:nv,POWER_SALDO_OK:D_,POWER_SALDO_OVER:I_,P_MAX_A_MINUS_OK:mv,P_MAX_A_MINUS_OVER:pv,P_MAX_OK:C_,P_MAX_OVER:S_,RELAY_HARD_BAD_OFF:av,RELAY_HARD_BAD_ON:tv,RELAY_HARD_OFF:Ev,RELAY_HARD_ON:ev,RELAY_OFF:r_,RELAY_OFF_BAD_SALDO:Iv,RELAY_ON:JE,RESET_EM_FLAG:Cv,RESET_MAGNET_FLAG:Sv,RESTART:a_,SALDO_EN_FAULT:z_,SALDO_PARAMETERS_FAULT:B_,SET_DEMAND_EN_10MIN:dv,SET_DEMAND_EN_15MIN:cv,SET_DEMAND_EN_1MIN:Mv,SET_DEMAND_EN_30MIN:hv,SET_DEMAND_EN_3MIN:lv,SET_DEMAND_EN_5MIN:gv,SET_DEMAND_EN_60MIN:Lv,SET_NEW_SALDO:x_,SET_SALDO_PARAM:vv,SET_TARIFF_TABLE:kE,SUMMER_TIME:qE,TIME_CORRECT:k_,TIME_CORRECT_NEW:ov,T_MAX_OK:T_,T_MAX_OVER:R_,T_MIN_OK:i_,T_MIN_OVER:o_,VENDOR_PAR_FAULT:mE,V_MAX_OK:__,V_MAX_OVER:v_,V_MIN_OK:n_,V_MIN_OVER:A_,WATCHDOG_RESTART:e_,WINTER_SUMMER_FAULT:j_,WINTER_TIME:$E});Yr(Vv);var yv=0;var Fv=1;var Uv=2;var Hv=3;var Gv=4;var Xv=5;var Wv=Object.freeze({__proto__:null,GSM:Fv,TCP_CLIENT:Hv,TCP_SERVER:Uv,TCP_SERVER_HTTP_PING:Xv,TCP_SERVER_TCP_PING:Gv,UNDEFINED:yv});Yr(Wv);var Yv=0;var xv=1;var Bv=2;var wv=3;var Kv=Object.freeze({__proto__:null,CONFIGURATION_0:Yv,CONFIGURATION_1:xv,RESERVED:Bv,STATUS:wv});Yr(Kv);var bv=1;var Zv=2;var Qv=3;var jv=4;var zv=5;var kv=6;var qv=7;var $v=8;var Jv=9;var rn=10;var an=11;var en=12;var tn=13;var En=14;var _n=15;var vn=16;var nn=17;var An=18;var Tn=19;var Rn=20;var on=21;var On=22;var sn=23;var fn=24;var Nn=25;var un=26;var Pn=28;var Cn=30;var Sn=31;var Dn=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:jv,ACTIVE_ENERGY_T2:zv,ACTIVE_ENERGY_T3:kv,ACTIVE_ENERGY_T4:qv,ACTIVE_POWER_IN_NEUTRAL:Jv,ACTIVE_POWER_PER_PHASE:$v,BATTERY_VOLTAGE:On,CURRENT_BALANCE:Cn,CURRENT_IN_NEUTRAL:an,CURRENT_IN_PHASE:rn,DATE_MONTH_YEAR:En,EXPORTED_ACTIVE_ENERGY_T1:vn,EXPORTED_ACTIVE_ENERGY_T2:nn,EXPORTED_ACTIVE_ENERGY_T3:An,EXPORTED_ACTIVE_ENERGY_T4:Tn,HOUR_MINUTE_SECOND:tn,MAGNET_INDUCTION:Pn,OPTOPORT_SPEED:Sn,POWER_FACTOR_PHASE_A:Rn,POWER_FACTOR_PHASE_B:on,POWER_THRESHOLD_T1:sn,POWER_THRESHOLD_T2:fn,POWER_THRESHOLD_T3:Nn,POWER_THRESHOLD_T4:un,SET_ALL_SEGMENT_DISPLAY:bv,SOFTWARE_VERSION:Zv,TOTAL_ACTIVE_ENERGY:Qv,TOTAL_EXPORTED_ACTIVE_ENERGY:_n,VOLTAGE:en});Yr(Dn);var In=2400;var Mn=9600;var ln={rs485orTwi:{0:Mn,2:In,4:Mn},optoport:{0:In,2:In,4:Mn}};({rs485orTwi:Yr(ln.rs485orTwi),optoport:Yr(ln.optoport)});var gn=4;var dn=1;var cn=4;var hn=3;var Ln=48;var mn=50;var pn=3+Ln*2;var Vn=4+mn*2;var yn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};function Fn(r,a,e){var t=1+gn;var E=a;e.forEach(function(r,a){E=Vt(E,1,a+t,Number(!!r))});r.setUint8(E)}function Un(r,a){var e=a.tariff,t=a.energy;if(e!==undefined&&t!==undefined){r.setUint16(e<<14|t&16383)}else{r.setUint16(65535)}}var Hn=function(r,a){var e=a.manufacturer,t=a.type,E=a.year,_=a.serial;r.setBytes(O(e));r.setUint8(t);r.setUint8(E);r.setBytes(O(_))};var Gn=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var Xn=function(r,a){r.setBytes($t(a))};var Wn=function(r,a){var e=a.energyType,t=a.energies;if(e){Fn(r,e,t)}t.forEach(function(a){if(a!==null){r.setInt32(a)}})};var Yn=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var xn=function(r,a){a.forEach(function(a){return Un(r,a)})};var Bn=function(r,a){r.setUint16(mt(yn,a))};var wn=function(r){if(r?.energyType){var a=r.energies.filter(function(r){return r!==null}).length;return hn+dn+a*cn}return hn+cn*gn};var Kn=C;var bn=2;var Zn=function(r){var a=new Lt(bn,true);Bn(a,r);return N(Kn,a.data)};var Qn=S;var jn=function(r){var a=new Lt(wn(r),false);Yn(a,r.date);Wn(a,r);return N(Qn,a.data)};var zn=D;var kn=9;var qn=function(r){var a=new Lt(kn,false);Xn(a,r);return N(zn,a.data)};var $n=I;var Jn=8;var rA=function(r){var a=new Lt(Jn,false);Hn(a,r);return N($n,a.data)};var aA=M;var eA=8;var tA=function(r){var a=new Lt(eA,false);Gn(a,r);return N(aA,a.data)};var EA=l;var _A=function(){return N(EA)};var vA=16;var nA=c;var AA=function(r){var a=vA;if(r?.energyType){var e=r.energies.filter(function(r){return r!==null}).length;a=dn+e*cn}var t=new Lt(a,false);Wn(t,r);return N(nA,t.data)};var TA=y;var RA=function(r){var a=new Lt(r.periods.length>Ln?Vn:pn,false);Yn(a,r.date);xn(a,r.periods);if(r.dstHour){a.setUint8(r.dstHour)}return N(TA,a.data)};var iA=1;var oA=2;({wh:t(t({},iA,{gType:"1.8",rType:"1.8"}),oA,{gType:"2.8"}),vari:t(t({},iA,{gType:"5.8",rType:"3.8"}),oA,{gType:"6.8"}),vare:t(t({},iA,{gType:"8.8",rType:"4.8"}),oA,{gType:"7.8"})});Yr(rt);var OA=1;var sA=2;var fA=3;var NA=4;var uA=17;var PA=18;var CA=19;var SA=20;var DA=21;var IA=22;var MA=23;var lA=32;var gA=33;var dA=34;var cA=35;var hA=36;var LA=37;var mA=38;var pA=39;var VA=40;var yA=49;var FA=50;var UA=51;var HA=52;var GA=53;var XA=54;var WA=55;var YA=56;var xA=57;var BA=64;var wA=65;var KA=66;var bA=67;var ZA=68;var QA=69;var jA=70;var zA=71;var kA=72;var qA=73;var $A=74;var JA=75;var rT=76;var aT=77;var eT=78;var tT=79;var ET=80;var _T=81;var vT=82;var nT=83;var AT=84;var TT=85;var RT=86;var iT=87;var oT=88;var OT=89;var sT=90;var fT=91;var NT=92;var uT=93;var PT=94;var CT=95;var ST=96;var DT=97;var IT=98;var MT=99;var lT=100;var gT=101;var dT=102;var cT=103;var hT=104;var LT=105;var mT=106;var pT=107;var VT=108;var yT=109;var FT=110;var UT=111;var HT=112;var GT=113;var XT=114;var WT=115;var YT=116;var xT=117;var BT=118;var wT=119;var KT=120;var bT=121;var ZT=122;var QT=123;var jT=124;var zT=125;var kT=126;var qT=127;var $T=128;var JT=129;var rR=130;var aR=131;var eR=132;var tR=133;var ER=134;var _R=135;var vR=136;var nR=137;var AR=138;var TR=139;var RR=140;var iR=141;var oR=142;var OR=143;var sR=144;var fR=145;var NR=147;var uR=148;var PR=149;var CR=150;var SR=151;var DR=152;var IR=153;var MR=154;var lR=155;var gR=156;var dR=157;var cR=158;var hR=159;var LR=160;var mR=161;var pR=162;var VR=163;var yR=164;var FR=165;var UR=166;var HR=167;var GR=168;var XR=169;var WR=170;var YR=171;var xR=172;var BR=173;var wR=174;var KR=175;var bR=176;var ZR=177;var QR=178;var jR=179;var zR=186;var kR=224;var qR=225;var $R=226;var JR=227;var ri=228;var ai=229;var ei=230;var ti=231;var Ei=232;var _i=Object.freeze({__proto__:null,ACCESS_ERROR:CA,ACCESS_LOCKED:uA,ACCESS_UNLOCKED:PA,ACCUMULATION_PARAMETERS_EXT_FAULT:ER,ACCUMULATION_PARAMETERS_FAULT:tR,BAD_TEST_EEPROM:JT,BAD_TEST_FRAM:rR,BATTERY_FAULT:LT,BATTERY_OK:hT,BLOCK_TARIFF_FAULT:vR,CALCULATION_PERIOD_FAULT:_R,CALIBRATION_FAULT:pT,CALIBRATION_FLAG_RESET:$T,CALIBRATION_FLAG_SET:qT,CALIBRATION_OK:mT,CALIBRATION_PARAMETERS_FAULT:nR,CASE_CLOSED:DA,CASE_MODULE_CLOSED:lR,CASE_MODULE_OPENED:MR,CASE_OPENED:SA,CASE_TERMINAL_BOX_CLOSED:SR,CASE_TERMINAL_BOX_OPENED:CR,CHANGE_ACCESS_KEY0:lA,CHANGE_ACCESS_KEY1:gA,CHANGE_ACCESS_KEY2:dA,CHANGE_ACCESS_KEY3:cA,CHANGE_COR_TIME:HT,CHANGE_PARAMETERS_LOCAL:hA,CHANGE_PARAMETERS_REMOTE:LA,CHANGE_PARAMETER_CHANNEL1:cR,CHANGE_PARAMETER_CHANNEL2:hR,CHANGE_PARAMETER_CHANNEL3:LR,CHANGE_PARAMETER_CHANNEL4:mR,CHANGE_PARAMETER_CHANNEL5:pR,CHANGE_PARAMETER_CHANNEL6:VR,CHANGE_TARIFF_TABLE:FA,CHANGE_TARIFF_TABLE_2:DR,CHANGE_TARIFF_TABLE_3:IR,CLOCK_FAULT:DT,CLOCK_OK:ST,CMD_RELAY_2_OFF:XT,CMD_RELAY_2_ON:GT,CMD_RELAY_OFF:VA,CMD_RELAY_ON:pA,CMD_SET_DATETIME:mA,COEFFICIENT_TRANSFORMATION_CHANGE:OR,CROSS_ZERO_EN_T1:WT,CROSS_ZERO_EN_T2:YT,CROSS_ZERO_EN_T3:xT,CROSS_ZERO_EN_T4:BT,CROSS_ZERO_EXPORT_EN_T1:yR,CROSS_ZERO_EXPORT_EN_T2:FR,CROSS_ZERO_EXPORT_EN_T3:UR,CROSS_ZERO_EXPORT_EN_T4:HR,CROSS_ZERO_EXPORT_VARE1:xR,CROSS_ZERO_EXPORT_VARE2:BR,CROSS_ZERO_EXPORT_VARE3:wR,CROSS_ZERO_EXPORT_VARE4:KR,CROSS_ZERO_EXPORT_VARI1:GR,CROSS_ZERO_EXPORT_VARI2:XR,CROSS_ZERO_EXPORT_VARI3:WR,CROSS_ZERO_EXPORT_VARI4:YR,CROSS_ZERO_VARE_T1:QT,CROSS_ZERO_VARE_T2:jT,CROSS_ZERO_VARE_T3:zT,CROSS_ZERO_VARE_T4:kT,CROSS_ZERO_VARI_T1:wT,CROSS_ZERO_VARI_T2:KT,CROSS_ZERO_VARI_T3:bT,CROSS_ZERO_VARI_T4:ZT,EM_MAGNETIC_INFLUENCE_OFF:ZR,EM_MAGNETIC_INFLUENCE_ON:bR,ENERGY_REGISTER_OVERFLOW:yA,ENERGY_T1_FAULT:OA,ENERGY_T2_FAULT:sA,ENERGY_T3_FAULT:fA,ENERGY_T4_FAULT:NA,F_MAX_OK:rT,F_MAX_OVER:aT,F_MIN_OK:eT,F_MIN_UNDER:tT,IA_MAX_OK:AT,IA_MAX_OVER:TT,IB_MAX_OK:RT,IB_MAX_OVER:iT,IC_MAX_OK:oT,IC_MAX_OVER:OT,IDIFF_OK:PT,IDIFF_OVER:CT,MAGNETIC_INFLUENCE_OFF:MA,MAGNETIC_INFLUENCE_ON:IA,METER_TROUBLE:PR,OPERATOR_PARAMETERS_EXT_VALUES_FAULT:RR,OPERATOR_PARAMETERS_VALUES_FAULT:TR,O_PARAMETERS_FAULT:UT,O_PARAMETERS_OK:FT,PA_MAX_OK:sT,PA_MAX_OVER:fT,POWER_A_OFF:cT,POWER_A_ON:dT,POWER_B_OFF:gT,POWER_B_ON:lT,POWER_C_OFF:MT,POWER_C_ON:IT,POWER_OVER_RELAY_OFF:dR,PV_MAX_OK:NT,PV_MAX_OVER:uT,P_MAX_A_MINUS_OK:ti,P_MAX_A_MINUS_OVER:Ei,RELAY_HARD_BAD_OFF:sR,RELAY_HARD_BAD_ON:NR,RELAY_HARD_OFF:uR,RELAY_HARD_ON:fR,RELAY_OFF:WA,RELAY_OFF_BAD_SALDO:zR,RELAY_ON:XA,RESET_EM_FLAG:QR,RESET_MAGNETIC_FLAG:jR,RESTART:YA,SALDO_ENERGY_FAULT:iR,SALDO_PARAMETERS_FAULT:eR,SET_DEMAND_EN_10_MIN:JR,SET_DEMAND_EN_15_MIN:ri,SET_DEMAND_EN_1_MIN:kR,SET_DEMAND_EN_30_MIN:ai,SET_DEMAND_EN_3_MIN:qR,SET_DEMAND_EN_5_MIN:$R,SET_DEMAND_EN_60_MIN:ei,SET_NEW_SALDO:aR,SET_SALDO_PARAM:gR,SET_TARIFF_TABLE:UA,SUMMER_TIME:HA,TIME_CORRECT:oR,T_MAX_OK:ET,T_MAX_OVER:_T,T_MIN_OK:vT,T_MIN_UNDER:nT,VA_MAX_OK:BA,VA_MAX_OVER:wA,VA_MIN_OK:KA,VA_MIN_UNDER:bA,VB_MAX_OK:ZA,VB_MAX_OVER:QA,VB_MIN_OK:jA,VB_MIN_UNDER:zA,VC_MAX_OK:kA,VC_MAX_OVER:qA,VC_MIN_OK:$A,VC_MIN_UNDER:JA,V_PARAMETERS_FAULT:yT,V_PARAMETERS_OK:VT,WATCHDOG_RESTART:xA,WINTER_SUMMER_FAULT:AR,WINTER_TIME:GA});Yr(_i);var vi=1;var ni=2;var Ai=3;var Ti=4;var Ri=5;var ii=6;var oi=7;var Oi=8;var si=9;var fi=10;var Ni=11;var ui=12;var Pi=13;var Ci=14;var Si=15;var Di=16;var Ii=17;var Mi=18;var li=19;var gi=20;var di=21;var ci=22;var hi=23;var Li=24;var mi=25;var pi=26;var Vi=27;var yi=28;var Fi=29;var Ui=30;var Hi=31;var Gi=32;var Xi=33;var Wi=34;var Yi=35;var xi=36;var Bi=37;var wi=38;var Ki=39;var bi=40;var Zi=41;var Qi=42;var ji=43;var zi=44;var ki=45;var qi=46;var $i=47;var Ji=48;var ro=49;var ao=50;var eo=51;var to=52;var Eo=53;var _o=54;var vo=55;var no=56;var Ao=57;var To=58;var Ro=59;var io=60;var oo=61;var Oo=62;var so=63;var fo=64;var No=65;var uo=66;var Po=67;var Co=68;var So=69;var Do=70;var Io=71;var Mo=72;var lo=73;var go=74;var co=75;var ho=76;var Lo=77;var mo=78;var po=79;var Vo=80;var yo=81;var Fo=82;var Uo=83;var Ho=84;var Go=85;var Xo=86;var Wo=87;var Yo=88;var xo=89;var Bo=90;var wo=91;var Ko=92;var bo=93;var Zo=94;var Qo=95;var jo=96;var zo=97;var ko=98;var qo=99;var $o=100;var Jo=101;var rO=102;var aO=103;var eO=104;var tO=105;var EO=106;var _O=107;var vO=108;var nO=109;var AO=110;var TO=111;var RO=112;var iO=113;var oO=114;var OO=115;var sO=116;var fO=117;var NO=118;var uO=119;var PO=120;var CO=121;var SO=122;var DO=123;var IO=124;var MO=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:Ti,ACTIVE_ENERGY_T2:Ri,ACTIVE_ENERGY_T3:ii,ACTIVE_ENERGY_T4:oi,ACTIVE_POWER_PHASE_A:ji,ACTIVE_POWER_PHASE_B:zi,ACTIVE_POWER_PHASE_C:ki,APPARENT_POWER_QMINUS_PHASE_A:so,APPARENT_POWER_QMINUS_PHASE_B:fo,APPARENT_POWER_QMINUS_PHASE_C:No,APPARENT_POWER_QPLUS_PHASE_A:Ro,APPARENT_POWER_QPLUS_PHASE_B:io,APPARENT_POWER_QPLUS_PHASE_C:oo,BATTERY_VOLTAGE:bi,CURRENT_BALANCE:NO,CURRENT_IN_NEUTRAL:xi,CURRENT_IN_PHASE_A:Xi,CURRENT_IN_PHASE_B:Wi,CURRENT_IN_PHASE_C:Yi,CURRENT_TRANSFORMATION_RATIO:sO,DATE_MONTH_YEAR:OO,EXPORTED_ACTIVE_ENERGY_T1:li,EXPORTED_ACTIVE_ENERGY_T2:gi,EXPORTED_ACTIVE_ENERGY_T3:di,EXPORTED_ACTIVE_ENERGY_T4:ci,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:Fi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:Ui,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:Hi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:Gi,EXPORTED_REACTIVE_ENERGY_T1:Li,EXPORTED_REACTIVE_ENERGY_T2:mi,EXPORTED_REACTIVE_ENERGY_T3:pi,EXPORTED_REACTIVE_ENERGY_T4:Vi,HOUR_MINUTE_SECOND:oO,MAGNET_INDUCTION:IO,MAX_ACTIVE_POWER_DAY_T1:uo,MAX_ACTIVE_POWER_DAY_T2:Po,MAX_ACTIVE_POWER_DAY_T3:Co,MAX_ACTIVE_POWER_DAY_T4:So,MAX_ACTIVE_POWER_MONTH_T1:Do,MAX_ACTIVE_POWER_MONTH_T2:Io,MAX_ACTIVE_POWER_MONTH_T3:Mo,MAX_ACTIVE_POWER_MONTH_T4:lo,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:Bo,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:wo,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:Ko,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:bo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:Zo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:Qo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:jo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:zo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:EO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:_O,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:vO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:nO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:AO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:TO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:RO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:iO,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:ko,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:qo,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:$o,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:Jo,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:rO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:aO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:eO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:tO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:Fo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:Uo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:Ho,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:Go,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:Xo,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:Wo,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:Yo,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:xo,MAX_REACTIVE_POWER_DAY_T1:go,MAX_REACTIVE_POWER_DAY_T2:co,MAX_REACTIVE_POWER_DAY_T3:ho,MAX_REACTIVE_POWER_DAY_T4:Lo,MAX_REACTIVE_POWER_MONTH_T1:mo,MAX_REACTIVE_POWER_MONTH_T2:po,MAX_REACTIVE_POWER_MONTH_T3:Vo,MAX_REACTIVE_POWER_MONTH_T4:yo,NEGATIVE_REACTIVE_ENERGY_T1:Ci,NEGATIVE_REACTIVE_ENERGY_T2:Si,NEGATIVE_REACTIVE_ENERGY_T3:Di,NEGATIVE_REACTIVE_ENERGY_T4:Ii,OPTOPORT_SPEED:DO,POWER_FACTOR_PHASE_A:vo,POWER_FACTOR_PHASE_B:no,POWER_FACTOR_PHASE_C:Ao,POWER_THRESHOLD_T1:uO,POWER_THRESHOLD_T2:PO,POWER_THRESHOLD_T3:CO,POWER_THRESHOLD_T4:SO,REACTIVE_ENERGY_T1:si,REACTIVE_ENERGY_T2:fi,REACTIVE_ENERGY_T3:Ni,REACTIVE_ENERGY_T4:ui,REACTIVE_POWER_QMINUS_PHASE_A:eo,REACTIVE_POWER_QMINUS_PHASE_B:to,REACTIVE_POWER_QMINUS_PHASE_C:Eo,REACTIVE_POWER_QPLUS_PHASE_A:$i,REACTIVE_POWER_QPLUS_PHASE_B:Ji,REACTIVE_POWER_QPLUS_PHASE_C:ro,SET_ALL_SEGMENT_DISPLAY:vi,SOFTWARE_VERSION:ni,SUPPLY_FREQUENCY:Zi,TOTAL_ACTIVE_ENERGY:Ai,TOTAL_ACTIVE_POWER:Qi,TOTAL_APPARENT_POWER_QMINUS:Oo,TOTAL_APPARENT_POWER_QPLUS:To,TOTAL_EXPORTED_ACTIVE_ENERGY:Mi,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:yi,TOTAL_EXPORTED_REACTIVE_ENERGY:hi,TOTAL_NEGATIVE_REACTIVE_ENERGY:Pi,TOTAL_POWER_FACTOR:_o,TOTAL_REACTIVE_ENERGY:Oi,TOTAL_REACTIVE_POWER_QMINUS:ao,TOTAL_REACTIVE_POWER_QPLUS:qi,VOLTAGE_IN_PHASE_A:Bi,VOLTAGE_IN_PHASE_B:wi,VOLTAGE_IN_PHASE_C:Ki,VOLTAGE_TRANSFORMATION_RATIO:fO});Yr(MO);var lO=2400;var gO=9600;var dO={rs485orTwi:{0:gO,2:lO,4:gO},optoport:{0:gO,2:lO,4:gO}};({rs485orTwi:Yr(dO.rs485orTwi),optoport:Yr(dO.optoport)});var cO=1;var hO=4;function LO(r,a){var e=a.wh,t=a.vari,E=a.vare;var _=1+hO;var v=r;for(var n=0;n<gn;n++){v=Vt(v,1,n+_,Number(!!e[n]&&!!t[n]&&!!E[n]))}return v}var mO=function(r,a){var e=a.energyType,t=a.energies;if(e){var E=LO(e,t);var _=E>>hO;r.setUint8(E);for(var v=0;v<gn;v++){var n=!!pt(_,1,v+1);if(n){r.setInt32(t.wh[v]);r.setInt32(t.vari[v]);r.setInt32(t.vare[v])}}return}for(var A=0;A<gn;A++){r.setInt32(t.wh[A]);r.setInt32(t.vari[A]);r.setInt32(t.vare[A])}};var pO=function(r,a){var e=a.date.year<<1|a.date.month>>3&1;var t=a.date.month<<5&224|a.date.date&31;r.setUint8(e);r.setUint8(t);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var VO=function(r){var a=r.energies,e=a.wh,t=a.vari,E=a.vare;if(r?.energyType){var _=[].concat(T(e),T(t),T(E)).filter(function(r){return r!==null}).length;return hn+cO+_*cn}return hn+cn*gn};var yO=za;var FO=function(r){var a=new Lt(VO(r),false);Yn(a,r.date);mO(a,r);return N(yO,a.data)};var UO=x;var HO=function(r){var a=r.version.split("").map(function(r){return r.charCodeAt(0)});return N(UO,a)};var GO=Fe;var XO=function(r){var a=r.event,e=r.index,t=r.date,E=r.count;return N(GO,[a,e,t.year,t.month,t.date,t.hours,t.minutes,t.seconds,E])};var WO=7;var YO=$e;var xO=65535;var BO=function(r){var a=new Lt(WO+r.count*2,false);pO(a,r);r.demands.forEach(function(r){return a.setUint16(r===null?xO:r)});return N(YO,a.data)};var wO=145;var KO=30;var bO=function(r){if(r[0]!==KO){return{}}var a=r[1];var e=r[3];var t=r.slice(4,a+2);if(e===wO){return t}return null};var ZO;var QO=(ZO={},t(t(t(t(t(t(t(t(t(t(ZO,Kn,Zn),Qn,jn),zn,qn),$n,rA),aA,tA),EA,_A),nA,AA),TA,RA),yO,FO),UO,HO),t(t(ZO,GO,XO),YO,BO));fromBytes=ya(QO,_t);getDataSegment=bO})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
