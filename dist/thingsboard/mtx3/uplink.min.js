// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,t=Array(a);e<a;e++)t[e]=r[e];return t}function a(r){if(Array.isArray(r))return r}function e(a){if(Array.isArray(a))return r(a)}function t(r,a,e){return(a=i(a))in r?Object.defineProperty(r,a,{value:e,enumerable:true,configurable:true,writable:true}):r[a]=e,r}function E(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(r,a){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,E,_,v,n=[],A=true,T=false;try{if(_=(e=e.call(r)).next,0===a){if(Object(e)!==e)return;A=!1}else for(;!(A=(t=_.call(e)).done)&&(n.push(t.value),n.length!==a);A=!0);}catch(r){T=true,E=r}finally{try{if(!A&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw E}}return n}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(r,e){return a(r)||_(r,e)||o(r,e)||v()}function T(r){return e(r)||E(r)||o(r)||n()}function R(r,a){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,a);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function i(r){var a=R(r,"string");return"symbol"==typeof a?a:a+""}function o(a,e){if(a){if("string"==typeof a)return r(a,e);var t={}.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(a,e):void 0}}var O=function(r){var a=r.trim();if(!a){return[]}a=a.replace(/0x/g,"").split(/\s+/).map(function(r){return r.padStart(2,"0")}).join("");if(a.length%2!==0){a="0".concat(a)}var e=a.length/2;var t=new Array(e);for(var E=0;E<e;E++){t[E]=parseInt(a.substring(E*2,E*2+2),16)}return t};var s={separator:" ",prefix:""};var f=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},s,a),t=e.separator,E=e.prefix;return r.map(function(r){return"".concat(E).concat(r.toString(16).padStart(2,"0"))}).join(t)};var N=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(T(a))};var u=function(r,a,e){if(!r){throw new Error("Command name is required.")}if(a&&!Array.isArray(a)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof a,"."))}if(a.length!==e){var t=f(a,{separator:""});throw new Error("Wrong buffer size for ".concat(r,": ").concat(a.length,". Expected: ").concat(e,". Payload: 0x").concat(t,"."))}};var C=1;var P=3;var S=4;var D=5;var I=7;var M=8;var l=9;var d=13;var g=15;var c=16;var h=17;var L=18;var p=19;var V=20;var m=21;var y=22;var U=23;var F=24;var H=25;var G=28;var X=30;var W=31;var Y=40;var x=41;var B=42;var w=44;var K=45;var b=46;var Z=47;var Q=49;var j=50;var z=51;var k=52;var q=53;var $=54;var J=57;var rr=58;var ar=59;var er=60;var tr=61;var Er=62;var _r=65;var vr=70;var nr=74;var Ar=75;var Tr=79;var Rr=80;var ir=82;var or=83;var Or=88;var sr=89;var fr=91;var Nr=92;var ur=93;var Cr=94;var Pr=100;var Sr=109;var Dr=111;var Ir=112;var Mr=113;var lr=114;var dr=115;var gr=116;var cr=117;var hr=118;var Lr=122;var pr=Object.freeze({__proto__:null,activateRatePlan:p,getBv:Ir,getCorrectTime:Er,getCriticalEvent:_r,getCurrentStatusMeter:J,getCurrentValues:d,getDateTime:I,getDayDemand:y,getDayDemandExport:Tr,getDayMaxDemand:Q,getDayMaxDemandExport:Or,getDayMaxDemandPrevious:nr,getDayProfile:ar,getDemand:hr,getDemandParameters:cr,getDeviceId:D,getDeviceType:S,getDisplayParam:Cr,getEnergy:g,getEnergyDayPrevious:P,getEnergyExport:fr,getEnergyExportDayPrevious:Rr,getEventStatus:C,getEvents:z,getEventsCounters:k,getExtendedCurrentValues:rr,getExtendedCurrentValues2:K,getHalfHourDemand:m,getHalfHourDemandExport:or,getHalfHourDemandPrevious:Ar,getHalfHourEnergies:Dr,getMagneticFieldThreshold:Sr,getMeterInfo:Lr,getMonthDemand:U,getMonthDemandExport:ir,getMonthMaxDemand:j,getMonthMaxDemandExport:sr,getOperatorParameters:X,getOperatorParametersExtended3:Mr,getQuality:dr,getRatePlanInfo:w,getSaldo:x,getSaldoParameters:b,getSeasonProfile:er,getSpecialDay:tr,getVersion:Y,prepareRatePlan:V,resetPowerMaxDay:q,resetPowerMaxMonth:$,runTariffPlan:vr,setAccessKey:l,setCorrectDateTime:Nr,setCorrectTime:G,setDateTime:M,setDayProfile:c,setDemandParameters:gr,setDisplayParam:ur,setOperatorParameters:W,setOperatorParametersExtended3:lr,setSaldo:B,setSaldoParameters:Z,setSeasonProfile:h,setSpecialDay:L,setSpecialOperation:Pr,turnRelayOff:H,turnRelayOn:F});var Vr=120;var mr=121;var yr=254;var Ur=255;var Fr=Object.freeze({__proto__:null,activateRatePlan:p,errorDataFrameResponse:Ur,errorResponse:yr,getBv:Ir,getCorrectTime:Er,getCriticalEvent:_r,getCurrentStatusMeter:J,getCurrentValues:d,getDateTime:I,getDayDemand:y,getDayDemandExport:Tr,getDayEnergies:Vr,getDayMaxDemand:Q,getDayMaxDemandExport:Or,getDayMaxDemandPrevious:nr,getDayMaxPower:mr,getDayProfile:ar,getDemand:hr,getDemandParameters:cr,getDeviceId:D,getDeviceType:S,getDisplayParam:Cr,getEnergy:g,getEnergyDayPrevious:P,getEnergyExport:fr,getEnergyExportDayPrevious:Rr,getEventStatus:C,getEvents:z,getEventsCounters:k,getExtendedCurrentValues:rr,getExtendedCurrentValues2:K,getHalfHourDemand:m,getHalfHourDemandExport:or,getHalfHourDemandPrevious:Ar,getHalfHourEnergies:Dr,getMagneticFieldThreshold:Sr,getMeterInfo:Lr,getMonthDemand:U,getMonthDemandExport:ir,getMonthMaxDemand:j,getMonthMaxDemandExport:sr,getOperatorParameters:X,getOperatorParametersExtended3:Mr,getQuality:dr,getRatePlanInfo:w,getSaldo:x,getSaldoParameters:b,getSeasonProfile:er,getSpecialDay:tr,getVersion:Y,prepareRatePlan:V,resetPowerMaxDay:q,resetPowerMaxMonth:$,runTariffPlan:vr,setAccessKey:l,setCorrectDateTime:Nr,setCorrectTime:G,setDateTime:M,setDayProfile:c,setDemandParameters:gr,setDisplayParam:ur,setOperatorParameters:W,setOperatorParametersExtended3:lr,setSaldo:B,setSaldoParameters:Z,setSeasonProfile:h,setSpecialDay:L,setSpecialOperation:Pr,turnRelayOff:H,turnRelayOn:F});var Hr=function(r){var a={};for(var e in r){var t=r[e];a[t]=e}return a};var Gr=Hr(Fr);var Xr=0;var Wr=128;var Yr=129;var xr=130;var Br=131;var wr=132;var Kr=133;var br=134;var Zr=135;var Qr=136;var jr=137;var zr=144;var kr=145;var qr=146;var $r=147;var Jr=149;var ra=151;var aa=152;var ea=153;var ta=154;var Ea=155;var _a=156;var va=159;var na=160;var Aa=240;var Ta=Object.freeze({__proto__:null,ACCESS_DENIED:$r,BAD_ARRAY_INDEX:br,BAD_BLOCK_NUMBER:_a,BAD_DATA_LENGTH:Kr,BAD_MESSAGE:wr,BAD_RATE_PLAN_ID:Qr,BAD_RATE_PLAN_SIZE:jr,BAD_RESPONSE_LENGTH:zr,BAD_SALDO_WRITE:Jr,BLOCKED_METER:ra,CALIBRATION_DISABLED:qr,DECRYPTION_FAILURE:xr,INTERNAL:Aa,INVALID_CORRECTION_INTERVAL:ta,NOT_ALIGNED_DATA:Yr,NOT_PREPARED_RATE_PLAN:Zr,NO_DATA_FOR_DATE:kr,OK:Xr,OUT_OFF_RANGE:va,SET_METER_TYPE_FAILURE:na,TIME_CORRECTION_FAILURE:ea,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:Ea,UNENCRYPTED_COMMAND_DISABLED:aa,UNKNOWN_COMMAND:Wr,UNKNOWN_PROTOCOL:Br});var Ra=Hr(Ta);var ia=0;var oa=1;var Oa=2;var sa=3;var fa=Object.freeze({__proto__:null,READ_ONLY:sa,READ_WRITE:Oa,ROOT:oa,UNENCRYPTED:ia});var Na=Ur;var ua=Gr[Ur];var Ca=1;var Pa=function(r){u(ua,r,Ca);var a=A(r,1),e=a[0];return{errorCode:e,errorName:Ra[e]}};var Sa={encrypt:function(){},decrypt:function(){}};var Da=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=a;r.forEach(function(r){e^=r});return e};var Ia=2;var Ma=2;var la=function(r){var a=A(r,1),e=a[0];if(e===Na){try{var t=Pa(r.slice(Ia));return{id:e,name:ua,headerSize:Ia,bytes:r,parameters:t}}catch{return null}}return null};var da=function(r,a){var e=A(a,1),t=e[0];var E=la(a.slice(Ma-1));var _=la(a.slice(Ma));var v={messageId:t,bytes:a};if(E){return{...v,accessLevel:ia,commands:[E]}}if(_){return{...v,accessLevel:r,commands:[_]}}return null};var ga=3;t(t(t(t({},ia,0),sa,1),Oa,2),oa,3);var ca=2;var ha=2;var La=function(r,a){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var E=t?.aesKey;var _=[];var v=A(e,2),n=v[0],R=v[1];var i=R&ga;var o=da(i,e);var O={messageId:n,accessLevel:i,commands:_,bytes:e,lrc:{received:undefined,calculated:0}};var s=e.slice(ca);var f;if(o){return o}if(E&&i!==ia){s=T(Sa.decrypt(E,s))}var N=s[s.length-1];s=s.slice(0,-1);var u=Da(s);if(i!==ia||N!==0){if(N!==u){f="Mismatch LRC."}}var C=s[0]&ga;var P=s.slice(1);if(i!==C){f="Mismatch access levels."}var S=0;do{var D=P[S];var I=P[S+1];var M=ha+I;var l=P.slice(S+ha,S+M);var d={id:D,name:a[D],headerSize:ha,bytes:P.slice(S,S+M)};if(!D){break}try{if(!r[D]){throw new Error("Unsupported command id: ".concat(D,"!"))}d.parameters=r[D](l,t);_.push(d)}catch(r){_.push({command:d,error:r.message})}S+=M}while(S<=P.length);O.lrc.calculated=u;O.lrc.received=N;if(f){return{message:O,error:f}}return O}};var pa=1;var Va=3;var ma=4;var ya=5;var Ua=7;var Fa=8;var Ha=9;var Ga=13;var Xa=15;var Wa=16;var Ya=17;var xa=18;var Ba=19;var wa=20;var Ka=21;var ba=22;var Za=23;var Qa=24;var ja=25;var za=28;var ka=30;var qa=31;var $a=40;var Ja=41;var re=42;var ae=44;var ee=46;var te=47;var Ee=49;var _e=50;var ve=51;var ne=52;var Ae=53;var Te=54;var Re=57;var ie=58;var oe=59;var Oe=60;var se=61;var fe=62;var Ne=63;var ue=64;var Ce=69;var Pe=70;var Se=71;var De=72;var Ie=73;var Me=78;var le=79;var de=80;var ge=82;var ce=83;var he=84;var Le=85;var pe=86;var Ve=88;var me=89;var ye=90;var Ue=92;var Fe=93;var He=94;var Ge=100;var Xe=109;var We=111;var Ye=112;var xe=113;var Be=114;var we=115;var Ke=116;var be=117;var Ze=118;var Qe=122;var je=Object.freeze({__proto__:null,activateRatePlan:Ba,getBv:Ye,getCorrectTime:fe,getCriticalEvent:pe,getCurrentStatusMeter:Re,getCurrentValues:Ga,getDateTime:Ua,getDayDemand:ba,getDayDemandExport:le,getDayMaxDemand:Ee,getDayMaxDemandExport:Ve,getDayProfile:oe,getDemand:Ze,getDeviceId:ya,getDeviceType:ma,getDisplayParam:He,getEnergy:Xa,getEnergyDayPrevious:Va,getEnergyExport:Me,getEnergyExportDayPrevious:de,getEventStatus:pa,getEvents:ve,getEventsCounters:ne,getExtendedCurrentValues:ie,getHalfHourDemand:Ka,getHalfHourDemandChannel:ye,getHalfHourDemandExport:ce,getHalfHourDemandVare:Ie,getHalfHourDemandVareExport:Le,getHalfHourDemandVari:De,getHalfHourDemandVariExport:he,getHalfHourEnergies:We,getMagneticFieldThreshold:Xe,getMeterInfo:Qe,getMonthDemand:Za,getMonthDemandExport:ge,getMonthMaxDemand:_e,getMonthMaxDemandExport:me,getOperatorParameters:ka,getOperatorParametersExtended:Ne,getOperatorParametersExtended2:Se,getOperatorParametersExtended3:xe,getOperatorParametersExtended4:be,getQuality:we,getRatePlanInfo:ae,getSaldo:Ja,getSaldoParameters:ee,getSeasonProfile:Oe,getSpecialDay:se,getVersion:$a,prepareRatePlan:wa,resetPowerMaxDay:Ae,resetPowerMaxMonth:Te,runTariffPlan:Pe,setAccessKey:Ha,setCorrectDateTime:Ue,setCorrectTime:za,setDateTime:Fa,setDayProfile:Wa,setDisplayParam:Fe,setOperatorParameters:qa,setOperatorParametersExtended:ue,setOperatorParametersExtended2:Ce,setOperatorParametersExtended3:Be,setOperatorParametersExtended4:Ke,setSaldo:re,setSaldoParameters:te,setSeasonProfile:Ya,setSpecialDay:xa,setSpecialOperation:Ge,turnRelayOff:ja,turnRelayOn:Qa});var ze=120;var ke=254;var qe=255;var $e=Object.freeze({__proto__:null,activateRatePlan:Ba,errorDataFrameResponse:qe,errorResponse:ke,getBv:Ye,getCorrectTime:fe,getCriticalEvent:pe,getCurrentStatusMeter:Re,getCurrentValues:Ga,getDateTime:Ua,getDayDemand:ba,getDayDemandExport:le,getDayEnergies:ze,getDayMaxDemand:Ee,getDayMaxDemandExport:Ve,getDayProfile:oe,getDemand:Ze,getDeviceId:ya,getDeviceType:ma,getDisplayParam:He,getEnergy:Xa,getEnergyDayPrevious:Va,getEnergyExport:Me,getEnergyExportDayPrevious:de,getEventStatus:pa,getEvents:ve,getEventsCounters:ne,getExtendedCurrentValues:ie,getHalfHourDemand:Ka,getHalfHourDemandChannel:ye,getHalfHourDemandExport:ce,getHalfHourDemandVare:Ie,getHalfHourDemandVareExport:Le,getHalfHourDemandVari:De,getHalfHourDemandVariExport:he,getHalfHourEnergies:We,getMagneticFieldThreshold:Xe,getMeterInfo:Qe,getMonthDemand:Za,getMonthDemandExport:ge,getMonthMaxDemand:_e,getMonthMaxDemandExport:me,getOperatorParameters:ka,getOperatorParametersExtended:Ne,getOperatorParametersExtended2:Se,getOperatorParametersExtended3:xe,getOperatorParametersExtended4:be,getQuality:we,getRatePlanInfo:ae,getSaldo:Ja,getSaldoParameters:ee,getSeasonProfile:Oe,getSpecialDay:se,getVersion:$a,prepareRatePlan:wa,resetPowerMaxDay:Ae,resetPowerMaxMonth:Te,runTariffPlan:Pe,setAccessKey:Ha,setCorrectDateTime:Ue,setCorrectTime:za,setDateTime:Fa,setDayProfile:Wa,setDisplayParam:Fe,setOperatorParameters:qa,setOperatorParametersExtended:ue,setOperatorParametersExtended2:Ce,setOperatorParametersExtended3:Be,setOperatorParametersExtended4:Ke,setSaldo:re,setSaldoParameters:te,setSeasonProfile:Ya,setSpecialDay:xa,setSpecialOperation:Ge,turnRelayOff:ja,turnRelayOn:Qa});var Je=Hr($e);var rt=1;var at=2;var et=3;var tt=4;var Et=Math.log,_t=Math.pow,vt=Math.LN2;var nt=function(r,a,e,t,E){var _,v,n=E*8-t-1,A=(1<<n)-1,T=A>>1,R=-7,i=e?E-1:0,o=e?-1:1,O=r[a+i];i+=o;_=O&(1<<-R)-1;O>>=-R;R+=n;for(;R>0;_=_*256+r[a+i],i+=o,R-=8);v=_&(1<<-R)-1;_>>=-R;R+=t;for(;R>0;v=v*256+r[a+i],i+=o,R-=8);if(_===0){_=1-T}else if(_===A){return v?NaN:O?-Infinity:Infinity}else{v=v+_t(2,t);_=_-T}return(O?-1:1)*v*_t(2,_-t)};var At=function(r,a,e,t,E,_){var v,n,A,T=_*8-E-1,R=(1<<T)-1,i=R>>1,o=E===23?_t(2,-24)-_t(2,-77):0,O=t?0:_-1,s=t?1:-1,f=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){n=e!==e?1:0;v=R}else{v=Et(e)/vt|0;if(e*(A=_t(2,-v))<1){v--;A*=2}if(v+i>=1){e+=o/A}else{e+=o*_t(2,1-i)}if(e*A>=2){v++;A/=2}if(v+i>=R){n=0;v=R}else if(v+i>=1){n=(e*A-1)*_t(2,E);v=v+i}else{n=e*_t(2,i-1)*_t(2,E);v=0}}for(;E>=8;r[a+O]=n&255,O+=s,n/=256,E-=8);v=v<<E|n;T+=E;for(;T>0;r[a+O]=v&255,O+=s,v/=256,T-=8);r[a+O-s]|=f*128};var Tt=[1,0];var Rt=[2,1,0];var it=[3,2,1,0];var ot=[0,1];var Ot=[0,1,2];var st=[0,1,2,3];var ft=function(r,a){return r[a]};var Nt=function(r,a,e){var t=e?ot:Tt;var E=r[a+t[0]];var _=r[a+t[1]]<<8;return E|_};var ut=function(r,a,e){var t=e?Ot:Rt;var E=r[a+t[0]];var _=r[a+t[1]]<<8;var v=r[a+t[2]]<<16;return E|_|v};var Ct=function(r,a,e){var t=e?st:it;var E=r[a+t[3]]*16777216;var _=r[a+t[2]]*65536;var v=r[a+t[1]]*256;var n=r[a+t[0]];return E+_+v+n};var Pt=function(r,a,e){r[a]=e&255};var St=function(r,a,e,t){var E=t?ot:Tt;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255};var Dt=function(r,a,e,t){var E=t?Ot:Rt;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255};var It=function(r,a,e,t){var E=t?st:it;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255;r[a+E[3]]=e>>>24&255};function Mt(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=a}Mt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){Pt(this.data,this.offset,r<0?r|256:r);this.offset+=rt},getInt8:function(){var r=ft(this.data,this.offset);this.offset+=rt;return r&128?r^-256:r},setUint8:function(r){Pt(this.data,this.offset,r);this.offset+=rt},getUint8:function(){var r=ft(this.data,this.offset);this.offset+=rt;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;St(this.data,this.offset,r<0?r|65536:r,a);this.offset+=at},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Nt(this.data,this.offset,r);this.offset+=at;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;St(this.data,this.offset,r,a);this.offset+=at},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Nt(this.data,this.offset,r);this.offset+=at;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Dt(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=et},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ut(this.data,this.offset,r);this.offset+=et;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Dt(this.data,this.offset,r,a);this.offset+=et},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ut(this.data,this.offset,r);this.offset+=et;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;It(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=tt},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ct(this.data,this.offset,r);this.offset+=tt;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;It(this.data,this.offset,r,a);this.offset+=tt},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ct(this.data,this.offset,r);this.offset+=tt;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;At(this.data,this.offset,r,a,23,4);this.offset+=tt},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=nt(this.data,this.offset,r,23,4);this.offset+=tt;return a},setString:function(r){this.setUint8(r.length);for(var a=0;a<r.length;++a){this.setUint8(r.charCodeAt(a))}},getString:function(){var r=this.getUint8();var a=this.offset+r;var e=[];while(this.offset<a){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[a,r.length].concat(T(r)));this.data=e;this.offset=a+r.length}};Object.defineProperties(Mt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var lt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=0;for(var t in a){if(t in r&&a[t]){e|=r[t]}}return e};var dt=function(r,a,e){return(1<<a)-1&r>>e-1};var gt=function(r,a,e,t){var E=(1<<a)-1<<e-1;var _=t;var v=r;v&=~E;_<<=e-1;v|=_;return v};var ct=[".","1","3","R","M"];var ht=[".","A","G","R","T","D"];var Lt=[".","0","1","2","3","4","5"];var pt=[".","A","B","C","D","E","F"];var Vt=[".","A","B","C","D","E","F","H","K","G"];var mt=[".","1","2","3","4"];var yt=[".","L","M","Z","K"];var Ut=[".","0","1","2","3","4","5","6","7","8","9"];var Ft=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Ht=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Gt=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Xt=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var Wt={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Yt={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var xt=function(r){return lt(Yt,{...r,typeMeterG:!r.typeMeterG})};var Bt=function(r){var a=[];r.forEach(function(r){return a.push(r.toString(16))});if(r.length&1){a.push("0")}return O(a.join(""))};var wt=function(r,a,e){var t=[];if(r.length<11){throw new Error("Wrong format")}t.push(ct.indexOf(r[0]));t.push(ht.indexOf(r[1]));t.push(Lt.indexOf(r[2]));t.push(Lt.indexOf(r[3]));if(r[4]!=="."){throw new Error("Wrong format")}t.push(pt.indexOf(r[5]));t.push(Vt.indexOf(r[6]));if(r[7]!=="."){throw new Error("Wrong format")}t.push(mt.indexOf(r[8]));t.push(yt.indexOf(r[9]));t.push(e??0);t.push(Ut.indexOf(r[10]));if(r[11]!=="-"){throw new Error("Wrong format")}var E=r.length>13?r.length-1:r.length;for(var _=12;_<E;_++){t.push(Ft.indexOf(r[_]))}if(E<r.length){t.push(Gt.indexOf(r[E]))}var v=Bt(t);var n=new Array(9).fill(0);n[0]=0;for(var A=0;A<v.length;A++){n[A+(v.length<8?1:0)]=v[A]}return n};var Kt=function(r){if(r.length<3){throw new Error("Wrong format")}var a=[];a.push(ct.indexOf(r[0]));a.push(ht.indexOf(r[1]));for(var e=3;e<r.length;e++){a.push(Ht.indexOf(r[e]))}var t=Bt(a);if(t.length===8){return t}if(t.length>8){throw new Error("Wrong format")}var E=new Array(8).fill(0);for(var _=0;_<t.length;_++){E[_]=t[_]}return E};var bt=function(r){if(r.length<1){throw new Error("Wrong format")}var a=[];a.push(ct.indexOf(r[0]));for(var e=1;e<r.length;e++){a.push(Xt.indexOf(r[e]))}var t=Bt(a);var E=new Array(8).fill(0);for(var _=0;_<t.length&&_<8;_++){E[_]=t[_]}return E};var Zt=function(r,a){var e=r.type,t=r.revision,E=r.descriptor;if(!e.startsWith("MTX ")){throw new Error("Wrong format")}var _;var v=e.substring(4);var n=e[4];if(n==="1"||n==="3"){_=wt(v,a,t)}else{_=n==="M"?bt(v):Kt(v)}if(E?.meterType){_[8]=E.meterType==="mtx1"?lt(Wt,E):xt(E)}else{_[8]=0}return _};var Qt=80;var jt=81;var zt=82;var kt=83;var qt=84;var $t=85;var Jt=86;var rE=87;var aE=88;var eE=89;var tE=90;var EE=91;var _E=255;var vE=Object.freeze({__proto__:null,DATA_REQUEST:Qt,DATA_RESPONSE:jt,FRAGMENT_REQUEST:tE,FRAGMENT_RESPONSE:EE,IDENT_REQUEST:zt,IDENT_RESPONSE:kt,INVALID:_E,L2_CHECK_ADDRESS_REQUEST:Jt,L2_CHECK_ADDRESS_RESPONSE:rE,L2_RM_ADDRESS_REQUEST:aE,L2_RM_ADDRESS_RESPONSE:eE,L2_SET_ADDRESS_REQUEST:qt,L2_SET_ADDRESS_RESPONSE:$t});Hr(vE);Hr(fa);var nE=0;var AE=1;var TE=2;var RE=3;var iE=4;var oE=5;var OE=6;var sE=7;var fE=8;var NE=9;var uE=10;var CE=11;var PE=12;var SE=13;var DE=14;var IE=Object.freeze({__proto__:null,CASE_MODULE_OPEN:uE,CASE_OPEN:nE,CASE_TERMINAL_OPEN:NE,DEVICE_FAILURE:fE,ERROR_ACCESS:oE,MAGNETIC_ON:AE,PARAMETERS_UPDATE_LOCAL:RE,PARAMETERS_UPDATE_REMOTE:TE,PROTECTION_RESET_EM:SE,PROTECTION_RESET_MAGNETIC:DE,RESTART:iE,TARIFF_TABLE_GET:PE,TARIFF_TABLE_SET:CE,TIME_CORRECT:sE,TIME_SET:OE});Hr(IE);Hr(pr);var ME=1;var lE=2;var dE=3;var gE=16;var cE=17;var hE=18;var LE=19;var pE=20;var VE=21;var mE=32;var yE=33;var UE=34;var FE=35;var HE=36;var GE=37;var XE=38;var WE=39;var YE=40;var xE=41;var BE=49;var wE=50;var KE=51;var bE=52;var ZE=53;var QE=54;var jE=55;var zE=56;var kE=57;var qE=58;var $E=59;var JE=64;var r_=65;var a_=66;var e_=67;var t_=68;var E_=69;var __=70;var v_=71;var n_=72;var A_=73;var T_=74;var R_=75;var i_=76;var o_=77;var O_=78;var s_=79;var f_=80;var N_=81;var u_=82;var C_=83;var P_=84;var S_=85;var D_=86;var I_=87;var M_=88;var l_=89;var d_=96;var g_=97;var c_=98;var h_=99;var L_=100;var p_=101;var V_=102;var m_=103;var y_=104;var U_=105;var F_=112;var H_=113;var G_=114;var X_=115;var W_=116;var Y_=117;var x_=118;var B_=119;var w_=120;var K_=121;var b_=122;var Z_=123;var Q_=124;var j_=125;var z_=144;var k_=145;var q_=147;var $_=148;var J_=152;var rv=156;var av=157;var ev=158;var tv=159;var Ev=160;var _v=161;var vv=162;var nv=176;var Av=177;var Tv=178;var Rv=179;var iv=180;var ov=181;var Ov=182;var sv=183;var fv=185;var Nv=186;var uv=224;var Cv=225;var Pv=226;var Sv=227;var Dv=228;var Iv=229;var Mv=230;var lv=231;var dv=232;var gv=Object.freeze({__proto__:null,ACCESS_ERROR:cE,ACCESS_LOCKED:gE,ACC_PARAMETERS_EXT_FAULT:X_,ACC_PARAMETERS_FAULT:G_,BAD_TEST_EEPROM:y_,BAD_TEST_FRAM:U_,BATTERY_FAULT:C_,BATTERY_OK:u_,BIPOLAR_POWER_FAULT:iv,BIPOLAR_POWER_OK:ov,BLOCK_TARIFF_FAULT:Y_,CALC_PERIOD_FAULT:W_,CALIBRATION_FAULT:S_,CALIBRATION_FLAG_RESET:m_,CALIBRATION_FLAG_SET:V_,CALIBRATION_OK:P_,CALIBRATION_PARAMETERS_FAULT:x_,CASE_CLOSED:LE,CASE_MODULE_CLOSED:j_,CASE_MODULE_OPENED:Q_,CASE_OPENED:hE,CASE_TERMINAL_BOX_CLOSED:Z_,CASE_TERMINAL_BOX_OPENED:b_,CHANGE_ACCESS_KEY0:mE,CHANGE_ACCESS_KEY1:yE,CHANGE_ACCESS_KEY2:UE,CHANGE_ACCESS_KEY3:FE,CHANGE_COR_TIME:xE,CHANGE_PARAMETERS_CHANNEL:fv,CHANGE_PARAMETERS_LOCAL:HE,CHANGE_PARAMETERS_REMOTE:GE,CHANGE_TARIFF_TABLE:wE,CHANGE_TARIFF_TABLE_2:J_,CLOCK_FAULT:I_,CLOCK_OK:D_,CMD_RELAY_2_OFF:g_,CMD_RELAY_2_ON:d_,CMD_RELAY_OFF:YE,CMD_RELAY_ON:WE,CMD_SET_DATETIME:XE,COSF_MIN_OVER:$E,COSF_OK:qE,CROSS_ZERO_EN_T1:c_,CROSS_ZERO_EN_T2:h_,CROSS_ZERO_EN_T3:L_,CROSS_ZERO_EN_T4:p_,CROSS_ZERO_EXPORT_EN_T1:ev,CROSS_ZERO_EXPORT_EN_T2:tv,CROSS_ZERO_EXPORT_EN_T3:Ev,CROSS_ZERO_EXPORT_EN_T4:_v,CURRENT_UNEQUAL_FAULT:Tv,CURRENT_UNEQUAL_OK:Rv,EM_MAGNETIC_INFLUENCE_OFF:Av,EM_MAGNETIC_INFLUENCE_ON:nv,ENERGY_REGISTER_FAULT:ME,ENERGY_REGISTER_OVERFLOW:BE,F_MAX_OK:n_,F_MAX_OVER:A_,F_MIN_OK:T_,F_MIN_OVER:R_,I_MAX_OK:i_,I_MAX_OVER:o_,MAGNETIC_INFLUENCE_OFF:VE,MAGNETIC_INFLUENCE_ON:pE,OPERATOR_PARAMETERS_VALUES_FAULT:dE,POWER_A_OFF:M_,POWER_A_ON:l_,POWER_OVER_RELAY_OFF:av,POWER_SALDO_OK:f_,POWER_SALDO_OVER:N_,P_MAX_A_MINUS_OK:lv,P_MAX_A_MINUS_OVER:dv,P_MAX_OK:O_,P_MAX_OVER:s_,RELAY_HARD_BAD_OFF:z_,RELAY_HARD_BAD_ON:q_,RELAY_HARD_OFF:$_,RELAY_HARD_ON:k_,RELAY_OFF:jE,RELAY_OFF_BAD_SALDO:Nv,RELAY_ON:QE,RESET_EM_FLAG:Ov,RESET_MAGNET_FLAG:sv,RESTART:zE,SALDO_EN_FAULT:w_,SALDO_PARAMETERS_FAULT:H_,SET_DEMAND_EN_10MIN:Sv,SET_DEMAND_EN_15MIN:Dv,SET_DEMAND_EN_1MIN:uv,SET_DEMAND_EN_30MIN:Iv,SET_DEMAND_EN_3MIN:Cv,SET_DEMAND_EN_5MIN:Pv,SET_DEMAND_EN_60MIN:Mv,SET_NEW_SALDO:F_,SET_SALDO_PARAM:rv,SET_TARIFF_TABLE:KE,SUMMER_TIME:bE,TIME_CORRECT:K_,TIME_CORRECT_NEW:vv,T_MAX_OK:t_,T_MAX_OVER:E_,T_MIN_OK:__,T_MIN_OVER:v_,VENDOR_PAR_FAULT:lE,V_MAX_OK:JE,V_MAX_OVER:r_,V_MIN_OK:a_,V_MIN_OVER:e_,WATCHDOG_RESTART:kE,WINTER_SUMMER_FAULT:B_,WINTER_TIME:ZE});Hr(gv);var cv=1;var hv=2;var Lv=3;var pv=4;var Vv=5;var mv=6;var yv=7;var Uv=8;var Fv=9;var Hv=10;var Gv=11;var Xv=12;var Wv=13;var Yv=14;var xv=15;var Bv=16;var wv=17;var Kv=18;var bv=19;var Zv=20;var Qv=21;var jv=22;var zv=23;var kv=24;var qv=25;var $v=26;var Jv=28;var rn=30;var an=31;var en=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:pv,ACTIVE_ENERGY_T2:Vv,ACTIVE_ENERGY_T3:mv,ACTIVE_ENERGY_T4:yv,ACTIVE_POWER_IN_NEUTRAL:Fv,ACTIVE_POWER_PER_PHASE:Uv,BATTERY_VOLTAGE:jv,CURRENT_BALANCE:rn,CURRENT_IN_NEUTRAL:Gv,CURRENT_IN_PHASE:Hv,DATE_MONTH_YEAR:Yv,EXPORTED_ACTIVE_ENERGY_T1:Bv,EXPORTED_ACTIVE_ENERGY_T2:wv,EXPORTED_ACTIVE_ENERGY_T3:Kv,EXPORTED_ACTIVE_ENERGY_T4:bv,HOUR_MINUTE_SECOND:Wv,MAGNET_INDUCTION:Jv,OPTOPORT_SPEED:an,POWER_FACTOR_PHASE_A:Zv,POWER_FACTOR_PHASE_B:Qv,POWER_THRESHOLD_T1:zv,POWER_THRESHOLD_T2:kv,POWER_THRESHOLD_T3:qv,POWER_THRESHOLD_T4:$v,SET_ALL_SEGMENT_DISPLAY:cv,SOFTWARE_VERSION:hv,TOTAL_ACTIVE_ENERGY:Lv,TOTAL_EXPORTED_ACTIVE_ENERGY:xv,VOLTAGE:Xv});Hr(en);var tn=2400;var En=9600;var _n={rs485orTwi:{0:En,2:tn,4:En},optoport:{0:tn,2:tn,4:En}};({rs485orTwi:Hr(_n.rs485orTwi),optoport:Hr(_n.optoport)});var vn=4;var nn=1;var An=4;var Tn=3;var Rn=48;var on=50;var On=3+Rn*2;var sn=4+on*2;var fn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};function Nn(r,a,e){var t=1+vn;var E=a;e.forEach(function(r,a){E=gt(E,1,a+t,Number(!!r))});r.setUint8(E)}function un(r,a){var e=a.tariff,t=a.energy;if(e!==undefined&&t!==undefined){r.setUint16(e<<14|t&16383)}else{r.setUint16(65535)}}var Cn=function(r,a){var e=a.manufacturer,t=a.type,E=a.year,_=a.serial;r.setBytes(O(e));r.setUint8(t);r.setUint8(E);r.setBytes(O(_))};var Pn=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var Sn=function(r,a){r.setBytes(Zt(a))};var Dn=function(r,a){var e=a.energyType,t=a.energies;if(e){Nn(r,e,t)}t.forEach(function(a){if(a!==null){r.setInt32(a)}})};var In=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var Mn=function(r,a){a.forEach(function(a){return un(r,a)})};var ln=function(r,a){r.setUint16(lt(fn,a))};var dn=function(r){if(r?.energyType){var a=r.energies.filter(function(r){return r!==null}).length;return Tn+nn+a*An}return Tn+An*vn};var gn=C;var cn=2;var hn=function(r){var a=new Mt(cn,true);ln(a,r);return N(gn,a.data)};var Ln=P;var pn=function(r){var a=new Mt(dn(r),false);In(a,r.date);Dn(a,r);return N(Ln,a.data)};var Vn=S;var mn=9;var yn=function(r){var a=new Mt(mn,false);Sn(a,r);return N(Vn,a.data)};var Un=D;var Fn=8;var Hn=function(r){var a=new Mt(Fn,false);Cn(a,r);return N(Un,a.data)};var Gn=I;var Xn=8;var Wn=function(r){var a=new Mt(Xn,false);Pn(a,r);return N(Gn,a.data)};var Yn=M;var xn=function(){return N(Yn)};var Bn=16;var wn=g;var Kn=function(r){var a=Bn;if(r?.energyType){var e=r.energies.filter(function(r){return r!==null}).length;a=nn+e*An}var t=new Mt(a,false);Dn(t,r);return N(wn,t.data)};var bn=m;var Zn=function(r){var a=new Mt(r.periods.length>Rn?sn:On,false);In(a,r.date);Mn(a,r.periods);if(r.dstHour){a.setUint8(r.dstHour)}return N(bn,a.data)};var Qn=1;var jn=2;({wh:t(t({},Qn,{gType:"1.8",rType:"1.8"}),jn,{gType:"2.8"}),vari:t(t({},Qn,{gType:"5.8",rType:"3.8"}),jn,{gType:"6.8"}),vare:t(t({},Qn,{gType:"8.8",rType:"4.8"}),jn,{gType:"7.8"})});Hr(je);var zn=1;var kn=2;var qn=3;var $n=4;var Jn=17;var rA=18;var aA=19;var eA=20;var tA=21;var EA=22;var _A=23;var vA=32;var nA=33;var AA=34;var TA=35;var RA=36;var iA=37;var oA=38;var OA=39;var sA=40;var fA=49;var NA=50;var uA=51;var CA=52;var PA=53;var SA=54;var DA=55;var IA=56;var MA=57;var lA=64;var dA=65;var gA=66;var cA=67;var hA=68;var LA=69;var pA=70;var VA=71;var mA=72;var yA=73;var UA=74;var FA=75;var HA=76;var GA=77;var XA=78;var WA=79;var YA=80;var xA=81;var BA=82;var wA=83;var KA=84;var bA=85;var ZA=86;var QA=87;var jA=88;var zA=89;var kA=90;var qA=91;var $A=92;var JA=93;var rT=94;var aT=95;var eT=96;var tT=97;var ET=98;var _T=99;var vT=100;var nT=101;var AT=102;var TT=103;var RT=104;var iT=105;var oT=106;var OT=107;var sT=108;var fT=109;var NT=110;var uT=111;var CT=112;var PT=113;var ST=114;var DT=115;var IT=116;var MT=117;var lT=118;var dT=119;var gT=120;var cT=121;var hT=122;var LT=123;var pT=124;var VT=125;var mT=126;var yT=127;var UT=128;var FT=129;var HT=130;var GT=131;var XT=132;var WT=133;var YT=134;var xT=135;var BT=136;var wT=137;var KT=138;var bT=139;var ZT=140;var QT=141;var jT=142;var zT=143;var kT=144;var qT=145;var $T=147;var JT=148;var rR=149;var aR=150;var eR=151;var tR=152;var ER=153;var _R=154;var vR=155;var nR=156;var AR=157;var TR=158;var RR=159;var iR=160;var oR=161;var OR=162;var sR=163;var fR=164;var NR=165;var uR=166;var CR=167;var PR=168;var SR=169;var DR=170;var IR=171;var MR=172;var lR=173;var dR=174;var gR=175;var cR=176;var hR=177;var LR=178;var pR=179;var VR=186;var mR=224;var yR=225;var UR=226;var FR=227;var HR=228;var GR=229;var XR=230;var WR=231;var YR=232;var xR=Object.freeze({__proto__:null,ACCESS_ERROR:aA,ACCESS_LOCKED:Jn,ACCESS_UNLOCKED:rA,ACCUMULATION_PARAMETERS_EXT_FAULT:YT,ACCUMULATION_PARAMETERS_FAULT:WT,BAD_TEST_EEPROM:FT,BAD_TEST_FRAM:HT,BATTERY_FAULT:iT,BATTERY_OK:RT,BLOCK_TARIFF_FAULT:BT,CALCULATION_PERIOD_FAULT:xT,CALIBRATION_FAULT:OT,CALIBRATION_FLAG_RESET:UT,CALIBRATION_FLAG_SET:yT,CALIBRATION_OK:oT,CALIBRATION_PARAMETERS_FAULT:wT,CASE_CLOSED:tA,CASE_MODULE_CLOSED:vR,CASE_MODULE_OPENED:_R,CASE_OPENED:eA,CASE_TERMINAL_BOX_CLOSED:eR,CASE_TERMINAL_BOX_OPENED:aR,CHANGE_ACCESS_KEY0:vA,CHANGE_ACCESS_KEY1:nA,CHANGE_ACCESS_KEY2:AA,CHANGE_ACCESS_KEY3:TA,CHANGE_COR_TIME:CT,CHANGE_PARAMETERS_LOCAL:RA,CHANGE_PARAMETERS_REMOTE:iA,CHANGE_PARAMETER_CHANNEL1:TR,CHANGE_PARAMETER_CHANNEL2:RR,CHANGE_PARAMETER_CHANNEL3:iR,CHANGE_PARAMETER_CHANNEL4:oR,CHANGE_PARAMETER_CHANNEL5:OR,CHANGE_PARAMETER_CHANNEL6:sR,CHANGE_TARIFF_TABLE:NA,CHANGE_TARIFF_TABLE_2:tR,CHANGE_TARIFF_TABLE_3:ER,CLOCK_FAULT:tT,CLOCK_OK:eT,CMD_RELAY_2_OFF:ST,CMD_RELAY_2_ON:PT,CMD_RELAY_OFF:sA,CMD_RELAY_ON:OA,CMD_SET_DATETIME:oA,COEFFICIENT_TRANSFORMATION_CHANGE:zT,CROSS_ZERO_EN_T1:DT,CROSS_ZERO_EN_T2:IT,CROSS_ZERO_EN_T3:MT,CROSS_ZERO_EN_T4:lT,CROSS_ZERO_EXPORT_EN_T1:fR,CROSS_ZERO_EXPORT_EN_T2:NR,CROSS_ZERO_EXPORT_EN_T3:uR,CROSS_ZERO_EXPORT_EN_T4:CR,CROSS_ZERO_EXPORT_VARE1:MR,CROSS_ZERO_EXPORT_VARE2:lR,CROSS_ZERO_EXPORT_VARE3:dR,CROSS_ZERO_EXPORT_VARE4:gR,CROSS_ZERO_EXPORT_VARI1:PR,CROSS_ZERO_EXPORT_VARI2:SR,CROSS_ZERO_EXPORT_VARI3:DR,CROSS_ZERO_EXPORT_VARI4:IR,CROSS_ZERO_VARE_T1:LT,CROSS_ZERO_VARE_T2:pT,CROSS_ZERO_VARE_T3:VT,CROSS_ZERO_VARE_T4:mT,CROSS_ZERO_VARI_T1:dT,CROSS_ZERO_VARI_T2:gT,CROSS_ZERO_VARI_T3:cT,CROSS_ZERO_VARI_T4:hT,EM_MAGNETIC_INFLUENCE_OFF:hR,EM_MAGNETIC_INFLUENCE_ON:cR,ENERGY_REGISTER_OVERFLOW:fA,ENERGY_T1_FAULT:zn,ENERGY_T2_FAULT:kn,ENERGY_T3_FAULT:qn,ENERGY_T4_FAULT:$n,F_MAX_OK:HA,F_MAX_OVER:GA,F_MIN_OK:XA,F_MIN_UNDER:WA,IA_MAX_OK:KA,IA_MAX_OVER:bA,IB_MAX_OK:ZA,IB_MAX_OVER:QA,IC_MAX_OK:jA,IC_MAX_OVER:zA,IDIFF_OK:rT,IDIFF_OVER:aT,MAGNETIC_INFLUENCE_OFF:_A,MAGNETIC_INFLUENCE_ON:EA,METER_TROUBLE:rR,OPERATOR_PARAMETERS_EXT_VALUES_FAULT:ZT,OPERATOR_PARAMETERS_VALUES_FAULT:bT,O_PARAMETERS_FAULT:uT,O_PARAMETERS_OK:NT,PA_MAX_OK:kA,PA_MAX_OVER:qA,POWER_A_OFF:TT,POWER_A_ON:AT,POWER_B_OFF:nT,POWER_B_ON:vT,POWER_C_OFF:_T,POWER_C_ON:ET,POWER_OVER_RELAY_OFF:AR,PV_MAX_OK:$A,PV_MAX_OVER:JA,P_MAX_A_MINUS_OK:WR,P_MAX_A_MINUS_OVER:YR,RELAY_HARD_BAD_OFF:kT,RELAY_HARD_BAD_ON:$T,RELAY_HARD_OFF:JT,RELAY_HARD_ON:qT,RELAY_OFF:DA,RELAY_OFF_BAD_SALDO:VR,RELAY_ON:SA,RESET_EM_FLAG:LR,RESET_MAGNETIC_FLAG:pR,RESTART:IA,SALDO_ENERGY_FAULT:QT,SALDO_PARAMETERS_FAULT:XT,SET_DEMAND_EN_10_MIN:FR,SET_DEMAND_EN_15_MIN:HR,SET_DEMAND_EN_1_MIN:mR,SET_DEMAND_EN_30_MIN:GR,SET_DEMAND_EN_3_MIN:yR,SET_DEMAND_EN_5_MIN:UR,SET_DEMAND_EN_60_MIN:XR,SET_NEW_SALDO:GT,SET_SALDO_PARAM:nR,SET_TARIFF_TABLE:uA,SUMMER_TIME:CA,TIME_CORRECT:jT,T_MAX_OK:YA,T_MAX_OVER:xA,T_MIN_OK:BA,T_MIN_UNDER:wA,VA_MAX_OK:lA,VA_MAX_OVER:dA,VA_MIN_OK:gA,VA_MIN_UNDER:cA,VB_MAX_OK:hA,VB_MAX_OVER:LA,VB_MIN_OK:pA,VB_MIN_UNDER:VA,VC_MAX_OK:mA,VC_MAX_OVER:yA,VC_MIN_OK:UA,VC_MIN_UNDER:FA,V_PARAMETERS_FAULT:fT,V_PARAMETERS_OK:sT,WATCHDOG_RESTART:MA,WINTER_SUMMER_FAULT:KT,WINTER_TIME:PA});Hr(xR);var BR=1;var wR=2;var KR=3;var bR=4;var ZR=5;var QR=6;var jR=7;var zR=8;var kR=9;var qR=10;var $R=11;var JR=12;var ri=13;var ai=14;var ei=15;var ti=16;var Ei=17;var _i=18;var vi=19;var ni=20;var Ai=21;var Ti=22;var Ri=23;var ii=24;var oi=25;var Oi=26;var si=27;var fi=28;var Ni=29;var ui=30;var Ci=31;var Pi=32;var Si=33;var Di=34;var Ii=35;var Mi=36;var li=37;var di=38;var gi=39;var ci=40;var hi=41;var Li=42;var pi=43;var Vi=44;var mi=45;var yi=46;var Ui=47;var Fi=48;var Hi=49;var Gi=50;var Xi=51;var Wi=52;var Yi=53;var xi=54;var Bi=55;var wi=56;var Ki=57;var bi=58;var Zi=59;var Qi=60;var ji=61;var zi=62;var ki=63;var qi=64;var $i=65;var Ji=66;var ro=67;var ao=68;var eo=69;var to=70;var Eo=71;var _o=72;var vo=73;var no=74;var Ao=75;var To=76;var Ro=77;var io=78;var oo=79;var Oo=80;var so=81;var fo=82;var No=83;var uo=84;var Co=85;var Po=86;var So=87;var Do=88;var Io=89;var Mo=90;var lo=91;var go=92;var co=93;var ho=94;var Lo=95;var po=96;var Vo=97;var mo=98;var yo=99;var Uo=100;var Fo=101;var Ho=102;var Go=103;var Xo=104;var Wo=105;var Yo=106;var xo=107;var Bo=108;var wo=109;var Ko=110;var bo=111;var Zo=112;var Qo=113;var jo=114;var zo=115;var ko=116;var qo=117;var $o=118;var Jo=119;var rO=120;var aO=121;var eO=122;var tO=123;var EO=124;var _O=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:bR,ACTIVE_ENERGY_T2:ZR,ACTIVE_ENERGY_T3:QR,ACTIVE_ENERGY_T4:jR,ACTIVE_POWER_PHASE_A:pi,ACTIVE_POWER_PHASE_B:Vi,ACTIVE_POWER_PHASE_C:mi,APPARENT_POWER_QMINUS_PHASE_A:ki,APPARENT_POWER_QMINUS_PHASE_B:qi,APPARENT_POWER_QMINUS_PHASE_C:$i,APPARENT_POWER_QPLUS_PHASE_A:Zi,APPARENT_POWER_QPLUS_PHASE_B:Qi,APPARENT_POWER_QPLUS_PHASE_C:ji,BATTERY_VOLTAGE:ci,CURRENT_BALANCE:$o,CURRENT_IN_NEUTRAL:Mi,CURRENT_IN_PHASE_A:Si,CURRENT_IN_PHASE_B:Di,CURRENT_IN_PHASE_C:Ii,CURRENT_TRANSFORMATION_RATIO:ko,DATE_MONTH_YEAR:zo,EXPORTED_ACTIVE_ENERGY_T1:vi,EXPORTED_ACTIVE_ENERGY_T2:ni,EXPORTED_ACTIVE_ENERGY_T3:Ai,EXPORTED_ACTIVE_ENERGY_T4:Ti,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:Ni,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:ui,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:Ci,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:Pi,EXPORTED_REACTIVE_ENERGY_T1:ii,EXPORTED_REACTIVE_ENERGY_T2:oi,EXPORTED_REACTIVE_ENERGY_T3:Oi,EXPORTED_REACTIVE_ENERGY_T4:si,HOUR_MINUTE_SECOND:jo,MAGNET_INDUCTION:EO,MAX_ACTIVE_POWER_DAY_T1:Ji,MAX_ACTIVE_POWER_DAY_T2:ro,MAX_ACTIVE_POWER_DAY_T3:ao,MAX_ACTIVE_POWER_DAY_T4:eo,MAX_ACTIVE_POWER_MONTH_T1:to,MAX_ACTIVE_POWER_MONTH_T2:Eo,MAX_ACTIVE_POWER_MONTH_T3:_o,MAX_ACTIVE_POWER_MONTH_T4:vo,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:Mo,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:lo,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:go,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:co,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:ho,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:Lo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:po,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:Vo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:Yo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:xo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:Bo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:wo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:Ko,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:bo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:Zo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:Qo,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:mo,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:yo,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:Uo,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:Fo,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:Ho,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:Go,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:Xo,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:Wo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:fo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:No,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:uo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:Co,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:Po,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:So,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:Do,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:Io,MAX_REACTIVE_POWER_DAY_T1:no,MAX_REACTIVE_POWER_DAY_T2:Ao,MAX_REACTIVE_POWER_DAY_T3:To,MAX_REACTIVE_POWER_DAY_T4:Ro,MAX_REACTIVE_POWER_MONTH_T1:io,MAX_REACTIVE_POWER_MONTH_T2:oo,MAX_REACTIVE_POWER_MONTH_T3:Oo,MAX_REACTIVE_POWER_MONTH_T4:so,NEGATIVE_REACTIVE_ENERGY_T1:ai,NEGATIVE_REACTIVE_ENERGY_T2:ei,NEGATIVE_REACTIVE_ENERGY_T3:ti,NEGATIVE_REACTIVE_ENERGY_T4:Ei,OPTOPORT_SPEED:tO,POWER_FACTOR_PHASE_A:Bi,POWER_FACTOR_PHASE_B:wi,POWER_FACTOR_PHASE_C:Ki,POWER_THRESHOLD_T1:Jo,POWER_THRESHOLD_T2:rO,POWER_THRESHOLD_T3:aO,POWER_THRESHOLD_T4:eO,REACTIVE_ENERGY_T1:kR,REACTIVE_ENERGY_T2:qR,REACTIVE_ENERGY_T3:$R,REACTIVE_ENERGY_T4:JR,REACTIVE_POWER_QMINUS_PHASE_A:Xi,REACTIVE_POWER_QMINUS_PHASE_B:Wi,REACTIVE_POWER_QMINUS_PHASE_C:Yi,REACTIVE_POWER_QPLUS_PHASE_A:Ui,REACTIVE_POWER_QPLUS_PHASE_B:Fi,REACTIVE_POWER_QPLUS_PHASE_C:Hi,SET_ALL_SEGMENT_DISPLAY:BR,SOFTWARE_VERSION:wR,SUPPLY_FREQUENCY:hi,TOTAL_ACTIVE_ENERGY:KR,TOTAL_ACTIVE_POWER:Li,TOTAL_APPARENT_POWER_QMINUS:zi,TOTAL_APPARENT_POWER_QPLUS:bi,TOTAL_EXPORTED_ACTIVE_ENERGY:_i,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:fi,TOTAL_EXPORTED_REACTIVE_ENERGY:Ri,TOTAL_NEGATIVE_REACTIVE_ENERGY:ri,TOTAL_POWER_FACTOR:xi,TOTAL_REACTIVE_ENERGY:zR,TOTAL_REACTIVE_POWER_QMINUS:Gi,TOTAL_REACTIVE_POWER_QPLUS:yi,VOLTAGE_IN_PHASE_A:li,VOLTAGE_IN_PHASE_B:di,VOLTAGE_IN_PHASE_C:gi,VOLTAGE_TRANSFORMATION_RATIO:qo});Hr(_O);var vO=2400;var nO=9600;var AO={rs485orTwi:{0:nO,2:vO,4:nO},optoport:{0:nO,2:vO,4:nO}};({rs485orTwi:Hr(AO.rs485orTwi),optoport:Hr(AO.optoport)});var TO=1;var RO=4;function iO(r,a){var e=a.wh,t=a.vari,E=a.vare;var _=1+RO;var v=r;for(var n=0;n<vn;n++){v=gt(v,1,n+_,Number(!!e[n]&&!!t[n]&&!!E[n]))}return v}var oO=function(r,a){var e=a.energyType,t=a.energies;if(e){var E=iO(e,t);var _=E>>RO;r.setUint8(E);for(var v=0;v<vn;v++){var n=!!dt(_,1,v+1);if(n){r.setInt32(t.wh[v]);r.setInt32(t.vari[v]);r.setInt32(t.vare[v])}}return}for(var A=0;A<vn;A++){r.setInt32(t.wh[A]);r.setInt32(t.vari[A]);r.setInt32(t.vare[A])}};var OO=function(r,a){var e=a.date.year<<1|a.date.month>>3&1;var t=a.date.month<<5&224|a.date.date&31;r.setUint8(e);r.setUint8(t);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var sO=function(r){var a=r.energies,e=a.wh,t=a.vari,E=a.vare;if(r?.energyType){var _=[].concat(T(e),T(t),T(E)).filter(function(r){return r!==null}).length;return Tn+TO+_*An}return Tn+An*vn};var fO=ba;var NO=function(r){var a=new Mt(sO(r),false);In(a,r.date);oO(a,r);return N(fO,a.data)};var uO=Y;var CO=function(r){var a=r.version.split("").map(function(r){return r.charCodeAt(0)});return N(uO,a)};var PO=pe;var SO=function(r){var a=r.event,e=r.index,t=r.date,E=r.count;return N(PO,[a,e,t.year,t.month,t.date,t.hours,t.minutes,t.seconds,E])};var DO=7;var IO=Ze;var MO=65535;var lO=function(r){var a=new Mt(DO+r.count*2,false);OO(a,r);r.demands.forEach(function(r){return a.setUint16(r===null?MO:r)});return N(IO,a.data)};var dO=145;var gO=30;var cO=function(r){if(r[0]!==gO){return{}}var a=r[1];var e=r[3];var t=r.slice(4,a+2);if(e===dO){return t}return null};var hO;var LO=(hO={},t(t(t(t(t(t(t(t(t(t(hO,gn,hn),Ln,pn),Vn,yn),Un,Hn),Gn,Wn),Yn,xn),wn,Kn),bn,Zn),fO,NO),uO,CO),t(t(hO,PO,SO),IO,lO));fromBytes=La(LO,Je);getDataSegment=cO})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
