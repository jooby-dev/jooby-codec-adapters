// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function a(t,e,r){return(e=T(e))in t?Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true}):t[e]=r,t}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,i,E,_=[],s=true,o=false;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=i.call(r)).done)&&(_.push(a.value),_.length!==e);s=!0);}catch(t){o=true,n=t}finally{try{if(!s&&null!=r.return&&(E=r.return(),Object(E)!==E))return}finally{if(o)throw n}}return _}}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,r){return e(t)||i(t,r)||R(t,r)||E()}function o(t){return e(t)||n(t)||R(t)||E()}function v(t){return r(t)||n(t)||R(t)||_()}function A(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function T(t){var e=A(t,"string");return"symbol"==typeof e?e:e+""}function R(e,r){if(e){if("string"==typeof e)return t(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):void 0}}var h=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map(function(t){return t.padStart(2,"0")}).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var a=new Array(r);for(var n=0;n<r;n++){a[n]=parseInt(e.substring(n*2,n*2+2),16)}return a};var u={separator:" ",prefix:""};var f=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},u,e),a=r.separator,n=r.prefix;return t.map(function(t){return"".concat(n).concat(t.toString(16).padStart(2,"0"))}).join(a)};var g=0;var O=1;var l=3;var P=4;var d=5;var c=7;var U=8;var p=9;var I=13;var N=15;var M=16;var C=17;var D=18;var m=19;var S=20;var y=21;var L=22;var V=23;var F=24;var H=25;var Y=28;var x=30;var W=31;var X=40;var G=41;var w=42;var B=44;var b=45;var K=46;var z=47;var Q=49;var Z=50;var j=51;var k=52;var q=53;var $=54;var J=57;var tt=58;var et=59;var rt=60;var at=61;var nt=62;var it=65;var Et=70;var _t=74;var st=75;var ot=79;var vt=80;var At=82;var Tt=83;var Rt=88;var ht=89;var ut=91;var ft=92;var gt=93;var Ot=94;var lt=100;var Pt=109;var dt=111;var ct=112;var Ut=113;var pt=114;var It=116;var Nt=117;var Mt=118;var Ct=122;var Dt=Object.freeze({__proto__:null,activateRatePlan:m,getBuildVersion:ct,getCorrectTime:nt,getCriticalEvent:it,getCurrentStatusMeter:J,getCurrentValues:I,getDateTime:c,getDayDemand:L,getDayDemandExport:ot,getDayMaxDemand:Q,getDayMaxDemandExport:Rt,getDayMaxDemandPrevious:_t,getDayProfile:et,getDemand:Mt,getDemandParameters:Nt,getDeviceId:d,getDeviceType:P,getDisplayParam:Ot,getEnergy:N,getEnergyDayPrevious:l,getEnergyExport:ut,getEnergyExportDayPrevious:vt,getEventStatus:O,getEvents:j,getEventsCounters:k,getExtendedCurrentValues:tt,getExtendedCurrentValues2:b,getHalfHourDemand:y,getHalfHourDemandExport:Tt,getHalfHourDemandPrevious:st,getHalfHourEnergies:dt,getMagneticFieldThreshold:Pt,getMeterInfo:Ct,getMonthDemand:V,getMonthDemandExport:At,getMonthMaxDemand:Z,getMonthMaxDemandExport:ht,getOperatorParameters:x,getOperatorParametersExtended3:Ut,getRatePlanInfo:B,getSaldo:G,getSaldoParameters:K,getSeasonProfile:rt,getSpecialDay:at,getVersion:X,prepareRatePlan:S,resetPowerMaxDay:q,resetPowerMaxMonth:$,runTariffPlan:Et,setAccessKey:p,setCorrectDateTime:ft,setCorrectTime:Y,setDateTime:U,setDayProfile:M,setDemandParameters:It,setDisplayParam:gt,setOperatorParameters:W,setOperatorParametersExtended3:pt,setSaldo:w,setSaldoParameters:z,setSeasonProfile:C,setSpecialDay:D,setSpecialOperation:lt,turnRelayOff:H,turnRelayOn:F});var mt=120;var St=121;var yt=254;var Lt=Object.freeze({__proto__:null,activateRatePlan:m,errorResponse:yt,getBuildVersion:ct,getCorrectTime:nt,getCriticalEvent:it,getCurrentStatusMeter:J,getCurrentValues:I,getDateTime:c,getDayDemand:L,getDayDemandExport:ot,getDayEnergies:mt,getDayMaxDemand:Q,getDayMaxDemandExport:Rt,getDayMaxDemandPrevious:_t,getDayMaxPower:St,getDayProfile:et,getDemand:Mt,getDemandParameters:Nt,getDeviceId:d,getDeviceType:P,getDisplayParam:Ot,getEnergy:N,getEnergyDayPrevious:l,getEnergyExport:ut,getEnergyExportDayPrevious:vt,getEventStatus:O,getEvents:j,getEventsCounters:k,getExtendedCurrentValues:tt,getExtendedCurrentValues2:b,getHalfHourDemand:y,getHalfHourDemandExport:Tt,getHalfHourDemandPrevious:st,getHalfHourEnergies:dt,getMagneticFieldThreshold:Pt,getMeterInfo:Ct,getMonthDemand:V,getMonthDemandExport:At,getMonthMaxDemand:Z,getMonthMaxDemandExport:ht,getOperatorParameters:x,getOperatorParametersExtended3:Ut,getRatePlanInfo:B,getSaldo:G,getSaldoParameters:K,getSeasonProfile:rt,getSpecialDay:at,getVersion:X,prepareRatePlan:S,resetPowerMaxDay:q,resetPowerMaxMonth:$,runTariffPlan:Et,setAccessKey:p,setCorrectDateTime:ft,setCorrectTime:Y,setDateTime:U,setDayProfile:M,setDemandParameters:It,setDisplayParam:gt,setOperatorParameters:W,setOperatorParametersExtended3:pt,setSaldo:w,setSaldoParameters:z,setSeasonProfile:C,setSpecialDay:D,setSpecialOperation:lt,turnRelayOff:H,turnRelayOn:F});var Vt=function(t){var e={};for(var r in t){var a=t[r];e[a]=r}return e};Vt(Lt);var Ft=m;var Ht=0;var Yt=function(t){if(t.length!==Ht){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var xt=1;var Wt=2;var Xt=3;var Gt=4;var wt=Math.log,Bt=Math.pow,bt=Math.LN2;var Kt=function(t,e,r,a,n){var i,E,_=n*8-a-1,s=(1<<_)-1,o=s>>1,v=-7,A=r?n-1:0,T=r?-1:1,R=t[e+A];A+=T;i=R&(1<<-v)-1;R>>=-v;v+=_;for(;v>0;i=i*256+t[e+A],A+=T,v-=8);E=i&(1<<-v)-1;i>>=-v;v+=a;for(;v>0;E=E*256+t[e+A],A+=T,v-=8);if(i===0){i=1-o}else if(i===s){return E?NaN:R?-Infinity:Infinity}else{E=E+Bt(2,a);i=i-o}return(R?-1:1)*E*Bt(2,i-a)};var zt=function(t,e,r,a,n,i){var E,_,s,o=i*8-n-1,v=(1<<o)-1,A=v>>1,T=n===23?Bt(2,-24)-Bt(2,-77):0,R=a?0:i-1,h=a?1:-1,u=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){_=r!==r?1:0;E=v}else{E=wt(r)/bt|0;if(r*(s=Bt(2,-E))<1){E--;s*=2}if(E+A>=1){r+=T/s}else{r+=T*Bt(2,1-A)}if(r*s>=2){E++;s/=2}if(E+A>=v){_=0;E=v}else if(E+A>=1){_=(r*s-1)*Bt(2,n);E=E+A}else{_=r*Bt(2,A-1)*Bt(2,n);E=0}}for(;n>=8;t[e+R]=_&255,R+=h,_/=256,n-=8);E=E<<n|_;o+=n;for(;o>0;t[e+R]=E&255,R+=h,E/=256,o-=8);t[e+R-h]|=u*128};var Qt=[1,0];var Zt=[2,1,0];var jt=[3,2,1,0];var kt=[0,1];var qt=[0,1,2];var $t=[0,1,2,3];var Jt=function(t,e){return t[e]};var te=function(t,e,r){var a=r?kt:Qt;var n=t[e+a[0]];var i=t[e+a[1]]<<8;return n|i};var ee=function(t,e,r){var a=r?qt:Zt;var n=t[e+a[0]];var i=t[e+a[1]]<<8;var E=t[e+a[2]]<<16;return n|i|E};var re=function(t,e,r){var a=r?$t:jt;var n=t[e+a[3]]*16777216;var i=t[e+a[2]]*65536;var E=t[e+a[1]]*256;var _=t[e+a[0]];return n+i+E+_};var ae=function(t,e,r){t[e]=r&255};var ne=function(t,e,r,a){var n=a?kt:Qt;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255};var ie=function(t,e,r,a){var n=a?qt:Zt;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255};var Ee=function(t,e,r,a){var n=a?$t:jt;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255;t[e+n[3]]=r>>>24&255};function _e(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}_e.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){ae(this.data,this.offset,t<0?t|256:t);this.offset+=xt},getInt8:function(){var t=Jt(this.data,this.offset);this.offset+=xt;return t&128?t^-256:t},setUint8:function(t){ae(this.data,this.offset,t);this.offset+=xt},getUint8:function(){var t=Jt(this.data,this.offset);this.offset+=xt;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ne(this.data,this.offset,t<0?t|65536:t,e);this.offset+=Wt},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=te(this.data,this.offset,t);this.offset+=Wt;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ne(this.data,this.offset,t,e);this.offset+=Wt},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=te(this.data,this.offset,t);this.offset+=Wt;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ie(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=Xt},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=ee(this.data,this.offset,t);this.offset+=Xt;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ie(this.data,this.offset,t,e);this.offset+=Xt},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=ee(this.data,this.offset,t);this.offset+=Xt;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Ee(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=Gt},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=re(this.data,this.offset,t);this.offset+=Gt;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Ee(this.data,this.offset,t,e);this.offset+=Gt},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=re(this.data,this.offset,t);this.offset+=Gt;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;zt(this.data,this.offset,t,e,23,4);this.offset+=Gt},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Kt(this.data,this.offset,t,23,4);this.offset+=Gt;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(v(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(_e.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var se=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var a in e){if(a in t&&e[a]){r|=t[a]}}return r};var oe=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var a in t){r[a]=(e&t[a])!==0}return r};var ve=function(t,e,r){return(1<<e)-1&t>>r-1};var Ae=function(t,e,r,a){var n=(1<<e)-1<<r-1;var i=a;var E=t;E&=~n;i<<=r-1;E|=i;return E};var Te="x";var Re=[".","1","3","R","M"];var he=[".","A","G","R","T","D"];var ue=[".","0","1","2","3","4","5"];var fe=[".","A","B","C","D","E","F"];var ge=[".","A","B","C","D","E","F","H","K","G"];var Oe=[".","1","2","3","4"];var le=[".","L","M","Z","K"];var Pe=[".","0","1","2","3","4","5","6","7","8","9"];var de=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var ce=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Ue=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var pe=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var Ie={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Ne={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var Me=function(t){var e=oe(Ne,t);return{meterType:"mtx3",...e,typeMeterG:!e.typeMeterG}};var Ce=function(t){return se(Ne,{...t,typeMeterG:!t.typeMeterG})};var De=function(t){return[t>>4,t&15]};var me=function(t){var e=new Array(t.length*2).fill(0);t.forEach(function(t,r){var a=De(t),n=s(a,2),i=n[0],E=n[1];e[r*2]=i;e[r*2+1]=E});return e};var Se=function(t){var e=[];t.forEach(function(t){return e.push(t.toString(16))});if(t.length&1){e.push("0")}return h(e.join(""))};var ye=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(Re[t[0]]??Te);e.push(he[t[1]]??Te);e.push(ue[t[2]]??Te);e.push(ue[t[3]]??Te);e.push(".");e.push(fe[t[4]]??Te);e.push(ge[t[5]]??Te);e.push(".");e.push(Oe[t[6]]??Te);e.push(le[t[7]]??Te);var r=t[8];e.push(Pe[t[9]]??Te);e.push("-");var a;if(t.length<14||t[12]===0&&t[13]===0){e.push(de[t[10]]??Te);a=11}else if(t[13]===0){e.push(de[t[10]]??Te);e.push(de[t[11]]??Te);a=12}else{e.push(de[t[10]]??Te);e.push(de[t[11]]??Te);e.push(de[t[12]]??Te);a=13}var n=t[a];if(n&&n!==0){e.push(Ue[n]??Te)}return{type:e.join(""),revision:r}};var Le=function(t,e,r){var a=[];if(t.length<11){throw new Error("Wrong format")}a.push(Re.indexOf(t[0]));a.push(he.indexOf(t[1]));a.push(ue.indexOf(t[2]));a.push(ue.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}a.push(fe.indexOf(t[5]));a.push(ge.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}a.push(Oe.indexOf(t[8]));a.push(le.indexOf(t[9]));a.push(r??0);a.push(Pe.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var n=t.length>13?t.length-1:t.length;for(var i=12;i<n;i++){a.push(de.indexOf(t[i]))}if(n<t.length){a.push(Ue.indexOf(t[n]))}var E=Se(a);var _=new Array(9).fill(0);_[0]=0;for(var s=0;s<E.length;s++){_[s+(E.length<8?1:0)]=E[s]}return _};var Ve=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(Re[t[0]]??Te);e.push(he[t[1]]??Te);e.push(r);for(var a=2;a<t.length;a++){if(t[a]!==0){e.push(ce[t[a]]??Te)}}return{type:e.join("")}};var Fe=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(Re.indexOf(t[0]));e.push(he.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(ce.indexOf(t[r]))}var a=Se(e);if(a.length===8){return a}if(a.length>8){throw new Error("Wrong format")}var n=new Array(8).fill(0);for(var i=0;i<a.length;i++){n[i]=a[i]}return n};var He=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(Re[t[0]]??Te);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push(pe[t[r]]??Te)}}return{type:e.join("")}};var Ye=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(Re.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push(pe.indexOf(t[r]))}var a=Se(e);var n=new Array(8).fill(0);for(var i=0;i<a.length&&i<8;i++){n[i]=a[i]}return n};var xe=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var a=r.indexOf(t[0])!==-1?2:0;var n=me(t.slice(0,8));var i=n[a];var E=Re[i];if(E==="1"||E==="3"){e={...ye(n.slice(a)),descriptor:E==="3"?Me(t[8]):{meterType:"mtx1",...oe(Ie,t[8])}}}else{e=E==="M"?He(n):Ve(n)}return e};var We=function(t,e){var r=t.type,a=t.revision,n=t.descriptor;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var i;var E=r.substring(4);var _=r[4];if(_==="1"||_==="3"){i=Le(E,e,a)}else{i=_==="M"?Ye(E):Fe(E)}if(n?.meterType){i[8]=n.meterType==="mtx1"?se(Ie,n):Ce(n)}else{i[8]=0}return i};var Xe=80;var Ge=81;var we=82;var Be=83;var be=84;var Ke=85;var ze=86;var Qe=87;var Ze=88;var je=89;var ke=90;var qe=91;var $e=255;var Je=Object.freeze({__proto__:null,DATA_REQUEST:Xe,DATA_RESPONSE:Ge,FRAGMENT_REQUEST:ke,FRAGMENT_RESPONSE:qe,IDENT_REQUEST:we,IDENT_RESPONSE:Be,INVALID:$e,L2_CHECK_ADDRESS_REQUEST:ze,L2_CHECK_ADDRESS_RESPONSE:Qe,L2_RM_ADDRESS_REQUEST:Ze,L2_RM_ADDRESS_RESPONSE:je,L2_SET_ADDRESS_REQUEST:be,L2_SET_ADDRESS_RESPONSE:Ke});var tr=Vt(Je);var er=1;var rr=2;var ar=3;var nr=16;var ir=17;var Er=18;var _r=19;var sr=20;var or=21;var vr=32;var Ar=33;var Tr=34;var Rr=35;var hr=36;var ur=37;var fr=38;var gr=39;var Or=40;var lr=41;var Pr=49;var dr=50;var cr=51;var Ur=52;var pr=53;var Ir=54;var Nr=55;var Mr=56;var Cr=57;var Dr=60;var mr=61;var Sr=62;var yr=63;var Lr=64;var Vr=65;var Fr=66;var Hr=67;var Yr=68;var xr=69;var Wr=70;var Xr=71;var Gr=72;var wr=73;var Br=74;var br=75;var Kr=76;var zr=77;var Qr=78;var Zr=79;var jr=80;var kr=81;var qr=82;var $r=83;var Jr=84;var ta=85;var ea=86;var ra=87;var aa=88;var na=89;var ia=96;var Ea=97;var _a=98;var sa=99;var oa=100;var va=101;var Aa=102;var Ta=103;var Ra=104;var ha=105;var ua=112;var fa=113;var ga=114;var Oa=115;var la=116;var Pa=117;var da=118;var ca=119;var Ua=120;var pa=121;var Ia=122;var Na=123;var Ma=124;var Ca=125;var Da=126;var ma=144;var Sa=145;var ya=147;var La=148;var Va=152;var Fa=156;var Ha=157;var Ya=158;var xa=159;var Wa=160;var Xa=161;var Ga=162;var wa=176;var Ba=177;var ba=178;var Ka=179;var za=180;var Qa=181;var Za=182;var ja=183;var ka=185;var qa=186;var $a=224;var Ja=225;var tn=226;var en=227;var rn=228;var an=229;var nn=230;var En=231;var _n=232;var sn=Object.freeze({__proto__:null,ACCESS_LOCKED:nr,ACC_PARAM_BAD:ga,ACC_PARAM_EXT_BAD:Oa,BAD_TEST_EEPROM:Ra,BAD_TEST_FRAM:ha,BATTERY_FAULT:$r,BATTERY_OK:qr,BIPOLAR_POWER_FAULT:za,BIPOLAR_POWER_OK:Qa,BLOCK_TARIFF_BAD:Pa,CALC_PERIOD_BAD:la,CALIBRATION_FAULT:ta,CALIBRATION_FLAG_RESET:Ta,CALIBRATION_FLAG_SET:Aa,CALIBRATION_OK:Jr,CALIBRATION_PARAM_BAD:da,CASE_CLOSE:_r,CASE_KLEMA_CLOSE:Na,CASE_KLEMA_OPEN:Ia,CASE_MODULE_CLOSE:Ca,CASE_MODULE_OPEN:Ma,CASE_OPEN:Er,CHANGE_ACCESS_KEY0:vr,CHANGE_ACCESS_KEY1:Ar,CHANGE_ACCESS_KEY2:Tr,CHANGE_ACCESS_KEY3:Rr,CHANGE_COR_TIME:lr,CHANGE_PARAM_CANAL:ka,CHANGE_PAR_LOCAL:hr,CHANGE_PAR_REMOTE:ur,CHANGE_TARIFF_TABLE:dr,CHANGE_TARIFF_TBL_2:Va,CLOCK_FAULT:ra,CLOCK_OK:ea,CMD_CHANGE_TIME:fr,CMD_RELAY_2_OFF:Ea,CMD_RELAY_2_ON:ia,CMD_RELAY_OFF:Or,CMD_RELAY_ON:gr,CROSS_ZERO_ENT0:_a,CROSS_ZERO_ENT1:sa,CROSS_ZERO_ENT2:oa,CROSS_ZERO_ENT3:va,CROSS_ZERO_EXPORT_ENT0:Ya,CROSS_ZERO_EXPORT_ENT1:xa,CROSS_ZERO_EXPORT_ENT2:Wa,CROSS_ZERO_EXPORT_ENT3:Xa,CURRENT_UNEQUAL_FAULT:ba,CURRENT_UNEQUAL_OK:Ka,EM_MAGNETIC_OFF:Ba,EM_MAGNETIC_ON:wa,ENERGY_REGISTER_FAULT:er,ENERGY_REGISTER_OVERFLOW:Pr,ERR_ACCESS:ir,F_MAX_OK:Gr,F_MAX_OVER:wr,F_MIN_OK:Br,F_MIN_OVER:br,I_MAX_OK:Kr,I_MAX_OVER:zr,MAGNETIC_OFF:or,MAGNETIC_ON:sr,OP_PAR_FAULT:ar,POWER_A_OFF:aa,POWER_A_ON:na,POWER_B_OFF:mr,POWER_B_ON:Dr,POWER_C_OFF:yr,POWER_C_ON:Sr,POWER_GOOD_DIO:Da,POWER_OVER_RELAY_OFF:Ha,POWER_SALDO_OK:jr,POWER_SALDO_OVER:kr,P_MAX_A_MINUS_OK:En,P_MAX_A_MINUS_OVER:_n,P_MAX_OK:Qr,P_MAX_OVER:Zr,RELAY_HARD_BAD_OFF:ma,RELAY_HARD_BAD_ON:ya,RELAY_HARD_OFF:La,RELAY_HARD_ON:Sa,RELAY_OFF:Nr,RELAY_OFF_BAD_SALDO:qa,RELAY_ON:Ir,RESET_EM_FLAG:Za,RESET_MAGNET_FLAG:ja,RESTART:Mr,SALDO_EN_BAD:Ua,SALDO_PARAM_BAD:fa,SET_DEMAND_EN_10MIN:en,SET_DEMAND_EN_15MIN:rn,SET_DEMAND_EN_1MIN:$a,SET_DEMAND_EN_30MIN:an,SET_DEMAND_EN_3MIN:Ja,SET_DEMAND_EN_5MIN:tn,SET_DEMAND_EN_60MIN:nn,SET_NEW_SALDO:ua,SET_SALDO_PARAM:Fa,SET_TARIFF_TABLE:cr,SUMMER_TIME:Ur,TIME_CORRECT:pa,TIME_CORRECT_NEW:Ga,T_MAX_OK:Yr,T_MAX_OVER:xr,T_MIN_OK:Wr,T_MIN_OVER:Xr,VENDOR_PAR_FAULT:rr,V_MAX_OK:Lr,V_MAX_OVER:Vr,V_MIN_OK:Fr,V_MIN_OVER:Hr,WD_RESTART:Cr,WINTER_SUMMER_BAD:ca,WINTER_TIME:pr});var on=Vt(sn);var vn={type:Xe,destination:65535,source:65534};var An=11;var Tn=7;var Rn=4;var hn=48;var un=50;var fn=3+hn*2;var gn={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var On={...gn,AUTO_SCREEN_SCROLLING:2147483648};var ln={...gn,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Pn={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var dn={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var cn={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var Un={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var pn={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var In={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Nn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var Mn={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Cn={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var Dn={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var mn={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var Sn={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var yn={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};function Ln(t,e,r){var a=r>>Rn;var n=new Array(Rn).fill(0);n.forEach(function(e,r){var i=!!ve(a,1,r+1);if(i){n[r]=t.getUint32()}else{n[r]=null}});return n}function Vn(t,e,r){var a=1+Rn;var n=e;r.forEach(function(t,e){n=Ae(n,1,e+a,Number(!!t))});t.setUint8(n)}function Fn(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function Hn(t,e){var r=e.tariff,a=e.energy;if(r!==undefined&&a!==undefined){t.setUint16(r<<14|a&16383)}else{t.setUint16(65535)}}function Yn(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_e.call(this,t,e)}Yn.prototype=Object.create(_e.prototype);Yn.prototype.constructor=Yn;Yn.getDayProfileFromByte=function(t){return{tariff:ve(t,2,1),isFirstHalfHour:!ve(t,1,3),hour:ve(t,5,4)}};Yn.getByteFromDayProfile=function(t){var e=0;e=Ae(e,2,1,t.tariff);e=Ae(e,1,3,+!t.isFirstHalfHour);e=Ae(e,5,4,t.hour);return e};Yn.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};Yn.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:oe(On,2147496324),relaySet4:oe(Un,0),relaySet3:oe(cn,0),relaySet2:oe(dn,3),relaySet1:oe(Pn,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:oe(In,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:oe(ln,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:oe(pn,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};Yn.getDefaultOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:0,pmaxMinusThreshold1:0,pmaxMinusThreshold2:0,pmaxMinusThreshold3:0,relaySet:oe(yn,0)}};Yn.prototype.getFrameHeader=function(){var t=this.getUint8();var e=tr[t];var r=this.getUint16();var a=this.getUint16();return{type:t,typeName:e,destination:r,source:a}};Yn.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?vn.type:e,a=t.destination,n=a===void 0?vn.destination:a,i=t.source,E=i===void 0?vn.source:i;this.setUint8(r);this.setUint16(n);this.setUint16(E)};Yn.prototype.getDeviceId=function(){var t=f(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var a=f(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:a}};Yn.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,a=t.year,n=t.serial;this.setBytes(h(e));this.setUint8(r);this.setUint8(a);this.setBytes(h(n))};Yn.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};Yn.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};Yn.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};Yn.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};Yn.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};Yn.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};Yn.prototype.getDayProfile=function(){return Yn.getDayProfileFromByte(this.getUint8())};Yn.prototype.setDayProfile=function(t){this.setUint8(Yn.getByteFromDayProfile(t))};Yn.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(Tn).fill(0).map(function(){return t.getUint8()})}};Yn.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach(function(t){return e.setUint8(t)})};Yn.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};Yn.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};Yn.prototype.getDeviceType=function(){return xe(this.getBytes(9))};Yn.prototype.setDeviceType=function(t){this.setBytes(We(t))};Yn.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:oe(On,this.getUint32()),relaySet4:oe(Un,this.getUint8()),relaySet3:oe(cn,this.getUint8()),relaySet2:oe(dn,this.getUint8()),relaySet1:oe(Pn,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:oe(In,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:oe(ln,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:oe(pn,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};Yn.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(se(On,t.displaySet));this.setUint8(se(Un,t.relaySet4));this.setUint8(se(cn,t.relaySet3));this.setUint8(se(dn,t.relaySet2));this.setUint8(se(Pn,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(se(In,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(se(ln,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(se(pn,t.relaySet5));this.setUint8(e)};Yn.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=ve(t,Rn,1);var r=Ln(this,e,t);return{energyType:e,energies:r}};Yn.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,a=t.energies;if(r){Vn(this,r,a)}a.forEach(function(t){if(t!==null){e.setUint32(t)}})};Yn.prototype.getEnergies=function(){var t=this;return new Array(Rn).fill(0).map(function(){return t.getInt32()})};Yn.prototype.setEnergies=function(t){var e=this;t.forEach(function(t){return e.setUint32(t)})};Yn.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};Yn.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};Yn.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map(function(){return t.getUint32()}),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};Yn.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach(function(t){return e.setUint32(t)});this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};Yn.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map(function(){return e.getUint16()});return r.map(function(t){return Fn(t)})};Yn.prototype.setEnergyPeriods=function(t){var e=this;t.forEach(function(t){return Hn(e,t)})};Yn.prototype.getEventStatus=function(){var t=this.getUint16();return oe(Nn,t)};Yn.prototype.setEventStatus=function(t){this.setUint16(se(Nn,t))};Yn.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=oe(Mn,this.getUint8());var r=oe(Cn,this.getUint8());var a=oe(Dn,this.getUint8());var n=oe(mn,this.getUint8());var i=oe(Sn,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:a,status2:n,status3:i}};Yn.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,a=t.relayStatus2,n=t.status1,i=t.status2,E=t.status3;this.setUint16(e);this.setUint8(se(Mn,r));this.setUint8(se(Cn,a));this.setUint8(se(Dn,n));this.setUint8(se(mn,i));this.setUint8(se(Sn,E))};Yn.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=on[e];switch(e){case Ha:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case fr:case pa:if(r<8){return t}t.newDate=this.getDateTime();break}return t};Yn.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Ha:for(var e of t.power){this.setUint8(e)}break;case fr:case pa:this.setDateTime(t.newDate);break}};Yn.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};Yn.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};Yn.prototype.getDemandParameters=function(){var t=this.getUint8();var e=this.getUint8();var r=this.getUint8();return{channelParam1:t,counterInterval:e,channelParam2:r}};Yn.prototype.setDemandParameters=function(t){this.setUint8(t.channelParam1);this.setUint8(t.counterInterval);this.setUint8(t.channelParam2);this.setUint8(0)};Yn.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(Rn).fill(0).map(function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}});return{date:e,power:r}};Yn.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach(function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)})};Yn.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:oe(yn,this.getUint8())}};Yn.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,a=t.pmaxMinusThreshold2,n=t.pmaxMinusThreshold3,i=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(a);this.setUint32(n);this.setUint8(se(yn,i))};Yn.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(Rn).fill(0).map(function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}})};Yn.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach(function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)})};var xn=0;var Wn=128;var Xn=129;var Gn=130;var wn=131;var Bn=132;var bn=133;var Kn=134;var zn=135;var Qn=136;var Zn=137;var jn=144;var kn=145;var qn=146;var $n=147;var Jn=149;var ti=151;var ei=152;var ri=153;var ai=154;var ni=155;var ii=156;var Ei=159;var _i=160;var si=240;var oi=Object.freeze({__proto__:null,ACCESS_DENIED:$n,BAD_ARRAY_INDEX:Kn,BAD_BLOCK_NUMBER:ii,BAD_DATA_LENGTH:bn,BAD_MESSAGE:Bn,BAD_RATE_PLAN_ID:Qn,BAD_RATE_PLAN_SIZE:Zn,BAD_RESPONSE_LENGTH:jn,BAD_SALDO_WRITE:Jn,BLOCKED_METER:ti,CALIBRATION_DISABLED:qn,DECRYPTION_FAILURE:Gn,INTERNAL:si,INVALID_CORRECTION_INTERVAL:ai,NOT_ALIGNED_DATA:Xn,NOT_PREPARED_RATE_PLAN:zn,NO_DATA_FOR_DATE:kn,OK:xn,OUT_OFF_RANGE:Ei,SET_METER_TYPE_FAILURE:_i,TIME_CORRECTION_FAILURE:ri,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:ni,UNENCRYPTED_COMMAND_DISABLED:ei,UNKNOWN_COMMAND:Wn,UNKNOWN_PROTOCOL:wn});var vi=Vt(oi);var Ai=yt;var Ti=function(t){return function(e){var r=new Yn(e);var a=r.getUint8();var n=r.getUint8();return{commandId:a,commandName:t[a],errorCode:n,errorName:vi[n]}}};var Ri=ct;var hi=6;var ui=function(t){if(t.length!==hi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=s(t,6),r=e[0],a=e[1],n=e[2],i=e[3],E=e[4],_=e[5];return{date:{date:r,month:a,year:n},version:"".concat(i,".").concat(E,".").concat(_)}};var fi=nt;var gi=function(t){var e=new Yn(t);return e.getTimeCorrectionParameters()};var Oi=0;var li=1;var Pi=2;var di=3;var ci=4;var Ui=5;var pi=6;var Ii=7;var Ni=8;var Mi=9;var Ci=10;var Di=11;var mi=12;var Si=13;var yi=14;var Li=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Ci,CASE_OPEN:Oi,CASE_TERMINAL_OPEN:Mi,DEVICE_FAILURE:Ni,ERROR_ACCESS:Ui,MAGNETIC_ON:li,PARAMETERS_UPDATE_LOCAL:di,PARAMETERS_UPDATE_REMOTE:Pi,PROTECTION_RESET_EM:Si,PROTECTION_RESET_MAGNETIC:yi,RESTART:ci,TARIFF_TABLE_GET:mi,TARIFF_TABLE_SET:Di,TIME_CORRECT:Ii,TIME_SET:pi});var Vi=Vt(Li);var Fi=c;var Hi=function(t){var e=new Yn(t);return e.getDateTime()};var Yi=4;var xi=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var Wi=4294967295;var Xi={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Gi=function(t){var e={};Object.keys(t).forEach(function(r){e[r]=!!t[r]});return se(Xi,e)};var wi=function(t){return t<Yi?1<<t:0};var Bi=function(t){return t<Yi?1<<t<<4:0};var bi=function(t,e){var r=0;if(t<Yi){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=wi(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=Bi(t)}}return r};function Ki(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_e.call(this,t,e)}Ki.prototype=Object.create(_e.prototype);Ki.prototype.constructor=Ki;Ki.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};Ki.prototype.setDate=function(t){var e=t.year,r=t.month,a=t.date;var n=e<<1|r>>3&1;var i=r<<5&224|a&31;this.setUint8(n);this.setUint8(i)};Ki.prototype.getEnergiesFlags=function(){var t=this.getUint8();return oe(Xi,t)};Ki.prototype.setEnergiesFlags=function(t){this.setUint8(Gi(t))};Ki.prototype.getHalfHourEnergy1=function(t){var e=[];for(var r=0;r<t;r++){var a=this.getUint16();var n=a>>14&3;var i=a&16383;e.push(a===Wi?undefined:{tariff:n,energy:i})}return e};Ki.prototype.setHalfHourEnergy1=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e],a=r.tariff,n=r.energy;var i=a<<14|n;this.setUint16(i===undefined?Wi:i)}}};Ki.prototype.getHalfHourEnergy3=function(t){var e=[];for(var r=0;r<t;r++){var a=this.getUint16();e.push(a===Wi?undefined:a)}return e};Ki.prototype.setHalfHourEnergy3=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?Wi:r)}}};Ki.prototype.getHalfHourEnergies1=function(t,e){var r=this;var a={};xi.forEach(function(n){if(t[n]){a[n]=r.getHalfHourEnergy1(e)}});return a};Ki.prototype.getHalfHourEnergies3=function(t,e){var r=this;var a={};xi.forEach(function(n){if(t[n]){a[n]=r.getHalfHourEnergy3(e)}});return a};Ki.prototype.setHalfHourEnergies1=function(t){var e=this;xi.forEach(function(r){e.setHalfHourEnergy1(t[r])})};Ki.prototype.setHalfHourEnergies3=function(t){var e=this;xi.forEach(function(r){e.setHalfHourEnergy3(t[r])})};Ki.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&Xi["A+"]){e["A+"]=this.getUint32()}if(t&Xi["A+R+"]){e["A+R+"]=this.getUint32()}if(t&Xi["A+R-"]){e["A+R-"]=this.getUint32()}return e};Ki.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};Ki.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&Xi["A-"]){e["A-"]=this.getUint32()}if(t&Xi["A-R+"]){e["A-R+"]=this.getUint32()}if(t&Xi["A-R-"]){e["A-R-"]=this.getUint32()}return e};Ki.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};Ki.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(Yi).fill(null);for(var a=0;a<Yi;a++){if(e&wi(a)){r[a]=this.getAPlusTariffEnergies(t)}}for(var n=0;n<Yi;n++){if(e&Bi(n)){r[n]={...r[n],...this.getAMinusTariffEnergies(t)}}}return r};Ki.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var a=0;t.forEach(function(t,e){if(t){r|=Gi(t);a|=bi(e,t)}});this.setUint8(r);this.setUint8(a);t.forEach(function(t){return e.setAPlusTariffEnergies(t)});t.forEach(function(t){return e.setAMinusTariffEnergies(t)})};Ki.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};Ki.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,a=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(a)}};Ki.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&Xi["A+"]){e["A+"]=this.getPowerMax()}if(t&Xi["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&Xi["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};Ki.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};Ki.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&Xi["A-"]){e["A-"]=this.getPowerMax()}if(t&Xi["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&Xi["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};Ki.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};Ki.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(Yi).fill(null);for(var a=0;a<Yi;a++){if(e&wi(a)){r[a]=this.getAPlusTariffPowerMax(t)}}for(var n=0;n<Yi;n++){if(e&Bi(n)){r[n]={...r[n],...this.getAMinusTariffPowerMax(t)}}}return r};Ki.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var a=0;t.forEach(function(t,e){if(t){r|=Gi(t);a|=bi(e,t)}});this.setUint8(r);this.setUint8(a);t.forEach(function(t){return e.setAPlusTariffPowerMax(t)});t.forEach(function(t){return e.setAMinusTariffPowerMax(t)})};var zi=mt;var Qi=function(t){var e=new Ki(t);return{date:e.getDate(),energies:e.getTariffsEnergies()}};var Zi=255;var ji=et;var ki=function(t){var e=t.indexOf(Zi);var r=e===-1?t:t.slice(0,e);return{periods:v(r).map(Yn.getDayProfileFromByte)}};Vt(Dt);var qi=d;var $i=function(t){var e=new Yn(t);return e.getDeviceId()};var Ji=P;var tE=function(t){var e=new Yn(t);return e.getDeviceType()};var eE=1;var rE=2;var aE=3;var nE=4;var iE=5;var EE=6;var _E=7;var sE=8;var oE=9;var vE=10;var AE=11;var TE=12;var RE=13;var hE=14;var uE=15;var fE=16;var gE=17;var OE=18;var lE=19;var PE=20;var dE=21;var cE=22;var UE=23;var pE=24;var IE=25;var NE=26;var ME=28;var CE=30;var DE=31;var mE=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:nE,ACTIVE_ENERGY_T2:iE,ACTIVE_ENERGY_T3:EE,ACTIVE_ENERGY_T4:_E,ACTIVE_POWER_IN_NEUTRAL:oE,ACTIVE_POWER_PER_PHASE:sE,BATTERY_VOLTAGE:cE,CURRENT_BALANCE:CE,CURRENT_IN_NEUTRAL:AE,CURRENT_IN_PHASE:vE,DATE_MONTH_YEAR:hE,EXPORTED_ACTIVE_ENERGY_T1:fE,EXPORTED_ACTIVE_ENERGY_T2:gE,EXPORTED_ACTIVE_ENERGY_T3:OE,EXPORTED_ACTIVE_ENERGY_T4:lE,HOUR_MINUTE_SECOND:RE,MAGNET_INDUCTION:ME,OPTOPORT_SPEED:DE,POWER_FACTOR_PHASE_A:PE,POWER_FACTOR_PHASE_B:dE,POWER_THRESHOLD_T1:UE,POWER_THRESHOLD_T2:pE,POWER_THRESHOLD_T3:IE,POWER_THRESHOLD_T4:NE,SET_ALL_SEGMENT_DISPLAY:eE,SOFTWARE_VERSION:rE,TOTAL_ACTIVE_ENERGY:aE,TOTAL_EXPORTED_ACTIVE_ENERGY:uE,VOLTAGE:TE});Vt(mE);var SE=3+1;var yE=4;var LE=j;var VE=SE+255*yE;var FE=function(t){return function(e){if(e.length>VE){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var r=new t(e);var a=r.getDate();var n=r.getUint8();var i=[];while(!r.isEmpty){i.push(r.getEvent())}return{date:a,eventsNumber:n,events:i}}};var HE=FE(Yn);var YE=14;var xE=20;var WE=k;var XE=function(t){if(t.length!==YE&&t.length!==xE){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Yn(t);var r=e.getUint16();var a=e.getUint16();var n=e.getUint16();var i=e.getUint16();var E=e.getUint16();var _=e.getUint16();var s=e.getUint16();return{accessClosed:_,accessError:E,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:r,setClock:s}};var GE=O;var wE=function(t){var e=new Yn(t,true);return e.getEventStatus()};var BE=dt;var bE=function(t){var e=new Ki(t);var r=e.getDate();var a=e.getEnergiesFlags();var n=e.getUint8();var i=e.getUint8();return{date:r,firstHalfhour:n,halfhoursNumber:i,energies:e.getHalfHourEnergies1(a,i)}};var KE=Pt;var zE=function(t){var e=new Yn(t);return{induction:e.getUint16(),threshold:e.getUint16(),inductionCoefficient:e.getUint16()/100,reserved:e.getUint32()}};var QE=Ct;var ZE=function(t){var e=s(t,1),r=e[0];return{ten:r}};var jE=Ut;var kE=function(t){var e=new Yn(t);return e.getOperatorParametersExtended3()};var qE=B;var $E=1+An*2;var JE=function(t){if(t.length!==$E){throw new Error("Invalid getRatePlanInfo data size.")}var e=new Yn(t);return{tariffTable:e.getUint8(),activePlan:e.getTariffPlan(),passivePlan:e.getTariffPlan()}};var t_=G;var e_=29;var r_=function(t){if(t.length!==e_){throw new Error("Invalid getSaldo data size.")}var e=new Yn(t);return{currentSaldo:e.getInt32(),count:e.getUint8(),energy:new Array(4).fill(0).map(function(){return e.getInt32()}),beginSaldoOfPeriod:e.getInt32(),date:{month:e.getUint8(),date:e.getUint8(),hours:e.getUint8(),minutes:e.getUint8()}}};var a_=K;var n_=37;var i_=function(t){if(t.length!==n_){throw new Error("Invalid getSaldoParameters data size.")}var e=new Yn(t);return e.getSaldoParameters()};var E_=rt;var __=function(t){var e=new Yn(t);return e.getSeasonProfile()};var s_=at;var o_=function(t){var e=new Yn(t);return e.getSpecialDay()};var v_=X;var A_=function(t){return{version:String.fromCharCode.apply(null,v(t))}};var T_=S;var R_=0;var h_=function(t){if(t.length!==R_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var u_=q;var f_=0;var g_=function(t){if(t.length!==f_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var O_=$;var l_=0;var P_=function(t){if(t.length!==l_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var d_=Et;var c_=0;var U_=function(t){if(t.length!==c_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var p_=p;var I_=0;var N_=function(t){if(t.length!==I_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var M_=ft;var C_=0;var D_=function(t){if(t.length!==C_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var m_=Y;var S_=0;var y_=function(t){if(t.length!==S_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var L_=U;var V_=0;var F_=function(t){if(t.length!==V_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var H_=M;var Y_=0;var x_=function(t){if(t.length!==Y_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var W_=gt;var X_=0;var G_=function(t){if(t.length!==X_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var w_=W;var B_=0;var b_=function(t){if(t.length!==B_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var K_=pt;var z_=0;var Q_=function(t){if(t.length!==z_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Z_=w;var j_=0;var k_=function(t){if(t.length!==j_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var q_=z;var $_=0;var J_=function(t){if(t.length!==$_){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ts=C;var es=0;var rs=function(t){if(t.length!==es){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var as=D;var ns=0;var is=function(t){if(t.length!==ns){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Es=lt;var _s=function(t){var e=new Yn(t);var r=e.getUint8();var a=!!(r&1);var n=!!(r&2);return{electroMagneticIndication:a,magneticIndication:n}};var ss=H;var os=0;var vs=function(t){if(t.length!==os){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var As=F;var Ts=0;var Rs=function(t){if(t.length!==Ts){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var hs={encrypt:function(){},decrypt:function(){}};var us=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach(function(t){r^=t});return r};var fs=3;var gs=2;var Os=2;var ls=function(t,e){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var E=s(r,2),_=E[0],o=E[1];var A=o&fs;var T={messageId:_,accessLevel:A,commands:i,bytes:r,lrc:{received:undefined,calculated:0}};var R=r.slice(gs);var h;if(n&&A!==g){R=v(hs.decrypt(n,R))}var u=R[R.length-1];R=R.slice(0,-1);var f=us(R);if(A!==g||u!==0){if(u!==f){h="Mismatch LRC."}}var O=R[0]&fs;var l=R.slice(1);if(A!==O){h="Mismatch access levels."}var P=0;do{var d=l[P];var c=l[P+1];var U=Os+c;var p=l.slice(P+Os,P+U);var I={id:d,name:e[d],headerSize:Os,bytes:l.slice(P,P+U)};if(!d){break}try{if(!t[d]){throw new Error("Unsupported command id: ".concat(d,"!"))}I.parameters=t[d](p,a);i.push(I)}catch(t){i.push({command:I,error:t.message})}P+=U}while(P<=l.length);T.lrc.calculated=f;T.lrc.received=u;if(h){return{message:T,error:h}}return T}};var Ps=1;var ds=3;var cs=4;var Us=5;var ps=7;var Is=8;var Ns=9;var Ms=13;var Cs=15;var Ds=16;var ms=17;var Ss=18;var ys=19;var Ls=20;var Vs=21;var Fs=22;var Hs=23;var Ys=24;var xs=25;var Ws=28;var Xs=30;var Gs=31;var ws=40;var Bs=41;var bs=42;var Ks=44;var zs=46;var Qs=47;var Zs=49;var js=50;var ks=51;var qs=52;var $s=53;var Js=54;var to=57;var eo=58;var ro=59;var ao=60;var no=61;var io=62;var Eo=63;var _o=64;var so=69;var oo=70;var vo=71;var Ao=72;var To=73;var Ro=78;var ho=79;var uo=80;var fo=82;var go=83;var Oo=84;var lo=85;var Po=86;var co=88;var Uo=89;var po=90;var Io=92;var No=93;var Mo=94;var Co=100;var Do=109;var mo=111;var So=112;var yo=113;var Lo=114;var Vo=116;var Fo=117;var Ho=118;var Yo=122;var xo=Object.freeze({__proto__:null,activateRatePlan:ys,getBuildVersion:So,getCorrectTime:io,getCriticalEvent:Po,getCurrentStatusMeter:to,getCurrentValues:Ms,getDateTime:ps,getDayDemand:Fs,getDayDemandExport:ho,getDayMaxDemand:Zs,getDayMaxDemandExport:co,getDayProfile:ro,getDemand:Ho,getDeviceId:Us,getDeviceType:cs,getDisplayParam:Mo,getEnergy:Cs,getEnergyDayPrevious:ds,getEnergyExport:Ro,getEnergyExportDayPrevious:uo,getEventStatus:Ps,getEvents:ks,getEventsCounters:qs,getExtendedCurrentValues:eo,getHalfHourDemand:Vs,getHalfHourDemandChannel:po,getHalfHourDemandExport:go,getHalfHourDemandVare:To,getHalfHourDemandVareExport:lo,getHalfHourDemandVari:Ao,getHalfHourDemandVariExport:Oo,getHalfHourEnergies:mo,getMagneticFieldThreshold:Do,getMeterInfo:Yo,getMonthDemand:Hs,getMonthDemandExport:fo,getMonthMaxDemand:js,getMonthMaxDemandExport:Uo,getOperatorParameters:Xs,getOperatorParametersExtended:Eo,getOperatorParametersExtended2:vo,getOperatorParametersExtended3:yo,getOperatorParametersExtended4:Fo,getRatePlanInfo:Ks,getSaldo:Bs,getSaldoParameters:zs,getSeasonProfile:ao,getSpecialDay:no,getVersion:ws,prepareRatePlan:Ls,resetPowerMaxDay:$s,resetPowerMaxMonth:Js,runTariffPlan:oo,setAccessKey:Ns,setCorrectDateTime:Io,setCorrectTime:Ws,setDateTime:Is,setDayProfile:Ds,setDisplayParam:No,setOperatorParameters:Gs,setOperatorParametersExtended:_o,setOperatorParametersExtended2:so,setOperatorParametersExtended3:Lo,setOperatorParametersExtended4:Vo,setSaldo:bs,setSaldoParameters:Qs,setSeasonProfile:ms,setSpecialDay:Ss,setSpecialOperation:Co,turnRelayOff:xs,turnRelayOn:Ys});var Wo=120;var Xo=254;var Go=Object.freeze({__proto__:null,activateRatePlan:ys,errorResponse:Xo,getBuildVersion:So,getCorrectTime:io,getCriticalEvent:Po,getCurrentStatusMeter:to,getCurrentValues:Ms,getDateTime:ps,getDayDemand:Fs,getDayDemandExport:ho,getDayEnergies:Wo,getDayMaxDemand:Zs,getDayMaxDemandExport:co,getDayProfile:ro,getDemand:Ho,getDeviceId:Us,getDeviceType:cs,getDisplayParam:Mo,getEnergy:Cs,getEnergyDayPrevious:ds,getEnergyExport:Ro,getEnergyExportDayPrevious:uo,getEventStatus:Ps,getEvents:ks,getEventsCounters:qs,getExtendedCurrentValues:eo,getHalfHourDemand:Vs,getHalfHourDemandChannel:po,getHalfHourDemandExport:go,getHalfHourDemandVare:To,getHalfHourDemandVareExport:lo,getHalfHourDemandVari:Ao,getHalfHourDemandVariExport:Oo,getHalfHourEnergies:mo,getMagneticFieldThreshold:Do,getMeterInfo:Yo,getMonthDemand:Hs,getMonthDemandExport:fo,getMonthMaxDemand:js,getMonthMaxDemandExport:Uo,getOperatorParameters:Xs,getOperatorParametersExtended:Eo,getOperatorParametersExtended2:vo,getOperatorParametersExtended3:yo,getOperatorParametersExtended4:Fo,getRatePlanInfo:Ks,getSaldo:Bs,getSaldoParameters:zs,getSeasonProfile:ao,getSpecialDay:no,getVersion:ws,prepareRatePlan:Ls,resetPowerMaxDay:$s,resetPowerMaxMonth:Js,runTariffPlan:oo,setAccessKey:Ns,setCorrectDateTime:Io,setCorrectTime:Ws,setDateTime:Is,setDayProfile:Ds,setDisplayParam:No,setOperatorParameters:Gs,setOperatorParametersExtended:_o,setOperatorParametersExtended2:so,setOperatorParametersExtended3:Lo,setOperatorParametersExtended4:Vo,setSaldo:bs,setSaldoParameters:Qs,setSeasonProfile:ms,setSpecialDay:Ss,setSpecialOperation:Co,turnRelayOff:xs,turnRelayOn:Ys});var wo=Vt(Go);var Bo=Ai;var bo=Ti(wo);var Ko=Po;var zo=9;var Qo=function(t){if(t.length!==zo){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=s(t,9),r=e[0],a=e[1],n=e[2],i=e[3],E=e[4],_=e[5],o=e[6],v=e[7],A=e[8];return{event:r,name:Vi[r],index:a,date:{year:n,month:i,date:E,hours:_,minutes:o,seconds:v},count:A}};Vt(xo);var Zo=1;var jo=2;var ko=3;var qo=4;var $o=17;var Jo=18;var tv=19;var ev=20;var rv=21;var av=22;var nv=23;var iv=32;var Ev=33;var _v=34;var sv=35;var ov=36;var vv=37;var Av=38;var Tv=39;var Rv=40;var hv=49;var uv=50;var fv=51;var gv=52;var Ov=53;var lv=54;var Pv=55;var dv=56;var cv=57;var Uv=64;var pv=65;var Iv=66;var Nv=67;var Mv=68;var Cv=69;var Dv=70;var mv=71;var Sv=72;var yv=73;var Lv=74;var Vv=75;var Fv=76;var Hv=77;var Yv=78;var xv=79;var Wv=80;var Xv=81;var Gv=82;var wv=83;var Bv=84;var bv=85;var Kv=86;var zv=87;var Qv=88;var Zv=89;var jv=90;var kv=91;var qv=92;var $v=93;var Jv=94;var tA=95;var eA=96;var rA=97;var aA=98;var nA=99;var iA=100;var EA=101;var _A=102;var sA=103;var oA=104;var vA=105;var AA=106;var TA=107;var RA=108;var hA=109;var uA=110;var fA=111;var gA=112;var OA=113;var lA=114;var PA=115;var dA=116;var cA=117;var UA=118;var pA=119;var IA=120;var NA=121;var MA=122;var CA=123;var DA=124;var mA=125;var SA=126;var yA=127;var LA=128;var VA=129;var FA=130;var HA=131;var YA=132;var xA=133;var WA=134;var XA=135;var GA=136;var wA=137;var BA=138;var bA=139;var KA=140;var zA=141;var QA=142;var ZA=143;var jA=144;var kA=145;var qA=147;var $A=148;var JA=149;var tT=150;var eT=151;var rT=152;var aT=153;var nT=154;var iT=155;var ET=156;var _T=157;var sT=158;var oT=159;var vT=160;var AT=161;var TT=162;var RT=163;var hT=164;var uT=165;var fT=166;var gT=167;var OT=168;var lT=169;var PT=170;var dT=171;var cT=172;var UT=173;var pT=174;var IT=175;var NT=176;var MT=177;var CT=178;var DT=179;var mT=224;var ST=225;var yT=226;var LT=227;var VT=228;var FT=229;var HT=230;var YT=231;var xT=232;var WT=Object.freeze({__proto__:null,ACCESS_LOCKED:$o,ACCESS_UNLOCKED:Jo,ACCUMULATION_PARAM_BAD:xA,ACCUMULATION_PARAM_EXT_BAD:WA,BAD_TEST_EEPROM:VA,BAD_TEST_FRAM:FA,BATTERY_FAULT:vA,BATTERY_OK:oA,BLOCK_TARIFF_BAD:GA,CALCULATION_PERIOD_BAD:XA,CALIBRATION_FAULT:TA,CALIBRATION_FLAG_RESET:LA,CALIBRATION_FLAG_SET:yA,CALIBRATION_OK:AA,CALIBRATION_PARAM_BAD:wA,CASE_CLOSE:rv,CASE_KLEMA_CLOSE:eT,CASE_KLEMA_OPEN:tT,CASE_MODULE_CLOSE:iT,CASE_MODULE_OPEN:nT,CASE_OPEN:ev,CHANGE_ACCESS_KEY0:iv,CHANGE_ACCESS_KEY1:Ev,CHANGE_ACCESS_KEY2:_v,CHANGE_ACCESS_KEY3:sv,CHANGE_COR_TIME:gA,CHANGE_PARAMETERS_LOCAL:ov,CHANGE_PARAMETERS_REMOTE:vv,CHANGE_PARAM_CHANNEL1:sT,CHANGE_PARAM_CHANNEL2:oT,CHANGE_PARAM_CHANNEL3:vT,CHANGE_PARAM_CHANNEL4:AT,CHANGE_PARAM_CHANNEL5:TT,CHANGE_PARAM_CHANNEL6:RT,CHANGE_TARIFF_TABLE:uv,CHANGE_TARIFF_TABLE_2:rT,CHANGE_TARIFF_TABLE_3:aT,CLOCK_FAULT:rA,CLOCK_OK:eA,CMD_CHANGE_TIME:Av,CMD_RELAY_2_OFF:lA,CMD_RELAY_2_ON:OA,CMD_RELAY_OFF:Rv,CMD_RELAY_ON:Tv,COEFFICIENT_TRANSFORMATION_CHANGE:ZA,CROSS_ZERO_ENT1:PA,CROSS_ZERO_ENT2:dA,CROSS_ZERO_ENT3:cA,CROSS_ZERO_ENT4:UA,CROSS_ZERO_EXPORT_ENT1:hT,CROSS_ZERO_EXPORT_ENT2:uT,CROSS_ZERO_EXPORT_ENT3:fT,CROSS_ZERO_EXPORT_ENT4:gT,CROSS_ZERO_EXPORT_VARE1:cT,CROSS_ZERO_EXPORT_VARE2:UT,CROSS_ZERO_EXPORT_VARE3:pT,CROSS_ZERO_EXPORT_VARE4:IT,CROSS_ZERO_EXPORT_VARI1:OT,CROSS_ZERO_EXPORT_VARI2:lT,CROSS_ZERO_EXPORT_VARI3:PT,CROSS_ZERO_EXPORT_VARI4:dT,CROSS_ZERO_VARE1:CA,CROSS_ZERO_VARE2:DA,CROSS_ZERO_VARE3:mA,CROSS_ZERO_VARE4:SA,CROSS_ZERO_VARI1:pA,CROSS_ZERO_VARI2:IA,CROSS_ZERO_VARI3:NA,CROSS_ZERO_VARI4:MA,EM_MAGNETIC_OFF:MT,EM_MAGNETIC_ON:NT,ENERGY_REGISTER_OVERFLOW:hv,ENERGY_T1_FAULT:Zo,ENERGY_T2_FAULT:jo,ENERGY_T3_FAULT:ko,ENERGY_T4_FAULT:qo,ERR_ACCESS:tv,F_MAX_OK:Fv,F_MAX_OVER:Hv,F_MIN_OK:Yv,F_MIN_UNDER:xv,IA_MAX_OK:Bv,IA_MAX_OVER:bv,IB_MAX_OK:Kv,IB_MAX_OVER:zv,IC_MAX_OK:Qv,IC_MAX_OVER:Zv,IDIFF_OK:Jv,IDIFF_OVER:tA,MAGNETIC_OFF:nv,MAGNETIC_ON:av,METER_TROUBLE:JA,OP_PARAM_BAD:bA,OP_PARAM_EXT_BAD:KA,O_PARAMETERS_FAULT:fA,O_PARAMETERS_OK:uA,PA_MAX_OK:jv,PA_MAX_OVER:kv,POWER_A_OFF:sA,POWER_A_ON:_A,POWER_B_OFF:EA,POWER_B_ON:iA,POWER_C_OFF:nA,POWER_C_ON:aA,POWER_OVER_RELAY_OFF:_T,PV_MAX_OK:qv,PV_MAX_OVER:$v,P_MAX_A_MINUS_OK:YT,P_MAX_A_MINUS_OVER:xT,RELAY_HARD_BAD_OFF:jA,RELAY_HARD_BAD_ON:qA,RELAY_HARD_OFF:$A,RELAY_HARD_ON:kA,RELAY_OFF:Pv,RELAY_ON:lv,RESET_EM_FLAG:CT,RESET_MAGNETIC_FLAG:DT,RESTART:dv,SALDO_ENERGY_BAD:zA,SALDO_PARAM_BAD:YA,SET_DEMAND_EN_10_MIN:LT,SET_DEMAND_EN_15_MIN:VT,SET_DEMAND_EN_1_MIN:mT,SET_DEMAND_EN_30_MIN:FT,SET_DEMAND_EN_3_MIN:ST,SET_DEMAND_EN_5_MIN:yT,SET_DEMAND_EN_60_MIN:HT,SET_NEW_SALDO:HA,SET_SALDO_PARAM:ET,SET_TARIFF_TABLE:fv,SUMMER_TIME:gv,TIME_CORRECT:QA,T_MAX_OK:Wv,T_MAX_OVER:Xv,T_MIN_OK:Gv,T_MIN_UNDER:wv,VA_MAX_OK:Uv,VA_MAX_OVER:pv,VA_MIN_OK:Iv,VA_MIN_UNDER:Nv,VB_MAX_OK:Mv,VB_MAX_OVER:Cv,VB_MIN_OK:Dv,VB_MIN_UNDER:mv,VC_MAX_OK:Sv,VC_MAX_OVER:yv,VC_MIN_OK:Lv,VC_MIN_UNDER:Vv,V_PARAMETERS_FAULT:hA,V_PARAMETERS_OK:RA,WD_RESTART:cv,WINTER_SUMMER_BAD:BA,WINTER_TIME:Ov});var XT=Vt(WT);var GT=1;var wT=2;var BT=3;var bT=4;var KT=5;var zT=6;var QT=7;var ZT=8;var jT=9;var kT=10;var qT=11;var $T=12;var JT=13;var tR=14;var eR=15;var rR=16;var aR=17;var nR=18;var iR=19;var ER=20;var _R=21;var sR=22;var oR=23;var vR=24;var AR=25;var TR=26;var RR=27;var hR=28;var uR=29;var fR=30;var gR=31;var OR=32;var lR=33;var PR=34;var dR=35;var cR=36;var UR=37;var pR=38;var IR=39;var NR=40;var MR=41;var CR=42;var DR=43;var mR=44;var SR=45;var yR=46;var LR=47;var VR=48;var FR=49;var HR=50;var YR=51;var xR=52;var WR=53;var XR=54;var GR=55;var wR=56;var BR=57;var bR=58;var KR=59;var zR=60;var QR=61;var ZR=62;var jR=63;var kR=64;var qR=65;var $R=66;var JR=67;var th=68;var eh=69;var rh=70;var ah=71;var nh=72;var ih=73;var Eh=74;var _h=75;var sh=76;var oh=77;var vh=78;var Ah=79;var Th=80;var Rh=81;var hh=82;var uh=83;var fh=84;var gh=85;var Oh=86;var lh=87;var Ph=88;var dh=89;var ch=90;var Uh=91;var ph=92;var Ih=93;var Nh=94;var Mh=95;var Ch=96;var Dh=97;var mh=98;var Sh=99;var yh=100;var Lh=101;var Vh=102;var Fh=103;var Hh=104;var Yh=105;var xh=106;var Wh=107;var Xh=108;var Gh=109;var wh=110;var Bh=111;var bh=112;var Kh=113;var zh=114;var Qh=115;var Zh=116;var jh=117;var kh=118;var qh=119;var $h=120;var Jh=121;var tu=122;var eu=123;var ru=124;var au=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:bT,ACTIVE_ENERGY_T2:KT,ACTIVE_ENERGY_T3:zT,ACTIVE_ENERGY_T4:QT,ACTIVE_POWER_PHASE_A:DR,ACTIVE_POWER_PHASE_B:mR,ACTIVE_POWER_PHASE_C:SR,APPARENT_POWER_QMINUS_PHASE_A:jR,APPARENT_POWER_QMINUS_PHASE_B:kR,APPARENT_POWER_QMINUS_PHASE_C:qR,APPARENT_POWER_QPLUS_PHASE_A:KR,APPARENT_POWER_QPLUS_PHASE_B:zR,APPARENT_POWER_QPLUS_PHASE_C:QR,BATTERY_VOLTAGE:NR,CURRENT_BALANCE:kh,CURRENT_IN_NEUTRAL:cR,CURRENT_IN_PHASE_A:lR,CURRENT_IN_PHASE_B:PR,CURRENT_IN_PHASE_C:dR,CURRENT_TRANSFORMATION_RATIO:Zh,DATE_MONTH_YEAR:Qh,EXPORTED_ACTIVE_ENERGY_T1:iR,EXPORTED_ACTIVE_ENERGY_T2:ER,EXPORTED_ACTIVE_ENERGY_T3:_R,EXPORTED_ACTIVE_ENERGY_T4:sR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:uR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:fR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:gR,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:OR,EXPORTED_REACTIVE_ENERGY_T1:vR,EXPORTED_REACTIVE_ENERGY_T2:AR,EXPORTED_REACTIVE_ENERGY_T3:TR,EXPORTED_REACTIVE_ENERGY_T4:RR,HOUR_MINUTE_SECOND:zh,MAGNET_INDUCTION:ru,MAX_ACTIVE_POWER_DAY_T1:$R,MAX_ACTIVE_POWER_DAY_T2:JR,MAX_ACTIVE_POWER_DAY_T3:th,MAX_ACTIVE_POWER_DAY_T4:eh,MAX_ACTIVE_POWER_MONTH_T1:rh,MAX_ACTIVE_POWER_MONTH_T2:ah,MAX_ACTIVE_POWER_MONTH_T3:nh,MAX_ACTIVE_POWER_MONTH_T4:ih,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:ch,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:Uh,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:ph,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:Ih,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:Nh,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:Mh,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:Ch,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:Dh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:xh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:Wh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:Xh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:Gh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:wh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:Bh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:bh,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:Kh,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:mh,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:Sh,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:yh,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:Lh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:Vh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:Fh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:Hh,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:Yh,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:hh,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:uh,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:fh,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:gh,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:Oh,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:lh,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:Ph,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:dh,MAX_REACTIVE_POWER_DAY_T1:Eh,MAX_REACTIVE_POWER_DAY_T2:_h,MAX_REACTIVE_POWER_DAY_T3:sh,MAX_REACTIVE_POWER_DAY_T4:oh,MAX_REACTIVE_POWER_MONTH_T1:vh,MAX_REACTIVE_POWER_MONTH_T2:Ah,MAX_REACTIVE_POWER_MONTH_T3:Th,MAX_REACTIVE_POWER_MONTH_T4:Rh,NEGATIVE_REACTIVE_ENERGY_T1:tR,NEGATIVE_REACTIVE_ENERGY_T2:eR,NEGATIVE_REACTIVE_ENERGY_T3:rR,NEGATIVE_REACTIVE_ENERGY_T4:aR,OPTOPORT_SPEED:eu,POWER_FACTOR_PHASE_A:GR,POWER_FACTOR_PHASE_B:wR,POWER_FACTOR_PHASE_C:BR,POWER_THRESHOLD_T1:qh,POWER_THRESHOLD_T2:$h,POWER_THRESHOLD_T3:Jh,POWER_THRESHOLD_T4:tu,REACTIVE_ENERGY_T1:jT,REACTIVE_ENERGY_T2:kT,REACTIVE_ENERGY_T3:qT,REACTIVE_ENERGY_T4:$T,REACTIVE_POWER_QMINUS_PHASE_A:YR,REACTIVE_POWER_QMINUS_PHASE_B:xR,REACTIVE_POWER_QMINUS_PHASE_C:WR,REACTIVE_POWER_QPLUS_PHASE_A:LR,REACTIVE_POWER_QPLUS_PHASE_B:VR,REACTIVE_POWER_QPLUS_PHASE_C:FR,SET_ALL_SEGMENT_DISPLAY:GT,SOFTWARE_VERSION:wT,SUPPLY_FREQUENCY:MR,TOTAL_ACTIVE_ENERGY:BT,TOTAL_ACTIVE_POWER:CR,TOTAL_APPARENT_POWER_QMINUS:ZR,TOTAL_APPARENT_POWER_QPLUS:bR,TOTAL_EXPORTED_ACTIVE_ENERGY:nR,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:hR,TOTAL_EXPORTED_REACTIVE_ENERGY:oR,TOTAL_NEGATIVE_REACTIVE_ENERGY:JT,TOTAL_POWER_FACTOR:XR,TOTAL_REACTIVE_ENERGY:ZT,TOTAL_REACTIVE_POWER_QMINUS:HR,TOTAL_REACTIVE_POWER_QPLUS:yR,VOLTAGE_IN_PHASE_A:UR,VOLTAGE_IN_PHASE_B:pR,VOLTAGE_IN_PHASE_C:IR,VOLTAGE_TRANSFORMATION_RATIO:jh});Vt(au);var nu=2400;var iu=9600;var Eu={plc:{0:iu,2:nu,4:iu},optoport:{0:nu,2:nu,4:iu}};var _u={plc:Vt(Eu.plc),optoport:Vt(Eu.optoport)};var su=1;var ou=2;var vu=4;var Au={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var Tu={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,SUPPLY_FREQUENCY:1<<8,TOTAL_ACTIVE_POWER:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,TOTAL_REACTIVE_POWER_QPLUS:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,TOTAL_REACTIVE_POWER_QMINUS:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,TOTAL_POWER_FACTOR:1<<21,POWER_FACTOR_PHASE_A:1<<22,POWER_FACTOR_PHASE_B:1<<23,POWER_FACTOR_PHASE_C:1<<24,TOTAL_APPARENT_POWER_QPLUS:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,TOTAL_APPARENT_POWER_QMINUS:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var Ru={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var hu={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<9,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<10,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<11,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<12,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<13,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<14,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<15,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25};var uu={...hu,SORT_DISPLAY_SCREENS:1<<29,AUTO_SCREEN_SCROLLING:1<<31};var fu={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var gu={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_1:1<<3,RELAY_ON_TARIFF_2:1<<4,RELAY_ON_TARIFF_3:1<<5,RELAY_ON_TARIFF_4:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_1:1<<10,RELAY_OFF_TARIFF_2:1<<11,RELAY_OFF_TARIFF_3:1<<12,RELAY_OFF_TARIFF_4:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_CURRENT_BAD:1<<16,RELAY_OFF_LIM_TARIFF_1:1<<17,RELAY_OFF_LIM_TARIFF_2:1<<18,RELAY_OFF_LIM_TARIFF_3:1<<19,RELAY_OFF_LIM_TARIFF_4:1<<20,RELAY_OFF_LIM_VAR_TARIFF_1:1<<21,RELAY_OFF_LIM_VAR_TARIFF_2:1<<22,RELAY_OFF_LIM_VAR_TARIFF_3:1<<23,RELAY_OFF_LIM_VAR_TARIFF_4:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var Ou={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var lu={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var Pu={...hu,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27};var du={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var cu=function(t){return{plc:Eu.plc[ve(t,4,1)],optoport:Eu.optoport[ve(t,4,5)]}};var Uu=function(t){var e=0;e=Ae(e,4,1,Number(_u.plc[t.plc]));e=Ae(e,4,5,Number(_u.optoport[t.optoport]));return e};function pu(t,e,r){var a=r>>vu;var n=[];var i=[];var E=[];for(var _=0;_<Rn;_++){var s=!!ve(a,1,_+1);if(s){n.push(t.getInt32());i.push(t.getInt32());E.push(t.getInt32())}else{n.push(null);i.push(null);E.push(null)}}return{wh:n,vari:i,vare:E}}function Iu(t,e){var r=e.wh,a=e.vari,n=e.vare;var i=1+vu;var E=t;for(var _=0;_<Rn;_++){E=Ae(E,1,_+i,Number(!!r[_]&&!!a[_]&&!!n[_]))}return E}function Nu(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;Yn.call(this,t,e)}Nu.prototype=Object.create(Yn.prototype);Nu.prototype.constructor=Nu;Nu.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:oe(Au,4229),displaySet2:oe(Tu,139776),displaySet3:oe(Ru,0),relaySet:oe(gu,771),speedOptoPort:cu(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:oe(Ou,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:oe(uu,2147876864)}};Nu.getDefaultOperatorParametersExtended=function(){return{timeoutRelayOn:1,define1:oe(lu,0),timeoutRelayKey:0,timeoutRelayAuto:5}};Nu.getDefaultOperatorParametersExtended2=function(){return{deltaCorMin:0,timeoutMagnetOff:5,relaySetExt:oe(du,0),timeoutMagnetOn:5,defaultPlcPhase:3,displaySet21:oe(Au,4231),displaySet22:oe(Tu,31597303),displaySet23:oe(Ru,0),displaySet24:oe(Pu,393216),channel1:0,channel2:0,channel3:0,channel4:0,channel5:0,channel6:0,timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};Nu.getDefaultOperatorParametersExtended3=Yn.getDefaultOperatorParametersExtended3;Nu.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:oe(Au,this.getUint32()),displaySet2:oe(Tu,this.getUint32()),displaySet3:oe(Ru,this.getUint32()),relaySet:oe(gu,this.getUint32()),speedOptoPort:cu(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:oe(Ou,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:oe(uu,this.getUint32())}};Nu.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(se(Au,t.displaySet1));this.setUint32(se(Tu,t.displaySet2));this.setUint32(se(Ru,t.displaySet3));this.setUint32(se(gu,t.relaySet));this.setUint8(Uu(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(se(Ou,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(se(uu,t.displaySet4))};Nu.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:oe(lu,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};Nu.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(se(lu,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};Nu.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var a=0;a<Rn;a++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};Nu.prototype.setEnergies=function(t){for(var e=0;e<Rn;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};Nu.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=ve(t,vu,1);var r=pu(this,e,t);return{energyType:e,energies:r}};Nu.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var a=Iu(e,r);var n=a>>vu;this.setUint8(a);for(var i=0;i<Rn;i++){var E=!!ve(n,1,i+1);if(E){this.setInt32(r.wh[i]);this.setInt32(r.vari[i]);this.setInt32(r.vare[i])}}return}for(var _=0;_<Rn;_++){this.setInt32(r.wh[_]);this.setInt32(r.vari[_]);this.setInt32(r.vare[_])}};Nu.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map(function(){var t=e.getUint16();return t===65535?undefined:t})};Nu.prototype.setEnergyPeriods=function(t){var e=this;t.forEach(function(t){return e.setUint16(t===undefined?65535:t)})};Nu.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};Nu.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};Nu.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(Rn).fill(0).map(function(){return t.getMaxDemand()});return{date:e,maxDemands:r}};Nu.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach(function(t){return e.setMaxDemand(t)})};Nu.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(Rn).fill(0).map(function(){return t.getMaxDemand()});return{date:e,maxDemands:r}};Nu.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach(function(t){return e.setMaxDemand(t)})};Nu.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=XT[e];switch(e){case _T:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case Av:case QA:if(r<8){return t}t.newDate=this.getDateTime();break}return t};Nu.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case _T:for(var e of t.power){this.setUint8(e)}break;case Av:case QA:this.setDateTime(t.newDate);break}};Nu.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};Nu.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};Nu.prototype.getOperatorParametersExtended2=function(){var t={deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:oe(du,this.getUint8()),timeoutMagnetOn:this.getUint8(),defaultPlcPhase:this.getUint8(),displaySet21:oe(Au,this.getUint32()),displaySet22:oe(Tu,this.getUint32()),displaySet23:oe(Ru,this.getUint32()),displaySet24:oe(Pu,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};Nu.prototype.setOperatorParametersExtended2=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(se(du,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.defaultPlcPhase);this.setUint32(se(Au,t.displaySet21));this.setUint32(se(Tu,t.displaySet22));this.setUint32(se(Ru,t.displaySet23));this.setUint32(se(Pu,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(e)};Nu.prototype.getOperatorParametersExtended4=function(){return{displaySet5:oe(fu,this.getUint32()),displaySet25:oe(fu,this.getUint32()),displaySet31:oe(Au,this.getUint32()),displaySet32:oe(Tu,this.getUint32()),displaySet33:oe(Ru,this.getUint32()),displaySet34:oe(uu,this.getUint32()),displaySet35:oe(fu,this.getUint32())}};Nu.prototype.setOperatorParametersExtended4=function(t){this.setUint32(se(fu,t.displaySet5));this.setUint32(se(fu,t.displaySet25));this.setUint32(se(Au,t.displaySet31));this.setUint32(se(Tu,t.displaySet32));this.setUint32(se(Ru,t.displaySet33));this.setUint32(se(uu,t.displaySet34));this.setUint32(se(fu,t.displaySet35))};var Mu=to;var Cu=function(t){var e=new Nu(t);var r=e.getUint32();var a=e.getUint32();var n=e.getUint32();var i=e.getUint32();var E=e.getUint32();var _=e.getUint32();e.getUint32();var s=e.getUint32();var o=!!(e.getUint8()&1);var v=e.getUint8();var A=!!(e.getUint8()&1);var T=!!(e.getUint8()&1);var R={"A+":e.getUint8(),maximumPowers:e.getUint8(),"A-":e.getUint8()};var h=e.getUint8();var u=!!(e.getUint8()&1);var f=v|h<<8;return{operatingSeconds:r,tbadVAAll:a,tbadVBAll:n,tbadVCAll:i,tbadIMAXAll:E,tbadPMAXAll:_,tbadFREQ:s,relayStatus:o,statusEvent:oe(Nn,f),centerAlert:A,calEnableFlag:T,currentTariffs:R,isSummerTime:u}};var Du=Ms;var mu=function(t){var e=new Nu(t);return{vaRms:e.getInt32(),vbRms:e.getInt32(),vcRms:e.getInt32(),iaRms:e.getInt32(),ibRms:e.getInt32(),icRms:e.getInt32(),powerA:e.getInt32(),powerB:e.getInt32(),powerC:e.getInt32(),varA:e.getInt32(),varB:e.getInt32(),varC:e.getInt32(),iNeutral:e.getInt32()}};({wh:a(a({},su,{gType:"1.8",rType:"1.8"}),ou,{gType:"2.8"}),vari:a(a({},su,{gType:"5.8",rType:"3.8"}),ou,{gType:"6.8"}),vare:a(a({},su,{gType:"8.8",rType:"4.8"}),ou,{gType:"7.8"})});var Su=51;var yu=Fs;var Lu=function(t){var e=new Nu(t);var r;if(t.length===Su){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var Vu=ho;var Fu=function(t){var e=new Nu(t);return{date:e.getDate(),energies:e.getEnergies()}};var Hu=Zs;var Yu=function(t){var e=new Nu(t);return e.getDayMaxDemandResponse()};var xu=co;var Wu=function(t){var e=new Nu(t);return e.getDayMaxDemandResponse()};var Xu=7;var Gu=Ho;var wu=function(t){if(!t||t.length<Xu){throw new Error("Invalid uplink GetDemand byte length.")}var e=new Nu(t);var r=e.getDemand();if(t.length!==Xu+2*r.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(r.count).fill(0).map(function(){return e.getUint16()});return{...r,demands:a}};var Bu=Mo;var bu=function(t){var e=o(t),r=e[0],a=e.slice(1);return{displayMode:r,order:a}};var Ku=Cs;var zu=function(t){var e=new Nu(t);return e.getEnergies()};var Qu=51;var Zu=ds;var ju=function(t){var e=new Nu(t);var r;if(t.length===Qu){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var ku=Ro;var qu=function(t){var e=new Nu(t);return e.getEnergies()};var $u=uo;var Ju=function(t){var e=new Nu(t);return e.getEnergies()};var tf=eo;var ef=function(t){var e=new Nu(t);return{temperature:e.getInt16(),frequency:e.getUint16(),vPhaseAB:e.getInt32(),vPhaseAC:e.getInt32(),pfA:e.getInt16()/1e3,pfB:e.getInt16()/1e3,pfC:e.getInt16()/1e3,pf:e.getInt16()/1e3,vaA:e.getInt32(),vaB:e.getInt32(),vaC:e.getInt32(),vaSum:e.getInt32(),uBatteryRtc:e.getInt16()}};var rf=Vs;var af=function(t){var e=new Nu(t);var r=t.length>fn;var a=e.getDate();var n=e.getEnergyPeriods(r?un:hn);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var nf=fn+2;var Ef=po;var _f=function(t){var e=new Nu(t);var r=t.length>nf;var a=e.getUint8();var n=e.getUint8();var i=e.getDate();var E=e.getEnergyPeriods(r?un:hn);if(r){return{channel:a,loadProfile:n,date:i,energies:E,dstHour:e.getUint8()}}return{channel:a,loadProfile:n,date:i,energies:E}};var sf=go;var of=function(t){var e=new Nu(t);var r=t.length>fn;var a=e.getDate();var n=e.getEnergyPeriods(r?un:hn);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var vf=To;var Af=function(t){var e=new Nu(t);var r=t.length>fn;var a=e.getDate();var n=e.getEnergyPeriods(r?un:hn);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var Tf=lo;var Rf=function(t){var e=new Nu(t);var r=t.length>fn;var a=e.getDate();var n=e.getEnergyPeriods(r?un:hn);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var hf=Ao;var uf=function(t){var e=new Nu(t);var r=t.length>fn;var a=e.getDate();var n=e.getEnergyPeriods(r?un:hn);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var ff=Oo;var gf=function(t){var e=new Nu(t);var r=t.length>fn;var a=e.getDate();var n=e.getEnergyPeriods(r?un:hn);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var Of=Hs;var lf=function(t){var e=new Nu(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var Pf=fo;var df=function(t){var e=new Nu(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var cf=js;var Uf=function(t){var e=new Nu(t);return e.getMonthMaxDemandResponse()};var pf=Uo;var If=function(t){var e=new Nu(t);return e.getMonthMaxDemandResponse()};var Nf=Xs;var Mf=function(t){var e=new Nu(t);return e.getOperatorParameters()};var Cf=Eo;var Df=function(t){var e=new Nu(t);return e.getOperatorParametersExtended()};var mf=vo;var Sf=function(t){var e=new Nu(t);return e.getOperatorParametersExtended2()};var yf=Fo;var Lf=function(t){var e=new Nu(t);return e.getOperatorParametersExtended4()};var Vf=_o;var Ff=0;var Hf=function(t){if(t.length!==Ff){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Yf=so;var xf=0;var Wf=function(t){if(t.length!==xf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Xf=Vo;var Gf=0;var wf=function(t){if(t.length!==Gf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Bf={};var bf=wo;var Kf=ls(Bf,bf);Bf[Ft]=Yt;Bf[Ri]=ui;Bf[fi]=gi;Bf[Fi]=Hi;Bf[zi]=Qi;Bf[ji]=ki;Bf[qi]=$i;Bf[Ji]=tE;Bf[LE]=HE;Bf[WE]=XE;Bf[GE]=wE;Bf[BE]=bE;Bf[KE]=zE;Bf[QE]=ZE;Bf[jE]=kE;Bf[qE]=JE;Bf[t_]=r_;Bf[a_]=i_;Bf[E_]=__;Bf[s_]=o_;Bf[v_]=A_;Bf[T_]=h_;Bf[u_]=g_;Bf[O_]=P_;Bf[d_]=U_;Bf[p_]=N_;Bf[M_]=D_;Bf[m_]=y_;Bf[L_]=F_;Bf[H_]=x_;Bf[W_]=G_;Bf[w_]=b_;Bf[K_]=Q_;Bf[Z_]=k_;Bf[q_]=J_;Bf[ts]=rs;Bf[as]=is;Bf[Es]=_s;Bf[ss]=vs;Bf[As]=Rs;Bf[Bo]=bo;Bf[Ko]=Qo;Bf[Mu]=Cu;Bf[Du]=mu;Bf[yu]=Lu;Bf[Vu]=Fu;Bf[Hu]=Yu;Bf[xu]=Wu;Bf[Gu]=wu;Bf[Bu]=bu;Bf[Ku]=zu;Bf[Zu]=ju;Bf[ku]=qu;Bf[$u]=Ju;Bf[tf]=ef;Bf[rf]=af;Bf[Ef]=_f;Bf[sf]=of;Bf[vf]=Af;Bf[Tf]=Rf;Bf[hf]=uf;Bf[ff]=gf;Bf[Of]=lf;Bf[Pf]=df;Bf[cf]=Uf;Bf[pf]=If;Bf[Nf]=Mf;Bf[Cf]=Df;Bf[mf]=Sf;Bf[yf]=Lf;Bf[w_]=b_;Bf[Vf]=Hf;Bf[Yf]=Wf;Bf[Xf]=wf;var zf=145;var Qf=30;var Zf=function(t){if(t[0]!==Qf){return{}}var e=t[1];var r=t[3];var a=t.slice(4,e+2);if(r===zf){return a}return null};fromBytes=Kf;getDataSegment=Zf})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
