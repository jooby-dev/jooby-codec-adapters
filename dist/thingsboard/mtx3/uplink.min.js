// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,t=Array(a);e<a;e++)t[e]=r[e];return t}function a(r){if(Array.isArray(r))return r}function e(a){if(Array.isArray(a))return r(a)}function t(r,a,e){return(a=i(a))in r?Object.defineProperty(r,a,{value:e,enumerable:true,configurable:true,writable:true}):r[a]=e,r}function E(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(r,a){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,E,_,v,n=[],A=true,T=false;try{if(_=(e=e.call(r)).next,0===a){if(Object(e)!==e)return;A=!1}else for(;!(A=(t=_.call(e)).done)&&(n.push(t.value),n.length!==a);A=!0);}catch(r){T=true,E=r}finally{try{if(!A&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw E}}return n}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(r,e){return a(r)||_(r,e)||O(r,e)||v()}function T(r){return e(r)||E(r)||O(r)||n()}function R(r,a){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,a);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function i(r){var a=R(r,"string");return"symbol"==typeof a?a:a+""}function O(a,e){if(a){if("string"==typeof a)return r(a,e);var t={}.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(a,e):void 0}}var o=1;var s=3;var f=4;var N=5;var u=7;var C=8;var P=9;var S=13;var D=15;var I=16;var M=17;var l=18;var g=19;var d=20;var c=21;var h=22;var L=23;var V=24;var p=25;var m=28;var y=30;var U=31;var F=40;var H=41;var G=42;var X=44;var W=45;var Y=46;var x=47;var B=49;var w=50;var K=51;var b=52;var Z=53;var Q=54;var j=57;var z=58;var k=59;var $=60;var q=61;var J=62;var rr=65;var ar=70;var er=74;var tr=75;var Er=79;var _r=80;var vr=82;var nr=83;var Ar=88;var Tr=89;var Rr=91;var ir=92;var Or=93;var or=94;var sr=100;var fr=109;var Nr=111;var ur=112;var Cr=113;var Pr=114;var Sr=116;var Dr=117;var Ir=118;var Mr=122;var lr=Object.freeze({__proto__:null,activateRatePlan:g,getBv:ur,getCorrectTime:J,getCriticalEvent:rr,getCurrentStatusMeter:j,getCurrentValues:S,getDateTime:u,getDayDemand:h,getDayDemandExport:Er,getDayMaxDemand:B,getDayMaxDemandExport:Ar,getDayMaxDemandPrevious:er,getDayProfile:k,getDemand:Ir,getDemandParameters:Dr,getDeviceId:N,getDeviceType:f,getDisplayParam:or,getEnergy:D,getEnergyDayPrevious:s,getEnergyExport:Rr,getEnergyExportDayPrevious:_r,getEventStatus:o,getEvents:K,getEventsCounters:b,getExtendedCurrentValues:z,getExtendedCurrentValues2:W,getHalfHourDemand:c,getHalfHourDemandExport:nr,getHalfHourDemandPrevious:tr,getHalfHourEnergies:Nr,getMagneticFieldThreshold:fr,getMeterInfo:Mr,getMonthDemand:L,getMonthDemandExport:vr,getMonthMaxDemand:w,getMonthMaxDemandExport:Tr,getOperatorParameters:y,getOperatorParametersExtended3:Cr,getRatePlanInfo:X,getSaldo:H,getSaldoParameters:Y,getSeasonProfile:$,getSpecialDay:q,getVersion:F,prepareRatePlan:d,resetPowerMaxDay:Z,resetPowerMaxMonth:Q,runTariffPlan:ar,setAccessKey:P,setCorrectDateTime:ir,setCorrectTime:m,setDateTime:C,setDayProfile:I,setDemandParameters:Sr,setDisplayParam:Or,setOperatorParameters:U,setOperatorParametersExtended3:Pr,setSaldo:G,setSaldoParameters:x,setSeasonProfile:M,setSpecialDay:l,setSpecialOperation:sr,turnRelayOff:p,turnRelayOn:V});var gr=120;var dr=121;var cr=254;var hr=255;var Lr=Object.freeze({__proto__:null,activateRatePlan:g,errorDataFrameResponse:hr,errorResponse:cr,getBv:ur,getCorrectTime:J,getCriticalEvent:rr,getCurrentStatusMeter:j,getCurrentValues:S,getDateTime:u,getDayDemand:h,getDayDemandExport:Er,getDayEnergies:gr,getDayMaxDemand:B,getDayMaxDemandExport:Ar,getDayMaxDemandPrevious:er,getDayMaxPower:dr,getDayProfile:k,getDemand:Ir,getDemandParameters:Dr,getDeviceId:N,getDeviceType:f,getDisplayParam:or,getEnergy:D,getEnergyDayPrevious:s,getEnergyExport:Rr,getEnergyExportDayPrevious:_r,getEventStatus:o,getEvents:K,getEventsCounters:b,getExtendedCurrentValues:z,getExtendedCurrentValues2:W,getHalfHourDemand:c,getHalfHourDemandExport:nr,getHalfHourDemandPrevious:tr,getHalfHourEnergies:Nr,getMagneticFieldThreshold:fr,getMeterInfo:Mr,getMonthDemand:L,getMonthDemandExport:vr,getMonthMaxDemand:w,getMonthMaxDemandExport:Tr,getOperatorParameters:y,getOperatorParametersExtended3:Cr,getRatePlanInfo:X,getSaldo:H,getSaldoParameters:Y,getSeasonProfile:$,getSpecialDay:q,getVersion:F,prepareRatePlan:d,resetPowerMaxDay:Z,resetPowerMaxMonth:Q,runTariffPlan:ar,setAccessKey:P,setCorrectDateTime:ir,setCorrectTime:m,setDateTime:C,setDayProfile:I,setDemandParameters:Sr,setDisplayParam:Or,setOperatorParameters:U,setOperatorParametersExtended3:Pr,setSaldo:G,setSaldoParameters:x,setSeasonProfile:M,setSpecialDay:l,setSpecialOperation:sr,turnRelayOff:p,turnRelayOn:V});var Vr=function(r){var a=r.trim();if(!a){return[]}a=a.replace(/0x/g,"").split(/\s+/).map(function(r){return r.padStart(2,"0")}).join("");if(a.length%2!==0){a="0".concat(a)}var e=a.length/2;var t=new Array(e);for(var E=0;E<e;E++){t[E]=parseInt(a.substring(E*2,E*2+2),16)}return t};var pr=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(T(a))};var mr=function(r){var a={};for(var e in r){var t=r[e];a[t]=e}return a};var yr=mr(Lr);var Ur=0;var Fr=128;var Hr=129;var Gr=130;var Xr=131;var Wr=132;var Yr=133;var xr=134;var Br=135;var wr=136;var Kr=137;var br=144;var Zr=145;var Qr=146;var jr=147;var zr=149;var kr=151;var $r=152;var qr=153;var Jr=154;var ra=155;var aa=156;var ea=159;var ta=160;var Ea=240;var _a=Object.freeze({__proto__:null,ACCESS_DENIED:jr,BAD_ARRAY_INDEX:xr,BAD_BLOCK_NUMBER:aa,BAD_DATA_LENGTH:Yr,BAD_MESSAGE:Wr,BAD_RATE_PLAN_ID:wr,BAD_RATE_PLAN_SIZE:Kr,BAD_RESPONSE_LENGTH:br,BAD_SALDO_WRITE:zr,BLOCKED_METER:kr,CALIBRATION_DISABLED:Qr,DECRYPTION_FAILURE:Gr,INTERNAL:Ea,INVALID_CORRECTION_INTERVAL:Jr,NOT_ALIGNED_DATA:Hr,NOT_PREPARED_RATE_PLAN:Br,NO_DATA_FOR_DATE:Zr,OK:Ur,OUT_OFF_RANGE:ea,SET_METER_TYPE_FAILURE:ta,TIME_CORRECTION_FAILURE:qr,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:ra,UNENCRYPTED_COMMAND_DISABLED:$r,UNKNOWN_COMMAND:Fr,UNKNOWN_PROTOCOL:Xr});var va=mr(_a);var na=0;var Aa=1;var Ta=2;var Ra=3;var ia=Object.freeze({__proto__:null,READ_ONLY:Ra,READ_WRITE:Ta,ROOT:Aa,UNENCRYPTED:na});var Oa=hr;var oa=yr[hr];var sa=1;var fa=function(r){if(r.length!==sa){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var a=A(r,1),e=a[0];return{errorCode:e,errorName:va[e]}};var Na={encrypt:function(){},decrypt:function(){}};var ua=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=a;r.forEach(function(r){e^=r});return e};var Ca=2;var Pa=2;var Sa=function(r){var a=A(r,1),e=a[0];if(e===Oa){try{var t=fa(r.slice(Ca));return{id:e,name:oa,headerSize:Ca,bytes:r,parameters:t}}catch{return null}}return null};var Da=function(r,a){var e=A(a,1),t=e[0];var E=Sa(a.slice(Pa-1));var _=Sa(a.slice(Pa));var v={messageId:t,bytes:a};if(E){return{...v,accessLevel:na,commands:[E]}}if(_){return{...v,accessLevel:r,commands:[_]}}return null};var Ia=3;t(t(t(t({},na,0),Ra,1),Ta,2),Aa,3);var Ma=2;var la=2;var ga=function(r,a){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var E=t?.aesKey;var _=[];var v=A(e,2),n=v[0],R=v[1];var i=R&Ia;var O=Da(i,e);var o={messageId:n,accessLevel:i,commands:_,bytes:e,lrc:{received:undefined,calculated:0}};var s=e.slice(Ma);var f;if(O){return O}if(E&&i!==na){s=T(Na.decrypt(E,s))}var N=s[s.length-1];s=s.slice(0,-1);var u=ua(s);if(i!==na||N!==0){if(N!==u){f="Mismatch LRC."}}var C=s[0]&Ia;var P=s.slice(1);if(i!==C){f="Mismatch access levels."}var S=0;do{var D=P[S];var I=P[S+1];var M=la+I;var l=P.slice(S+la,S+M);var g={id:D,name:a[D],headerSize:la,bytes:P.slice(S,S+M)};if(!D){break}try{if(!r[D]){throw new Error("Unsupported command id: ".concat(D,"!"))}g.parameters=r[D](l,t);_.push(g)}catch(r){_.push({command:g,error:r.message})}S+=M}while(S<=P.length);o.lrc.calculated=u;o.lrc.received=N;if(f){return{message:o,error:f}}return o}};var da=1;var ca=3;var ha=4;var La=5;var Va=7;var pa=8;var ma=9;var ya=13;var Ua=15;var Fa=16;var Ha=17;var Ga=18;var Xa=19;var Wa=20;var Ya=21;var xa=22;var Ba=23;var wa=24;var Ka=25;var ba=28;var Za=30;var Qa=31;var ja=40;var za=41;var ka=42;var $a=44;var qa=46;var Ja=47;var re=49;var ae=50;var ee=51;var te=52;var Ee=53;var _e=54;var ve=57;var ne=58;var Ae=59;var Te=60;var Re=61;var ie=62;var Oe=63;var oe=64;var se=69;var fe=70;var Ne=71;var ue=72;var Ce=73;var Pe=78;var Se=79;var De=80;var Ie=82;var Me=83;var le=84;var ge=85;var de=86;var ce=88;var he=89;var Le=90;var Ve=92;var pe=93;var me=94;var ye=100;var Ue=109;var Fe=111;var He=112;var Ge=113;var Xe=114;var We=116;var Ye=117;var xe=118;var Be=122;var we=Object.freeze({__proto__:null,activateRatePlan:Xa,getBv:He,getCorrectTime:ie,getCriticalEvent:de,getCurrentStatusMeter:ve,getCurrentValues:ya,getDateTime:Va,getDayDemand:xa,getDayDemandExport:Se,getDayMaxDemand:re,getDayMaxDemandExport:ce,getDayProfile:Ae,getDemand:xe,getDeviceId:La,getDeviceType:ha,getDisplayParam:me,getEnergy:Ua,getEnergyDayPrevious:ca,getEnergyExport:Pe,getEnergyExportDayPrevious:De,getEventStatus:da,getEvents:ee,getEventsCounters:te,getExtendedCurrentValues:ne,getHalfHourDemand:Ya,getHalfHourDemandChannel:Le,getHalfHourDemandExport:Me,getHalfHourDemandVare:Ce,getHalfHourDemandVareExport:ge,getHalfHourDemandVari:ue,getHalfHourDemandVariExport:le,getHalfHourEnergies:Fe,getMagneticFieldThreshold:Ue,getMeterInfo:Be,getMonthDemand:Ba,getMonthDemandExport:Ie,getMonthMaxDemand:ae,getMonthMaxDemandExport:he,getOperatorParameters:Za,getOperatorParametersExtended:Oe,getOperatorParametersExtended2:Ne,getOperatorParametersExtended3:Ge,getOperatorParametersExtended4:Ye,getRatePlanInfo:$a,getSaldo:za,getSaldoParameters:qa,getSeasonProfile:Te,getSpecialDay:Re,getVersion:ja,prepareRatePlan:Wa,resetPowerMaxDay:Ee,resetPowerMaxMonth:_e,runTariffPlan:fe,setAccessKey:ma,setCorrectDateTime:Ve,setCorrectTime:ba,setDateTime:pa,setDayProfile:Fa,setDisplayParam:pe,setOperatorParameters:Qa,setOperatorParametersExtended:oe,setOperatorParametersExtended2:se,setOperatorParametersExtended3:Xe,setOperatorParametersExtended4:We,setSaldo:ka,setSaldoParameters:Ja,setSeasonProfile:Ha,setSpecialDay:Ga,setSpecialOperation:ye,turnRelayOff:Ka,turnRelayOn:wa});var Ke=120;var be=254;var Ze=255;var Qe=Object.freeze({__proto__:null,activateRatePlan:Xa,errorDataFrameResponse:Ze,errorResponse:be,getBv:He,getCorrectTime:ie,getCriticalEvent:de,getCurrentStatusMeter:ve,getCurrentValues:ya,getDateTime:Va,getDayDemand:xa,getDayDemandExport:Se,getDayEnergies:Ke,getDayMaxDemand:re,getDayMaxDemandExport:ce,getDayProfile:Ae,getDemand:xe,getDeviceId:La,getDeviceType:ha,getDisplayParam:me,getEnergy:Ua,getEnergyDayPrevious:ca,getEnergyExport:Pe,getEnergyExportDayPrevious:De,getEventStatus:da,getEvents:ee,getEventsCounters:te,getExtendedCurrentValues:ne,getHalfHourDemand:Ya,getHalfHourDemandChannel:Le,getHalfHourDemandExport:Me,getHalfHourDemandVare:Ce,getHalfHourDemandVareExport:ge,getHalfHourDemandVari:ue,getHalfHourDemandVariExport:le,getHalfHourEnergies:Fe,getMagneticFieldThreshold:Ue,getMeterInfo:Be,getMonthDemand:Ba,getMonthDemandExport:Ie,getMonthMaxDemand:ae,getMonthMaxDemandExport:he,getOperatorParameters:Za,getOperatorParametersExtended:Oe,getOperatorParametersExtended2:Ne,getOperatorParametersExtended3:Ge,getOperatorParametersExtended4:Ye,getRatePlanInfo:$a,getSaldo:za,getSaldoParameters:qa,getSeasonProfile:Te,getSpecialDay:Re,getVersion:ja,prepareRatePlan:Wa,resetPowerMaxDay:Ee,resetPowerMaxMonth:_e,runTariffPlan:fe,setAccessKey:ma,setCorrectDateTime:Ve,setCorrectTime:ba,setDateTime:pa,setDayProfile:Fa,setDisplayParam:pe,setOperatorParameters:Qa,setOperatorParametersExtended:oe,setOperatorParametersExtended2:se,setOperatorParametersExtended3:Xe,setOperatorParametersExtended4:We,setSaldo:ka,setSaldoParameters:Ja,setSeasonProfile:Ha,setSpecialDay:Ga,setSpecialOperation:ye,turnRelayOff:Ka,turnRelayOn:wa});var je=mr(Qe);var ze=1;var ke=2;var $e=3;var qe=4;var Je=Math.log,rt=Math.pow,at=Math.LN2;var et=function(r,a,e,t,E){var _,v,n=E*8-t-1,A=(1<<n)-1,T=A>>1,R=-7,i=e?E-1:0,O=e?-1:1,o=r[a+i];i+=O;_=o&(1<<-R)-1;o>>=-R;R+=n;for(;R>0;_=_*256+r[a+i],i+=O,R-=8);v=_&(1<<-R)-1;_>>=-R;R+=t;for(;R>0;v=v*256+r[a+i],i+=O,R-=8);if(_===0){_=1-T}else if(_===A){return v?NaN:o?-Infinity:Infinity}else{v=v+rt(2,t);_=_-T}return(o?-1:1)*v*rt(2,_-t)};var tt=function(r,a,e,t,E,_){var v,n,A,T=_*8-E-1,R=(1<<T)-1,i=R>>1,O=E===23?rt(2,-24)-rt(2,-77):0,o=t?0:_-1,s=t?1:-1,f=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){n=e!==e?1:0;v=R}else{v=Je(e)/at|0;if(e*(A=rt(2,-v))<1){v--;A*=2}if(v+i>=1){e+=O/A}else{e+=O*rt(2,1-i)}if(e*A>=2){v++;A/=2}if(v+i>=R){n=0;v=R}else if(v+i>=1){n=(e*A-1)*rt(2,E);v=v+i}else{n=e*rt(2,i-1)*rt(2,E);v=0}}for(;E>=8;r[a+o]=n&255,o+=s,n/=256,E-=8);v=v<<E|n;T+=E;for(;T>0;r[a+o]=v&255,o+=s,v/=256,T-=8);r[a+o-s]|=f*128};var Et=[1,0];var _t=[2,1,0];var vt=[3,2,1,0];var nt=[0,1];var At=[0,1,2];var Tt=[0,1,2,3];var Rt=function(r,a){return r[a]};var it=function(r,a,e){var t=e?nt:Et;var E=r[a+t[0]];var _=r[a+t[1]]<<8;return E|_};var Ot=function(r,a,e){var t=e?At:_t;var E=r[a+t[0]];var _=r[a+t[1]]<<8;var v=r[a+t[2]]<<16;return E|_|v};var ot=function(r,a,e){var t=e?Tt:vt;var E=r[a+t[3]]*16777216;var _=r[a+t[2]]*65536;var v=r[a+t[1]]*256;var n=r[a+t[0]];return E+_+v+n};var st=function(r,a,e){r[a]=e&255};var ft=function(r,a,e,t){var E=t?nt:Et;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255};var Nt=function(r,a,e,t){var E=t?At:_t;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255};var ut=function(r,a,e,t){var E=t?Tt:vt;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255;r[a+E[3]]=e>>>24&255};function Ct(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=a}Ct.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){st(this.data,this.offset,r<0?r|256:r);this.offset+=ze},getInt8:function(){var r=Rt(this.data,this.offset);this.offset+=ze;return r&128?r^-256:r},setUint8:function(r){st(this.data,this.offset,r);this.offset+=ze},getUint8:function(){var r=Rt(this.data,this.offset);this.offset+=ze;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ft(this.data,this.offset,r<0?r|65536:r,a);this.offset+=ke},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=it(this.data,this.offset,r);this.offset+=ke;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ft(this.data,this.offset,r,a);this.offset+=ke},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=it(this.data,this.offset,r);this.offset+=ke;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Nt(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=$e},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ot(this.data,this.offset,r);this.offset+=$e;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Nt(this.data,this.offset,r,a);this.offset+=$e},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ot(this.data,this.offset,r);this.offset+=$e;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ut(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=qe},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ot(this.data,this.offset,r);this.offset+=qe;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ut(this.data,this.offset,r,a);this.offset+=qe},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ot(this.data,this.offset,r);this.offset+=qe;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;tt(this.data,this.offset,r,a,23,4);this.offset+=qe},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=et(this.data,this.offset,r,23,4);this.offset+=qe;return a},setString:function(r){this.setUint8(r.length);for(var a=0;a<r.length;++a){this.setUint8(r.charCodeAt(a))}},getString:function(){var r=this.getUint8();var a=this.offset+r;var e=[];while(this.offset<a){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[a,r.length].concat(T(r)));this.data=e;this.offset=a+r.length}};Object.defineProperties(Ct.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var Pt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=0;for(var t in a){if(t in r&&a[t]){e|=r[t]}}return e};var St=function(r,a,e){return(1<<a)-1&r>>e-1};var Dt=function(r,a,e,t){var E=(1<<a)-1<<e-1;var _=t;var v=r;v&=~E;_<<=e-1;v|=_;return v};var It=[".","1","3","R","M"];var Mt=[".","A","G","R","T","D"];var lt=[".","0","1","2","3","4","5"];var gt=[".","A","B","C","D","E","F"];var dt=[".","A","B","C","D","E","F","H","K","G"];var ct=[".","1","2","3","4"];var ht=[".","L","M","Z","K"];var Lt=[".","0","1","2","3","4","5","6","7","8","9"];var Vt=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var pt=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var mt=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var yt=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var Ut={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Ft={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var Ht=function(r){return Pt(Ft,{...r,typeMeterG:!r.typeMeterG})};var Gt=function(r){var a=[];r.forEach(function(r){return a.push(r.toString(16))});if(r.length&1){a.push("0")}return Vr(a.join(""))};var Xt=function(r,a,e){var t=[];if(r.length<11){throw new Error("Wrong format")}t.push(It.indexOf(r[0]));t.push(Mt.indexOf(r[1]));t.push(lt.indexOf(r[2]));t.push(lt.indexOf(r[3]));if(r[4]!=="."){throw new Error("Wrong format")}t.push(gt.indexOf(r[5]));t.push(dt.indexOf(r[6]));if(r[7]!=="."){throw new Error("Wrong format")}t.push(ct.indexOf(r[8]));t.push(ht.indexOf(r[9]));t.push(e??0);t.push(Lt.indexOf(r[10]));if(r[11]!=="-"){throw new Error("Wrong format")}var E=r.length>13?r.length-1:r.length;for(var _=12;_<E;_++){t.push(Vt.indexOf(r[_]))}if(E<r.length){t.push(mt.indexOf(r[E]))}var v=Gt(t);var n=new Array(9).fill(0);n[0]=0;for(var A=0;A<v.length;A++){n[A+(v.length<8?1:0)]=v[A]}return n};var Wt=function(r){if(r.length<3){throw new Error("Wrong format")}var a=[];a.push(It.indexOf(r[0]));a.push(Mt.indexOf(r[1]));for(var e=3;e<r.length;e++){a.push(pt.indexOf(r[e]))}var t=Gt(a);if(t.length===8){return t}if(t.length>8){throw new Error("Wrong format")}var E=new Array(8).fill(0);for(var _=0;_<t.length;_++){E[_]=t[_]}return E};var Yt=function(r){if(r.length<1){throw new Error("Wrong format")}var a=[];a.push(It.indexOf(r[0]));for(var e=1;e<r.length;e++){a.push(yt.indexOf(r[e]))}var t=Gt(a);var E=new Array(8).fill(0);for(var _=0;_<t.length&&_<8;_++){E[_]=t[_]}return E};var xt=function(r,a){var e=r.type,t=r.revision,E=r.descriptor;if(!e.startsWith("MTX ")){throw new Error("Wrong format")}var _;var v=e.substring(4);var n=e[4];if(n==="1"||n==="3"){_=Xt(v,a,t)}else{_=n==="M"?Yt(v):Wt(v)}if(E?.meterType){_[8]=E.meterType==="mtx1"?Pt(Ut,E):Ht(E)}else{_[8]=0}return _};var Bt=80;var wt=81;var Kt=82;var bt=83;var Zt=84;var Qt=85;var jt=86;var zt=87;var kt=88;var $t=89;var qt=90;var Jt=91;var rE=255;var aE=Object.freeze({__proto__:null,DATA_REQUEST:Bt,DATA_RESPONSE:wt,FRAGMENT_REQUEST:qt,FRAGMENT_RESPONSE:Jt,IDENT_REQUEST:Kt,IDENT_RESPONSE:bt,INVALID:rE,L2_CHECK_ADDRESS_REQUEST:jt,L2_CHECK_ADDRESS_RESPONSE:zt,L2_RM_ADDRESS_REQUEST:kt,L2_RM_ADDRESS_RESPONSE:$t,L2_SET_ADDRESS_REQUEST:Zt,L2_SET_ADDRESS_RESPONSE:Qt});mr(aE);mr(ia);var eE=0;var tE=1;var EE=2;var _E=3;var vE=4;var nE=5;var AE=6;var TE=7;var RE=8;var iE=9;var OE=10;var oE=11;var sE=12;var fE=13;var NE=14;var uE=Object.freeze({__proto__:null,CASE_MODULE_OPEN:OE,CASE_OPEN:eE,CASE_TERMINAL_OPEN:iE,DEVICE_FAILURE:RE,ERROR_ACCESS:nE,MAGNETIC_ON:tE,PARAMETERS_UPDATE_LOCAL:_E,PARAMETERS_UPDATE_REMOTE:EE,PROTECTION_RESET_EM:fE,PROTECTION_RESET_MAGNETIC:NE,RESTART:vE,TARIFF_TABLE_GET:sE,TARIFF_TABLE_SET:oE,TIME_CORRECT:TE,TIME_SET:AE});mr(uE);mr(lr);var CE=1;var PE=2;var SE=3;var DE=16;var IE=17;var ME=18;var lE=19;var gE=20;var dE=21;var cE=32;var hE=33;var LE=34;var VE=35;var pE=36;var mE=37;var yE=38;var UE=39;var FE=40;var HE=41;var GE=49;var XE=50;var WE=51;var YE=52;var xE=53;var BE=54;var wE=55;var KE=56;var bE=57;var ZE=60;var QE=61;var jE=62;var zE=63;var kE=64;var $E=65;var qE=66;var JE=67;var r_=68;var a_=69;var e_=70;var t_=71;var E_=72;var __=73;var v_=74;var n_=75;var A_=76;var T_=77;var R_=78;var i_=79;var O_=80;var o_=81;var s_=82;var f_=83;var N_=84;var u_=85;var C_=86;var P_=87;var S_=88;var D_=89;var I_=96;var M_=97;var l_=98;var g_=99;var d_=100;var c_=101;var h_=102;var L_=103;var V_=104;var p_=105;var m_=112;var y_=113;var U_=114;var F_=115;var H_=116;var G_=117;var X_=118;var W_=119;var Y_=120;var x_=121;var B_=122;var w_=123;var K_=124;var b_=125;var Z_=126;var Q_=144;var j_=145;var z_=147;var k_=148;var $_=152;var q_=156;var J_=157;var rv=158;var av=159;var ev=160;var tv=161;var Ev=162;var _v=176;var vv=177;var nv=178;var Av=179;var Tv=180;var Rv=181;var iv=182;var Ov=183;var ov=185;var sv=186;var fv=224;var Nv=225;var uv=226;var Cv=227;var Pv=228;var Sv=229;var Dv=230;var Iv=231;var Mv=232;var lv=Object.freeze({__proto__:null,ACCESS_ERROR:IE,ACCESS_LOCKED:DE,ACC_PARAMETERS_EXT_FAULT:F_,ACC_PARAMETERS_FAULT:U_,BAD_TEST_EEPROM:V_,BAD_TEST_FRAM:p_,BATTERY_FAULT:f_,BATTERY_OK:s_,BIPOLAR_POWER_FAULT:Tv,BIPOLAR_POWER_OK:Rv,BLOCK_TARIFF_FAULT:G_,CALC_PERIOD_FAULT:H_,CALIBRATION_FAULT:u_,CALIBRATION_FLAG_RESET:L_,CALIBRATION_FLAG_SET:h_,CALIBRATION_OK:N_,CALIBRATION_PARAMETERS_FAULT:X_,CASE_CLOSED:lE,CASE_MODULE_CLOSED:b_,CASE_MODULE_OPENED:K_,CASE_OPENED:ME,CASE_TERMINAL_BOX_CLOSED:w_,CASE_TERMINAL_BOX_OPENED:B_,CHANGE_ACCESS_KEY0:cE,CHANGE_ACCESS_KEY1:hE,CHANGE_ACCESS_KEY2:LE,CHANGE_ACCESS_KEY3:VE,CHANGE_COR_TIME:HE,CHANGE_PARAMETERS_CHANNEL:ov,CHANGE_PARAMETERS_LOCAL:pE,CHANGE_PARAMETERS_REMOTE:mE,CHANGE_TARIFF_TABLE:XE,CHANGE_TARIFF_TABLE_2:$_,CLOCK_FAULT:P_,CLOCK_OK:C_,CMD_RELAY_2_OFF:M_,CMD_RELAY_2_ON:I_,CMD_RELAY_OFF:FE,CMD_RELAY_ON:UE,CMD_SET_DATETIME:yE,CROSS_ZERO_EN_T1:l_,CROSS_ZERO_EN_T2:g_,CROSS_ZERO_EN_T3:d_,CROSS_ZERO_EN_T4:c_,CROSS_ZERO_EXPORT_EN_T1:rv,CROSS_ZERO_EXPORT_EN_T2:av,CROSS_ZERO_EXPORT_EN_T3:ev,CROSS_ZERO_EXPORT_EN_T4:tv,CURRENT_UNEQUAL_FAULT:nv,CURRENT_UNEQUAL_OK:Av,EM_MAGNETIC_INFLUENCE_OFF:vv,EM_MAGNETIC_INFLUENCE_ON:_v,ENERGY_REGISTER_FAULT:CE,ENERGY_REGISTER_OVERFLOW:GE,F_MAX_OK:E_,F_MAX_OVER:__,F_MIN_OK:v_,F_MIN_OVER:n_,I_MAX_OK:A_,I_MAX_OVER:T_,MAGNETIC_INFLUENCE_OFF:dE,MAGNETIC_INFLUENCE_ON:gE,OPERATOR_PARAMETERS_VALUES_FAULT:SE,POWER_A_OFF:S_,POWER_A_ON:D_,POWER_B_OFF:QE,POWER_B_ON:ZE,POWER_C_OFF:zE,POWER_C_ON:jE,POWER_GOOD_DIO:Z_,POWER_OVER_RELAY_OFF:J_,POWER_SALDO_OK:O_,POWER_SALDO_OVER:o_,P_MAX_A_MINUS_OK:Iv,P_MAX_A_MINUS_OVER:Mv,P_MAX_OK:R_,P_MAX_OVER:i_,RELAY_HARD_BAD_OFF:Q_,RELAY_HARD_BAD_ON:z_,RELAY_HARD_OFF:k_,RELAY_HARD_ON:j_,RELAY_OFF:wE,RELAY_OFF_BAD_SALDO:sv,RELAY_ON:BE,RESET_EM_FLAG:iv,RESET_MAGNET_FLAG:Ov,RESTART:KE,SALDO_EN_FAULT:Y_,SALDO_PARAMETERS_FAULT:y_,SET_DEMAND_EN_10MIN:Cv,SET_DEMAND_EN_15MIN:Pv,SET_DEMAND_EN_1MIN:fv,SET_DEMAND_EN_30MIN:Sv,SET_DEMAND_EN_3MIN:Nv,SET_DEMAND_EN_5MIN:uv,SET_DEMAND_EN_60MIN:Dv,SET_NEW_SALDO:m_,SET_SALDO_PARAM:q_,SET_TARIFF_TABLE:WE,SUMMER_TIME:YE,TIME_CORRECT:x_,TIME_CORRECT_NEW:Ev,T_MAX_OK:r_,T_MAX_OVER:a_,T_MIN_OK:e_,T_MIN_OVER:t_,VENDOR_PAR_FAULT:PE,V_MAX_OK:kE,V_MAX_OVER:$E,V_MIN_OK:qE,V_MIN_OVER:JE,WATCHDOG_RESTART:bE,WINTER_SUMMER_FAULT:W_,WINTER_TIME:xE});mr(lv);var gv=1;var dv=2;var cv=3;var hv=4;var Lv=5;var Vv=6;var pv=7;var mv=8;var yv=9;var Uv=10;var Fv=11;var Hv=12;var Gv=13;var Xv=14;var Wv=15;var Yv=16;var xv=17;var Bv=18;var wv=19;var Kv=20;var bv=21;var Zv=22;var Qv=23;var jv=24;var zv=25;var kv=26;var $v=28;var qv=30;var Jv=31;var rn=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:hv,ACTIVE_ENERGY_T2:Lv,ACTIVE_ENERGY_T3:Vv,ACTIVE_ENERGY_T4:pv,ACTIVE_POWER_IN_NEUTRAL:yv,ACTIVE_POWER_PER_PHASE:mv,BATTERY_VOLTAGE:Zv,CURRENT_BALANCE:qv,CURRENT_IN_NEUTRAL:Fv,CURRENT_IN_PHASE:Uv,DATE_MONTH_YEAR:Xv,EXPORTED_ACTIVE_ENERGY_T1:Yv,EXPORTED_ACTIVE_ENERGY_T2:xv,EXPORTED_ACTIVE_ENERGY_T3:Bv,EXPORTED_ACTIVE_ENERGY_T4:wv,HOUR_MINUTE_SECOND:Gv,MAGNET_INDUCTION:$v,OPTOPORT_SPEED:Jv,POWER_FACTOR_PHASE_A:Kv,POWER_FACTOR_PHASE_B:bv,POWER_THRESHOLD_T1:Qv,POWER_THRESHOLD_T2:jv,POWER_THRESHOLD_T3:zv,POWER_THRESHOLD_T4:kv,SET_ALL_SEGMENT_DISPLAY:gv,SOFTWARE_VERSION:dv,TOTAL_ACTIVE_ENERGY:cv,TOTAL_EXPORTED_ACTIVE_ENERGY:Wv,VOLTAGE:Hv});mr(rn);var an=2400;var en=9600;var tn={rs485orTwi:{0:en,2:an,4:en},optoport:{0:an,2:an,4:en}};({rs485orTwi:mr(tn.rs485orTwi),optoport:mr(tn.optoport)});var En=4;var _n=1;var vn=4;var nn=3;var An=48;var Tn=50;var Rn=3+An*2;var On=4+Tn*2;var on={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};function sn(r,a,e){var t=1+En;var E=a;e.forEach(function(r,a){E=Dt(E,1,a+t,Number(!!r))});r.setUint8(E)}function fn(r,a){var e=a.tariff,t=a.energy;if(e!==undefined&&t!==undefined){r.setUint16(e<<14|t&16383)}else{r.setUint16(65535)}}var Nn=function(r,a){var e=a.manufacturer,t=a.type,E=a.year,_=a.serial;r.setBytes(Vr(e));r.setUint8(t);r.setUint8(E);r.setBytes(Vr(_))};var un=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var Cn=function(r,a){r.setBytes(xt(a))};var Pn=function(r,a){var e=a.energyType,t=a.energies;if(e){sn(r,e,t)}t.forEach(function(a){if(a!==null){r.setInt32(a)}})};var Sn=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var Dn=function(r,a){a.forEach(function(a){return fn(r,a)})};var In=function(r,a){r.setUint16(Pt(on,a))};var Mn=function(r){if(r?.energyType){var a=r.energies.filter(function(r){return r!==null}).length;return nn+_n+a*vn}return nn+vn*En};var ln=o;var gn=2;var dn=function(r){var a=new Ct(gn,true);In(a,r);return pr(ln,a.data)};var cn=s;var hn=function(r){var a=new Ct(Mn(r),false);Sn(a,r.date);Pn(a,r);return pr(cn,a.data)};var Ln=f;var Vn=9;var pn=function(r){var a=new Ct(Vn,false);Cn(a,r);return pr(Ln,a.data)};var mn=N;var yn=8;var Un=function(r){var a=new Ct(yn,false);Nn(a,r);return pr(mn,a.data)};var Fn=u;var Hn=8;var Gn=function(r){var a=new Ct(Hn,false);un(a,r);return pr(Fn,a.data)};var Xn=C;var Wn=function(){return pr(Xn)};var Yn=16;var xn=D;var Bn=function(r){var a=Yn;if(r?.energyType){var e=r.energies.filter(function(r){return r!==null}).length;a=_n+e*vn}var t=new Ct(a,false);Pn(t,r);return pr(xn,t.data)};var wn=c;var Kn=function(r){var a=new Ct(r.periods.length>An?On:Rn,false);Sn(a,r.date);Dn(a,r.periods);if(r.dstHour){a.setUint8(r.dstHour)}return pr(wn,a.data)};var bn=1;var Zn=2;({wh:t(t({},bn,{gType:"1.8",rType:"1.8"}),Zn,{gType:"2.8"}),vari:t(t({},bn,{gType:"5.8",rType:"3.8"}),Zn,{gType:"6.8"}),vare:t(t({},bn,{gType:"8.8",rType:"4.8"}),Zn,{gType:"7.8"})});mr(we);var Qn=1;var jn=2;var zn=3;var kn=4;var $n=17;var qn=18;var Jn=19;var rA=20;var aA=21;var eA=22;var tA=23;var EA=32;var _A=33;var vA=34;var nA=35;var AA=36;var TA=37;var RA=38;var iA=39;var OA=40;var oA=49;var sA=50;var fA=51;var NA=52;var uA=53;var CA=54;var PA=55;var SA=56;var DA=57;var IA=64;var MA=65;var lA=66;var gA=67;var dA=68;var cA=69;var hA=70;var LA=71;var VA=72;var pA=73;var mA=74;var yA=75;var UA=76;var FA=77;var HA=78;var GA=79;var XA=80;var WA=81;var YA=82;var xA=83;var BA=84;var wA=85;var KA=86;var bA=87;var ZA=88;var QA=89;var jA=90;var zA=91;var kA=92;var $A=93;var qA=94;var JA=95;var rT=96;var aT=97;var eT=98;var tT=99;var ET=100;var _T=101;var vT=102;var nT=103;var AT=104;var TT=105;var RT=106;var iT=107;var OT=108;var oT=109;var sT=110;var fT=111;var NT=112;var uT=113;var CT=114;var PT=115;var ST=116;var DT=117;var IT=118;var MT=119;var lT=120;var gT=121;var dT=122;var cT=123;var hT=124;var LT=125;var VT=126;var pT=127;var mT=128;var yT=129;var UT=130;var FT=131;var HT=132;var GT=133;var XT=134;var WT=135;var YT=136;var xT=137;var BT=138;var wT=139;var KT=140;var bT=141;var ZT=142;var QT=143;var jT=144;var zT=145;var kT=147;var $T=148;var qT=149;var JT=150;var rR=151;var aR=152;var eR=153;var tR=154;var ER=155;var _R=156;var vR=157;var nR=158;var AR=159;var TR=160;var RR=161;var iR=162;var OR=163;var oR=164;var sR=165;var fR=166;var NR=167;var uR=168;var CR=169;var PR=170;var SR=171;var DR=172;var IR=173;var MR=174;var lR=175;var gR=176;var dR=177;var cR=178;var hR=179;var LR=224;var VR=225;var pR=226;var mR=227;var yR=228;var UR=229;var FR=230;var HR=231;var GR=232;var XR=Object.freeze({__proto__:null,ACCESS_ERROR:Jn,ACCESS_LOCKED:$n,ACCESS_UNLOCKED:qn,ACCUMULATION_PARAMETERS_EXT_FAULT:XT,ACCUMULATION_PARAMETERS_FAULT:GT,BAD_TEST_EEPROM:yT,BAD_TEST_FRAM:UT,BATTERY_FAULT:TT,BATTERY_OK:AT,BLOCK_TARIFF_FAULT:YT,CALCULATION_PERIOD_FAULT:WT,CALIBRATION_FAULT:iT,CALIBRATION_FLAG_RESET:mT,CALIBRATION_FLAG_SET:pT,CALIBRATION_OK:RT,CALIBRATION_PARAMETERS_FAULT:xT,CASE_CLOSED:aA,CASE_MODULE_CLOSED:ER,CASE_MODULE_OPENED:tR,CASE_OPENED:rA,CASE_TERMINAL_BOX_CLOSED:rR,CASE_TERMINAL_BOX_OPENED:JT,CHANGE_ACCESS_KEY0:EA,CHANGE_ACCESS_KEY1:_A,CHANGE_ACCESS_KEY2:vA,CHANGE_ACCESS_KEY3:nA,CHANGE_COR_TIME:NT,CHANGE_PARAMETERS_LOCAL:AA,CHANGE_PARAMETERS_REMOTE:TA,CHANGE_PARAMETER_CHANNEL1:nR,CHANGE_PARAMETER_CHANNEL2:AR,CHANGE_PARAMETER_CHANNEL3:TR,CHANGE_PARAMETER_CHANNEL4:RR,CHANGE_PARAMETER_CHANNEL5:iR,CHANGE_PARAMETER_CHANNEL6:OR,CHANGE_TARIFF_TABLE:sA,CHANGE_TARIFF_TABLE_2:aR,CHANGE_TARIFF_TABLE_3:eR,CLOCK_FAULT:aT,CLOCK_OK:rT,CMD_RELAY_2_OFF:CT,CMD_RELAY_2_ON:uT,CMD_RELAY_OFF:OA,CMD_RELAY_ON:iA,CMD_SET_DATETIME:RA,COEFFICIENT_TRANSFORMATION_CHANGE:QT,CROSS_ZERO_EN_T1:PT,CROSS_ZERO_EN_T2:ST,CROSS_ZERO_EN_T3:DT,CROSS_ZERO_EN_T4:IT,CROSS_ZERO_EXPORT_EN_T1:oR,CROSS_ZERO_EXPORT_EN_T2:sR,CROSS_ZERO_EXPORT_EN_T3:fR,CROSS_ZERO_EXPORT_EN_T4:NR,CROSS_ZERO_EXPORT_VARE1:DR,CROSS_ZERO_EXPORT_VARE2:IR,CROSS_ZERO_EXPORT_VARE3:MR,CROSS_ZERO_EXPORT_VARE4:lR,CROSS_ZERO_EXPORT_VARI1:uR,CROSS_ZERO_EXPORT_VARI2:CR,CROSS_ZERO_EXPORT_VARI3:PR,CROSS_ZERO_EXPORT_VARI4:SR,CROSS_ZERO_VARE_T1:cT,CROSS_ZERO_VARE_T2:hT,CROSS_ZERO_VARE_T3:LT,CROSS_ZERO_VARE_T4:VT,CROSS_ZERO_VARI_T1:MT,CROSS_ZERO_VARI_T2:lT,CROSS_ZERO_VARI_T3:gT,CROSS_ZERO_VARI_T4:dT,EM_MAGNETIC_INFLUENCE_OFF:dR,EM_MAGNETIC_INFLUENCE_ON:gR,ENERGY_REGISTER_OVERFLOW:oA,ENERGY_T1_FAULT:Qn,ENERGY_T2_FAULT:jn,ENERGY_T3_FAULT:zn,ENERGY_T4_FAULT:kn,F_MAX_OK:UA,F_MAX_OVER:FA,F_MIN_OK:HA,F_MIN_UNDER:GA,IA_MAX_OK:BA,IA_MAX_OVER:wA,IB_MAX_OK:KA,IB_MAX_OVER:bA,IC_MAX_OK:ZA,IC_MAX_OVER:QA,IDIFF_OK:qA,IDIFF_OVER:JA,MAGNETIC_INFLUENCE_OFF:tA,MAGNETIC_INFLUENCE_ON:eA,METER_TROUBLE:qT,OPERATOR_PARAMETERS_EXT_VALUES_FAULT:KT,OPERATOR_PARAMETERS_VALUES_FAULT:wT,O_PARAMETERS_FAULT:fT,O_PARAMETERS_OK:sT,PA_MAX_OK:jA,PA_MAX_OVER:zA,POWER_A_OFF:nT,POWER_A_ON:vT,POWER_B_OFF:_T,POWER_B_ON:ET,POWER_C_OFF:tT,POWER_C_ON:eT,POWER_OVER_RELAY_OFF:vR,PV_MAX_OK:kA,PV_MAX_OVER:$A,P_MAX_A_MINUS_OK:HR,P_MAX_A_MINUS_OVER:GR,RELAY_HARD_BAD_OFF:jT,RELAY_HARD_BAD_ON:kT,RELAY_HARD_OFF:$T,RELAY_HARD_ON:zT,RELAY_OFF:PA,RELAY_ON:CA,RESET_EM_FLAG:cR,RESET_MAGNETIC_FLAG:hR,RESTART:SA,SALDO_ENERGY_FAULT:bT,SALDO_PARAMETERS_FAULT:HT,SET_DEMAND_EN_10_MIN:mR,SET_DEMAND_EN_15_MIN:yR,SET_DEMAND_EN_1_MIN:LR,SET_DEMAND_EN_30_MIN:UR,SET_DEMAND_EN_3_MIN:VR,SET_DEMAND_EN_5_MIN:pR,SET_DEMAND_EN_60_MIN:FR,SET_NEW_SALDO:FT,SET_SALDO_PARAM:_R,SET_TARIFF_TABLE:fA,SUMMER_TIME:NA,TIME_CORRECT:ZT,T_MAX_OK:XA,T_MAX_OVER:WA,T_MIN_OK:YA,T_MIN_UNDER:xA,VA_MAX_OK:IA,VA_MAX_OVER:MA,VA_MIN_OK:lA,VA_MIN_UNDER:gA,VB_MAX_OK:dA,VB_MAX_OVER:cA,VB_MIN_OK:hA,VB_MIN_UNDER:LA,VC_MAX_OK:VA,VC_MAX_OVER:pA,VC_MIN_OK:mA,VC_MIN_UNDER:yA,V_PARAMETERS_FAULT:oT,V_PARAMETERS_OK:OT,WATCHDOG_RESTART:DA,WINTER_SUMMER_FAULT:BT,WINTER_TIME:uA});mr(XR);var WR=1;var YR=2;var xR=3;var BR=4;var wR=5;var KR=6;var bR=7;var ZR=8;var QR=9;var jR=10;var zR=11;var kR=12;var $R=13;var qR=14;var JR=15;var ri=16;var ai=17;var ei=18;var ti=19;var Ei=20;var _i=21;var vi=22;var ni=23;var Ai=24;var Ti=25;var Ri=26;var ii=27;var Oi=28;var oi=29;var si=30;var fi=31;var Ni=32;var ui=33;var Ci=34;var Pi=35;var Si=36;var Di=37;var Ii=38;var Mi=39;var li=40;var gi=41;var di=42;var ci=43;var hi=44;var Li=45;var Vi=46;var pi=47;var mi=48;var yi=49;var Ui=50;var Fi=51;var Hi=52;var Gi=53;var Xi=54;var Wi=55;var Yi=56;var xi=57;var Bi=58;var wi=59;var Ki=60;var bi=61;var Zi=62;var Qi=63;var ji=64;var zi=65;var ki=66;var $i=67;var qi=68;var Ji=69;var rO=70;var aO=71;var eO=72;var tO=73;var EO=74;var _O=75;var vO=76;var nO=77;var AO=78;var TO=79;var RO=80;var iO=81;var OO=82;var oO=83;var sO=84;var fO=85;var NO=86;var uO=87;var CO=88;var PO=89;var SO=90;var DO=91;var IO=92;var MO=93;var lO=94;var gO=95;var dO=96;var cO=97;var hO=98;var LO=99;var VO=100;var pO=101;var mO=102;var yO=103;var UO=104;var FO=105;var HO=106;var GO=107;var XO=108;var WO=109;var YO=110;var xO=111;var BO=112;var wO=113;var KO=114;var bO=115;var ZO=116;var QO=117;var jO=118;var zO=119;var kO=120;var $O=121;var qO=122;var JO=123;var ro=124;var ao=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:BR,ACTIVE_ENERGY_T2:wR,ACTIVE_ENERGY_T3:KR,ACTIVE_ENERGY_T4:bR,ACTIVE_POWER_PHASE_A:ci,ACTIVE_POWER_PHASE_B:hi,ACTIVE_POWER_PHASE_C:Li,APPARENT_POWER_QMINUS_PHASE_A:Qi,APPARENT_POWER_QMINUS_PHASE_B:ji,APPARENT_POWER_QMINUS_PHASE_C:zi,APPARENT_POWER_QPLUS_PHASE_A:wi,APPARENT_POWER_QPLUS_PHASE_B:Ki,APPARENT_POWER_QPLUS_PHASE_C:bi,BATTERY_VOLTAGE:li,CURRENT_BALANCE:jO,CURRENT_IN_NEUTRAL:Si,CURRENT_IN_PHASE_A:ui,CURRENT_IN_PHASE_B:Ci,CURRENT_IN_PHASE_C:Pi,CURRENT_TRANSFORMATION_RATIO:ZO,DATE_MONTH_YEAR:bO,EXPORTED_ACTIVE_ENERGY_T1:ti,EXPORTED_ACTIVE_ENERGY_T2:Ei,EXPORTED_ACTIVE_ENERGY_T3:_i,EXPORTED_ACTIVE_ENERGY_T4:vi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:oi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:si,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:fi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:Ni,EXPORTED_REACTIVE_ENERGY_T1:Ai,EXPORTED_REACTIVE_ENERGY_T2:Ti,EXPORTED_REACTIVE_ENERGY_T3:Ri,EXPORTED_REACTIVE_ENERGY_T4:ii,HOUR_MINUTE_SECOND:KO,MAGNET_INDUCTION:ro,MAX_ACTIVE_POWER_DAY_T1:ki,MAX_ACTIVE_POWER_DAY_T2:$i,MAX_ACTIVE_POWER_DAY_T3:qi,MAX_ACTIVE_POWER_DAY_T4:Ji,MAX_ACTIVE_POWER_MONTH_T1:rO,MAX_ACTIVE_POWER_MONTH_T2:aO,MAX_ACTIVE_POWER_MONTH_T3:eO,MAX_ACTIVE_POWER_MONTH_T4:tO,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:SO,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:DO,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:IO,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:MO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:lO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:gO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:dO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:cO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:HO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:GO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:XO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:WO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:YO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:xO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:BO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:wO,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:hO,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:LO,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:VO,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:pO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:mO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:yO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:UO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:FO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:OO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:oO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:sO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:fO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:NO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:uO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:CO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:PO,MAX_REACTIVE_POWER_DAY_T1:EO,MAX_REACTIVE_POWER_DAY_T2:_O,MAX_REACTIVE_POWER_DAY_T3:vO,MAX_REACTIVE_POWER_DAY_T4:nO,MAX_REACTIVE_POWER_MONTH_T1:AO,MAX_REACTIVE_POWER_MONTH_T2:TO,MAX_REACTIVE_POWER_MONTH_T3:RO,MAX_REACTIVE_POWER_MONTH_T4:iO,NEGATIVE_REACTIVE_ENERGY_T1:qR,NEGATIVE_REACTIVE_ENERGY_T2:JR,NEGATIVE_REACTIVE_ENERGY_T3:ri,NEGATIVE_REACTIVE_ENERGY_T4:ai,OPTOPORT_SPEED:JO,POWER_FACTOR_PHASE_A:Wi,POWER_FACTOR_PHASE_B:Yi,POWER_FACTOR_PHASE_C:xi,POWER_THRESHOLD_T1:zO,POWER_THRESHOLD_T2:kO,POWER_THRESHOLD_T3:$O,POWER_THRESHOLD_T4:qO,REACTIVE_ENERGY_T1:QR,REACTIVE_ENERGY_T2:jR,REACTIVE_ENERGY_T3:zR,REACTIVE_ENERGY_T4:kR,REACTIVE_POWER_QMINUS_PHASE_A:Fi,REACTIVE_POWER_QMINUS_PHASE_B:Hi,REACTIVE_POWER_QMINUS_PHASE_C:Gi,REACTIVE_POWER_QPLUS_PHASE_A:pi,REACTIVE_POWER_QPLUS_PHASE_B:mi,REACTIVE_POWER_QPLUS_PHASE_C:yi,SET_ALL_SEGMENT_DISPLAY:WR,SOFTWARE_VERSION:YR,SUPPLY_FREQUENCY:gi,TOTAL_ACTIVE_ENERGY:xR,TOTAL_ACTIVE_POWER:di,TOTAL_APPARENT_POWER_QMINUS:Zi,TOTAL_APPARENT_POWER_QPLUS:Bi,TOTAL_EXPORTED_ACTIVE_ENERGY:ei,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:Oi,TOTAL_EXPORTED_REACTIVE_ENERGY:ni,TOTAL_NEGATIVE_REACTIVE_ENERGY:$R,TOTAL_POWER_FACTOR:Xi,TOTAL_REACTIVE_ENERGY:ZR,TOTAL_REACTIVE_POWER_QMINUS:Ui,TOTAL_REACTIVE_POWER_QPLUS:Vi,VOLTAGE_IN_PHASE_A:Di,VOLTAGE_IN_PHASE_B:Ii,VOLTAGE_IN_PHASE_C:Mi,VOLTAGE_TRANSFORMATION_RATIO:QO});mr(ao);var eo=2400;var to=9600;var Eo={rs485orTwi:{0:to,2:eo,4:to},optoport:{0:to,2:eo,4:to}};({rs485orTwi:mr(Eo.rs485orTwi),optoport:mr(Eo.optoport)});var _o=1;var vo=4;function no(r,a){var e=a.wh,t=a.vari,E=a.vare;var _=1+vo;var v=r;for(var n=0;n<En;n++){v=Dt(v,1,n+_,Number(!!e[n]&&!!t[n]&&!!E[n]))}return v}var Ao=function(r,a){var e=a.energyType,t=a.energies;if(e){var E=no(e,t);var _=E>>vo;r.setUint8(E);for(var v=0;v<En;v++){var n=!!St(_,1,v+1);if(n){r.setInt32(t.wh[v]);r.setInt32(t.vari[v]);r.setInt32(t.vare[v])}}return}for(var A=0;A<En;A++){r.setInt32(t.wh[A]);r.setInt32(t.vari[A]);r.setInt32(t.vare[A])}};var To=function(r,a){var e=a.date.year<<1|a.date.month>>3&1;var t=a.date.month<<5&224|a.date.date&31;r.setUint8(e);r.setUint8(t);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var Ro=function(r){var a=r.energies,e=a.wh,t=a.vari,E=a.vare;if(r?.energyType){var _=[].concat(T(e),T(t),T(E)).filter(function(r){return r!==null}).length;return nn+_o+_*vn}return nn+vn*En};var io=xa;var Oo=function(r){var a=new Ct(Ro(r),false);Sn(a,r.date);Ao(a,r);return pr(io,a.data)};var oo=F;var so=function(r){var a=r.version.split("").map(function(r){return r.charCodeAt(0)});return pr(oo,a)};var fo=de;var No=function(r){var a=r.event,e=r.index,t=r.date,E=r.count;return pr(fo,[a,e,t.year,t.month,t.date,t.hours,t.minutes,t.seconds,E])};var uo=7;var Co=xe;var Po=65535;var So=function(r){var a=new Ct(uo+r.count*2,false);To(a,r);r.demands.forEach(function(r){return a.setUint16(r===null?Po:r)});return pr(Co,a.data)};var Do=145;var Io=30;var Mo=function(r){if(r[0]!==Io){return{}}var a=r[1];var e=r[3];var t=r.slice(4,a+2);if(e===Do){return t}return null};var lo;var go=(lo={},t(t(t(t(t(t(t(t(t(t(lo,ln,dn),cn,hn),Ln,pn),mn,Un),Fn,Gn),Xn,Wn),xn,Bn),wn,Kn),io,Oo),oo,so),t(t(lo,fo,No),Co,So));fromBytes=ga(go,je);getDataSegment=Mo})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
