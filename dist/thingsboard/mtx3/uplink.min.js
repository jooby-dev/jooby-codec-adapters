// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,t=Array(a);e<a;e++)t[e]=r[e];return t}function a(r){if(Array.isArray(r))return r}function e(a){if(Array.isArray(a))return r(a)}function t(r,a,e){return(a=i(a))in r?Object.defineProperty(r,a,{value:e,enumerable:true,configurable:true,writable:true}):r[a]=e,r}function E(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(r,a){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,E,_,v,n=[],A=true,T=false;try{if(_=(e=e.call(r)).next,0===a){if(Object(e)!==e)return;A=!1}else for(;!(A=(t=_.call(e)).done)&&(n.push(t.value),n.length!==a);A=!0);}catch(r){T=true,E=r}finally{try{if(!A&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw E}}return n}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(r,e){return a(r)||_(r,e)||O(r,e)||v()}function T(r){return e(r)||E(r)||O(r)||n()}function R(r,a){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,a);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function i(r){var a=R(r,"string");return"symbol"==typeof a?a:a+""}function O(a,e){if(a){if("string"==typeof a)return r(a,e);var t={}.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(a,e):void 0}}var o=1;var s=3;var f=4;var N=5;var u=7;var C=8;var P=9;var S=13;var D=15;var I=16;var M=17;var l=18;var g=19;var d=20;var c=21;var h=22;var L=23;var V=24;var p=25;var m=28;var y=30;var U=31;var F=40;var H=41;var G=42;var X=44;var W=45;var Y=46;var x=47;var B=49;var w=50;var K=51;var b=52;var Z=53;var Q=54;var j=57;var z=58;var k=59;var $=60;var q=61;var J=62;var rr=65;var ar=70;var er=74;var tr=75;var Er=79;var _r=80;var vr=82;var nr=83;var Ar=88;var Tr=89;var Rr=91;var ir=92;var Or=93;var or=94;var sr=100;var fr=109;var Nr=111;var ur=112;var Cr=113;var Pr=114;var Sr=116;var Dr=117;var Ir=118;var Mr=122;var lr=Object.freeze({__proto__:null,activateRatePlan:g,getBv:ur,getCorrectTime:J,getCriticalEvent:rr,getCurrentStatusMeter:j,getCurrentValues:S,getDateTime:u,getDayDemand:h,getDayDemandExport:Er,getDayMaxDemand:B,getDayMaxDemandExport:Ar,getDayMaxDemandPrevious:er,getDayProfile:k,getDemand:Ir,getDemandParameters:Dr,getDeviceId:N,getDeviceType:f,getDisplayParam:or,getEnergy:D,getEnergyDayPrevious:s,getEnergyExport:Rr,getEnergyExportDayPrevious:_r,getEventStatus:o,getEvents:K,getEventsCounters:b,getExtendedCurrentValues:z,getExtendedCurrentValues2:W,getHalfHourDemand:c,getHalfHourDemandExport:nr,getHalfHourDemandPrevious:tr,getHalfHourEnergies:Nr,getMagneticFieldThreshold:fr,getMeterInfo:Mr,getMonthDemand:L,getMonthDemandExport:vr,getMonthMaxDemand:w,getMonthMaxDemandExport:Tr,getOperatorParameters:y,getOperatorParametersExtended3:Cr,getRatePlanInfo:X,getSaldo:H,getSaldoParameters:Y,getSeasonProfile:$,getSpecialDay:q,getVersion:F,prepareRatePlan:d,resetPowerMaxDay:Z,resetPowerMaxMonth:Q,runTariffPlan:ar,setAccessKey:P,setCorrectDateTime:ir,setCorrectTime:m,setDateTime:C,setDayProfile:I,setDemandParameters:Sr,setDisplayParam:Or,setOperatorParameters:U,setOperatorParametersExtended3:Pr,setSaldo:G,setSaldoParameters:x,setSeasonProfile:M,setSpecialDay:l,setSpecialOperation:sr,turnRelayOff:p,turnRelayOn:V});var gr=120;var dr=121;var cr=254;var hr=255;var Lr=Object.freeze({__proto__:null,activateRatePlan:g,errorDataFrameResponse:hr,errorResponse:cr,getBv:ur,getCorrectTime:J,getCriticalEvent:rr,getCurrentStatusMeter:j,getCurrentValues:S,getDateTime:u,getDayDemand:h,getDayDemandExport:Er,getDayEnergies:gr,getDayMaxDemand:B,getDayMaxDemandExport:Ar,getDayMaxDemandPrevious:er,getDayMaxPower:dr,getDayProfile:k,getDemand:Ir,getDemandParameters:Dr,getDeviceId:N,getDeviceType:f,getDisplayParam:or,getEnergy:D,getEnergyDayPrevious:s,getEnergyExport:Rr,getEnergyExportDayPrevious:_r,getEventStatus:o,getEvents:K,getEventsCounters:b,getExtendedCurrentValues:z,getExtendedCurrentValues2:W,getHalfHourDemand:c,getHalfHourDemandExport:nr,getHalfHourDemandPrevious:tr,getHalfHourEnergies:Nr,getMagneticFieldThreshold:fr,getMeterInfo:Mr,getMonthDemand:L,getMonthDemandExport:vr,getMonthMaxDemand:w,getMonthMaxDemandExport:Tr,getOperatorParameters:y,getOperatorParametersExtended3:Cr,getRatePlanInfo:X,getSaldo:H,getSaldoParameters:Y,getSeasonProfile:$,getSpecialDay:q,getVersion:F,prepareRatePlan:d,resetPowerMaxDay:Z,resetPowerMaxMonth:Q,runTariffPlan:ar,setAccessKey:P,setCorrectDateTime:ir,setCorrectTime:m,setDateTime:C,setDayProfile:I,setDemandParameters:Sr,setDisplayParam:Or,setOperatorParameters:U,setOperatorParametersExtended3:Pr,setSaldo:G,setSaldoParameters:x,setSeasonProfile:M,setSpecialDay:l,setSpecialOperation:sr,turnRelayOff:p,turnRelayOn:V});var Vr=function(r){var a=r.trim();if(!a){return[]}a=a.replace(/0x/g,"").split(/\s+/).map(function(r){return r.padStart(2,"0")}).join("");if(a.length%2!==0){a="0".concat(a)}var e=a.length/2;var t=new Array(e);for(var E=0;E<e;E++){t[E]=parseInt(a.substring(E*2,E*2+2),16)}return t};var pr=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(T(a))};var mr=function(r){var a={};for(var e in r){var t=r[e];a[t]=e}return a};var yr=mr(Lr);var Ur=0;var Fr=128;var Hr=129;var Gr=130;var Xr=131;var Wr=132;var Yr=133;var xr=134;var Br=135;var wr=136;var Kr=137;var br=144;var Zr=145;var Qr=146;var jr=147;var zr=149;var kr=151;var $r=152;var qr=153;var Jr=154;var ra=155;var aa=156;var ea=159;var ta=160;var Ea=240;var _a=Object.freeze({__proto__:null,ACCESS_DENIED:jr,BAD_ARRAY_INDEX:xr,BAD_BLOCK_NUMBER:aa,BAD_DATA_LENGTH:Yr,BAD_MESSAGE:Wr,BAD_RATE_PLAN_ID:wr,BAD_RATE_PLAN_SIZE:Kr,BAD_RESPONSE_LENGTH:br,BAD_SALDO_WRITE:zr,BLOCKED_METER:kr,CALIBRATION_DISABLED:Qr,DECRYPTION_FAILURE:Gr,INTERNAL:Ea,INVALID_CORRECTION_INTERVAL:Jr,NOT_ALIGNED_DATA:Hr,NOT_PREPARED_RATE_PLAN:Br,NO_DATA_FOR_DATE:Zr,OK:Ur,OUT_OFF_RANGE:ea,SET_METER_TYPE_FAILURE:ta,TIME_CORRECTION_FAILURE:qr,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:ra,UNENCRYPTED_COMMAND_DISABLED:$r,UNKNOWN_COMMAND:Fr,UNKNOWN_PROTOCOL:Xr});var va=mr(_a);var na=0;var Aa=1;var Ta=2;var Ra=3;var ia=Object.freeze({__proto__:null,READ_ONLY:Ra,READ_WRITE:Ta,ROOT:Aa,UNENCRYPTED:na});var Oa=hr;var oa=yr[hr];var sa=1;var fa=function(r){if(r.length!==sa){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var a=A(r,1),e=a[0];return{errorCode:e,errorName:va[e]}};var Na={encrypt:function(){},decrypt:function(){}};var ua=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=a;r.forEach(function(r){e^=r});return e};var Ca=2;var Pa=2;var Sa=function(r){var a=A(r,1),e=a[0];if(e===Oa){try{var t=fa(r.slice(Ca));return{id:e,name:oa,headerSize:Ca,bytes:r,parameters:t}}catch{return null}}return null};var Da=function(r,a){var e=A(a,1),t=e[0];var E=Sa(a.slice(Pa-1));var _=Sa(a.slice(Pa));var v={messageId:t,bytes:a};if(E){return{...v,accessLevel:na,commands:[E]}}if(_){return{...v,accessLevel:r,commands:[_]}}return null};var Ia=3;t(t(t(t({},na,0),Ra,1),Ta,2),Aa,3);var Ma=2;var la=2;var ga=function(r,a){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var E=t?.aesKey;var _=[];var v=A(e,2),n=v[0],R=v[1];var i=R&Ia;var O=Da(i,e);var o={messageId:n,accessLevel:i,commands:_,bytes:e,lrc:{received:undefined,calculated:0}};var s=e.slice(Ma);var f;if(O){return O}if(E&&i!==na){s=T(Na.decrypt(E,s))}var N=s[s.length-1];s=s.slice(0,-1);var u=ua(s);if(i!==na||N!==0){if(N!==u){f="Mismatch LRC."}}var C=s[0]&Ia;var P=s.slice(1);if(i!==C){f="Mismatch access levels."}var S=0;do{var D=P[S];var I=P[S+1];var M=la+I;var l=P.slice(S+la,S+M);var g={id:D,name:a[D],headerSize:la,bytes:P.slice(S,S+M)};if(!D){break}try{if(!r[D]){throw new Error("Unsupported command id: ".concat(D,"!"))}g.parameters=r[D](l,t);_.push(g)}catch(r){_.push({command:g,error:r.message})}S+=M}while(S<=P.length);o.lrc.calculated=u;o.lrc.received=N;if(f){return{message:o,error:f}}return o}};var da=1;var ca=3;var ha=4;var La=5;var Va=7;var pa=8;var ma=9;var ya=13;var Ua=15;var Fa=16;var Ha=17;var Ga=18;var Xa=19;var Wa=20;var Ya=21;var xa=22;var Ba=23;var wa=24;var Ka=25;var ba=28;var Za=30;var Qa=31;var ja=40;var za=41;var ka=42;var $a=44;var qa=46;var Ja=47;var re=49;var ae=50;var ee=51;var te=52;var Ee=53;var _e=54;var ve=57;var ne=58;var Ae=59;var Te=60;var Re=61;var ie=62;var Oe=63;var oe=64;var se=69;var fe=70;var Ne=71;var ue=72;var Ce=73;var Pe=78;var Se=79;var De=80;var Ie=82;var Me=83;var le=84;var ge=85;var de=86;var ce=88;var he=89;var Le=90;var Ve=92;var pe=93;var me=94;var ye=100;var Ue=109;var Fe=111;var He=112;var Ge=113;var Xe=114;var We=116;var Ye=117;var xe=118;var Be=122;var we=Object.freeze({__proto__:null,activateRatePlan:Xa,getBv:He,getCorrectTime:ie,getCriticalEvent:de,getCurrentStatusMeter:ve,getCurrentValues:ya,getDateTime:Va,getDayDemand:xa,getDayDemandExport:Se,getDayMaxDemand:re,getDayMaxDemandExport:ce,getDayProfile:Ae,getDemand:xe,getDeviceId:La,getDeviceType:ha,getDisplayParam:me,getEnergy:Ua,getEnergyDayPrevious:ca,getEnergyExport:Pe,getEnergyExportDayPrevious:De,getEventStatus:da,getEvents:ee,getEventsCounters:te,getExtendedCurrentValues:ne,getHalfHourDemand:Ya,getHalfHourDemandChannel:Le,getHalfHourDemandExport:Me,getHalfHourDemandVare:Ce,getHalfHourDemandVareExport:ge,getHalfHourDemandVari:ue,getHalfHourDemandVariExport:le,getHalfHourEnergies:Fe,getMagneticFieldThreshold:Ue,getMeterInfo:Be,getMonthDemand:Ba,getMonthDemandExport:Ie,getMonthMaxDemand:ae,getMonthMaxDemandExport:he,getOperatorParameters:Za,getOperatorParametersExtended:Oe,getOperatorParametersExtended2:Ne,getOperatorParametersExtended3:Ge,getOperatorParametersExtended4:Ye,getRatePlanInfo:$a,getSaldo:za,getSaldoParameters:qa,getSeasonProfile:Te,getSpecialDay:Re,getVersion:ja,prepareRatePlan:Wa,resetPowerMaxDay:Ee,resetPowerMaxMonth:_e,runTariffPlan:fe,setAccessKey:ma,setCorrectDateTime:Ve,setCorrectTime:ba,setDateTime:pa,setDayProfile:Fa,setDisplayParam:pe,setOperatorParameters:Qa,setOperatorParametersExtended:oe,setOperatorParametersExtended2:se,setOperatorParametersExtended3:Xe,setOperatorParametersExtended4:We,setSaldo:ka,setSaldoParameters:Ja,setSeasonProfile:Ha,setSpecialDay:Ga,setSpecialOperation:ye,turnRelayOff:Ka,turnRelayOn:wa});var Ke=120;var be=254;var Ze=255;var Qe=Object.freeze({__proto__:null,activateRatePlan:Xa,errorDataFrameResponse:Ze,errorResponse:be,getBv:He,getCorrectTime:ie,getCriticalEvent:de,getCurrentStatusMeter:ve,getCurrentValues:ya,getDateTime:Va,getDayDemand:xa,getDayDemandExport:Se,getDayEnergies:Ke,getDayMaxDemand:re,getDayMaxDemandExport:ce,getDayProfile:Ae,getDemand:xe,getDeviceId:La,getDeviceType:ha,getDisplayParam:me,getEnergy:Ua,getEnergyDayPrevious:ca,getEnergyExport:Pe,getEnergyExportDayPrevious:De,getEventStatus:da,getEvents:ee,getEventsCounters:te,getExtendedCurrentValues:ne,getHalfHourDemand:Ya,getHalfHourDemandChannel:Le,getHalfHourDemandExport:Me,getHalfHourDemandVare:Ce,getHalfHourDemandVareExport:ge,getHalfHourDemandVari:ue,getHalfHourDemandVariExport:le,getHalfHourEnergies:Fe,getMagneticFieldThreshold:Ue,getMeterInfo:Be,getMonthDemand:Ba,getMonthDemandExport:Ie,getMonthMaxDemand:ae,getMonthMaxDemandExport:he,getOperatorParameters:Za,getOperatorParametersExtended:Oe,getOperatorParametersExtended2:Ne,getOperatorParametersExtended3:Ge,getOperatorParametersExtended4:Ye,getRatePlanInfo:$a,getSaldo:za,getSaldoParameters:qa,getSeasonProfile:Te,getSpecialDay:Re,getVersion:ja,prepareRatePlan:Wa,resetPowerMaxDay:Ee,resetPowerMaxMonth:_e,runTariffPlan:fe,setAccessKey:ma,setCorrectDateTime:Ve,setCorrectTime:ba,setDateTime:pa,setDayProfile:Fa,setDisplayParam:pe,setOperatorParameters:Qa,setOperatorParametersExtended:oe,setOperatorParametersExtended2:se,setOperatorParametersExtended3:Xe,setOperatorParametersExtended4:We,setSaldo:ka,setSaldoParameters:Ja,setSeasonProfile:Ha,setSpecialDay:Ga,setSpecialOperation:ye,turnRelayOff:Ka,turnRelayOn:wa});var je=mr(Qe);var ze=1;var ke=2;var $e=3;var qe=4;var Je=Math.log,rt=Math.pow,at=Math.LN2;var et=function(r,a,e,t,E){var _,v,n=E*8-t-1,A=(1<<n)-1,T=A>>1,R=-7,i=e?E-1:0,O=e?-1:1,o=r[a+i];i+=O;_=o&(1<<-R)-1;o>>=-R;R+=n;for(;R>0;_=_*256+r[a+i],i+=O,R-=8);v=_&(1<<-R)-1;_>>=-R;R+=t;for(;R>0;v=v*256+r[a+i],i+=O,R-=8);if(_===0){_=1-T}else if(_===A){return v?NaN:o?-Infinity:Infinity}else{v=v+rt(2,t);_=_-T}return(o?-1:1)*v*rt(2,_-t)};var tt=function(r,a,e,t,E,_){var v,n,A,T=_*8-E-1,R=(1<<T)-1,i=R>>1,O=E===23?rt(2,-24)-rt(2,-77):0,o=t?0:_-1,s=t?1:-1,f=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){n=e!==e?1:0;v=R}else{v=Je(e)/at|0;if(e*(A=rt(2,-v))<1){v--;A*=2}if(v+i>=1){e+=O/A}else{e+=O*rt(2,1-i)}if(e*A>=2){v++;A/=2}if(v+i>=R){n=0;v=R}else if(v+i>=1){n=(e*A-1)*rt(2,E);v=v+i}else{n=e*rt(2,i-1)*rt(2,E);v=0}}for(;E>=8;r[a+o]=n&255,o+=s,n/=256,E-=8);v=v<<E|n;T+=E;for(;T>0;r[a+o]=v&255,o+=s,v/=256,T-=8);r[a+o-s]|=f*128};var Et=[1,0];var _t=[2,1,0];var vt=[3,2,1,0];var nt=[0,1];var At=[0,1,2];var Tt=[0,1,2,3];var Rt=function(r,a){return r[a]};var it=function(r,a,e){var t=e?nt:Et;var E=r[a+t[0]];var _=r[a+t[1]]<<8;return E|_};var Ot=function(r,a,e){var t=e?At:_t;var E=r[a+t[0]];var _=r[a+t[1]]<<8;var v=r[a+t[2]]<<16;return E|_|v};var ot=function(r,a,e){var t=e?Tt:vt;var E=r[a+t[3]]*16777216;var _=r[a+t[2]]*65536;var v=r[a+t[1]]*256;var n=r[a+t[0]];return E+_+v+n};var st=function(r,a,e){r[a]=e&255};var ft=function(r,a,e,t){var E=t?nt:Et;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255};var Nt=function(r,a,e,t){var E=t?At:_t;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255};var ut=function(r,a,e,t){var E=t?Tt:vt;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255;r[a+E[3]]=e>>>24&255};function Ct(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=a}Ct.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){st(this.data,this.offset,r<0?r|256:r);this.offset+=ze},getInt8:function(){var r=Rt(this.data,this.offset);this.offset+=ze;return r&128?r^-256:r},setUint8:function(r){st(this.data,this.offset,r);this.offset+=ze},getUint8:function(){var r=Rt(this.data,this.offset);this.offset+=ze;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ft(this.data,this.offset,r<0?r|65536:r,a);this.offset+=ke},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=it(this.data,this.offset,r);this.offset+=ke;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ft(this.data,this.offset,r,a);this.offset+=ke},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=it(this.data,this.offset,r);this.offset+=ke;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Nt(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=$e},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ot(this.data,this.offset,r);this.offset+=$e;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Nt(this.data,this.offset,r,a);this.offset+=$e},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ot(this.data,this.offset,r);this.offset+=$e;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ut(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=qe},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ot(this.data,this.offset,r);this.offset+=qe;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ut(this.data,this.offset,r,a);this.offset+=qe},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=ot(this.data,this.offset,r);this.offset+=qe;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;tt(this.data,this.offset,r,a,23,4);this.offset+=qe},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=et(this.data,this.offset,r,23,4);this.offset+=qe;return a},setString:function(r){this.setUint8(r.length);for(var a=0;a<r.length;++a){this.setUint8(r.charCodeAt(a))}},getString:function(){var r=this.getUint8();var a=this.offset+r;var e=[];while(this.offset<a){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[a,r.length].concat(T(r)));this.data=e;this.offset=a+r.length}};Object.defineProperties(Ct.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var Pt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=0;for(var t in a){if(t in r&&a[t]){e|=r[t]}}return e};var St=function(r,a,e){return(1<<a)-1&r>>e-1};var Dt=function(r,a,e,t){var E=(1<<a)-1<<e-1;var _=t;var v=r;v&=~E;_<<=e-1;v|=_;return v};var It=[".","1","3","R","M"];var Mt=[".","A","G","R","T","D"];var lt=[".","0","1","2","3","4","5"];var gt=[".","A","B","C","D","E","F"];var dt=[".","A","B","C","D","E","F","H","K","G"];var ct=[".","1","2","3","4"];var ht=[".","L","M","Z","K"];var Lt=[".","0","1","2","3","4","5","6","7","8","9"];var Vt=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var pt=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var mt=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var yt=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var Ut={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Ft={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var Ht=function(r){return Pt(Ft,{...r,typeMeterG:!r.typeMeterG})};var Gt=function(r){var a=[];r.forEach(function(r){return a.push(r.toString(16))});if(r.length&1){a.push("0")}return Vr(a.join(""))};var Xt=function(r,a,e){var t=[];if(r.length<11){throw new Error("Wrong format")}t.push(It.indexOf(r[0]));t.push(Mt.indexOf(r[1]));t.push(lt.indexOf(r[2]));t.push(lt.indexOf(r[3]));if(r[4]!=="."){throw new Error("Wrong format")}t.push(gt.indexOf(r[5]));t.push(dt.indexOf(r[6]));if(r[7]!=="."){throw new Error("Wrong format")}t.push(ct.indexOf(r[8]));t.push(ht.indexOf(r[9]));t.push(e??0);t.push(Lt.indexOf(r[10]));if(r[11]!=="-"){throw new Error("Wrong format")}var E=r.length>13?r.length-1:r.length;for(var _=12;_<E;_++){t.push(Vt.indexOf(r[_]))}if(E<r.length){t.push(mt.indexOf(r[E]))}var v=Gt(t);var n=new Array(9).fill(0);n[0]=0;for(var A=0;A<v.length;A++){n[A+(v.length<8?1:0)]=v[A]}return n};var Wt=function(r){if(r.length<3){throw new Error("Wrong format")}var a=[];a.push(It.indexOf(r[0]));a.push(Mt.indexOf(r[1]));for(var e=3;e<r.length;e++){a.push(pt.indexOf(r[e]))}var t=Gt(a);if(t.length===8){return t}if(t.length>8){throw new Error("Wrong format")}var E=new Array(8).fill(0);for(var _=0;_<t.length;_++){E[_]=t[_]}return E};var Yt=function(r){if(r.length<1){throw new Error("Wrong format")}var a=[];a.push(It.indexOf(r[0]));for(var e=1;e<r.length;e++){a.push(yt.indexOf(r[e]))}var t=Gt(a);var E=new Array(8).fill(0);for(var _=0;_<t.length&&_<8;_++){E[_]=t[_]}return E};var xt=function(r,a){var e=r.type,t=r.revision,E=r.descriptor;if(!e.startsWith("MTX ")){throw new Error("Wrong format")}var _;var v=e.substring(4);var n=e[4];if(n==="1"||n==="3"){_=Xt(v,a,t)}else{_=n==="M"?Yt(v):Wt(v)}if(E?.meterType){_[8]=E.meterType==="mtx1"?Pt(Ut,E):Ht(E)}else{_[8]=0}return _};var Bt=80;var wt=81;var Kt=82;var bt=83;var Zt=84;var Qt=85;var jt=86;var zt=87;var kt=88;var $t=89;var qt=90;var Jt=91;var rE=255;var aE=Object.freeze({__proto__:null,DATA_REQUEST:Bt,DATA_RESPONSE:wt,FRAGMENT_REQUEST:qt,FRAGMENT_RESPONSE:Jt,IDENT_REQUEST:Kt,IDENT_RESPONSE:bt,INVALID:rE,L2_CHECK_ADDRESS_REQUEST:jt,L2_CHECK_ADDRESS_RESPONSE:zt,L2_RM_ADDRESS_REQUEST:kt,L2_RM_ADDRESS_RESPONSE:$t,L2_SET_ADDRESS_REQUEST:Zt,L2_SET_ADDRESS_RESPONSE:Qt});mr(aE);mr(ia);var eE=0;var tE=1;var EE=2;var _E=3;var vE=4;var nE=5;var AE=6;var TE=7;var RE=8;var iE=9;var OE=10;var oE=11;var sE=12;var fE=13;var NE=14;var uE=Object.freeze({__proto__:null,CASE_MODULE_OPEN:OE,CASE_OPEN:eE,CASE_TERMINAL_OPEN:iE,DEVICE_FAILURE:RE,ERROR_ACCESS:nE,MAGNETIC_ON:tE,PARAMETERS_UPDATE_LOCAL:_E,PARAMETERS_UPDATE_REMOTE:EE,PROTECTION_RESET_EM:fE,PROTECTION_RESET_MAGNETIC:NE,RESTART:vE,TARIFF_TABLE_GET:sE,TARIFF_TABLE_SET:oE,TIME_CORRECT:TE,TIME_SET:AE});mr(uE);mr(lr);var CE=1;var PE=2;var SE=3;var DE=16;var IE=17;var ME=18;var lE=19;var gE=20;var dE=21;var cE=32;var hE=33;var LE=34;var VE=35;var pE=36;var mE=37;var yE=38;var UE=39;var FE=40;var HE=41;var GE=49;var XE=50;var WE=51;var YE=52;var xE=53;var BE=54;var wE=55;var KE=56;var bE=57;var ZE=58;var QE=59;var jE=64;var zE=65;var kE=66;var $E=67;var qE=68;var JE=69;var r_=70;var a_=71;var e_=72;var t_=73;var E_=74;var __=75;var v_=76;var n_=77;var A_=78;var T_=79;var R_=80;var i_=81;var O_=82;var o_=83;var s_=84;var f_=85;var N_=86;var u_=87;var C_=88;var P_=89;var S_=96;var D_=97;var I_=98;var M_=99;var l_=100;var g_=101;var d_=102;var c_=103;var h_=104;var L_=105;var V_=112;var p_=113;var m_=114;var y_=115;var U_=116;var F_=117;var H_=118;var G_=119;var X_=120;var W_=121;var Y_=122;var x_=123;var B_=124;var w_=125;var K_=144;var b_=145;var Z_=147;var Q_=148;var j_=152;var z_=156;var k_=157;var $_=158;var q_=159;var J_=160;var rv=161;var av=162;var ev=176;var tv=177;var Ev=178;var _v=179;var vv=180;var nv=181;var Av=182;var Tv=183;var Rv=185;var iv=186;var Ov=224;var ov=225;var sv=226;var fv=227;var Nv=228;var uv=229;var Cv=230;var Pv=231;var Sv=232;var Dv=Object.freeze({__proto__:null,ACCESS_ERROR:IE,ACCESS_LOCKED:DE,ACC_PARAMETERS_EXT_FAULT:y_,ACC_PARAMETERS_FAULT:m_,BAD_TEST_EEPROM:h_,BAD_TEST_FRAM:L_,BATTERY_FAULT:o_,BATTERY_OK:O_,BIPOLAR_POWER_FAULT:vv,BIPOLAR_POWER_OK:nv,BLOCK_TARIFF_FAULT:F_,CALC_PERIOD_FAULT:U_,CALIBRATION_FAULT:f_,CALIBRATION_FLAG_RESET:c_,CALIBRATION_FLAG_SET:d_,CALIBRATION_OK:s_,CALIBRATION_PARAMETERS_FAULT:H_,CASE_CLOSED:lE,CASE_MODULE_CLOSED:w_,CASE_MODULE_OPENED:B_,CASE_OPENED:ME,CASE_TERMINAL_BOX_CLOSED:x_,CASE_TERMINAL_BOX_OPENED:Y_,CHANGE_ACCESS_KEY0:cE,CHANGE_ACCESS_KEY1:hE,CHANGE_ACCESS_KEY2:LE,CHANGE_ACCESS_KEY3:VE,CHANGE_COR_TIME:HE,CHANGE_PARAMETERS_CHANNEL:Rv,CHANGE_PARAMETERS_LOCAL:pE,CHANGE_PARAMETERS_REMOTE:mE,CHANGE_TARIFF_TABLE:XE,CHANGE_TARIFF_TABLE_2:j_,CLOCK_FAULT:u_,CLOCK_OK:N_,CMD_RELAY_2_OFF:D_,CMD_RELAY_2_ON:S_,CMD_RELAY_OFF:FE,CMD_RELAY_ON:UE,CMD_SET_DATETIME:yE,COSF_MIN_OVER:QE,COSF_OK:ZE,CROSS_ZERO_EN_T1:I_,CROSS_ZERO_EN_T2:M_,CROSS_ZERO_EN_T3:l_,CROSS_ZERO_EN_T4:g_,CROSS_ZERO_EXPORT_EN_T1:$_,CROSS_ZERO_EXPORT_EN_T2:q_,CROSS_ZERO_EXPORT_EN_T3:J_,CROSS_ZERO_EXPORT_EN_T4:rv,CURRENT_UNEQUAL_FAULT:Ev,CURRENT_UNEQUAL_OK:_v,EM_MAGNETIC_INFLUENCE_OFF:tv,EM_MAGNETIC_INFLUENCE_ON:ev,ENERGY_REGISTER_FAULT:CE,ENERGY_REGISTER_OVERFLOW:GE,F_MAX_OK:e_,F_MAX_OVER:t_,F_MIN_OK:E_,F_MIN_OVER:__,I_MAX_OK:v_,I_MAX_OVER:n_,MAGNETIC_INFLUENCE_OFF:dE,MAGNETIC_INFLUENCE_ON:gE,OPERATOR_PARAMETERS_VALUES_FAULT:SE,POWER_A_OFF:C_,POWER_A_ON:P_,POWER_OVER_RELAY_OFF:k_,POWER_SALDO_OK:R_,POWER_SALDO_OVER:i_,P_MAX_A_MINUS_OK:Pv,P_MAX_A_MINUS_OVER:Sv,P_MAX_OK:A_,P_MAX_OVER:T_,RELAY_HARD_BAD_OFF:K_,RELAY_HARD_BAD_ON:Z_,RELAY_HARD_OFF:Q_,RELAY_HARD_ON:b_,RELAY_OFF:wE,RELAY_OFF_BAD_SALDO:iv,RELAY_ON:BE,RESET_EM_FLAG:Av,RESET_MAGNET_FLAG:Tv,RESTART:KE,SALDO_EN_FAULT:X_,SALDO_PARAMETERS_FAULT:p_,SET_DEMAND_EN_10MIN:fv,SET_DEMAND_EN_15MIN:Nv,SET_DEMAND_EN_1MIN:Ov,SET_DEMAND_EN_30MIN:uv,SET_DEMAND_EN_3MIN:ov,SET_DEMAND_EN_5MIN:sv,SET_DEMAND_EN_60MIN:Cv,SET_NEW_SALDO:V_,SET_SALDO_PARAM:z_,SET_TARIFF_TABLE:WE,SUMMER_TIME:YE,TIME_CORRECT:W_,TIME_CORRECT_NEW:av,T_MAX_OK:qE,T_MAX_OVER:JE,T_MIN_OK:r_,T_MIN_OVER:a_,VENDOR_PAR_FAULT:PE,V_MAX_OK:jE,V_MAX_OVER:zE,V_MIN_OK:kE,V_MIN_OVER:$E,WATCHDOG_RESTART:bE,WINTER_SUMMER_FAULT:G_,WINTER_TIME:xE});mr(Dv);var Iv=1;var Mv=2;var lv=3;var gv=4;var dv=5;var cv=6;var hv=7;var Lv=8;var Vv=9;var pv=10;var mv=11;var yv=12;var Uv=13;var Fv=14;var Hv=15;var Gv=16;var Xv=17;var Wv=18;var Yv=19;var xv=20;var Bv=21;var wv=22;var Kv=23;var bv=24;var Zv=25;var Qv=26;var jv=28;var zv=30;var kv=31;var $v=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:gv,ACTIVE_ENERGY_T2:dv,ACTIVE_ENERGY_T3:cv,ACTIVE_ENERGY_T4:hv,ACTIVE_POWER_IN_NEUTRAL:Vv,ACTIVE_POWER_PER_PHASE:Lv,BATTERY_VOLTAGE:wv,CURRENT_BALANCE:zv,CURRENT_IN_NEUTRAL:mv,CURRENT_IN_PHASE:pv,DATE_MONTH_YEAR:Fv,EXPORTED_ACTIVE_ENERGY_T1:Gv,EXPORTED_ACTIVE_ENERGY_T2:Xv,EXPORTED_ACTIVE_ENERGY_T3:Wv,EXPORTED_ACTIVE_ENERGY_T4:Yv,HOUR_MINUTE_SECOND:Uv,MAGNET_INDUCTION:jv,OPTOPORT_SPEED:kv,POWER_FACTOR_PHASE_A:xv,POWER_FACTOR_PHASE_B:Bv,POWER_THRESHOLD_T1:Kv,POWER_THRESHOLD_T2:bv,POWER_THRESHOLD_T3:Zv,POWER_THRESHOLD_T4:Qv,SET_ALL_SEGMENT_DISPLAY:Iv,SOFTWARE_VERSION:Mv,TOTAL_ACTIVE_ENERGY:lv,TOTAL_EXPORTED_ACTIVE_ENERGY:Hv,VOLTAGE:yv});mr($v);var qv=2400;var Jv=9600;var rn={rs485orTwi:{0:Jv,2:qv,4:Jv},optoport:{0:qv,2:qv,4:Jv}};({rs485orTwi:mr(rn.rs485orTwi),optoport:mr(rn.optoport)});var an=4;var en=1;var tn=4;var En=3;var _n=48;var vn=50;var nn=3+_n*2;var An=4+vn*2;var Tn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};function Rn(r,a,e){var t=1+an;var E=a;e.forEach(function(r,a){E=Dt(E,1,a+t,Number(!!r))});r.setUint8(E)}function On(r,a){var e=a.tariff,t=a.energy;if(e!==undefined&&t!==undefined){r.setUint16(e<<14|t&16383)}else{r.setUint16(65535)}}var on=function(r,a){var e=a.manufacturer,t=a.type,E=a.year,_=a.serial;r.setBytes(Vr(e));r.setUint8(t);r.setUint8(E);r.setBytes(Vr(_))};var sn=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var fn=function(r,a){r.setBytes(xt(a))};var Nn=function(r,a){var e=a.energyType,t=a.energies;if(e){Rn(r,e,t)}t.forEach(function(a){if(a!==null){r.setInt32(a)}})};var un=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var Cn=function(r,a){a.forEach(function(a){return On(r,a)})};var Pn=function(r,a){r.setUint16(Pt(Tn,a))};var Sn=function(r){if(r?.energyType){var a=r.energies.filter(function(r){return r!==null}).length;return En+en+a*tn}return En+tn*an};var Dn=o;var In=2;var Mn=function(r){var a=new Ct(In,true);Pn(a,r);return pr(Dn,a.data)};var ln=s;var gn=function(r){var a=new Ct(Sn(r),false);un(a,r.date);Nn(a,r);return pr(ln,a.data)};var dn=f;var cn=9;var hn=function(r){var a=new Ct(cn,false);fn(a,r);return pr(dn,a.data)};var Ln=N;var Vn=8;var pn=function(r){var a=new Ct(Vn,false);on(a,r);return pr(Ln,a.data)};var mn=u;var yn=8;var Un=function(r){var a=new Ct(yn,false);sn(a,r);return pr(mn,a.data)};var Fn=C;var Hn=function(){return pr(Fn)};var Gn=16;var Xn=D;var Wn=function(r){var a=Gn;if(r?.energyType){var e=r.energies.filter(function(r){return r!==null}).length;a=en+e*tn}var t=new Ct(a,false);Nn(t,r);return pr(Xn,t.data)};var Yn=c;var xn=function(r){var a=new Ct(r.periods.length>_n?An:nn,false);un(a,r.date);Cn(a,r.periods);if(r.dstHour){a.setUint8(r.dstHour)}return pr(Yn,a.data)};var Bn=1;var wn=2;({wh:t(t({},Bn,{gType:"1.8",rType:"1.8"}),wn,{gType:"2.8"}),vari:t(t({},Bn,{gType:"5.8",rType:"3.8"}),wn,{gType:"6.8"}),vare:t(t({},Bn,{gType:"8.8",rType:"4.8"}),wn,{gType:"7.8"})});mr(we);var Kn=1;var bn=2;var Zn=3;var Qn=4;var jn=17;var zn=18;var kn=19;var $n=20;var qn=21;var Jn=22;var rA=23;var aA=32;var eA=33;var tA=34;var EA=35;var _A=36;var vA=37;var nA=38;var AA=39;var TA=40;var RA=49;var iA=50;var OA=51;var oA=52;var sA=53;var fA=54;var NA=55;var uA=56;var CA=57;var PA=64;var SA=65;var DA=66;var IA=67;var MA=68;var lA=69;var gA=70;var dA=71;var cA=72;var hA=73;var LA=74;var VA=75;var pA=76;var mA=77;var yA=78;var UA=79;var FA=80;var HA=81;var GA=82;var XA=83;var WA=84;var YA=85;var xA=86;var BA=87;var wA=88;var KA=89;var bA=90;var ZA=91;var QA=92;var jA=93;var zA=94;var kA=95;var $A=96;var qA=97;var JA=98;var rT=99;var aT=100;var eT=101;var tT=102;var ET=103;var _T=104;var vT=105;var nT=106;var AT=107;var TT=108;var RT=109;var iT=110;var OT=111;var oT=112;var sT=113;var fT=114;var NT=115;var uT=116;var CT=117;var PT=118;var ST=119;var DT=120;var IT=121;var MT=122;var lT=123;var gT=124;var dT=125;var cT=126;var hT=127;var LT=128;var VT=129;var pT=130;var mT=131;var yT=132;var UT=133;var FT=134;var HT=135;var GT=136;var XT=137;var WT=138;var YT=139;var xT=140;var BT=141;var wT=142;var KT=143;var bT=144;var ZT=145;var QT=147;var jT=148;var zT=149;var kT=150;var $T=151;var qT=152;var JT=153;var rR=154;var aR=155;var eR=156;var tR=157;var ER=158;var _R=159;var vR=160;var nR=161;var AR=162;var TR=163;var RR=164;var iR=165;var OR=166;var oR=167;var sR=168;var fR=169;var NR=170;var uR=171;var CR=172;var PR=173;var SR=174;var DR=175;var IR=176;var MR=177;var lR=178;var gR=179;var dR=186;var cR=224;var hR=225;var LR=226;var VR=227;var pR=228;var mR=229;var yR=230;var UR=231;var FR=232;var HR=Object.freeze({__proto__:null,ACCESS_ERROR:kn,ACCESS_LOCKED:jn,ACCESS_UNLOCKED:zn,ACCUMULATION_PARAMETERS_EXT_FAULT:FT,ACCUMULATION_PARAMETERS_FAULT:UT,BAD_TEST_EEPROM:VT,BAD_TEST_FRAM:pT,BATTERY_FAULT:vT,BATTERY_OK:_T,BLOCK_TARIFF_FAULT:GT,CALCULATION_PERIOD_FAULT:HT,CALIBRATION_FAULT:AT,CALIBRATION_FLAG_RESET:LT,CALIBRATION_FLAG_SET:hT,CALIBRATION_OK:nT,CALIBRATION_PARAMETERS_FAULT:XT,CASE_CLOSED:qn,CASE_MODULE_CLOSED:aR,CASE_MODULE_OPENED:rR,CASE_OPENED:$n,CASE_TERMINAL_BOX_CLOSED:$T,CASE_TERMINAL_BOX_OPENED:kT,CHANGE_ACCESS_KEY0:aA,CHANGE_ACCESS_KEY1:eA,CHANGE_ACCESS_KEY2:tA,CHANGE_ACCESS_KEY3:EA,CHANGE_COR_TIME:oT,CHANGE_PARAMETERS_LOCAL:_A,CHANGE_PARAMETERS_REMOTE:vA,CHANGE_PARAMETER_CHANNEL1:ER,CHANGE_PARAMETER_CHANNEL2:_R,CHANGE_PARAMETER_CHANNEL3:vR,CHANGE_PARAMETER_CHANNEL4:nR,CHANGE_PARAMETER_CHANNEL5:AR,CHANGE_PARAMETER_CHANNEL6:TR,CHANGE_TARIFF_TABLE:iA,CHANGE_TARIFF_TABLE_2:qT,CHANGE_TARIFF_TABLE_3:JT,CLOCK_FAULT:qA,CLOCK_OK:$A,CMD_RELAY_2_OFF:fT,CMD_RELAY_2_ON:sT,CMD_RELAY_OFF:TA,CMD_RELAY_ON:AA,CMD_SET_DATETIME:nA,COEFFICIENT_TRANSFORMATION_CHANGE:KT,CROSS_ZERO_EN_T1:NT,CROSS_ZERO_EN_T2:uT,CROSS_ZERO_EN_T3:CT,CROSS_ZERO_EN_T4:PT,CROSS_ZERO_EXPORT_EN_T1:RR,CROSS_ZERO_EXPORT_EN_T2:iR,CROSS_ZERO_EXPORT_EN_T3:OR,CROSS_ZERO_EXPORT_EN_T4:oR,CROSS_ZERO_EXPORT_VARE1:CR,CROSS_ZERO_EXPORT_VARE2:PR,CROSS_ZERO_EXPORT_VARE3:SR,CROSS_ZERO_EXPORT_VARE4:DR,CROSS_ZERO_EXPORT_VARI1:sR,CROSS_ZERO_EXPORT_VARI2:fR,CROSS_ZERO_EXPORT_VARI3:NR,CROSS_ZERO_EXPORT_VARI4:uR,CROSS_ZERO_VARE_T1:lT,CROSS_ZERO_VARE_T2:gT,CROSS_ZERO_VARE_T3:dT,CROSS_ZERO_VARE_T4:cT,CROSS_ZERO_VARI_T1:ST,CROSS_ZERO_VARI_T2:DT,CROSS_ZERO_VARI_T3:IT,CROSS_ZERO_VARI_T4:MT,EM_MAGNETIC_INFLUENCE_OFF:MR,EM_MAGNETIC_INFLUENCE_ON:IR,ENERGY_REGISTER_OVERFLOW:RA,ENERGY_T1_FAULT:Kn,ENERGY_T2_FAULT:bn,ENERGY_T3_FAULT:Zn,ENERGY_T4_FAULT:Qn,F_MAX_OK:pA,F_MAX_OVER:mA,F_MIN_OK:yA,F_MIN_UNDER:UA,IA_MAX_OK:WA,IA_MAX_OVER:YA,IB_MAX_OK:xA,IB_MAX_OVER:BA,IC_MAX_OK:wA,IC_MAX_OVER:KA,IDIFF_OK:zA,IDIFF_OVER:kA,MAGNETIC_INFLUENCE_OFF:rA,MAGNETIC_INFLUENCE_ON:Jn,METER_TROUBLE:zT,OPERATOR_PARAMETERS_EXT_VALUES_FAULT:xT,OPERATOR_PARAMETERS_VALUES_FAULT:YT,O_PARAMETERS_FAULT:OT,O_PARAMETERS_OK:iT,PA_MAX_OK:bA,PA_MAX_OVER:ZA,POWER_A_OFF:ET,POWER_A_ON:tT,POWER_B_OFF:eT,POWER_B_ON:aT,POWER_C_OFF:rT,POWER_C_ON:JA,POWER_OVER_RELAY_OFF:tR,PV_MAX_OK:QA,PV_MAX_OVER:jA,P_MAX_A_MINUS_OK:UR,P_MAX_A_MINUS_OVER:FR,RELAY_HARD_BAD_OFF:bT,RELAY_HARD_BAD_ON:QT,RELAY_HARD_OFF:jT,RELAY_HARD_ON:ZT,RELAY_OFF:NA,RELAY_OFF_BAD_SALDO:dR,RELAY_ON:fA,RESET_EM_FLAG:lR,RESET_MAGNETIC_FLAG:gR,RESTART:uA,SALDO_ENERGY_FAULT:BT,SALDO_PARAMETERS_FAULT:yT,SET_DEMAND_EN_10_MIN:VR,SET_DEMAND_EN_15_MIN:pR,SET_DEMAND_EN_1_MIN:cR,SET_DEMAND_EN_30_MIN:mR,SET_DEMAND_EN_3_MIN:hR,SET_DEMAND_EN_5_MIN:LR,SET_DEMAND_EN_60_MIN:yR,SET_NEW_SALDO:mT,SET_SALDO_PARAM:eR,SET_TARIFF_TABLE:OA,SUMMER_TIME:oA,TIME_CORRECT:wT,T_MAX_OK:FA,T_MAX_OVER:HA,T_MIN_OK:GA,T_MIN_UNDER:XA,VA_MAX_OK:PA,VA_MAX_OVER:SA,VA_MIN_OK:DA,VA_MIN_UNDER:IA,VB_MAX_OK:MA,VB_MAX_OVER:lA,VB_MIN_OK:gA,VB_MIN_UNDER:dA,VC_MAX_OK:cA,VC_MAX_OVER:hA,VC_MIN_OK:LA,VC_MIN_UNDER:VA,V_PARAMETERS_FAULT:RT,V_PARAMETERS_OK:TT,WATCHDOG_RESTART:CA,WINTER_SUMMER_FAULT:WT,WINTER_TIME:sA});mr(HR);var GR=1;var XR=2;var WR=3;var YR=4;var xR=5;var BR=6;var wR=7;var KR=8;var bR=9;var ZR=10;var QR=11;var jR=12;var zR=13;var kR=14;var $R=15;var qR=16;var JR=17;var ri=18;var ai=19;var ei=20;var ti=21;var Ei=22;var _i=23;var vi=24;var ni=25;var Ai=26;var Ti=27;var Ri=28;var ii=29;var Oi=30;var oi=31;var si=32;var fi=33;var Ni=34;var ui=35;var Ci=36;var Pi=37;var Si=38;var Di=39;var Ii=40;var Mi=41;var li=42;var gi=43;var di=44;var ci=45;var hi=46;var Li=47;var Vi=48;var pi=49;var mi=50;var yi=51;var Ui=52;var Fi=53;var Hi=54;var Gi=55;var Xi=56;var Wi=57;var Yi=58;var xi=59;var Bi=60;var wi=61;var Ki=62;var bi=63;var Zi=64;var Qi=65;var ji=66;var zi=67;var ki=68;var $i=69;var qi=70;var Ji=71;var rO=72;var aO=73;var eO=74;var tO=75;var EO=76;var _O=77;var vO=78;var nO=79;var AO=80;var TO=81;var RO=82;var iO=83;var OO=84;var oO=85;var sO=86;var fO=87;var NO=88;var uO=89;var CO=90;var PO=91;var SO=92;var DO=93;var IO=94;var MO=95;var lO=96;var gO=97;var dO=98;var cO=99;var hO=100;var LO=101;var VO=102;var pO=103;var mO=104;var yO=105;var UO=106;var FO=107;var HO=108;var GO=109;var XO=110;var WO=111;var YO=112;var xO=113;var BO=114;var wO=115;var KO=116;var bO=117;var ZO=118;var QO=119;var jO=120;var zO=121;var kO=122;var $O=123;var qO=124;var JO=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:YR,ACTIVE_ENERGY_T2:xR,ACTIVE_ENERGY_T3:BR,ACTIVE_ENERGY_T4:wR,ACTIVE_POWER_PHASE_A:gi,ACTIVE_POWER_PHASE_B:di,ACTIVE_POWER_PHASE_C:ci,APPARENT_POWER_QMINUS_PHASE_A:bi,APPARENT_POWER_QMINUS_PHASE_B:Zi,APPARENT_POWER_QMINUS_PHASE_C:Qi,APPARENT_POWER_QPLUS_PHASE_A:xi,APPARENT_POWER_QPLUS_PHASE_B:Bi,APPARENT_POWER_QPLUS_PHASE_C:wi,BATTERY_VOLTAGE:Ii,CURRENT_BALANCE:ZO,CURRENT_IN_NEUTRAL:Ci,CURRENT_IN_PHASE_A:fi,CURRENT_IN_PHASE_B:Ni,CURRENT_IN_PHASE_C:ui,CURRENT_TRANSFORMATION_RATIO:KO,DATE_MONTH_YEAR:wO,EXPORTED_ACTIVE_ENERGY_T1:ai,EXPORTED_ACTIVE_ENERGY_T2:ei,EXPORTED_ACTIVE_ENERGY_T3:ti,EXPORTED_ACTIVE_ENERGY_T4:Ei,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:ii,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:Oi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:oi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:si,EXPORTED_REACTIVE_ENERGY_T1:vi,EXPORTED_REACTIVE_ENERGY_T2:ni,EXPORTED_REACTIVE_ENERGY_T3:Ai,EXPORTED_REACTIVE_ENERGY_T4:Ti,HOUR_MINUTE_SECOND:BO,MAGNET_INDUCTION:qO,MAX_ACTIVE_POWER_DAY_T1:ji,MAX_ACTIVE_POWER_DAY_T2:zi,MAX_ACTIVE_POWER_DAY_T3:ki,MAX_ACTIVE_POWER_DAY_T4:$i,MAX_ACTIVE_POWER_MONTH_T1:qi,MAX_ACTIVE_POWER_MONTH_T2:Ji,MAX_ACTIVE_POWER_MONTH_T3:rO,MAX_ACTIVE_POWER_MONTH_T4:aO,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:CO,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:PO,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:SO,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:DO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:IO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:MO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:lO,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:gO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:UO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:FO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:HO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:GO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:XO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:WO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:YO,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:xO,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:dO,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:cO,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:hO,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:LO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:VO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:pO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:mO,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:yO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:RO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:iO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:OO,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:oO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:sO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:fO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:NO,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:uO,MAX_REACTIVE_POWER_DAY_T1:eO,MAX_REACTIVE_POWER_DAY_T2:tO,MAX_REACTIVE_POWER_DAY_T3:EO,MAX_REACTIVE_POWER_DAY_T4:_O,MAX_REACTIVE_POWER_MONTH_T1:vO,MAX_REACTIVE_POWER_MONTH_T2:nO,MAX_REACTIVE_POWER_MONTH_T3:AO,MAX_REACTIVE_POWER_MONTH_T4:TO,NEGATIVE_REACTIVE_ENERGY_T1:kR,NEGATIVE_REACTIVE_ENERGY_T2:$R,NEGATIVE_REACTIVE_ENERGY_T3:qR,NEGATIVE_REACTIVE_ENERGY_T4:JR,OPTOPORT_SPEED:$O,POWER_FACTOR_PHASE_A:Gi,POWER_FACTOR_PHASE_B:Xi,POWER_FACTOR_PHASE_C:Wi,POWER_THRESHOLD_T1:QO,POWER_THRESHOLD_T2:jO,POWER_THRESHOLD_T3:zO,POWER_THRESHOLD_T4:kO,REACTIVE_ENERGY_T1:bR,REACTIVE_ENERGY_T2:ZR,REACTIVE_ENERGY_T3:QR,REACTIVE_ENERGY_T4:jR,REACTIVE_POWER_QMINUS_PHASE_A:yi,REACTIVE_POWER_QMINUS_PHASE_B:Ui,REACTIVE_POWER_QMINUS_PHASE_C:Fi,REACTIVE_POWER_QPLUS_PHASE_A:Li,REACTIVE_POWER_QPLUS_PHASE_B:Vi,REACTIVE_POWER_QPLUS_PHASE_C:pi,SET_ALL_SEGMENT_DISPLAY:GR,SOFTWARE_VERSION:XR,SUPPLY_FREQUENCY:Mi,TOTAL_ACTIVE_ENERGY:WR,TOTAL_ACTIVE_POWER:li,TOTAL_APPARENT_POWER_QMINUS:Ki,TOTAL_APPARENT_POWER_QPLUS:Yi,TOTAL_EXPORTED_ACTIVE_ENERGY:ri,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:Ri,TOTAL_EXPORTED_REACTIVE_ENERGY:_i,TOTAL_NEGATIVE_REACTIVE_ENERGY:zR,TOTAL_POWER_FACTOR:Hi,TOTAL_REACTIVE_ENERGY:KR,TOTAL_REACTIVE_POWER_QMINUS:mi,TOTAL_REACTIVE_POWER_QPLUS:hi,VOLTAGE_IN_PHASE_A:Pi,VOLTAGE_IN_PHASE_B:Si,VOLTAGE_IN_PHASE_C:Di,VOLTAGE_TRANSFORMATION_RATIO:bO});mr(JO);var ro=2400;var ao=9600;var eo={rs485orTwi:{0:ao,2:ro,4:ao},optoport:{0:ao,2:ro,4:ao}};({rs485orTwi:mr(eo.rs485orTwi),optoport:mr(eo.optoport)});var to=1;var Eo=4;function _o(r,a){var e=a.wh,t=a.vari,E=a.vare;var _=1+Eo;var v=r;for(var n=0;n<an;n++){v=Dt(v,1,n+_,Number(!!e[n]&&!!t[n]&&!!E[n]))}return v}var vo=function(r,a){var e=a.energyType,t=a.energies;if(e){var E=_o(e,t);var _=E>>Eo;r.setUint8(E);for(var v=0;v<an;v++){var n=!!St(_,1,v+1);if(n){r.setInt32(t.wh[v]);r.setInt32(t.vari[v]);r.setInt32(t.vare[v])}}return}for(var A=0;A<an;A++){r.setInt32(t.wh[A]);r.setInt32(t.vari[A]);r.setInt32(t.vare[A])}};var no=function(r,a){var e=a.date.year<<1|a.date.month>>3&1;var t=a.date.month<<5&224|a.date.date&31;r.setUint8(e);r.setUint8(t);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var Ao=function(r){var a=r.energies,e=a.wh,t=a.vari,E=a.vare;if(r?.energyType){var _=[].concat(T(e),T(t),T(E)).filter(function(r){return r!==null}).length;return En+to+_*tn}return En+tn*an};var To=xa;var Ro=function(r){var a=new Ct(Ao(r),false);un(a,r.date);vo(a,r);return pr(To,a.data)};var io=F;var Oo=function(r){var a=r.version.split("").map(function(r){return r.charCodeAt(0)});return pr(io,a)};var oo=de;var so=function(r){var a=r.event,e=r.index,t=r.date,E=r.count;return pr(oo,[a,e,t.year,t.month,t.date,t.hours,t.minutes,t.seconds,E])};var fo=7;var No=xe;var uo=65535;var Co=function(r){var a=new Ct(fo+r.count*2,false);no(a,r);r.demands.forEach(function(r){return a.setUint16(r===null?uo:r)});return pr(No,a.data)};var Po=145;var So=30;var Do=function(r){if(r[0]!==So){return{}}var a=r[1];var e=r[3];var t=r.slice(4,a+2);if(e===Po){return t}return null};var Io;var Mo=(Io={},t(t(t(t(t(t(t(t(t(t(Io,Dn,Mn),ln,gn),dn,hn),Ln,pn),mn,Un),Fn,Hn),Xn,Wn),Yn,xn),To,Ro),io,Oo),t(t(Io,oo,so),No,Co));fromBytes=ga(Mo,je);getDataSegment=Do})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
