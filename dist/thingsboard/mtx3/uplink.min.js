// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function n(t,e,r){return(e=_(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,s,o=[],h=!0,E=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);h=!0);}catch(t){E=!0,i=t}finally{try{if(!h&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(E)throw i}}return o}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,r){return e(t)||a(t,r)||v(t,r)||s()}function E(t){return e(t)||i(t)||v(t)||s()}function f(t){return r(t)||i(t)||v(t)||o()}function u(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _(t){var e=u(t,"string");return"symbol"==typeof e?e:e+""}function v(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var g=function(t){var e=t.replace(/\s+|0x/g,"");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var n=new Array(r);for(var i=0;i<r;i++){n[i]=parseInt(e.substring(i*2,i*2+2),16)}return n};var T={separator:" ",prefix:""};var A=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},T,e),n=r.separator,i=r.prefix;return t.map((function(t){return"".concat(i).concat(t.toString(16).padStart(2,"0"))})).join(n)};var l=0;var R=19;var c="activateRatePlan";var U=0;var d=function(t){if(t.length!==U){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var p=1;var O=2;var P=3;var y=4;var m=Math.log,I=Math.pow,M=Math.LN2;var N=function(t,e,r,n,i){var a,s,o=i*8-n-1,h=(1<<o)-1,E=h>>1,f=-7,u=r?i-1:0,_=r?-1:1,v=t[e+u];u+=_;a=v&(1<<-f)-1;v>>=-f;f+=o;for(;f>0;a=a*256+t[e+u],u+=_,f-=8);s=a&(1<<-f)-1;a>>=-f;f+=n;for(;f>0;s=s*256+t[e+u],u+=_,f-=8);if(a===0){a=1-E}else if(a===h){return s?NaN:v?-Infinity:Infinity}else{s=s+I(2,n);a=a-E}return(v?-1:1)*s*I(2,a-n)};var D=function(t,e,r,n,i,a){var s,o,h,E=a*8-i-1,f=(1<<E)-1,u=f>>1,_=i===23?I(2,-24)-I(2,-77):0,v=n?0:a-1,g=n?1:-1,T=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){o=r!==r?1:0;s=f}else{s=m(r)/M|0;if(r*(h=I(2,-s))<1){s--;h*=2}if(s+u>=1){r+=_/h}else{r+=_*I(2,1-u)}if(r*h>=2){s++;h/=2}if(s+u>=f){o=0;s=f}else if(s+u>=1){o=(r*h-1)*I(2,i);s=s+u}else{o=r*I(2,u-1)*I(2,i);s=0}}for(;i>=8;t[e+v]=o&255,v+=g,o/=256,i-=8);s=s<<i|o;E+=i;for(;E>0;t[e+v]=s&255,v+=g,s/=256,E-=8);t[e+v-g]|=T*128};var S=[1,0];var C=[2,1,0];var L=[3,2,1,0];var w=[0,1];var F=[0,1,2];var x=[0,1,2,3];var V=function(t,e){return t[e]};var Y=function(t,e,r){var n=r?w:S;var i=t[e+n[0]];var a=t[e+n[1]]<<8;return i|a};var W=function(t,e,r){var n=r?F:C;var i=t[e+n[0]];var a=t[e+n[1]]<<8;var s=t[e+n[2]]<<16;return i|a|s};var H=function(t,e,r){var n=r?x:L;var i=t[e+n[3]]*16777216;var a=t[e+n[2]]*65536;var s=t[e+n[1]]*256;var o=t[e+n[0]];return i+a+s+o};var G=function(t,e,r){t[e]=r&255};var X=function(t,e,r,n){var i=n?w:S;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255};var B=function(t,e,r,n){var i=n?F:C;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255};var b=function(t,e,r,n){var i=n?x:L;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255;t[e+i[3]]=r>>>24&255};function z(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}z.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){G(this.data,this.offset,t<0?t|256:t);this.offset+=p},getInt8:function(){var t=V(this.data,this.offset);this.offset+=p;return t&128?t^-256:t},setUint8:function(t){G(this.data,this.offset,t);this.offset+=p},getUint8:function(){var t=V(this.data,this.offset);this.offset+=p;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;X(this.data,this.offset,t<0?t|65536:t,e);this.offset+=O},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Y(this.data,this.offset,t);this.offset+=O;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;X(this.data,this.offset,t,e);this.offset+=O},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Y(this.data,this.offset,t);this.offset+=O;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=P},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=W(this.data,this.offset,t);this.offset+=P;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t,e);this.offset+=P},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=W(this.data,this.offset,t);this.offset+=P;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=y},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=H(this.data,this.offset,t);this.offset+=y;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t,e);this.offset+=y},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=H(this.data,this.offset,t);this.offset+=y;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;D(this.data,this.offset,t,e,23,4);this.offset+=y},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=N(this.data,this.offset,t,23,4);this.offset+=y;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(f(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(z.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var Q=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var n in e){if(n in t&&e[n]){r|=t[n]}}return r};var j=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var n in t){r[n]=(e&t[n])!==0}return r};var K=function(t,e,r){return(1<<e)-1&t>>r-1};var k=function(t,e,r,n){var i=(1<<e)-1<<r-1;var a=n;var s=t;s&=~i;a<<=r-1;s|=a;return s};var q="x";var Z=[".","1","3","R","M"];var $=[".","A","G","R","T","D"];var J=[".","0","1","2","3","4","5"];var tt=[".","A","B","C","D","E","F"];var et=[".","A","B","C","D","E","F","H","K","G"];var rt=[".","1","2","3","4"];var nt=[".","L","M","Z","K"];var it=[".","0","1","2","3","4","5","6","7","8","9"];var at=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var st=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var ot=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var ht=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var Et=function(t){return[t>>4,t&15]};var ft=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var n=Et(t),i=h(n,2),a=i[0],s=i[1];e[r*2]=a;e[r*2+1]=s}));return e};var ut=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return g(e.join(""))};var _t=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(Z[t[0]]??q);e.push($[t[1]]??q);e.push(J[t[2]]??q);e.push(J[t[3]]??q);e.push(".");e.push(tt[t[4]]??q);e.push(et[t[5]]??q);e.push(".");e.push(rt[t[6]]??q);e.push(nt[t[7]]??q);var r=t[8];e.push(it[t[9]]??q);e.push("-");var n;if(t.length<14||t[12]===0&&t[13]===0){e.push(at[t[10]]??q);n=11}else if(t[13]===0){e.push(at[t[10]]??q);e.push(at[t[11]]??q);n=12}else{e.push(at[t[10]]??q);e.push(at[t[11]]??q);e.push(at[t[12]]??q);n=13}var i=t[n];if(i&&i!==0){e.push(ot[i]??q)}return{type:e.join(""),revision:r,meterType:0}};var vt=function(t,e,r){var n=[];if(t.length<11){throw new Error("Wrong format")}n.push(Z.indexOf(t[0]));n.push($.indexOf(t[1]));n.push(J.indexOf(t[2]));n.push(J.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}n.push(tt.indexOf(t[5]));n.push(et.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}n.push(rt.indexOf(t[8]));n.push(nt.indexOf(t[9]));n.push(r??0);n.push(it.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var i=t.length>13?t.length-1:t.length;for(var a=12;a<i;a++){n.push(at.indexOf(t[a]))}if(i<t.length){n.push(ot.indexOf(t[i]))}var s=ut(n);var o=new Array(9).fill(0);o[0]=0;for(var h=0;h<s.length;h++){o[h+(s.length<8?1:0)]=s[h]}return o};var gt=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(Z[t[0]]??q);e.push($[t[1]]??q);e.push(r);for(var n=2;n<t.length;n++){if(t[n]!==0){e.push(st[t[n]]??q)}}return{type:e.join(""),meterType:0}};var Tt=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(Z.indexOf(t[0]));e.push($.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(st.indexOf(t[r]))}var n=ut(e);if(n.length===8){return n}if(n.length>8){throw new Error("Wrong format")}var i=new Array(8).fill(0);for(var a=0;a<n.length;a++){i[a]=n[a]}return i};var At=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(Z[t[0]]??q);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push(ht[t[r]]??q)}}return{type:e.join(""),meterType:0}};var lt=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(Z.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push(ht.indexOf(t[r]))}var n=ut(e);var i=new Array(8).fill(0);for(var a=0;a<n.length&&a<8;a++){i[a]=n[a]}return i};var Rt=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var n=r.indexOf(t[0])!==-1?2:0;var i=ft(t.slice(0,8));var a=i[n];var s=Z[a];if(s==="1"||s==="3"){e=_t(i.slice(n))}else{e=s==="M"?At(i):gt(i)}e.meterType=t[8];return e};var ct=function(t,e){var r=t.type,n=t.revision,i=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var a;var s=r.substring(4);var o=r[4];if(o==="1"||o==="3"){a=vt(s,e,n)}else{a=o==="M"?lt(s):Tt(s)}a[8]=i;return a};var Ut=80;var dt=38;var pt=121;var Ot=157;var Pt={type:Ut,destination:65535,source:65534};var yt=11;var mt=7;var It=4;var Mt=48;var Nt=50;var Dt=3+Mt*2;var St={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var Ct={...St,AUTO_SCREEN_SCROLLING:2147483648};var Lt={...St,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var wt={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var Ft={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var xt={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var Vt={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var Yt={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var Wt={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Ht={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var Gt={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Xt={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var Bt={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var bt={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var zt={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Qt={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function jt(t,e,r){var n=r>>It;var i=new Array(It).fill(0);i.forEach((function(e,r){var a=!!K(n,1,r+1);if(a){i[r]=t.getUint32()}else{i[r]=null}}));return i}function Kt(t,e,r){var n=1+It;var i=e;r.forEach((function(t,e){i=k(i,1,e+n,Number(!!t))}));t.setUint8(i)}function kt(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function qt(t,e){var r=e.tariff,n=e.energy;if(r!==undefined&&n!==undefined){t.setUint16(r<<14|n&16383)}else{t.setUint16(65535)}}function Zt(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;z.call(this,t,e)}Zt.prototype=Object.create(z.prototype);Zt.prototype.constructor=Zt;Zt.getDayProfileFromByte=function(t){return{tariff:K(t,2,1),isFirstHalfHour:!K(t,1,3),hour:K(t,5,4)}};Zt.getByteFromDayProfile=function(t){var e=0;e=k(e,2,1,t.tariff);e=k(e,1,3,+!t.isFirstHalfHour);e=k(e,5,4,t.hour);return e};Zt.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};Zt.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:j(Ct,2147496324),relaySet4:j(Vt,0),relaySet3:j(xt,0),relaySet2:j(Ft,3),relaySet1:j(wt,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:j(Wt,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:j(Lt,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:j(Yt,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};Zt.prototype.getFrameHeader=function(){return{type:this.getUint8(),destination:this.getUint16(),source:this.getUint16()}};Zt.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?Pt.type:e,n=t.destination,i=n===void 0?Pt.destination:n,a=t.source,s=a===void 0?Pt.source:a;this.setUint8(r);this.setUint16(i);this.setUint16(s)};Zt.prototype.getDeviceId=function(){var t=A(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var n=A(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:n}};Zt.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,n=t.year,i=t.serial;this.setBytes(g(e));this.setUint8(r);this.setUint8(n);this.setBytes(g(i))};Zt.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};Zt.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};Zt.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};Zt.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};Zt.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};Zt.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};Zt.prototype.getDayProfile=function(){return Zt.getDayProfileFromByte(this.getUint8())};Zt.prototype.setDayProfile=function(t){this.setUint8(Zt.getByteFromDayProfile(t))};Zt.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(mt).fill(0).map((function(){return t.getUint8()}))}};Zt.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};Zt.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};Zt.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};Zt.prototype.getDeviceType=function(){return Rt(this.getBytes(9))};Zt.prototype.setDeviceType=function(t){this.setBytes(ct(t))};Zt.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:j(Ct,this.getUint32()),relaySet4:j(Vt,this.getUint8()),relaySet3:j(xt,this.getUint8()),relaySet2:j(Ft,this.getUint8()),relaySet1:j(wt,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:j(Wt,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:j(Lt,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:j(Yt,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};Zt.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(Q(Ct,t.displaySet));this.setUint8(Q(Vt,t.relaySet4));this.setUint8(Q(xt,t.relaySet3));this.setUint8(Q(Ft,t.relaySet2));this.setUint8(Q(wt,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(Q(Wt,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(Q(Lt,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(Q(Yt,t.relaySet5));this.setUint8(e)};Zt.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=K(t,It,1);var r=jt(this,e,t);return{energyType:e,energies:r}};Zt.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,n=t.energies;if(r){Kt(this,r,n)}n.forEach((function(t){if(t!==null){e.setUint32(t)}}))};Zt.prototype.getEnergies=function(){var t=this;return new Array(It).fill(0).map((function(){return t.getInt32()}))};Zt.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};Zt.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};Zt.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};Zt.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};Zt.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};Zt.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return kt(t)}))};Zt.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return qt(e,t)}))};Zt.prototype.getEventStatus=function(){var t=this.getUint16();return j(Ht,t)};Zt.prototype.setEventStatus=function(t){this.setUint16(Q(Ht,t))};Zt.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=j(Gt,this.getUint8());var r=j(Xt,this.getUint8());var n=j(Bt,this.getUint8());var i=j(bt,this.getUint8());var a=j(zt,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:n,status2:i,status3:a}};Zt.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,n=t.relayStatus2,i=t.status1,a=t.status2,s=t.status3;this.setUint16(e);this.setUint8(Q(Gt,r));this.setUint8(Q(Xt,n));this.setUint8(Q(Bt,i));this.setUint8(Q(bt,a));this.setUint8(Q(zt,s))};Zt.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;switch(e){case Ot:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case dt:case pt:if(r<8){return t}t.newDate=this.getDateTime();break}return t};Zt.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Ot:for(var e of t.power){this.setUint8(e)}break;case dt:case pt:this.setDateTime(t.newDate);break}};Zt.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};Zt.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};Zt.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(It).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};Zt.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};Zt.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:j(Qt,this.getUint8())}};Zt.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,n=t.pmaxMinusThreshold2,i=t.pmaxMinusThreshold3,a=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(n);this.setUint32(i);this.setUint8(Q(Qt,a))};Zt.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(It).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};Zt.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var $t=0;var Jt=128;var te=129;var ee=130;var re=131;var ne=132;var ie=133;var ae=134;var se=135;var oe=136;var he=137;var Ee=144;var fe=145;var ue=146;var _e=147;var ve=149;var ge=151;var Te=152;var Ae=153;var le=154;var Re=155;var ce=156;var Ue=159;var de=160;var pe=240;var Oe=Object.freeze({__proto__:null,ACCESS_DENIED:_e,BAD_ARRAY_INDEX:ae,BAD_BLOCK_NUMBER:ce,BAD_DATA_LENGTH:ie,BAD_MESSAGE:ne,BAD_RATE_PLAN_ID:oe,BAD_RATE_PLAN_SIZE:he,BAD_RESPONSE_LENGTH:Ee,BAD_SALDO_WRITE:ve,BLOCKED_METER:ge,CALIBRATION_DISABLED:ue,DECRYPTION_FAILURE:ee,INTERNAL:pe,INVALID_CORRECTION_INTERVAL:le,NOT_ALIGNED_DATA:te,NOT_PREPARED_RATE_PLAN:se,NO_DATA_FOR_DATE:fe,OK:$t,OUT_OFF_RANGE:Ue,SET_METER_TYPE_FAILURE:de,TIME_CORRECTION_FAILURE:Ae,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:Re,UNENCRYPTED_COMMAND_DISABLED:Te,UNKNOWN_COMMAND:Jt,UNKNOWN_PROTOCOL:re});var Pe=112;var ye="getBuildVersion";var me=6;var Ie=function(t){if(t.length!==me){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=h(t,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5];return{date:{date:r,month:n,year:i},version:"".concat(a,".").concat(s,".").concat(o)}};var Me=62;var Ne="getCorrectTime";var De=function(t){var e=new Zt(t);return e.getTimeCorrectionParameters()};var Se=7;var Ce="getDateTime";var Le=function(t){var e=new Zt(t);return e.getDateTime()};var we=4;var Fe=4294967295;var xe={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Ve=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return Q(xe,e)};var Ye=function(t){return t<we?1<<t:0};var We=function(t){return t<we?1<<t<<4:0};var He=function(t,e){var r=0;if(t<we){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=Ye(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=We(t)}}return r};function Ge(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;z.call(this,t,e)}Ge.prototype=Object.create(z.prototype);Ge.prototype.constructor=Ge;Ge.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};Ge.prototype.setDate=function(t){var e=t.year,r=t.month,n=t.date;var i=e<<1|r>>3&1;var a=r<<5&224|n&31;this.setUint8(i);this.setUint8(a)};Ge.prototype.getEnergiesFlags=function(){var t=this.getUint8();return j(xe,t)};Ge.prototype.setEnergiesFlags=function(t){this.setUint8(Ve(t))};Ge.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();e.push(n===Fe?undefined:n)}return e};Ge.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?Fe:r)}}};Ge.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};Ge.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};Ge.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&xe["A+"]){e["A+"]=this.getUint16()}if(t&xe["A+R+"]){e["A+R+"]=this.getUint16()}if(t&xe["A+R-"]){e["A+R-"]=this.getUint16()}return e};Ge.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint16(t["A+"])}if(t["A+R+"]){this.setUint16(t["A+R+"])}if(t["A+R-"]){this.setUint16(t["A+R-"])}}};Ge.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&xe["A-"]){e["A-"]=this.getUint16()}if(t&xe["A-R+"]){e["A-R+"]=this.getUint16()}if(t&xe["A-R-"]){e["A-R-"]=this.getUint16()}return e};Ge.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint16(t["A-"])}if(t["A-R+"]){this.setUint16(t["A-R+"])}if(t["A-R-"]){this.setUint16(t["A-R-"])}}};Ge.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=[];for(var n=0;n<we;n++){if(e&Ye(n)){r[n]=this.getAPlusTariffEnergies(t)}}for(var i=0;i<we;i++){if(e&We(i)){r[i]={...r[i],...this.getAMinusTariffEnergies(t)}}}return r};Ge.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var n=0;t.forEach((function(t,e){if(t){r|=Ve(t);n|=He(e,t)}}));this.setUint8(r);this.setUint8(n);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};Ge.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};Ge.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,n=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(n)}};Ge.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&xe["A+"]){e["A+"]=this.getPowerMax()}if(t&xe["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&xe["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};Ge.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};Ge.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&xe["A-"]){e["A-"]=this.getPowerMax()}if(t&xe["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&xe["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};Ge.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};Ge.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=[];for(var n=0;n<we;n++){if(e&Ye(n)){r[n]=this.getAPlusTariffPowerMax(t)}}for(var i=0;i<we;i++){if(e&We(i)){r[i]={...r[i],...this.getAMinusTariffPowerMax(t)}}}return r};Ge.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var n=0;t.forEach((function(t,e){if(t){r|=Ve(t);n|=He(e,t)}}));this.setUint8(r);this.setUint8(n);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var Xe=255;var Be=59;var be="getDayProfile";var ze=function(t){var e=t.indexOf(Xe);var r=e===-1?t:t.slice(0,e);return{periods:f(r).map(Zt.getDayProfileFromByte)}};var Qe=5;var je="getDeviceId";var Ke=function(t){var e=new Zt(t);return e.getDeviceId()};var ke=4;var qe="getDeviceType";var Ze=function(t){var e=new Zt(t);return e.getDeviceType()};var $e=3+1;var Je=4;var tr=51;var er="getEvents";var rr=$e+255*Je;var nr=function(t){if(t.length>rr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Zt(t);var r=e.getDate();var n=e.getUint8();var i=[];while(!e.isEmpty){i.push(e.getEvent())}return{date:r,eventsNumber:n,events:i}};var ir=14;var ar=20;var sr=52;var or="getEventsCounters";var hr=function(t){if(t.length!==ir&&t.length!==ar){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Zt(t);var r=e.getUint16();var n=e.getUint16();var i=e.getUint16();var a=e.getUint16();var s=e.getUint16();var o=e.getUint16();var h=e.getUint16();return{accessClosed:o,accessError:s,localParametersChange:i,remoteParametersChange:a,powerOff:n,restart:r,setClock:h}};var Er=1;var fr="getEventStatus";var ur=function(t){var e=new Zt(t,true);return e.getEventStatus()};var _r=111;var vr="getHalfhoursEnergies";var gr=function(t){var e=new Ge(t);var r=e.getDate();var n=e.getEnergiesFlags();var i=e.getUint8();var a=e.getUint8();return{date:r,firstHalfhour:i,halfhoursNumber:a,energies:e.getHalfhoursEnergies(n,a)}};var Tr=109;var Ar="getMagneticFieldThreshold";var lr=function(t){var e=new Zt(t);return{induction:e.getUint16(),threshold:e.getUint16(),inductionCoefficient:e.getUint16()/100,reserved:e.getUint32()}};var Rr=122;var cr="getMeterInfo";var Ur=function(t){var e=h(t,1),r=e[0];return{ten:r}};var dr=113;var pr="getOperatorParametersExtended3";var Or=function(t){var e=new Zt(t);return e.getOperatorParametersExtended3()};var Pr=44;var yr="getRatePlanInfo";var mr=1+yt*2;var Ir=function(t){if(t.length!==mr){throw new Error("Invalid getRatePlanInfo data size.")}var e=new Zt(t);return{tariffTable:e.getUint8(),activePlan:e.getTariffPlan(),passivePlan:e.getTariffPlan()}};var Mr=41;var Nr="getSaldo";var Dr=29;var Sr=function(t){if(t.length!==Dr){throw new Error("Invalid getSaldo data size.")}var e=new Zt(t);return{currentSaldo:e.getInt32(),count:e.getUint8(),energy:new Array(4).fill(0).map((function(){return e.getInt32()})),beginSaldoOfPeriod:e.getInt32(),date:{month:e.getUint8(),date:e.getUint8(),hours:e.getUint8(),minutes:e.getUint8()}}};var Cr=46;var Lr="getSaldoParameters";var wr=37;var Fr=function(t){if(t.length!==wr){throw new Error("Invalid getSaldoParameters data size.")}var e=new Zt(t);return e.getSaldoParameters()};var xr=60;var Vr="getSeasonProfile";var Yr=function(t){var e=new Zt(t);return e.getSeasonProfile()};var Wr=61;var Hr="getSpecialDay";var Gr=function(t){var e=new Zt(t);return e.getSpecialDay()};var Xr=40;var Br="getVersion";var br=function(t){return{version:String.fromCharCode.apply(null,f(t))}};var zr=20;var Qr="prepareRatePlan";var jr=0;var Kr=function(t){if(t.length!==jr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var kr=53;var qr="resetPowerMaxDay";var Zr=0;var $r=function(t){if(t.length!==Zr){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Jr=54;var tn="resetPowerMaxMonth";var en=0;var rn=function(t){if(t.length!==en){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var nn=70;var an="runTariffPlan";var sn=0;var on=function(t){if(t.length!==sn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var hn=9;var En="setAccessKey";var fn=0;var un=function(t){if(t.length!==fn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var _n=92;var vn="setCorrectDateTime";var gn=0;var Tn=function(t){if(t.length!==gn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var An=28;var ln="setCorrectTime";var Rn=0;var cn=function(t){if(t.length!==Rn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Un=8;var dn="setDateTime";var pn=0;var On=function(t){if(t.length!==pn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Pn=16;var yn="setDayProfile";var mn=0;var In=function(t){if(t.length!==mn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Mn=93;var Nn="setDisplayParam";var Dn=0;var Sn=function(t){if(t.length!==Dn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Cn=114;var Ln="setOperatorParametersExtended3";var wn=0;var Fn=function(t){if(t.length!==wn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var xn=31;var Vn="setOperatorParameters";var Yn=0;var Wn=function(t){if(t.length!==Yn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Hn=42;var Gn="setSaldo";var Xn=0;var Bn=function(t){if(t.length!==Xn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var bn=47;var zn="setSaldoParameters";var Qn=0;var jn=function(t){if(t.length!==Qn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Kn=17;var kn="setSeasonProfile";var qn=0;var Zn=function(t){if(t.length!==qn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var $n=18;var Jn="setSpecialDay";var ti=0;var ei=function(t){if(t.length!==ti){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ri=100;var ni="setSpecialOperation";var ii=function(t){var e=new Zt(t);var r=e.getUint8();var n=!!(r&1);var i=!!(r&2);return{electroMagneticIndication:n,magneticIndication:i}};var ai=25;var si="turnRelayOff";var oi=0;var hi=function(t){if(t.length!==oi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ei=24;var fi="turnRelayOn";var ui=0;var _i=function(t){if(t.length!==ui){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var vi={encrypt:function(){},decrypt:function(){}};var gi=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var Ti=3;var Ai=2;var li=2;var Ri=function(t,e){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=n?.aesKey;var a=[];var s=h(r,2),o=s[0],E=s[1];var u=E&Ti;var _={messageId:o,accessLevel:u,commands:a,bytes:r,lrc:{expected:undefined,actual:0}};var v=r.slice(Ai);var g;if(i&&u!==l){v=f(vi.decrypt(i,v))}var T=v[v.length-1];v=v.slice(0,-1);var A=gi(v);if(u!==l||T!==0){if(T!==A){g="Mismatch LRC."}}var R=v[0]&Ti;var c=v.slice(1);if(u!==R){g="Mismatch access levels."}var U=0;do{var d=c[U];var p=c[U+1];var O=li+p;var P=c.slice(U+li,U+O);var y={id:d,name:e[d],headerSize:li,bytes:c.slice(U,U+O)};if(!d){break}try{if(!t[d]){throw new Error("Unsupported command id: ".concat(d,"!"))}y.parameters=t[d](P,n);a.push(y)}catch(t){a.push({command:y,error:t.message})}U+=O}while(U<=c.length);_.lrc.actual=A;_.lrc.expected=T;if(g){return{message:_,error:g}}return _}};var ci=function(t){var e={};for(var r in t){var n=t[r];e[n]=r}return e};ci(Oe);var Ui=1;var di=2;var pi=3;var Oi=4;var Pi=5;var yi=6;var mi=7;var Ii=8;var Mi=9;var Ni=10;var Di=11;var Si=12;var Ci=13;var Li=14;var wi=15;var Fi=16;var xi=17;var Vi=18;var Yi=19;var Wi=20;var Hi=21;var Gi=22;var Xi=23;var Bi=24;var bi=25;var zi=26;var Qi=28;var ji=30;var Ki=31;var ki=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:Oi,ACTIVE_ENERGY_T2:Pi,ACTIVE_ENERGY_T3:yi,ACTIVE_ENERGY_T4:mi,ACTIVE_POWER_IN_NEUTRAL:Mi,ACTIVE_POWER_PER_PHASE:Ii,BATTERY_VOLTAGE:Gi,CURRENT_BALANCE:ji,CURRENT_IN_NEUTRAL:Di,CURRENT_IN_PHASE:Ni,DATE_MONTH_YEAR:Li,EXPORTED_ACTIVE_ENERGY_T1:Fi,EXPORTED_ACTIVE_ENERGY_T2:xi,EXPORTED_ACTIVE_ENERGY_T3:Vi,EXPORTED_ACTIVE_ENERGY_T4:Yi,HOUR_MINUTE_SECOND:Ci,MAGNET_INDUCTION:Qi,OPTOPORT_SPEED:Ki,POWER_COEFFICIENT_PHASE_A:Wi,POWER_COEFFICIENT_PHASE_B:Hi,POWER_THRESHOLD_T1:Xi,POWER_THRESHOLD_T2:Bi,POWER_THRESHOLD_T3:bi,POWER_THRESHOLD_T4:zi,SET_ALL_SEGMENT_DISPLAY:Ui,SOFTWARE_VERSION:di,TOTAL_ACTIVE_ENERGY:pi,TOTAL_EXPORTED_ACTIVE_ENERGY:wi,VOLTAGE:Si});ci(ki);var qi=2400;var Zi=9600;var $i={plc:{0:Zi,2:qi,4:Zi},optoport:{0:qi,2:qi,4:Zi}};var Ji={plc:ci($i.plc),optoport:ci($i.optoport)};var ta=1;var ea=2;var ra=86;var na="getCriticalEvent";var ia=9;var aa=function(t){if(t.length!==ia){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=h(t,9),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],E=e[6],f=e[7],u=e[8];return{event:r,index:n,date:{year:i,month:a,date:s,hours:o,minutes:E,seconds:f},count:u}};var sa=4;var oa={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var ha={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var Ea={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var fa={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var ua={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var _a={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var va={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var ga={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var Ta={OPTOPORT_SPEED:1<<26};var Aa={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var la=function(t){return{plc:$i.plc[K(t,4,1)],optoport:$i.optoport[K(t,4,5)]}};var Ra=function(t){var e=0;e=k(e,4,1,Number(Ji.plc[t.plc]));e=k(e,4,5,Number(Ji.optoport[t.optoport]));return e};function ca(t,e,r){var n=r>>sa;var i=[];var a=[];var s=[];for(var o=0;o<It;o++){var h=!!K(n,1,o+1);if(h){i.push(t.getInt32());a.push(t.getInt32());s.push(t.getInt32())}else{i.push(null);a.push(null);s.push(null)}}return{wh:i,vari:a,vare:s}}function Ua(t,e){var r=e.wh,n=e.vari,i=e.vare;var a=1+sa;var s=t;for(var o=0;o<It;o++){s=k(s,1,o+a,Number(!!r[o]&&!!n[o]&&!!i[o]))}return s}function da(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;Zt.call(this,t,e)}da.prototype=Object.create(Zt.prototype);da.prototype.constructor=da;da.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:j(oa,4229),displaySet2:j(ha,139776),displaySet3:j(Ea,0),relaySet:j(_a,771),speedOptoPort:la(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:j(va,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:j(fa,2147876864)}};da.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:j(oa,this.getUint32()),displaySet2:j(ha,this.getUint32()),displaySet3:j(Ea,this.getUint32()),relaySet:j(_a,this.getUint32()),speedOptoPort:la(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:j(va,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:j(fa,this.getUint32())}};da.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(Q(oa,t.displaySet1));this.setUint32(Q(ha,t.displaySet2));this.setUint32(Q(Ea,t.displaySet3));this.setUint32(Q(_a,t.relaySet));this.setUint8(Ra(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(Q(va,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(Q(fa,t.displaySet4))};da.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:j(ga,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};da.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(Q(ga,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};da.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var n=0;n<It;n++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};da.prototype.setEnergies=function(t){for(var e=0;e<It;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};da.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=K(t,sa,1);var r=ca(this,e,t);return{energyType:e,energies:r}};da.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var n=Ua(e,r);var i=n>>sa;this.setUint8(n);for(var a=0;a<It;a++){var s=!!K(i,1,a+1);if(s){this.setInt32(r.wh[a]);this.setInt32(r.vari[a]);this.setInt32(r.vare[a])}}return}for(var o=0;o<It;o++){this.setInt32(r.wh[o]);this.setInt32(r.vari[o]);this.setInt32(r.vare[o])}};da.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};da.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};da.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};da.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};da.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(It).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};da.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};da.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(It).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};da.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};da.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};da.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};da.prototype.getOperatorParametersExtended2=function(){return{deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:j(Aa,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:j(Ta,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:this.getUint8()}};da.prototype.setOperatorParametersExtended2=function(t){this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(Q(Aa,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(Q(Ta,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(t.timeCorrectPeriod)};da.prototype.getOperatorParametersExtended4=function(){return{displaySet5:j(ua,this.getUint32()),displaySet25:j(ua,this.getUint32()),displaySet31:j(oa,this.getUint32()),displaySet32:j(oa,this.getUint32()),displaySet33:j(oa,this.getUint32()),displaySet34:j(oa,this.getUint32()),displaySet35:j(ua,this.getUint32())}};da.prototype.setOperatorParametersExtended4=function(t){this.setUint32(Q(ua,t.displaySet5));this.setUint32(Q(ua,t.displaySet25));this.setUint32(Q(oa,t.displaySet31));this.setUint32(Q(oa,t.displaySet32));this.setUint32(Q(oa,t.displaySet33));this.setUint32(Q(oa,t.displaySet34));this.setUint32(Q(ua,t.displaySet35))};var pa=57;var Oa="getCurrentStatusMeter";var Pa=function(t){var e=new da(t);var r=e.getUint32();var n=e.getUint32();var i=e.getUint32();var a=e.getUint32();var s=e.getUint32();var o=e.getUint32();e.getUint32();var h=e.getUint32();var E=!!(e.getUint8()&1);var f=e.getUint8();var u=!!(e.getUint8()&1);var _=!!(e.getUint8()&1);var v={"A+":e.getUint8(),maximumPowers:e.getUint8(),"A-":e.getUint8()};var g=e.getUint8();var T=!!(e.getUint8()&1);var A=f|g<<8;return{operatingSeconds:r,tbadVAAll:n,tbadVBAll:i,tbadVCAll:a,tbadIMAXAll:s,tbadPMAXAll:o,tbadFREQ:h,relayStatus:E,statusEvent:j(Ht,A),centerAlert:u,calEnableFlag:_,currentTariffs:v,isSummerTime:T}};var ya=13;var ma="getCurrentValues";var Ia=function(t){var e=new da(t);return{vaRms:e.getInt32(),vbRms:e.getInt32(),vcRms:e.getInt32(),iaRms:e.getInt32(),ibRms:e.getInt32(),icRms:e.getInt32(),powerA:e.getInt32(),powerB:e.getInt32(),powerC:e.getInt32(),varA:e.getInt32(),varB:e.getInt32(),varC:e.getInt32(),iNeutral:e.getInt32()}};({wh:n(n({},ta,{gType:"1.8",rType:"1.8"}),ea,{gType:"2.8"}),vari:n(n({},ta,{gType:"5.8",rType:"3.8"}),ea,{gType:"6.8"}),vare:n(n({},ta,{gType:"8.8",rType:"4.8"}),ea,{gType:"7.8"})});var Ma=51;var Na=22;var Da="getDayDemand";var Sa=function(t){var e=new da(t);var r;if(t.length===Ma){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var Ca=79;var La="getDayDemandExport";var wa=function(t){var e=new da(t);return{date:e.getDate(),energies:e.getEnergies()}};var Fa=49;var xa="getDayMaxDemand";var Va=function(t){var e=new da(t);return e.getDayMaxDemandResponse()};var Ya=88;var Wa="getDayMaxDemandExport";var Ha=function(t){var e=new da(t);return e.getDayMaxDemandResponse()};var Ga=7;var Xa=118;var Ba="getDemand";var ba=function(t){if(!t||t.length<Ga){throw new Error("Invalid uplink GetDemand byte length.")}var e=new da(t);var r=e.getDemand();if(t.length!==Ga+2*r.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var n=new Array(r.count).fill(0).map((function(){return e.getUint16()}));return{...r,demands:n}};var za=94;var Qa="getDisplayParam";var ja=function(t){var e=E(t),r=e[0],n=e.slice(1);return{displayMode:r,order:n}};var Ka=15;var ka="getEnergy";var qa=function(t){var e=new da(t);return e.getEnergies()};var Za=51;var $a=3;var Ja="getEnergyDayPrevious";var ts=function(t){var e=new da(t);var r;if(t.length===Za){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var es=78;var rs="getEnergyExport";var ns=function(t){var e=new da(t);return e.getEnergies()};var is=80;var as="getEnergyExportDayPrevious";var ss=function(t){var e=new da(t);return e.getEnergies()};var os=58;var hs="getExtendedCurrentValues";var Es=function(t){var e=new da(t);return{temperature:e.getInt16(),frequency:e.getUint16(),vPhaseAB:e.getInt32(),vPhaseAC:e.getInt32(),pfA:e.getInt16()/1e3,pfB:e.getInt16()/1e3,pfC:e.getInt16()/1e3,pf:e.getInt16()/1e3,vaA:e.getInt32(),vaB:e.getInt32(),vaC:e.getInt32(),vaSum:e.getInt32(),uBatteryRtc:e.getInt16()}};var fs=21;var us="getHalfHourDemand";var _s=function(t){var e=new da(t);var r=t.length>Dt;var n=e.getDate();var i=e.getEnergyPeriods(r?Nt:Mt);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var vs=Dt+2;var gs=90;var Ts="getHalfHourDemandChannel";var As=function(t){var e=new da(t);var r=t.length>vs;var n=e.getUint8();var i=e.getUint8();var a=e.getDate();var s=e.getEnergyPeriods(r?Nt:Mt);if(r){return{channel:n,channelParameter:i,date:a,energies:s,dstHour:e.getUint8()}}return{channel:n,channelParameter:i,date:a,energies:s}};var ls=83;var Rs="getHalfHourDemandExport";var cs=function(t){var e=new da(t);var r=t.length>Dt;var n=e.getDate();var i=e.getEnergyPeriods(r?Nt:Mt);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Us=73;var ds="getHalfHourDemandVare";var ps=function(t){var e=new da(t);var r=t.length>Dt;var n=e.getDate();var i=e.getEnergyPeriods(r?Nt:Mt);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Os=85;var Ps="getHalfHourDemandVareExport";var ys=function(t){var e=new da(t);var r=t.length>Dt;var n=e.getDate();var i=e.getEnergyPeriods(r?Nt:Mt);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var ms=72;var Is="getHalfHourDemandVari";var Ms=function(t){var e=new da(t);var r=t.length>Dt;var n=e.getDate();var i=e.getEnergyPeriods(r?Nt:Mt);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Ns=84;var Ds="getHalfHourDemandVariExport";var Ss=function(t){var e=new da(t);var r=t.length>Dt;var n=e.getDate();var i=e.getEnergyPeriods(r?Nt:Mt);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Cs=23;var Ls="getMonthDemand";var ws=function(t){var e=new da(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var Fs=82;var xs="getMonthDemandExport";var Vs=function(t){var e=new da(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var Ys=50;var Ws="getMonthMaxDemand";var Hs=function(t){var e=new da(t);return e.getMonthMaxDemandResponse()};var Gs=89;var Xs="getMonthMaxDemandExport";var Bs=function(t){var e=new da(t);return e.getMonthMaxDemandResponse()};var bs=30;var zs="getOperatorParameters";var Qs=function(t){var e=new da(t);return e.getOperatorParameters()};var js=63;var Ks="getOperatorParametersExtended";var ks=function(t){var e=new da(t);return e.getOperatorParametersExtended()};var qs=71;var Zs="getOperatorParametersExtended2";var $s=function(t){var e=new da(t);return e.getOperatorParametersExtended2()};var Js=64;var to="setOperatorParametersExtended";var eo=0;var ro=function(t){if(t.length!==eo){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var no=69;var io="setOperatorParametersExtended2";var ao=0;var so=function(t){if(t.length!==ao){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var oo=117;var ho="setOperatorParametersExtended4";var Eo=0;var fo=function(t){if(t.length!==Eo){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var uo={};var _o={};var vo=Ri(uo,_o);uo[R]=d;uo[Pe]=Ie;uo[Me]=De;uo[Se]=Le;uo[Be]=ze;uo[Qe]=Ke;uo[ke]=Ze;uo[tr]=nr;uo[sr]=hr;uo[Er]=ur;uo[_r]=gr;uo[Tr]=lr;uo[Rr]=Ur;uo[dr]=Or;uo[Pr]=Ir;uo[Mr]=Sr;uo[Cr]=Fr;uo[xr]=Yr;uo[Wr]=Gr;uo[Xr]=br;uo[zr]=Kr;uo[kr]=$r;uo[Jr]=rn;uo[nn]=on;uo[hn]=un;uo[_n]=Tn;uo[An]=cn;uo[Un]=On;uo[Pn]=In;uo[Mn]=Sn;uo[xn]=Wn;uo[Cn]=Fn;uo[Hn]=Bn;uo[bn]=jn;uo[Kn]=Zn;uo[$n]=ei;uo[ri]=ii;uo[ai]=hi;uo[Ei]=_i;uo[ra]=aa;uo[pa]=Pa;uo[ya]=Ia;uo[Na]=Sa;uo[Ca]=wa;uo[Fa]=Va;uo[Ya]=Ha;uo[Xa]=ba;uo[za]=ja;uo[Ka]=qa;uo[$a]=ts;uo[es]=ns;uo[is]=ss;uo[os]=Es;uo[fs]=_s;uo[gs]=As;uo[ls]=cs;uo[Us]=ps;uo[Os]=ys;uo[ms]=Ms;uo[Ns]=Ss;uo[Cs]=ws;uo[Fs]=Vs;uo[Ys]=Hs;uo[Gs]=Bs;uo[bs]=Qs;uo[js]=ks;uo[qs]=$s;uo[xn]=Wn;uo[Js]=ro;uo[no]=so;uo[oo]=fo;_o[R]=c;_o[Pe]=ye;_o[Me]=Ne;_o[Se]=Ce;_o[Be]=be;_o[Qe]=je;_o[ke]=qe;_o[tr]=er;_o[sr]=or;_o[Er]=fr;_o[_r]=vr;_o[Tr]=Ar;_o[Rr]=cr;_o[dr]=pr;_o[Pr]=yr;_o[Mr]=Nr;_o[Cr]=Lr;_o[xr]=Vr;_o[Wr]=Hr;_o[Xr]=Br;_o[zr]=Qr;_o[kr]=qr;_o[Jr]=tn;_o[nn]=an;_o[hn]=En;_o[_n]=vn;_o[An]=ln;_o[Un]=dn;_o[Pn]=yn;_o[Mn]=Nn;_o[xn]=Vn;_o[Cn]=Ln;_o[Hn]=Gn;_o[bn]=zn;_o[Kn]=kn;_o[$n]=Jn;_o[ri]=ni;_o[ai]=si;_o[Ei]=fi;_o[ra]=na;_o[pa]=Oa;_o[ya]=ma;_o[Na]=Da;_o[Ca]=La;_o[Fa]=xa;_o[Ya]=Wa;_o[Xa]=Ba;_o[za]=Qa;_o[Ka]=ka;_o[$a]=Ja;_o[es]=rs;_o[is]=as;_o[os]=hs;_o[fs]=us;_o[gs]=Ts;_o[ls]=Rs;_o[Us]=ds;_o[Os]=Ps;_o[ms]=Is;_o[Ns]=Ds;_o[Cs]=Ls;_o[Fs]=xs;_o[Ys]=Ws;_o[Gs]=Xs;_o[bs]=zs;_o[js]=Ks;_o[qs]=Zs;_o[xn]=Vn;_o[Js]=to;_o[no]=io;_o[oo]=ho;var go=145;var To=30;var Ao=function(t){if(t[0]!==To){return{}}var e=t[1];var r=t[3];var n=t.slice(4,e+2);var i=gi(t.slice(0,e+2));var a=t[e+2];if(r===go&&i===a){return n}return null};fromBytes=vo;getDataSegment=Ao})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
