// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function n(t,e,r){return(e=A(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,s,E=[],o=!0,_=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=a.call(r)).done)&&(E.push(n.value),E.length!==e);o=!0);}catch(t){_=!0,i=t}finally{try{if(!o&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(_)throw i}}return E}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){return e(t)||a(t,r)||f(t,r)||s()}function _(t){return e(t)||i(t)||f(t)||s()}function v(t){return r(t)||i(t)||f(t)||E()}function h(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function A(t){var e=h(t,"string");return"symbol"==typeof e?e:e+""}function f(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var u=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map((function(t){return t.padStart(2,"0")})).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var n=new Array(r);for(var i=0;i<r;i++){n[i]=parseInt(e.substring(i*2,i*2+2),16)}return n};var T={separator:" ",prefix:""};var R=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},T,e),n=r.separator,i=r.prefix;return t.map((function(t){return"".concat(i).concat(t.toString(16).padStart(2,"0"))})).join(n)};var g=0;var O=19;var l="activateRatePlan";var U=0;var c=function(t){if(t.length!==U){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var d=1;var p=2;var I=3;var P=4;var N=Math.log,M=Math.pow,S=Math.LN2;var C=function(t,e,r,n,i){var a,s,E=i*8-n-1,o=(1<<E)-1,_=o>>1,v=-7,h=r?i-1:0,A=r?-1:1,f=t[e+h];h+=A;a=f&(1<<-v)-1;f>>=-v;v+=E;for(;v>0;a=a*256+t[e+h],h+=A,v-=8);s=a&(1<<-v)-1;a>>=-v;v+=n;for(;v>0;s=s*256+t[e+h],h+=A,v-=8);if(a===0){a=1-_}else if(a===o){return s?NaN:f?-Infinity:Infinity}else{s=s+M(2,n);a=a-_}return(f?-1:1)*s*M(2,a-n)};var m=function(t,e,r,n,i,a){var s,E,o,_=a*8-i-1,v=(1<<_)-1,h=v>>1,A=i===23?M(2,-24)-M(2,-77):0,f=n?0:a-1,u=n?1:-1,T=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){E=r!==r?1:0;s=v}else{s=N(r)/S|0;if(r*(o=M(2,-s))<1){s--;o*=2}if(s+h>=1){r+=A/o}else{r+=A*M(2,1-h)}if(r*o>=2){s++;o/=2}if(s+h>=v){E=0;s=v}else if(s+h>=1){E=(r*o-1)*M(2,i);s=s+h}else{E=r*M(2,h-1)*M(2,i);s=0}}for(;i>=8;t[e+f]=E&255,f+=u,E/=256,i-=8);s=s<<i|E;_+=i;for(;_>0;t[e+f]=s&255,f+=u,s/=256,_-=8);t[e+f-u]|=T*128};var y=[1,0];var D=[2,1,0];var L=[3,2,1,0];var F=[0,1];var V=[0,1,2];var w=[0,1,2,3];var Y=function(t,e){return t[e]};var x=function(t,e,r){var n=r?F:y;var i=t[e+n[0]];var a=t[e+n[1]]<<8;return i|a};var H=function(t,e,r){var n=r?V:D;var i=t[e+n[0]];var a=t[e+n[1]]<<8;var s=t[e+n[2]]<<16;return i|a|s};var W=function(t,e,r){var n=r?w:L;var i=t[e+n[3]]*16777216;var a=t[e+n[2]]*65536;var s=t[e+n[1]]*256;var E=t[e+n[0]];return i+a+s+E};var G=function(t,e,r){t[e]=r&255};var X=function(t,e,r,n){var i=n?F:y;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255};var B=function(t,e,r,n){var i=n?V:D;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255};var b=function(t,e,r,n){var i=n?w:L;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255;t[e+i[3]]=r>>>24&255};function K(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}K.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){G(this.data,this.offset,t<0?t|256:t);this.offset+=d},getInt8:function(){var t=Y(this.data,this.offset);this.offset+=d;return t&128?t^-256:t},setUint8:function(t){G(this.data,this.offset,t);this.offset+=d},getUint8:function(){var t=Y(this.data,this.offset);this.offset+=d;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;X(this.data,this.offset,t<0?t|65536:t,e);this.offset+=p},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=x(this.data,this.offset,t);this.offset+=p;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;X(this.data,this.offset,t,e);this.offset+=p},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=x(this.data,this.offset,t);this.offset+=p;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=I},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=H(this.data,this.offset,t);this.offset+=I;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t,e);this.offset+=I},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=H(this.data,this.offset,t);this.offset+=I;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=P},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=W(this.data,this.offset,t);this.offset+=P;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t,e);this.offset+=P},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=W(this.data,this.offset,t);this.offset+=P;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;m(this.data,this.offset,t,e,23,4);this.offset+=P},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=C(this.data,this.offset,t,23,4);this.offset+=P;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(v(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(K.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var z=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var n in e){if(n in t&&e[n]){r|=t[n]}}return r};var Z=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var n in t){r[n]=(e&t[n])!==0}return r};var Q=function(t,e,r){return(1<<e)-1&t>>r-1};var j=function(t,e,r,n){var i=(1<<e)-1<<r-1;var a=n;var s=t;s&=~i;a<<=r-1;s|=a;return s};var k="x";var q=[".","1","3","R","M"];var $=[".","A","G","R","T","D"];var J=[".","0","1","2","3","4","5"];var tt=[".","A","B","C","D","E","F"];var et=[".","A","B","C","D","E","F","H","K","G"];var rt=[".","1","2","3","4"];var nt=[".","L","M","Z","K"];var it=[".","0","1","2","3","4","5","6","7","8","9"];var at=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var st=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Et=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var ot=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var _t=function(t){return[t>>4,t&15]};var vt=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var n=_t(t),i=o(n,2),a=i[0],s=i[1];e[r*2]=a;e[r*2+1]=s}));return e};var ht=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return u(e.join(""))};var At=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(q[t[0]]??k);e.push($[t[1]]??k);e.push(J[t[2]]??k);e.push(J[t[3]]??k);e.push(".");e.push(tt[t[4]]??k);e.push(et[t[5]]??k);e.push(".");e.push(rt[t[6]]??k);e.push(nt[t[7]]??k);var r=t[8];e.push(it[t[9]]??k);e.push("-");var n;if(t.length<14||t[12]===0&&t[13]===0){e.push(at[t[10]]??k);n=11}else if(t[13]===0){e.push(at[t[10]]??k);e.push(at[t[11]]??k);n=12}else{e.push(at[t[10]]??k);e.push(at[t[11]]??k);e.push(at[t[12]]??k);n=13}var i=t[n];if(i&&i!==0){e.push(Et[i]??k)}return{type:e.join(""),revision:r,meterType:0}};var ft=function(t,e,r){var n=[];if(t.length<11){throw new Error("Wrong format")}n.push(q.indexOf(t[0]));n.push($.indexOf(t[1]));n.push(J.indexOf(t[2]));n.push(J.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}n.push(tt.indexOf(t[5]));n.push(et.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}n.push(rt.indexOf(t[8]));n.push(nt.indexOf(t[9]));n.push(r??0);n.push(it.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var i=t.length>13?t.length-1:t.length;for(var a=12;a<i;a++){n.push(at.indexOf(t[a]))}if(i<t.length){n.push(Et.indexOf(t[i]))}var s=ht(n);var E=new Array(9).fill(0);E[0]=0;for(var o=0;o<s.length;o++){E[o+(s.length<8?1:0)]=s[o]}return E};var ut=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(q[t[0]]??k);e.push($[t[1]]??k);e.push(r);for(var n=2;n<t.length;n++){if(t[n]!==0){e.push(st[t[n]]??k)}}return{type:e.join(""),meterType:0}};var Tt=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(q.indexOf(t[0]));e.push($.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(st.indexOf(t[r]))}var n=ht(e);if(n.length===8){return n}if(n.length>8){throw new Error("Wrong format")}var i=new Array(8).fill(0);for(var a=0;a<n.length;a++){i[a]=n[a]}return i};var Rt=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(q[t[0]]??k);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push(ot[t[r]]??k)}}return{type:e.join(""),meterType:0}};var gt=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(q.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push(ot.indexOf(t[r]))}var n=ht(e);var i=new Array(8).fill(0);for(var a=0;a<n.length&&a<8;a++){i[a]=n[a]}return i};var Ot=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var n=r.indexOf(t[0])!==-1?2:0;var i=vt(t.slice(0,8));var a=i[n];var s=q[a];if(s==="1"||s==="3"){e=At(i.slice(n))}else{e=s==="M"?Rt(i):ut(i)}e.meterType=t[8];return e};var lt=function(t,e){var r=t.type,n=t.revision,i=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var a;var s=r.substring(4);var E=r[4];if(E==="1"||E==="3"){a=ft(s,e,n)}else{a=E==="M"?gt(s):Tt(s)}a[8]=i;return a};var Ut=80;var ct=81;var dt=82;var pt=83;var It=84;var Pt=85;var Nt=86;var Mt=87;var St=88;var Ct=89;var mt=90;var yt=91;var Dt=255;var Lt=Object.freeze({__proto__:null,DATA_REQUEST:Ut,DATA_RESPONSE:ct,FRAGMENT_REQUEST:mt,FRAGMENT_RESPONSE:yt,IDENT_REQUEST:dt,IDENT_RESPONSE:pt,INVALID:Dt,L2_CHECK_ADDRESS_REQUEST:Nt,L2_CHECK_ADDRESS_RESPONSE:Mt,L2_RM_ADDRESS_REQUEST:St,L2_RM_ADDRESS_RESPONSE:Ct,L2_SET_ADDRESS_REQUEST:It,L2_SET_ADDRESS_RESPONSE:Pt});var Ft=function(t){var e={};for(var r in t){var n=t[r];e[n]=r}return e};var Vt=Ft(Lt);var wt=1;var Yt=2;var xt=3;var Ht=16;var Wt=17;var Gt=18;var Xt=19;var Bt=20;var bt=21;var Kt=32;var zt=33;var Zt=34;var Qt=35;var jt=36;var kt=37;var qt=38;var $t=39;var Jt=40;var te=41;var ee=49;var re=50;var ne=51;var ie=52;var ae=53;var se=54;var Ee=55;var oe=56;var _e=57;var ve=64;var he=65;var Ae=66;var fe=67;var ue=68;var Te=69;var Re=70;var ge=71;var Oe=72;var le=73;var Ue=74;var ce=75;var de=76;var pe=77;var Ie=78;var Pe=79;var Ne=80;var Me=81;var Se=82;var Ce=83;var me=84;var ye=85;var De=86;var Le=87;var Fe=88;var Ve=89;var we=96;var Ye=97;var xe=98;var He=99;var We=100;var Ge=101;var Xe=102;var Be=103;var be=104;var Ke=105;var ze=112;var Ze=113;var Qe=114;var je=115;var ke=116;var qe=117;var $e=118;var Je=119;var tr=120;var er=121;var rr=122;var nr=123;var ir=124;var ar=125;var sr=144;var Er=145;var or=147;var _r=148;var vr=156;var hr=157;var Ar=158;var fr=159;var ur=160;var Tr=161;var Rr=162;var gr=176;var Or=177;var lr=178;var Ur=179;var cr=180;var dr=181;var pr=182;var Ir=183;var Pr=208;var Nr=224;var Mr=225;var Sr=226;var Cr=227;var mr=228;var yr=229;var Dr=230;var Lr=Object.freeze({__proto__:null,ACCESS_CLOSED:Ht,ACCPARAM_BAD:Qe,ACCPARAM_EXT_BAD:je,BAD_TEST_EEPROM:be,BAD_TEST_FRAM:Ke,BAT_FAULT:Ce,BAT_OK:Se,BIPOLAR_POWER_FAULT:cr,BIPOLAR_POWER_OK:dr,BLOCK_TARIFF_BAD:qe,CALC_PERIOD_BAD:ke,CALFLAG_RESET:Be,CALFLAG_SET:Xe,CALIBR_PARAM_BAD:$e,CAL_FAULT:ye,CAL_OK:me,CASE_CLOSE:Xt,CASE_MODULE_CLOSE:ar,CASE_MODULE_OPEN:ir,CASE_OPEN:Gt,CASE_TERMINAL_CLOSE:nr,CASE_TERMINAL_OPEN:rr,CHANGE_ACCESS_KEY0:Kt,CHANGE_ACCESS_KEY1:zt,CHANGE_ACCESS_KEY2:Zt,CHANGE_ACCESS_KEY3:Qt,CHANGE_COR_TIME:te,CHANGE_PAR_LOCAL:jt,CHANGE_PAR_REMOTE:kt,CHANGE_TARIFF_TBL:re,CLOCK_FAULT:Le,CLOCK_OK:De,CMD_CHANGE_TIME:qt,CMD_RELAY_2_OFF:Ye,CMD_RELAY_2_ON:we,CMD_RELAY_OFF:Jt,CMD_RELAY_ON:$t,CROSSZERO_ENT0:xe,CROSSZERO_ENT1:He,CROSSZERO_ENT2:We,CROSSZERO_ENT3:Ge,CROSSZERO_EXP_ENT0:Ar,CROSSZERO_EXP_ENT1:fr,CROSSZERO_EXP_ENT2:ur,CROSSZERO_EXP_ENT3:Tr,CURRENT_UNEQUIL_FAULT:lr,CURRENT_UNEQUIL_OK:Ur,EM_MAGNETIC_OFF:Or,EM_MAGNETIC_ON:gr,ENERGY_REG_FAULT:wt,ENERGY_REG_OVERFLOW:ee,ERR_ACCESS:Wt,F_MAX_OK:Oe,F_MAX_OVER:le,F_MIN_OK:Ue,F_MIN_OVER:ce,I_MAX_OK:de,I_MAX_OVER:pe,MAGNETIC_OFF:bt,MAGNETIC_ON:Bt,NVRAM_FAULT:Pr,OP_PAR_FAULT:xt,POWERSALDO_OK:Ne,POWERSALDO_OVER:Me,POWER_A_OFF:Fe,POWER_A_ON:Ve,POWER_OVER_RELAY_OFF:hr,P_MAX_OK:Ie,P_MAX_OVER:Pe,RELAY_HARD_BAD_OFF:sr,RELAY_HARD_BAD_ON:or,RELAY_HARD_OFF:_r,RELAY_HARD_ON:Er,RELAY_OFF:Ee,RELAY_ON:se,RESET_EM_FLAG:pr,RESET_MAGN_FLAG:Ir,RESTART:oe,SALDO_EN_BAD:tr,SALDO_PARAM_BAD:Ze,SET_DEMAND_EN_10MIN:Cr,SET_DEMAND_EN_15MIN:mr,SET_DEMAND_EN_1MIN:Nr,SET_DEMAND_EN_30MIN:yr,SET_DEMAND_EN_3MIN:Mr,SET_DEMAND_EN_5MIN:Sr,SET_DEMAND_EN_60MIN:Dr,SET_NEW_SALDO:ze,SET_SALDO_PARAM:vr,SET_TARIFF_TBL:ne,SUMMER_TIME:ie,TIME_CORRECT:er,TIME_CORRECT_NEW:Rr,T_MAX_OK:ue,T_MAX_OVER:Te,T_MIN_OK:Re,T_MIN_OVER:ge,VENDOR_PAR_FAULT:Yt,V_MAX_OK:ve,V_MAX_OVER:he,V_MIN_OK:Ae,V_MIN_OVER:fe,WD_RESTART:_e,WINTER_SUMMER_BAD:Je,WINTER_TIME:ae});var Fr=Ft(Lr);var Vr={type:Ut,destination:65535,source:65534};var wr=11;var Yr=7;var xr=4;var Hr=48;var Wr=50;var Gr=3+Hr*2;var Xr={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var Br={...Xr,AUTO_SCREEN_SCROLLING:2147483648};var br={...Xr,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Kr={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var zr={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Zr={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var Qr={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var jr={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var kr={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var qr={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var $r={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Jr={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var tn={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var en={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var rn={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var nn={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function an(t,e,r){var n=r>>xr;var i=new Array(xr).fill(0);i.forEach((function(e,r){var a=!!Q(n,1,r+1);if(a){i[r]=t.getUint32()}else{i[r]=null}}));return i}function sn(t,e,r){var n=1+xr;var i=e;r.forEach((function(t,e){i=j(i,1,e+n,Number(!!t))}));t.setUint8(i)}function En(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function on(t,e){var r=e.tariff,n=e.energy;if(r!==undefined&&n!==undefined){t.setUint16(r<<14|n&16383)}else{t.setUint16(65535)}}function _n(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;K.call(this,t,e)}_n.prototype=Object.create(K.prototype);_n.prototype.constructor=_n;_n.getDayProfileFromByte=function(t){return{tariff:Q(t,2,1),isFirstHalfHour:!Q(t,1,3),hour:Q(t,5,4)}};_n.getByteFromDayProfile=function(t){var e=0;e=j(e,2,1,t.tariff);e=j(e,1,3,+!t.isFirstHalfHour);e=j(e,5,4,t.hour);return e};_n.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};_n.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:Z(Br,2147496324),relaySet4:Z(Qr,0),relaySet3:Z(Zr,0),relaySet2:Z(zr,3),relaySet1:Z(Kr,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:Z(kr,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:Z(br,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:Z(jr,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};_n.prototype.getFrameHeader=function(){var t=this.getUint8();var e=Vt[t];var r=this.getUint16();var n=this.getUint16();return{type:t,typeName:e,destination:r,source:n}};_n.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?Vr.type:e,n=t.destination,i=n===void 0?Vr.destination:n,a=t.source,s=a===void 0?Vr.source:a;this.setUint8(r);this.setUint16(i);this.setUint16(s)};_n.prototype.getDeviceId=function(){var t=R(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var n=R(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:n}};_n.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,n=t.year,i=t.serial;this.setBytes(u(e));this.setUint8(r);this.setUint8(n);this.setBytes(u(i))};_n.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};_n.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};_n.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};_n.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};_n.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};_n.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};_n.prototype.getDayProfile=function(){return _n.getDayProfileFromByte(this.getUint8())};_n.prototype.setDayProfile=function(t){this.setUint8(_n.getByteFromDayProfile(t))};_n.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(Yr).fill(0).map((function(){return t.getUint8()}))}};_n.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};_n.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};_n.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};_n.prototype.getDeviceType=function(){return Ot(this.getBytes(9))};_n.prototype.setDeviceType=function(t){this.setBytes(lt(t))};_n.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:Z(Br,this.getUint32()),relaySet4:Z(Qr,this.getUint8()),relaySet3:Z(Zr,this.getUint8()),relaySet2:Z(zr,this.getUint8()),relaySet1:Z(Kr,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:Z(kr,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:Z(br,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:Z(jr,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};_n.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(z(Br,t.displaySet));this.setUint8(z(Qr,t.relaySet4));this.setUint8(z(Zr,t.relaySet3));this.setUint8(z(zr,t.relaySet2));this.setUint8(z(Kr,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(z(kr,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(z(br,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(z(jr,t.relaySet5));this.setUint8(e)};_n.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Q(t,xr,1);var r=an(this,e,t);return{energyType:e,energies:r}};_n.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,n=t.energies;if(r){sn(this,r,n)}n.forEach((function(t){if(t!==null){e.setUint32(t)}}))};_n.prototype.getEnergies=function(){var t=this;return new Array(xr).fill(0).map((function(){return t.getInt32()}))};_n.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};_n.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};_n.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};_n.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};_n.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};_n.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return En(t)}))};_n.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return on(e,t)}))};_n.prototype.getEventStatus=function(){var t=this.getUint16();return Z(qr,t)};_n.prototype.setEventStatus=function(t){this.setUint16(z(qr,t))};_n.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=Z($r,this.getUint8());var r=Z(Jr,this.getUint8());var n=Z(tn,this.getUint8());var i=Z(en,this.getUint8());var a=Z(rn,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:n,status2:i,status3:a}};_n.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,n=t.relayStatus2,i=t.status1,a=t.status2,s=t.status3;this.setUint16(e);this.setUint8(z($r,r));this.setUint8(z(Jr,n));this.setUint8(z(tn,i));this.setUint8(z(en,a));this.setUint8(z(rn,s))};_n.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Fr[e];switch(e){case hr:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case qt:case er:if(r<8){return t}t.newDate=this.getDateTime();break}return t};_n.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case hr:for(var e of t.power){this.setUint8(e)}break;case qt:case er:this.setDateTime(t.newDate);break}};_n.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};_n.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};_n.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(xr).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};_n.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};_n.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:Z(nn,this.getUint8())}};_n.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,n=t.pmaxMinusThreshold2,i=t.pmaxMinusThreshold3,a=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(n);this.setUint32(i);this.setUint8(z(nn,a))};_n.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(xr).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};_n.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var vn=0;var hn=128;var An=129;var fn=130;var un=131;var Tn=132;var Rn=133;var gn=134;var On=135;var ln=136;var Un=137;var cn=144;var dn=145;var pn=146;var In=147;var Pn=149;var Nn=151;var Mn=152;var Sn=153;var Cn=154;var mn=155;var yn=156;var Dn=159;var Ln=160;var Fn=240;var Vn=Object.freeze({__proto__:null,ACCESS_DENIED:In,BAD_ARRAY_INDEX:gn,BAD_BLOCK_NUMBER:yn,BAD_DATA_LENGTH:Rn,BAD_MESSAGE:Tn,BAD_RATE_PLAN_ID:ln,BAD_RATE_PLAN_SIZE:Un,BAD_RESPONSE_LENGTH:cn,BAD_SALDO_WRITE:Pn,BLOCKED_METER:Nn,CALIBRATION_DISABLED:pn,DECRYPTION_FAILURE:fn,INTERNAL:Fn,INVALID_CORRECTION_INTERVAL:Cn,NOT_ALIGNED_DATA:An,NOT_PREPARED_RATE_PLAN:On,NO_DATA_FOR_DATE:dn,OK:vn,OUT_OFF_RANGE:Dn,SET_METER_TYPE_FAILURE:Ln,TIME_CORRECTION_FAILURE:Sn,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:mn,UNENCRYPTED_COMMAND_DISABLED:Mn,UNKNOWN_COMMAND:hn,UNKNOWN_PROTOCOL:un});var wn=Ft(Vn);var Yn=254;var xn="errorResponse";var Hn=function(){return function(t){var e=new _n(t);var r=e.getUint8();var n=e.getUint8();var i=wn[n];return{commandId:r,errorCode:n,errorName:i}}};var Wn=112;var Gn="getBuildVersion";var Xn=6;var Bn=function(t){if(t.length!==Xn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=o(t,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],E=e[5];return{date:{date:r,month:n,year:i},version:"".concat(a,".").concat(s,".").concat(E)}};var bn=62;var Kn="getCorrectTime";var zn=function(t){var e=new _n(t);return e.getTimeCorrectionParameters()};var Zn=0;var Qn=1;var jn=2;var kn=3;var qn=4;var $n=5;var Jn=6;var ti=7;var ei=8;var ri=9;var ni=10;var ii=11;var ai=12;var si=13;var Ei=14;var oi=Object.freeze({__proto__:null,CASE_MODULE_OPEN:ni,CASE_OPEN:Zn,CASE_TERMINAL_OPEN:ri,DEVICE_FAILURE:ei,ERROR_ACCESS:$n,MAGNETIC_ON:Qn,PARAMETERS_UPDATE_LOCAL:kn,PARAMETERS_UPDATE_REMOTE:jn,PROTECTION_RESET_EM:si,PROTECTION_RESET_MAGNETIC:Ei,RESTART:qn,TARIFF_TABLE_GET:ai,TARIFF_TABLE_SET:ii,TIME_CORRECT:ti,TIME_SET:Jn});Ft(oi);var _i=7;var vi="getDateTime";var hi=function(t){var e=new _n(t);return e.getDateTime()};var Ai=4;var fi=4294967295;var ui={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Ti=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return z(ui,e)};var Ri=function(t){return t<Ai?1<<t:0};var gi=function(t){return t<Ai?1<<t<<4:0};var Oi=function(t,e){var r=0;if(t<Ai){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=Ri(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=gi(t)}}return r};function li(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;K.call(this,t,e)}li.prototype=Object.create(K.prototype);li.prototype.constructor=li;li.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};li.prototype.setDate=function(t){var e=t.year,r=t.month,n=t.date;var i=e<<1|r>>3&1;var a=r<<5&224|n&31;this.setUint8(i);this.setUint8(a)};li.prototype.getEnergiesFlags=function(){var t=this.getUint8();return Z(ui,t)};li.prototype.setEnergiesFlags=function(t){this.setUint8(Ti(t))};li.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();e.push(n===fi?undefined:n)}return e};li.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?fi:r)}}};li.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};li.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};li.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&ui["A+"]){e["A+"]=this.getUint32()}if(t&ui["A+R+"]){e["A+R+"]=this.getUint32()}if(t&ui["A+R-"]){e["A+R-"]=this.getUint32()}return e};li.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};li.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&ui["A-"]){e["A-"]=this.getUint32()}if(t&ui["A-R+"]){e["A-R+"]=this.getUint32()}if(t&ui["A-R-"]){e["A-R-"]=this.getUint32()}return e};li.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};li.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(Ai).fill(null);for(var n=0;n<Ai;n++){if(e&Ri(n)){r[n]=this.getAPlusTariffEnergies(t)}}for(var i=0;i<Ai;i++){if(e&gi(i)){r[i]={...r[i],...this.getAMinusTariffEnergies(t)}}}return r};li.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var n=0;t.forEach((function(t,e){if(t){r|=Ti(t);n|=Oi(e,t)}}));this.setUint8(r);this.setUint8(n);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};li.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};li.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,n=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(n)}};li.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&ui["A+"]){e["A+"]=this.getPowerMax()}if(t&ui["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&ui["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};li.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};li.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&ui["A-"]){e["A-"]=this.getPowerMax()}if(t&ui["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&ui["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};li.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};li.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(Ai).fill(null);for(var n=0;n<Ai;n++){if(e&Ri(n)){r[n]=this.getAPlusTariffPowerMax(t)}}for(var i=0;i<Ai;i++){if(e&gi(i)){r[i]={...r[i],...this.getAMinusTariffPowerMax(t)}}}return r};li.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var n=0;t.forEach((function(t,e){if(t){r|=Ti(t);n|=Oi(e,t)}}));this.setUint8(r);this.setUint8(n);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var Ui=255;var ci=59;var di="getDayProfile";var pi=function(t){var e=t.indexOf(Ui);var r=e===-1?t:t.slice(0,e);return{periods:v(r).map(_n.getDayProfileFromByte)}};var Ii=5;var Pi="getDeviceId";var Ni=function(t){var e=new _n(t);return e.getDeviceId()};var Mi=4;var Si="getDeviceType";var Ci=function(t){var e=new _n(t);return e.getDeviceType()};var mi=3+1;var yi=4;var Di=51;var Li="getEvents";var Fi=mi+255*yi;var Vi=function(t){return function(e){if(e.length>Fi){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var r=new t(e);var n=r.getDate();var i=r.getUint8();var a=[];while(!r.isEmpty){a.push(r.getEvent())}return{date:n,eventsNumber:i,events:a}}};var wi=Vi(_n);var Yi=14;var xi=20;var Hi=52;var Wi="getEventsCounters";var Gi=function(t){if(t.length!==Yi&&t.length!==xi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new _n(t);var r=e.getUint16();var n=e.getUint16();var i=e.getUint16();var a=e.getUint16();var s=e.getUint16();var E=e.getUint16();var o=e.getUint16();return{accessClosed:E,accessError:s,localParametersChange:i,remoteParametersChange:a,powerOff:n,restart:r,setClock:o}};var Xi=1;var Bi="getEventStatus";var bi=function(t){var e=new _n(t,true);return e.getEventStatus()};var Ki=111;var zi="getHalfhoursEnergies";var Zi=function(t){var e=new li(t);var r=e.getDate();var n=e.getEnergiesFlags();var i=e.getUint8();var a=e.getUint8();return{date:r,firstHalfhour:i,halfhoursNumber:a,energies:e.getHalfhoursEnergies(n,a)}};var Qi=109;var ji="getMagneticFieldThreshold";var ki=function(t){var e=new _n(t);return{induction:e.getUint16(),threshold:e.getUint16(),inductionCoefficient:e.getUint16()/100,reserved:e.getUint32()}};var qi=122;var $i="getMeterInfo";var Ji=function(t){var e=o(t,1),r=e[0];return{ten:r}};var ta=113;var ea="getOperatorParametersExtended3";var ra=function(t){var e=new _n(t);return e.getOperatorParametersExtended3()};var na=44;var ia="getRatePlanInfo";var aa=1+wr*2;var sa=function(t){if(t.length!==aa){throw new Error("Invalid getRatePlanInfo data size.")}var e=new _n(t);return{tariffTable:e.getUint8(),activePlan:e.getTariffPlan(),passivePlan:e.getTariffPlan()}};var Ea=41;var oa="getSaldo";var _a=29;var va=function(t){if(t.length!==_a){throw new Error("Invalid getSaldo data size.")}var e=new _n(t);return{currentSaldo:e.getInt32(),count:e.getUint8(),energy:new Array(4).fill(0).map((function(){return e.getInt32()})),beginSaldoOfPeriod:e.getInt32(),date:{month:e.getUint8(),date:e.getUint8(),hours:e.getUint8(),minutes:e.getUint8()}}};var ha=46;var Aa="getSaldoParameters";var fa=37;var ua=function(t){if(t.length!==fa){throw new Error("Invalid getSaldoParameters data size.")}var e=new _n(t);return e.getSaldoParameters()};var Ta=60;var Ra="getSeasonProfile";var ga=function(t){var e=new _n(t);return e.getSeasonProfile()};var Oa=61;var la="getSpecialDay";var Ua=function(t){var e=new _n(t);return e.getSpecialDay()};var ca=40;var da="getVersion";var pa=function(t){return{version:String.fromCharCode.apply(null,v(t))}};var Ia=20;var Pa="prepareRatePlan";var Na=0;var Ma=function(t){if(t.length!==Na){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Sa=53;var Ca="resetPowerMaxDay";var ma=0;var ya=function(t){if(t.length!==ma){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Da=54;var La="resetPowerMaxMonth";var Fa=0;var Va=function(t){if(t.length!==Fa){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var wa=70;var Ya="runTariffPlan";var xa=0;var Ha=function(t){if(t.length!==xa){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Wa=9;var Ga="setAccessKey";var Xa=0;var Ba=function(t){if(t.length!==Xa){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ba=92;var Ka="setCorrectDateTime";var za=0;var Za=function(t){if(t.length!==za){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Qa=28;var ja="setCorrectTime";var ka=0;var qa=function(t){if(t.length!==ka){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var $a=8;var Ja="setDateTime";var ts=0;var es=function(t){if(t.length!==ts){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var rs=16;var ns="setDayProfile";var is=0;var as=function(t){if(t.length!==is){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ss=93;var Es="setDisplayParam";var os=0;var _s=function(t){if(t.length!==os){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var vs=114;var hs="setOperatorParametersExtended3";var As=0;var fs=function(t){if(t.length!==As){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var us=31;var Ts="setOperatorParameters";var Rs=0;var gs=function(t){if(t.length!==Rs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Os=42;var ls="setSaldo";var Us=0;var cs=function(t){if(t.length!==Us){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ds=47;var ps="setSaldoParameters";var Is=0;var Ps=function(t){if(t.length!==Is){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ns=17;var Ms="setSeasonProfile";var Ss=0;var Cs=function(t){if(t.length!==Ss){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ms=18;var ys="setSpecialDay";var Ds=0;var Ls=function(t){if(t.length!==Ds){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Fs=100;var Vs="setSpecialOperation";var ws=function(t){var e=new _n(t);var r=e.getUint8();var n=!!(r&1);var i=!!(r&2);return{electroMagneticIndication:n,magneticIndication:i}};var Ys=25;var xs="turnRelayOff";var Hs=0;var Ws=function(t){if(t.length!==Hs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Gs=24;var Xs="turnRelayOn";var Bs=0;var bs=function(t){if(t.length!==Bs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ks={encrypt:function(){},decrypt:function(){}};var zs=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var Zs=3;var Qs=2;var js=2;var ks=function(t,e){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=n?.aesKey;var a=[];var s=o(r,2),E=s[0],_=s[1];var h=_&Zs;var A={messageId:E,accessLevel:h,commands:a,bytes:r,lrc:{received:undefined,calculated:0}};var f=r.slice(Qs);var u;if(i&&h!==g){f=v(Ks.decrypt(i,f))}var T=f[f.length-1];f=f.slice(0,-1);var R=zs(f);if(h!==g||T!==0){if(T!==R){u="Mismatch LRC."}}var O=f[0]&Zs;var l=f.slice(1);if(h!==O){u="Mismatch access levels."}var U=0;do{var c=l[U];var d=l[U+1];var p=js+d;var I=l.slice(U+js,U+p);var P={id:c,name:e[c],headerSize:js,bytes:l.slice(U,U+p)};if(!c){break}try{if(!t[c]){throw new Error("Unsupported command id: ".concat(c,"!"))}P.parameters=t[c](I,n);a.push(P)}catch(t){a.push({command:P,error:t.message})}U+=p}while(U<=l.length);A.lrc.calculated=R;A.lrc.received=T;if(u){return{message:A,error:u}}return A}};var qs=Yn,$s=xn;var Js=Hn();var tE=1;var eE=2;var rE=3;var nE=4;var iE=5;var aE=6;var sE=7;var EE=8;var oE=9;var _E=10;var vE=11;var hE=12;var AE=13;var fE=14;var uE=15;var TE=16;var RE=17;var gE=18;var OE=19;var lE=20;var UE=21;var cE=22;var dE=23;var pE=24;var IE=25;var PE=26;var NE=28;var ME=30;var SE=31;var CE=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:nE,ACTIVE_ENERGY_T2:iE,ACTIVE_ENERGY_T3:aE,ACTIVE_ENERGY_T4:sE,ACTIVE_POWER_IN_NEUTRAL:oE,ACTIVE_POWER_PER_PHASE:EE,BATTERY_VOLTAGE:cE,CURRENT_BALANCE:ME,CURRENT_IN_NEUTRAL:vE,CURRENT_IN_PHASE:_E,DATE_MONTH_YEAR:fE,EXPORTED_ACTIVE_ENERGY_T1:TE,EXPORTED_ACTIVE_ENERGY_T2:RE,EXPORTED_ACTIVE_ENERGY_T3:gE,EXPORTED_ACTIVE_ENERGY_T4:OE,HOUR_MINUTE_SECOND:AE,MAGNET_INDUCTION:NE,OPTOPORT_SPEED:SE,POWER_COEFFICIENT_PHASE_A:lE,POWER_COEFFICIENT_PHASE_B:UE,POWER_THRESHOLD_T1:dE,POWER_THRESHOLD_T2:pE,POWER_THRESHOLD_T3:IE,POWER_THRESHOLD_T4:PE,SET_ALL_SEGMENT_DISPLAY:tE,SOFTWARE_VERSION:eE,TOTAL_ACTIVE_ENERGY:rE,TOTAL_EXPORTED_ACTIVE_ENERGY:uE,VOLTAGE:hE});Ft(CE);var mE=2400;var yE=9600;var DE={plc:{0:yE,2:mE,4:yE},optoport:{0:mE,2:mE,4:yE}};var LE={plc:Ft(DE.plc),optoport:Ft(DE.optoport)};var FE=1;var VE=2;var wE=1;var YE=2;var xE=3;var HE=4;var WE=17;var GE=18;var XE=19;var BE=20;var bE=21;var KE=22;var zE=23;var ZE=32;var QE=33;var jE=34;var kE=35;var qE=36;var $E=37;var JE=38;var to=39;var eo=40;var ro=49;var no=50;var io=51;var ao=52;var so=53;var Eo=54;var oo=55;var _o=56;var vo=57;var ho=64;var Ao=65;var fo=66;var uo=67;var To=68;var Ro=69;var go=70;var Oo=71;var lo=72;var Uo=73;var co=74;var po=75;var Io=76;var Po=77;var No=78;var Mo=79;var So=80;var Co=81;var mo=82;var yo=83;var Do=84;var Lo=85;var Fo=86;var Vo=87;var wo=88;var Yo=89;var xo=90;var Ho=91;var Wo=92;var Go=93;var Xo=94;var Bo=95;var bo=96;var Ko=97;var zo=98;var Zo=99;var Qo=100;var jo=101;var ko=102;var qo=103;var $o=104;var Jo=105;var t_=106;var e_=107;var r_=108;var n_=109;var i_=110;var a_=111;var s_=112;var E_=113;var o_=114;var __=115;var v_=116;var h_=117;var A_=118;var f_=119;var u_=120;var T_=121;var R_=122;var g_=123;var O_=124;var l_=125;var U_=126;var c_=127;var d_=128;var p_=129;var I_=130;var P_=131;var N_=132;var M_=133;var S_=134;var C_=135;var m_=136;var y_=137;var D_=138;var L_=139;var F_=140;var V_=141;var w_=142;var Y_=143;var x_=144;var H_=145;var W_=147;var G_=148;var X_=149;var B_=150;var b_=151;var K_=152;var z_=153;var Z_=154;var Q_=155;var j_=156;var k_=157;var q_=158;var $_=159;var J_=160;var tv=161;var ev=162;var rv=163;var nv=164;var iv=165;var av=166;var sv=167;var Ev=168;var ov=169;var _v=170;var vv=171;var hv=172;var Av=173;var fv=174;var uv=175;var Tv=176;var Rv=177;var gv=178;var Ov=179;var lv=224;var Uv=225;var cv=226;var dv=227;var pv=228;var Iv=229;var Pv=230;var Nv=231;var Mv=232;var Sv=Object.freeze({__proto__:null,ACCESS_LOCKED:WE,ACCESS_UNLOCKED:GE,ACCUMULATION_PARAM_BAD:M_,ACCUMULATION_PARAM_EXT_BAD:S_,BAD_TEST_EEPROM:p_,BAD_TEST_FRAM:I_,BATTERY_FAULT:Jo,BATTERY_OK:$o,BLOCK_TARIFF_BAD:m_,CALCULATION_PERIOD_BAD:C_,CALIBRATION_FAULT:e_,CALIBRATION_FLAG_RESET:d_,CALIBRATION_FLAG_SET:c_,CALIBRATION_OK:t_,CALIBRATION_PARAM_BAD:y_,CASE_CLOSE:bE,CASE_KLEMA_CLOSE:b_,CASE_KLEMA_OPEN:B_,CASE_MODULE_CLOSE:Q_,CASE_MODULE_OPEN:Z_,CASE_OPEN:BE,CHANGE_ACCESS_KEY0:ZE,CHANGE_ACCESS_KEY1:QE,CHANGE_ACCESS_KEY2:jE,CHANGE_ACCESS_KEY3:kE,CHANGE_COR_TIME:s_,CHANGE_PARAMETERS_LOCAL:qE,CHANGE_PARAMETERS_REMOTE:$E,CHANGE_PARAM_CHANNEL1:q_,CHANGE_PARAM_CHANNEL2:$_,CHANGE_PARAM_CHANNEL3:J_,CHANGE_PARAM_CHANNEL4:tv,CHANGE_PARAM_CHANNEL5:ev,CHANGE_PARAM_CHANNEL6:rv,CHANGE_TARIFF_TABLE:no,CHANGE_TARIFF_TABLE_2:K_,CHANGE_TARIFF_TABLE_3:z_,CLOCK_FAULT:Ko,CLOCK_OK:bo,CMD_CHANGE_TIME:JE,CMD_RELAY_2_OFF:o_,CMD_RELAY_2_ON:E_,CMD_RELAY_OFF:eo,CMD_RELAY_ON:to,COEFFICIENT_TRANSFORMATION_CHANGE:Y_,CROSS_ZERO_ENT0:__,CROSS_ZERO_ENT1:v_,CROSS_ZERO_ENT2:h_,CROSS_ZERO_ENT3:A_,CROSS_ZERO_EXPORT_ENT0:nv,CROSS_ZERO_EXPORT_ENT1:iv,CROSS_ZERO_EXPORT_ENT2:av,CROSS_ZERO_EXPORT_ENT3:sv,CROSS_ZERO_EXPORT_VARE0:hv,CROSS_ZERO_EXPORT_VARE1:Av,CROSS_ZERO_EXPORT_VARE2:fv,CROSS_ZERO_EXPORT_VARE3:uv,CROSS_ZERO_EXPORT_VARI0:Ev,CROSS_ZERO_EXPORT_VARI1:ov,CROSS_ZERO_EXPORT_VARI2:_v,CROSS_ZERO_EXPORT_VARI3:vv,CROSS_ZERO_VARE0:g_,CROSS_ZERO_VARE1:O_,CROSS_ZERO_VARE2:l_,CROSS_ZERO_VARE3:U_,CROSS_ZERO_VARI0:f_,CROSS_ZERO_VARI1:u_,CROSS_ZERO_VARI2:T_,CROSS_ZERO_VARI3:R_,EM_MAGNETIC_OFF:Rv,EM_MAGNETIC_ON:Tv,ENERGY_REGISTER_OVERFLOW:ro,ENERGY_T0_FAULT:wE,ENERGY_T1_FAULT:YE,ENERGY_T2_FAULT:xE,ENERGY_T3_FAULT:HE,ERR_ACCESS:XE,F_MAX_OK:Io,F_MAX_OVER:Po,F_MIN_OK:No,F_MIN_UNDER:Mo,IA_MAX_OK:Do,IA_MAX_OVER:Lo,IB_MAX_OK:Fo,IB_MAX_OVER:Vo,IC_MAX_OK:wo,IC_MAX_OVER:Yo,IDIFF_OK:Xo,IDIFF_OVER:Bo,MAGNETIC_OFF:zE,MAGNETIC_ON:KE,METER_TROUBLE:X_,OP_PARAM_BAD:L_,OP_PARAM_EXT_BAD:F_,O_PARAMETERS_FAULT:a_,O_PARAMETERS_OK:i_,PA_MAX_OK:xo,PA_MAX_OVER:Ho,POWER_A_OFF:qo,POWER_A_ON:ko,POWER_B_OFF:jo,POWER_B_ON:Qo,POWER_C_OFF:Zo,POWER_C_ON:zo,POWER_OVER_RELAY_OFF:k_,PV_MAX_OK:Wo,PV_MAX_OVER:Go,P_MAX_A_MINUS_OK:Nv,P_MAX_A_MINUS_OVER:Mv,RELAY_HARD_BAD_OFF:x_,RELAY_HARD_BAD_ON:W_,RELAY_HARD_OFF:G_,RELAY_HARD_ON:H_,RELAY_OFF:oo,RELAY_ON:Eo,RESET_EM_FLAG:gv,RESET_MAGNETIC_FLAG:Ov,RESTART:_o,SALDO_ENERGY_BAD:V_,SALDO_PARAM_BAD:N_,SET_DEMAND_EN_10_MIN:dv,SET_DEMAND_EN_15_MIN:pv,SET_DEMAND_EN_1_MIN:lv,SET_DEMAND_EN_30_MIN:Iv,SET_DEMAND_EN_3_MIN:Uv,SET_DEMAND_EN_5_MIN:cv,SET_DEMAND_EN_60_MIN:Pv,SET_NEW_SALDO:P_,SET_SALDO_PARAM:j_,SET_TARIFF_TABLE:io,SUMMER_TIME:ao,TIME_CORRECT:w_,T_MAX_OK:So,T_MAX_OVER:Co,T_MIN_OK:mo,T_MIN_UNDER:yo,VA_MAX_OK:ho,VA_MAX_OVER:Ao,VA_MIN_OK:fo,VA_MIN_UNDER:uo,VB_MAX_OK:To,VB_MAX_OVER:Ro,VB_MIN_OK:go,VB_MIN_UNDER:Oo,VC_MAX_OK:lo,VC_MAX_OVER:Uo,VC_MIN_OK:co,VC_MIN_UNDER:po,V_PARAMETERS_FAULT:n_,V_PARAMETERS_OK:r_,WD_RESTART:vo,WINTER_SUMMER_BAD:D_,WINTER_TIME:so});var Cv=Ft(Sv);var mv=86;var yv="getCriticalEvent";var Dv=9;var Lv=function(t){if(t.length!==Dv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=o(t,9),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],E=e[5],_=e[6],v=e[7],h=e[8];return{event:r,index:n,date:{year:i,month:a,date:s,hours:E,minutes:_,seconds:v},count:h}};var Fv=4;var Vv={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var wv={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var Yv={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var xv={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var Hv={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var Wv={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var Gv={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var Xv={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var Bv={OPTOPORT_SPEED:1<<26};var bv={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var Kv=function(t){return{plc:DE.plc[Q(t,4,1)],optoport:DE.optoport[Q(t,4,5)]}};var zv=function(t){var e=0;e=j(e,4,1,Number(LE.plc[t.plc]));e=j(e,4,5,Number(LE.optoport[t.optoport]));return e};function Zv(t,e,r){var n=r>>Fv;var i=[];var a=[];var s=[];for(var E=0;E<xr;E++){var o=!!Q(n,1,E+1);if(o){i.push(t.getInt32());a.push(t.getInt32());s.push(t.getInt32())}else{i.push(null);a.push(null);s.push(null)}}return{wh:i,vari:a,vare:s}}function Qv(t,e){var r=e.wh,n=e.vari,i=e.vare;var a=1+Fv;var s=t;for(var E=0;E<xr;E++){s=j(s,1,E+a,Number(!!r[E]&&!!n[E]&&!!i[E]))}return s}function jv(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_n.call(this,t,e)}jv.prototype=Object.create(_n.prototype);jv.prototype.constructor=jv;jv.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:Z(Vv,4229),displaySet2:Z(wv,139776),displaySet3:Z(Yv,0),relaySet:Z(Wv,771),speedOptoPort:Kv(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:Z(Gv,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:Z(xv,2147876864)}};jv.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:Z(Vv,this.getUint32()),displaySet2:Z(wv,this.getUint32()),displaySet3:Z(Yv,this.getUint32()),relaySet:Z(Wv,this.getUint32()),speedOptoPort:Kv(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:Z(Gv,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:Z(xv,this.getUint32())}};jv.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(z(Vv,t.displaySet1));this.setUint32(z(wv,t.displaySet2));this.setUint32(z(Yv,t.displaySet3));this.setUint32(z(Wv,t.relaySet));this.setUint8(zv(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(z(Gv,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(z(xv,t.displaySet4))};jv.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:Z(Xv,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};jv.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(z(Xv,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};jv.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var n=0;n<xr;n++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};jv.prototype.setEnergies=function(t){for(var e=0;e<xr;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};jv.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Q(t,Fv,1);var r=Zv(this,e,t);return{energyType:e,energies:r}};jv.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var n=Qv(e,r);var i=n>>Fv;this.setUint8(n);for(var a=0;a<xr;a++){var s=!!Q(i,1,a+1);if(s){this.setInt32(r.wh[a]);this.setInt32(r.vari[a]);this.setInt32(r.vare[a])}}return}for(var E=0;E<xr;E++){this.setInt32(r.wh[E]);this.setInt32(r.vari[E]);this.setInt32(r.vare[E])}};jv.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};jv.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};jv.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};jv.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};jv.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(xr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};jv.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};jv.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(xr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};jv.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};jv.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Cv[e];switch(e){case k_:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case JE:case w_:if(r<8){return t}t.newDate=this.getDateTime();break}return t};jv.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case k_:for(var e of t.power){this.setUint8(e)}break;case JE:case w_:this.setDateTime(t.newDate);break}};jv.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};jv.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};jv.prototype.getOperatorParametersExtended2=function(){return{deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:Z(bv,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:Z(Bv,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:this.getUint8()}};jv.prototype.setOperatorParametersExtended2=function(t){this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(z(bv,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(z(Bv,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(t.timeCorrectPeriod)};jv.prototype.getOperatorParametersExtended4=function(){return{displaySet5:Z(Hv,this.getUint32()),displaySet25:Z(Hv,this.getUint32()),displaySet31:Z(Vv,this.getUint32()),displaySet32:Z(Vv,this.getUint32()),displaySet33:Z(Vv,this.getUint32()),displaySet34:Z(Vv,this.getUint32()),displaySet35:Z(Hv,this.getUint32())}};jv.prototype.setOperatorParametersExtended4=function(t){this.setUint32(z(Hv,t.displaySet5));this.setUint32(z(Hv,t.displaySet25));this.setUint32(z(Vv,t.displaySet31));this.setUint32(z(Vv,t.displaySet32));this.setUint32(z(Vv,t.displaySet33));this.setUint32(z(Vv,t.displaySet34));this.setUint32(z(Hv,t.displaySet35))};var kv=57;var qv="getCurrentStatusMeter";var $v=function(t){var e=new jv(t);var r=e.getUint32();var n=e.getUint32();var i=e.getUint32();var a=e.getUint32();var s=e.getUint32();var E=e.getUint32();e.getUint32();var o=e.getUint32();var _=!!(e.getUint8()&1);var v=e.getUint8();var h=!!(e.getUint8()&1);var A=!!(e.getUint8()&1);var f={"A+":e.getUint8(),maximumPowers:e.getUint8(),"A-":e.getUint8()};var u=e.getUint8();var T=!!(e.getUint8()&1);var R=v|u<<8;return{operatingSeconds:r,tbadVAAll:n,tbadVBAll:i,tbadVCAll:a,tbadIMAXAll:s,tbadPMAXAll:E,tbadFREQ:o,relayStatus:_,statusEvent:Z(qr,R),centerAlert:h,calEnableFlag:A,currentTariffs:f,isSummerTime:T}};var Jv=13;var th="getCurrentValues";var eh=function(t){var e=new jv(t);return{vaRms:e.getInt32(),vbRms:e.getInt32(),vcRms:e.getInt32(),iaRms:e.getInt32(),ibRms:e.getInt32(),icRms:e.getInt32(),powerA:e.getInt32(),powerB:e.getInt32(),powerC:e.getInt32(),varA:e.getInt32(),varB:e.getInt32(),varC:e.getInt32(),iNeutral:e.getInt32()}};({wh:n(n({},FE,{gType:"1.8",rType:"1.8"}),VE,{gType:"2.8"}),vari:n(n({},FE,{gType:"5.8",rType:"3.8"}),VE,{gType:"6.8"}),vare:n(n({},FE,{gType:"8.8",rType:"4.8"}),VE,{gType:"7.8"})});var rh=51;var nh=22;var ih="getDayDemand";var ah=function(t){var e=new jv(t);var r;if(t.length===rh){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var sh=79;var Eh="getDayDemandExport";var oh=function(t){var e=new jv(t);return{date:e.getDate(),energies:e.getEnergies()}};var _h=49;var vh="getDayMaxDemand";var hh=function(t){var e=new jv(t);return e.getDayMaxDemandResponse()};var Ah=88;var fh="getDayMaxDemandExport";var uh=function(t){var e=new jv(t);return e.getDayMaxDemandResponse()};var Th=7;var Rh=118;var gh="getDemand";var Oh=function(t){if(!t||t.length<Th){throw new Error("Invalid uplink GetDemand byte length.")}var e=new jv(t);var r=e.getDemand();if(t.length!==Th+2*r.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var n=new Array(r.count).fill(0).map((function(){return e.getUint16()}));return{...r,demands:n}};var lh=94;var Uh="getDisplayParam";var ch=function(t){var e=_(t),r=e[0],n=e.slice(1);return{displayMode:r,order:n}};var dh=15;var ph="getEnergy";var Ih=function(t){var e=new jv(t);return e.getEnergies()};var Ph=51;var Nh=3;var Mh="getEnergyDayPrevious";var Sh=function(t){var e=new jv(t);var r;if(t.length===Ph){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var Ch=78;var mh="getEnergyExport";var yh=function(t){var e=new jv(t);return e.getEnergies()};var Dh=80;var Lh="getEnergyExportDayPrevious";var Fh=function(t){var e=new jv(t);return e.getEnergies()};var Vh=58;var wh="getExtendedCurrentValues";var Yh=function(t){var e=new jv(t);return{temperature:e.getInt16(),frequency:e.getUint16(),vPhaseAB:e.getInt32(),vPhaseAC:e.getInt32(),pfA:e.getInt16()/1e3,pfB:e.getInt16()/1e3,pfC:e.getInt16()/1e3,pf:e.getInt16()/1e3,vaA:e.getInt32(),vaB:e.getInt32(),vaC:e.getInt32(),vaSum:e.getInt32(),uBatteryRtc:e.getInt16()}};var xh=21;var Hh="getHalfHourDemand";var Wh=function(t){var e=new jv(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Gh=Gr+2;var Xh=90;var Bh="getHalfHourDemandChannel";var bh=function(t){var e=new jv(t);var r=t.length>Gh;var n=e.getUint8();var i=e.getUint8();var a=e.getDate();var s=e.getEnergyPeriods(r?Wr:Hr);if(r){return{channel:n,channelParameter:i,date:a,energies:s,dstHour:e.getUint8()}}return{channel:n,channelParameter:i,date:a,energies:s}};var Kh=83;var zh="getHalfHourDemandExport";var Zh=function(t){var e=new jv(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Qh=73;var jh="getHalfHourDemandVare";var kh=function(t){var e=new jv(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var qh=85;var $h="getHalfHourDemandVareExport";var Jh=function(t){var e=new jv(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var tA=72;var eA="getHalfHourDemandVari";var rA=function(t){var e=new jv(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var nA=84;var iA="getHalfHourDemandVariExport";var aA=function(t){var e=new jv(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var sA=23;var EA="getMonthDemand";var oA=function(t){var e=new jv(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var _A=82;var vA="getMonthDemandExport";var hA=function(t){var e=new jv(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var AA=50;var fA="getMonthMaxDemand";var uA=function(t){var e=new jv(t);return e.getMonthMaxDemandResponse()};var TA=89;var RA="getMonthMaxDemandExport";var gA=function(t){var e=new jv(t);return e.getMonthMaxDemandResponse()};var OA=30;var lA="getOperatorParameters";var UA=function(t){var e=new jv(t);return e.getOperatorParameters()};var cA=63;var dA="getOperatorParametersExtended";var pA=function(t){var e=new jv(t);return e.getOperatorParametersExtended()};var IA=71;var PA="getOperatorParametersExtended2";var NA=function(t){var e=new jv(t);return e.getOperatorParametersExtended2()};var MA=64;var SA="setOperatorParametersExtended";var CA=0;var mA=function(t){if(t.length!==CA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var yA=69;var DA="setOperatorParametersExtended2";var LA=0;var FA=function(t){if(t.length!==LA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var VA=117;var wA="setOperatorParametersExtended4";var YA=0;var xA=function(t){if(t.length!==YA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var HA={};var WA={};var GA=ks(HA,WA);HA[O]=c;HA[Wn]=Bn;HA[bn]=zn;HA[_i]=hi;HA[ci]=pi;HA[Ii]=Ni;HA[Mi]=Ci;HA[Di]=wi;HA[Hi]=Gi;HA[Xi]=bi;HA[Ki]=Zi;HA[Qi]=ki;HA[qi]=Ji;HA[ta]=ra;HA[na]=sa;HA[Ea]=va;HA[ha]=ua;HA[Ta]=ga;HA[Oa]=Ua;HA[ca]=pa;HA[Ia]=Ma;HA[Sa]=ya;HA[Da]=Va;HA[wa]=Ha;HA[Wa]=Ba;HA[ba]=Za;HA[Qa]=qa;HA[$a]=es;HA[rs]=as;HA[ss]=_s;HA[us]=gs;HA[vs]=fs;HA[Os]=cs;HA[ds]=Ps;HA[Ns]=Cs;HA[ms]=Ls;HA[Fs]=ws;HA[Ys]=Ws;HA[Gs]=bs;HA[qs]=Js;HA[mv]=Lv;HA[kv]=$v;HA[Jv]=eh;HA[nh]=ah;HA[sh]=oh;HA[_h]=hh;HA[Ah]=uh;HA[Rh]=Oh;HA[lh]=ch;HA[dh]=Ih;HA[Nh]=Sh;HA[Ch]=yh;HA[Dh]=Fh;HA[Vh]=Yh;HA[xh]=Wh;HA[Xh]=bh;HA[Kh]=Zh;HA[Qh]=kh;HA[qh]=Jh;HA[tA]=rA;HA[nA]=aA;HA[sA]=oA;HA[_A]=hA;HA[AA]=uA;HA[TA]=gA;HA[OA]=UA;HA[cA]=pA;HA[IA]=NA;HA[us]=gs;HA[MA]=mA;HA[yA]=FA;HA[VA]=xA;WA[O]=l;WA[Wn]=Gn;WA[bn]=Kn;WA[_i]=vi;WA[ci]=di;WA[Ii]=Pi;WA[Mi]=Si;WA[Di]=Li;WA[Hi]=Wi;WA[Xi]=Bi;WA[Ki]=zi;WA[Qi]=ji;WA[qi]=$i;WA[ta]=ea;WA[na]=ia;WA[Ea]=oa;WA[ha]=Aa;WA[Ta]=Ra;WA[Oa]=la;WA[ca]=da;WA[Ia]=Pa;WA[Sa]=Ca;WA[Da]=La;WA[wa]=Ya;WA[Wa]=Ga;WA[ba]=Ka;WA[Qa]=ja;WA[$a]=Ja;WA[rs]=ns;WA[ss]=Es;WA[us]=Ts;WA[vs]=hs;WA[Os]=ls;WA[ds]=ps;WA[Ns]=Ms;WA[ms]=ys;WA[Fs]=Vs;WA[Ys]=xs;WA[Gs]=Xs;WA[qs]=$s;WA[mv]=yv;WA[kv]=qv;WA[Jv]=th;WA[nh]=ih;WA[sh]=Eh;WA[_h]=vh;WA[Ah]=fh;WA[Rh]=gh;WA[lh]=Uh;WA[dh]=ph;WA[Nh]=Mh;WA[Ch]=mh;WA[Dh]=Lh;WA[Vh]=wh;WA[xh]=Hh;WA[Xh]=Bh;WA[Kh]=zh;WA[Qh]=jh;WA[qh]=$h;WA[tA]=eA;WA[nA]=iA;WA[sA]=EA;WA[_A]=vA;WA[AA]=fA;WA[TA]=RA;WA[OA]=lA;WA[cA]=dA;WA[IA]=PA;WA[us]=Ts;WA[MA]=SA;WA[yA]=DA;WA[VA]=wA;var XA=145;var BA=30;var bA=function(t){if(t[0]!==BA){return{}}var e=t[1];var r=t[3];var n=t.slice(4,e+2);var i=zs(t.slice(0,e+2));var a=t[e+2];if(r===XA&&i===a){return n}return null};fromBytes=GA;getDataSegment=bA})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
