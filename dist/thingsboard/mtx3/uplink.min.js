// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,t=Array(a);e<a;e++)t[e]=r[e];return t}function a(r){if(Array.isArray(r))return r}function e(a){if(Array.isArray(a))return r(a)}function t(r,a,e){return(a=i(a))in r?Object.defineProperty(r,a,{value:e,enumerable:true,configurable:true,writable:true}):r[a]=e,r}function E(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _(r,a){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,E,_,v,n=[],A=true,T=false;try{if(_=(e=e.call(r)).next,0===a){if(Object(e)!==e)return;A=!1}else for(;!(A=(t=_.call(e)).done)&&(n.push(t.value),n.length!==a);A=!0);}catch(r){T=true,E=r}finally{try{if(!A&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw E}}return n}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(r,e){return a(r)||_(r,e)||o(r,e)||v()}function T(r){return e(r)||E(r)||o(r)||n()}function R(r,a){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,a);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}function i(r){var a=R(r,"string");return"symbol"==typeof a?a:a+""}function o(a,e){if(a){if("string"==typeof a)return r(a,e);var t={}.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(a,e):void 0}}var O=function(r){var a=r.trim();if(!a){return[]}a=a.replace(/0x/g,"").split(/\s+/).map(function(r){return r.padStart(2,"0")}).join("");if(a.length%2!==0){a="0".concat(a)}var e=a.length/2;var t=new Array(e);for(var E=0;E<e;E++){t[E]=parseInt(a.substring(E*2,E*2+2),16)}return t};var s={separator:" ",prefix:""};var f=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},s,a),t=e.separator,E=e.prefix;return r.map(function(r){return"".concat(E).concat(r.toString(16).padStart(2,"0"))}).join(t)};var N=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[r,a.length].concat(T(a))};var u=function(r,a,e){if(!r){throw new Error("Command name is required.")}if(a&&!Array.isArray(a)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof a,"."))}if(a.length<e.min||a.length>e.max){var t=f(a,{separator:""});var E="".concat(e.max);throw new Error("Wrong buffer size for ".concat(r,": ").concat(a.length,". Expected: ").concat(E,". Payload: 0x").concat(t,"."))}};var C=function(r,a,e){return u(r,a,{min:e,max:e})};var P=1;var S=3;var D=4;var I=5;var M=7;var l=8;var d=9;var g=13;var c=15;var h=16;var L=17;var p=18;var V=19;var m=20;var y=21;var U=22;var F=23;var H=24;var G=25;var X=28;var W=30;var Y=31;var x=40;var B=41;var w=42;var K=44;var b=45;var Z=46;var Q=47;var j=49;var z=50;var k=51;var q=52;var $=53;var J=54;var rr=57;var ar=58;var er=59;var tr=60;var Er=61;var _r=62;var vr=65;var nr=70;var Ar=74;var Tr=75;var Rr=79;var ir=80;var or=82;var Or=83;var sr=88;var fr=89;var Nr=91;var ur=92;var Cr=93;var Pr=94;var Sr=100;var Dr=109;var Ir=111;var Mr=112;var lr=113;var dr=114;var gr=115;var cr=116;var hr=117;var Lr=118;var pr=122;var Vr=Object.freeze({__proto__:null,activateRatePlan:V,getBv:Mr,getCorrectTime:_r,getCriticalEvent:vr,getCurrentStatusMeter:rr,getCurrentValues:g,getDateTime:M,getDayDemand:U,getDayDemandExport:Rr,getDayMaxDemand:j,getDayMaxDemandExport:sr,getDayMaxDemandPrevious:Ar,getDayProfile:er,getDemand:Lr,getDemandParameters:hr,getDeviceId:I,getDeviceType:D,getDisplayParam:Pr,getEnergy:c,getEnergyDayPrevious:S,getEnergyExport:Nr,getEnergyExportDayPrevious:ir,getEventStatus:P,getEvents:k,getEventsCounters:q,getExtendedCurrentValues:ar,getExtendedCurrentValues2:b,getHalfHourDemand:y,getHalfHourDemandExport:Or,getHalfHourDemandPrevious:Tr,getHalfHourEnergies:Ir,getMagneticFieldThreshold:Dr,getMeterInfo:pr,getMonthDemand:F,getMonthDemandExport:or,getMonthMaxDemand:z,getMonthMaxDemandExport:fr,getOperatorParameters:W,getOperatorParametersExtended3:lr,getQuality:gr,getRatePlanInfo:K,getSaldo:B,getSaldoParameters:Z,getSeasonProfile:tr,getSpecialDay:Er,getVersion:x,prepareRatePlan:m,resetPowerMaxDay:$,resetPowerMaxMonth:J,runTariffPlan:nr,setAccessKey:d,setCorrectDateTime:ur,setCorrectTime:X,setDateTime:l,setDayProfile:h,setDemandParameters:cr,setDisplayParam:Cr,setOperatorParameters:Y,setOperatorParametersExtended3:dr,setSaldo:w,setSaldoParameters:Q,setSeasonProfile:L,setSpecialDay:p,setSpecialOperation:Sr,turnRelayOff:G,turnRelayOn:H});var mr=120;var yr=121;var Ur=123;var Fr=254;var Hr=255;var Gr=Object.freeze({__proto__:null,activateRatePlan:V,errorDataFrameResponse:Hr,errorResponse:Fr,getBv:Mr,getCorrectTime:_r,getCriticalEvent:vr,getCurrentDemand:Ur,getCurrentStatusMeter:rr,getCurrentValues:g,getDateTime:M,getDayDemand:U,getDayDemandExport:Rr,getDayEnergies:mr,getDayMaxDemand:j,getDayMaxDemandExport:sr,getDayMaxDemandPrevious:Ar,getDayMaxPower:yr,getDayProfile:er,getDemand:Lr,getDemandParameters:hr,getDeviceId:I,getDeviceType:D,getDisplayParam:Pr,getEnergy:c,getEnergyDayPrevious:S,getEnergyExport:Nr,getEnergyExportDayPrevious:ir,getEventStatus:P,getEvents:k,getEventsCounters:q,getExtendedCurrentValues:ar,getExtendedCurrentValues2:b,getHalfHourDemand:y,getHalfHourDemandExport:Or,getHalfHourDemandPrevious:Tr,getHalfHourEnergies:Ir,getMagneticFieldThreshold:Dr,getMeterInfo:pr,getMonthDemand:F,getMonthDemandExport:or,getMonthMaxDemand:z,getMonthMaxDemandExport:fr,getOperatorParameters:W,getOperatorParametersExtended3:lr,getQuality:gr,getRatePlanInfo:K,getSaldo:B,getSaldoParameters:Z,getSeasonProfile:tr,getSpecialDay:Er,getVersion:x,prepareRatePlan:m,resetPowerMaxDay:$,resetPowerMaxMonth:J,runTariffPlan:nr,setAccessKey:d,setCorrectDateTime:ur,setCorrectTime:X,setDateTime:l,setDayProfile:h,setDemandParameters:cr,setDisplayParam:Cr,setOperatorParameters:Y,setOperatorParametersExtended3:dr,setSaldo:w,setSaldoParameters:Q,setSeasonProfile:L,setSpecialDay:p,setSpecialOperation:Sr,turnRelayOff:G,turnRelayOn:H});var Xr=function(r){var a={};for(var e in r){var t=r[e];a[t]=e}return a};var Wr=Xr(Gr);var Yr=0;var xr=128;var Br=129;var wr=130;var Kr=131;var br=132;var Zr=133;var Qr=134;var jr=135;var zr=136;var kr=137;var qr=144;var $r=145;var Jr=146;var ra=147;var aa=149;var ea=151;var ta=152;var Ea=153;var _a=154;var va=155;var na=156;var Aa=159;var Ta=160;var Ra=240;var ia=Object.freeze({__proto__:null,ACCESS_DENIED:ra,BAD_ARRAY_INDEX:Qr,BAD_BLOCK_NUMBER:na,BAD_DATA_LENGTH:Zr,BAD_MESSAGE:br,BAD_RATE_PLAN_ID:zr,BAD_RATE_PLAN_SIZE:kr,BAD_RESPONSE_LENGTH:qr,BAD_SALDO_WRITE:aa,BLOCKED_METER:ea,CALIBRATION_DISABLED:Jr,DECRYPTION_FAILURE:wr,INTERNAL:Ra,INVALID_CORRECTION_INTERVAL:_a,NOT_ALIGNED_DATA:Br,NOT_PREPARED_RATE_PLAN:jr,NO_DATA_FOR_DATE:$r,OK:Yr,OUT_OFF_RANGE:Aa,SET_METER_TYPE_FAILURE:Ta,TIME_CORRECTION_FAILURE:Ea,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:va,UNENCRYPTED_COMMAND_DISABLED:ta,UNKNOWN_COMMAND:xr,UNKNOWN_PROTOCOL:Kr});var oa=Xr(ia);var Oa=0;var sa=1;var fa=2;var Na=3;var ua=Object.freeze({__proto__:null,READ_ONLY:Na,READ_WRITE:fa,ROOT:sa,UNENCRYPTED:Oa});var Ca=Hr;var Pa=Wr[Hr];var Sa=1;var Da=function(r){C(Pa,r,Sa);var a=A(r,1),e=a[0];return{errorCode:e,errorName:oa[e]}};var Ia={encrypt:function(){},decrypt:function(){}};var Ma=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=a;r.forEach(function(r){e^=r});return e};var la=2;var da=2;var ga=function(r){var a=A(r,1),e=a[0];if(e===Ca){try{var t=Da(r.slice(la));return{id:e,name:Pa,headerSize:la,bytes:r,parameters:t}}catch{return null}}return null};var ca=function(r,a){var e=A(a,1),t=e[0];var E=ga(a.slice(da-1));var _=ga(a.slice(da));var v={messageId:t,bytes:a};if(E){return{...v,accessLevel:Oa,commands:[E]}}if(_){return{...v,accessLevel:r,commands:[_]}}return null};var ha=3;t(t(t(t({},Oa,0),Na,1),fa,2),sa,3);var La=2;var pa=2;var Va=function(r,a){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var E=t?.aesKey;var _=[];var v=A(e,2),n=v[0],R=v[1];var i=R&ha;var o=ca(i,e);var O={messageId:n,accessLevel:i,commands:_,bytes:e,lrc:{received:undefined,calculated:0}};var s=e.slice(La);var f;if(o){return o}if(E&&i!==Oa){s=T(Ia.decrypt(E,s))}var N=s[s.length-1];s=s.slice(0,-1);var u=Ma(s);if(i!==Oa||N!==0){if(N!==u){f="Mismatch LRC."}}var C=s[0]&ha;var P=s.slice(1);if(i!==C){f="Mismatch access levels."}var S=0;do{var D=P[S];var I=P[S+1];var M=pa+I;var l=P.slice(S+pa,S+M);var d={id:D,name:a[D],headerSize:pa,bytes:P.slice(S,S+M)};if(!D){break}try{if(!r[D]){throw new Error("Unsupported command id: ".concat(D,"!"))}d.parameters=r[D](l,t);_.push(d)}catch(r){_.push({command:d,error:r.message})}S+=M}while(S<=P.length);O.lrc.calculated=u;O.lrc.received=N;if(f){return{message:O,error:f}}return O}};var ma=1;var ya=3;var Ua=4;var Fa=5;var Ha=7;var Ga=8;var Xa=9;var Wa=13;var Ya=15;var xa=16;var Ba=17;var wa=18;var Ka=19;var ba=20;var Za=21;var Qa=22;var ja=23;var za=24;var ka=25;var qa=28;var $a=30;var Ja=31;var re=40;var ae=41;var ee=42;var te=44;var Ee=46;var _e=47;var ve=49;var ne=50;var Ae=51;var Te=52;var Re=53;var ie=54;var oe=57;var Oe=58;var se=59;var fe=60;var Ne=61;var ue=62;var Ce=63;var Pe=64;var Se=69;var De=70;var Ie=71;var Me=72;var le=73;var de=78;var ge=79;var ce=80;var he=82;var Le=83;var pe=84;var Ve=85;var me=86;var ye=88;var Ue=89;var Fe=90;var He=92;var Ge=93;var Xe=94;var We=100;var Ye=109;var xe=111;var Be=112;var we=113;var Ke=114;var be=115;var Ze=116;var Qe=117;var je=118;var ze=122;var ke=Object.freeze({__proto__:null,activateRatePlan:Ka,getBv:Be,getCorrectTime:ue,getCriticalEvent:me,getCurrentStatusMeter:oe,getCurrentValues:Wa,getDateTime:Ha,getDayDemand:Qa,getDayDemandExport:ge,getDayMaxDemand:ve,getDayMaxDemandExport:ye,getDayProfile:se,getDemand:je,getDeviceId:Fa,getDeviceType:Ua,getDisplayParam:Xe,getEnergy:Ya,getEnergyDayPrevious:ya,getEnergyExport:de,getEnergyExportDayPrevious:ce,getEventStatus:ma,getEvents:Ae,getEventsCounters:Te,getExtendedCurrentValues:Oe,getHalfHourDemand:Za,getHalfHourDemandChannel:Fe,getHalfHourDemandExport:Le,getHalfHourDemandVare:le,getHalfHourDemandVareExport:Ve,getHalfHourDemandVari:Me,getHalfHourDemandVariExport:pe,getHalfHourEnergies:xe,getMagneticFieldThreshold:Ye,getMeterInfo:ze,getMonthDemand:ja,getMonthDemandExport:he,getMonthMaxDemand:ne,getMonthMaxDemandExport:Ue,getOperatorParameters:$a,getOperatorParametersExtended:Ce,getOperatorParametersExtended2:Ie,getOperatorParametersExtended3:we,getOperatorParametersExtended4:Qe,getQuality:be,getRatePlanInfo:te,getSaldo:ae,getSaldoParameters:Ee,getSeasonProfile:fe,getSpecialDay:Ne,getVersion:re,prepareRatePlan:ba,resetPowerMaxDay:Re,resetPowerMaxMonth:ie,runTariffPlan:De,setAccessKey:Xa,setCorrectDateTime:He,setCorrectTime:qa,setDateTime:Ga,setDayProfile:xa,setDisplayParam:Ge,setOperatorParameters:Ja,setOperatorParametersExtended:Pe,setOperatorParametersExtended2:Se,setOperatorParametersExtended3:Ke,setOperatorParametersExtended4:Ze,setSaldo:ee,setSaldoParameters:_e,setSeasonProfile:Ba,setSpecialDay:wa,setSpecialOperation:We,turnRelayOff:ka,turnRelayOn:za});var qe=120;var $e=254;var Je=255;var rt=Object.freeze({__proto__:null,activateRatePlan:Ka,errorDataFrameResponse:Je,errorResponse:$e,getBv:Be,getCorrectTime:ue,getCriticalEvent:me,getCurrentStatusMeter:oe,getCurrentValues:Wa,getDateTime:Ha,getDayDemand:Qa,getDayDemandExport:ge,getDayEnergies:qe,getDayMaxDemand:ve,getDayMaxDemandExport:ye,getDayProfile:se,getDemand:je,getDeviceId:Fa,getDeviceType:Ua,getDisplayParam:Xe,getEnergy:Ya,getEnergyDayPrevious:ya,getEnergyExport:de,getEnergyExportDayPrevious:ce,getEventStatus:ma,getEvents:Ae,getEventsCounters:Te,getExtendedCurrentValues:Oe,getHalfHourDemand:Za,getHalfHourDemandChannel:Fe,getHalfHourDemandExport:Le,getHalfHourDemandVare:le,getHalfHourDemandVareExport:Ve,getHalfHourDemandVari:Me,getHalfHourDemandVariExport:pe,getHalfHourEnergies:xe,getMagneticFieldThreshold:Ye,getMeterInfo:ze,getMonthDemand:ja,getMonthDemandExport:he,getMonthMaxDemand:ne,getMonthMaxDemandExport:Ue,getOperatorParameters:$a,getOperatorParametersExtended:Ce,getOperatorParametersExtended2:Ie,getOperatorParametersExtended3:we,getOperatorParametersExtended4:Qe,getQuality:be,getRatePlanInfo:te,getSaldo:ae,getSaldoParameters:Ee,getSeasonProfile:fe,getSpecialDay:Ne,getVersion:re,prepareRatePlan:ba,resetPowerMaxDay:Re,resetPowerMaxMonth:ie,runTariffPlan:De,setAccessKey:Xa,setCorrectDateTime:He,setCorrectTime:qa,setDateTime:Ga,setDayProfile:xa,setDisplayParam:Ge,setOperatorParameters:Ja,setOperatorParametersExtended:Pe,setOperatorParametersExtended2:Se,setOperatorParametersExtended3:Ke,setOperatorParametersExtended4:Ze,setSaldo:ee,setSaldoParameters:_e,setSeasonProfile:Ba,setSpecialDay:wa,setSpecialOperation:We,turnRelayOff:ka,turnRelayOn:za});var at=Xr(rt);var et=1;var tt=2;var Et=3;var _t=4;var vt=Math.log,nt=Math.pow,At=Math.LN2;var Tt=function(r,a,e,t,E){var _,v,n=E*8-t-1,A=(1<<n)-1,T=A>>1,R=-7,i=e?E-1:0,o=e?-1:1,O=r[a+i];i+=o;_=O&(1<<-R)-1;O>>=-R;R+=n;for(;R>0;_=_*256+r[a+i],i+=o,R-=8);v=_&(1<<-R)-1;_>>=-R;R+=t;for(;R>0;v=v*256+r[a+i],i+=o,R-=8);if(_===0){_=1-T}else if(_===A){return v?NaN:O?-Infinity:Infinity}else{v=v+nt(2,t);_=_-T}return(O?-1:1)*v*nt(2,_-t)};var Rt=function(r,a,e,t,E,_){var v,n,A,T=_*8-E-1,R=(1<<T)-1,i=R>>1,o=E===23?nt(2,-24)-nt(2,-77):0,O=t?0:_-1,s=t?1:-1,f=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){n=e!==e?1:0;v=R}else{v=vt(e)/At|0;if(e*(A=nt(2,-v))<1){v--;A*=2}if(v+i>=1){e+=o/A}else{e+=o*nt(2,1-i)}if(e*A>=2){v++;A/=2}if(v+i>=R){n=0;v=R}else if(v+i>=1){n=(e*A-1)*nt(2,E);v=v+i}else{n=e*nt(2,i-1)*nt(2,E);v=0}}for(;E>=8;r[a+O]=n&255,O+=s,n/=256,E-=8);v=v<<E|n;T+=E;for(;T>0;r[a+O]=v&255,O+=s,v/=256,T-=8);r[a+O-s]|=f*128};var it=[1,0];var ot=[2,1,0];var Ot=[3,2,1,0];var st=[0,1];var ft=[0,1,2];var Nt=[0,1,2,3];var ut=function(r,a){return r[a]};var Ct=function(r,a,e){var t=e?st:it;var E=r[a+t[0]];var _=r[a+t[1]]<<8;return E|_};var Pt=function(r,a,e){var t=e?ft:ot;var E=r[a+t[0]];var _=r[a+t[1]]<<8;var v=r[a+t[2]]<<16;return E|_|v};var St=function(r,a,e){var t=e?Nt:Ot;var E=r[a+t[3]]*16777216;var _=r[a+t[2]]*65536;var v=r[a+t[1]]*256;var n=r[a+t[0]];return E+_+v+n};var Dt=function(r,a,e){r[a]=e&255};var It=function(r,a,e,t){var E=t?st:it;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255};var Mt=function(r,a,e,t){var E=t?ft:ot;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255};var lt=function(r,a,e,t){var E=t?Nt:Ot;r[a+E[0]]=e&255;r[a+E[1]]=e>>>8&255;r[a+E[2]]=e>>>16&255;r[a+E[3]]=e>>>24&255};function dt(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=a}dt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){Dt(this.data,this.offset,r<0?r|256:r);this.offset+=et},getInt8:function(){var r=ut(this.data,this.offset);this.offset+=et;return r&128?r^-256:r},setUint8:function(r){Dt(this.data,this.offset,r);this.offset+=et},getUint8:function(){var r=ut(this.data,this.offset);this.offset+=et;return r},setInt16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;It(this.data,this.offset,r<0?r|65536:r,a);this.offset+=tt},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ct(this.data,this.offset,r);this.offset+=tt;return a&32768?a^-65536:a},setUint16:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;It(this.data,this.offset,r,a);this.offset+=tt},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Ct(this.data,this.offset,r);this.offset+=tt;return a},setInt24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Mt(this.data,this.offset,r<0?r|16777216:r,a);this.offset+=Et},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Pt(this.data,this.offset,r);this.offset+=Et;return a&8388608?a^-16777216:a},setUint24:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Mt(this.data,this.offset,r,a);this.offset+=Et},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Pt(this.data,this.offset,r);this.offset+=Et;return a},setInt32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;lt(this.data,this.offset,r<0?r|4294967296:r,a);this.offset+=_t},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=St(this.data,this.offset,r);this.offset+=_t;return a&2147483648?a^-4294967296:a},setUint32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;lt(this.data,this.offset,r,a);this.offset+=_t},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=St(this.data,this.offset,r);this.offset+=_t;return a},setFloat32:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Rt(this.data,this.offset,r,a,23,4);this.offset+=_t},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var a=Tt(this.data,this.offset,r,23,4);this.offset+=_t;return a},setString:function(r){this.setUint8(r.length);for(var a=0;a<r.length;++a){this.setUint8(r.charCodeAt(a))}},getString:function(){var r=this.getUint8();var a=this.offset+r;var e=[];while(this.offset<a){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=a+r;return this.data.slice(a,this.offset)},setBytes:function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[a,r.length].concat(T(r)));this.data=e;this.offset=a+r.length}};Object.defineProperties(dt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var gt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=0;for(var t in a){if(t in r&&a[t]){e|=r[t]}}return e};var ct=function(r,a,e){return(1<<a)-1&r>>e-1};var ht=function(r,a,e,t){var E=(1<<a)-1<<e-1;var _=t;var v=r;v&=~E;_<<=e-1;v|=_;return v};var Lt=[".","1","3","R","M"];var pt=[".","A","G","R","T","D"];var Vt=[".","0","1","2","3","4","5"];var mt=[".","A","B","C","D","E","F"];var yt=[".","A","B","C","D","E","F","H","K","G"];var Ut=[".","1","2","3","4"];var Ft=[".","L","M","Z","K"];var Ht=[".","0","1","2","3","4","5","6","7","8","9"];var Gt=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Xt=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Wt=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Yt=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var xt={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Bt={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var wt=function(r){return gt(Bt,{...r,typeMeterG:!r.typeMeterG})};var Kt=function(r){var a=[];r.forEach(function(r){return a.push(r.toString(16))});if(r.length&1){a.push("0")}return O(a.join(""))};var bt=function(r,a,e){var t=[];if(r.length<11){throw new Error("Wrong format")}t.push(Lt.indexOf(r[0]));t.push(pt.indexOf(r[1]));t.push(Vt.indexOf(r[2]));t.push(Vt.indexOf(r[3]));if(r[4]!=="."){throw new Error("Wrong format")}t.push(mt.indexOf(r[5]));t.push(yt.indexOf(r[6]));if(r[7]!=="."){throw new Error("Wrong format")}t.push(Ut.indexOf(r[8]));t.push(Ft.indexOf(r[9]));t.push(e??0);t.push(Ht.indexOf(r[10]));if(r[11]!=="-"){throw new Error("Wrong format")}var E=r.length>13?r.length-1:r.length;for(var _=12;_<E;_++){t.push(Gt.indexOf(r[_]))}if(E<r.length){t.push(Wt.indexOf(r[E]))}var v=Kt(t);var n=new Array(9).fill(0);n[0]=0;for(var A=0;A<v.length;A++){n[A+(v.length<8?1:0)]=v[A]}return n};var Zt=function(r){if(r.length<3){throw new Error("Wrong format")}var a=[];a.push(Lt.indexOf(r[0]));a.push(pt.indexOf(r[1]));for(var e=3;e<r.length;e++){a.push(Xt.indexOf(r[e]))}var t=Kt(a);if(t.length===8){return t}if(t.length>8){throw new Error("Wrong format")}var E=new Array(8).fill(0);for(var _=0;_<t.length;_++){E[_]=t[_]}return E};var Qt=function(r){if(r.length<1){throw new Error("Wrong format")}var a=[];a.push(Lt.indexOf(r[0]));for(var e=1;e<r.length;e++){a.push(Yt.indexOf(r[e]))}var t=Kt(a);var E=new Array(8).fill(0);for(var _=0;_<t.length&&_<8;_++){E[_]=t[_]}return E};var jt=function(r,a){var e=r.type,t=r.revision,E=r.descriptor;if(!e.startsWith("MTX ")){throw new Error("Wrong format")}var _;var v=e.substring(4);var n=e[4];if(n==="1"||n==="3"){_=bt(v,a,t)}else{_=n==="M"?Qt(v):Zt(v)}if(E?.meterType){_[8]=E.meterType==="mtx1"?gt(xt,E):wt(E)}else{_[8]=0}return _};var zt=80;var kt=81;var qt=82;var $t=83;var Jt=84;var rE=85;var aE=86;var eE=87;var tE=88;var EE=89;var _E=90;var vE=91;var nE=255;var AE=Object.freeze({__proto__:null,DATA_REQUEST:zt,DATA_RESPONSE:kt,FRAGMENT_REQUEST:_E,FRAGMENT_RESPONSE:vE,IDENT_REQUEST:qt,IDENT_RESPONSE:$t,INVALID:nE,L2_CHECK_ADDRESS_REQUEST:aE,L2_CHECK_ADDRESS_RESPONSE:eE,L2_RM_ADDRESS_REQUEST:tE,L2_RM_ADDRESS_RESPONSE:EE,L2_SET_ADDRESS_REQUEST:Jt,L2_SET_ADDRESS_RESPONSE:rE});Xr(AE);Xr(ua);var TE=0;var RE=1;var iE=2;var oE=3;var OE=4;var sE=5;var fE=6;var NE=7;var uE=8;var CE=9;var PE=10;var SE=11;var DE=12;var IE=13;var ME=14;var lE=Object.freeze({__proto__:null,CASE_MODULE_OPEN:PE,CASE_OPEN:TE,CASE_TERMINAL_OPEN:CE,DEVICE_FAILURE:uE,ERROR_ACCESS:sE,MAGNETIC_ON:RE,PARAMETERS_UPDATE_LOCAL:oE,PARAMETERS_UPDATE_REMOTE:iE,PROTECTION_RESET_EM:IE,PROTECTION_RESET_MAGNETIC:ME,RESTART:OE,TARIFF_TABLE_GET:DE,TARIFF_TABLE_SET:SE,TIME_CORRECT:NE,TIME_SET:fE});Xr(lE);Xr(Vr);var dE=1;var gE=2;var cE=3;var hE=16;var LE=17;var pE=18;var VE=19;var mE=20;var yE=21;var UE=32;var FE=33;var HE=34;var GE=35;var XE=36;var WE=37;var YE=38;var xE=39;var BE=40;var wE=41;var KE=49;var bE=50;var ZE=51;var QE=52;var jE=53;var zE=54;var kE=55;var qE=56;var $E=57;var JE=58;var r_=59;var a_=64;var e_=65;var t_=66;var E_=67;var __=68;var v_=69;var n_=70;var A_=71;var T_=72;var R_=73;var i_=74;var o_=75;var O_=76;var s_=77;var f_=78;var N_=79;var u_=80;var C_=81;var P_=82;var S_=83;var D_=84;var I_=85;var M_=86;var l_=87;var d_=88;var g_=89;var c_=96;var h_=97;var L_=98;var p_=99;var V_=100;var m_=101;var y_=102;var U_=103;var F_=104;var H_=105;var G_=112;var X_=113;var W_=114;var Y_=115;var x_=116;var B_=117;var w_=118;var K_=119;var b_=120;var Z_=121;var Q_=122;var j_=123;var z_=124;var k_=125;var q_=144;var $_=145;var J_=147;var rv=148;var av=152;var ev=156;var tv=157;var Ev=158;var _v=159;var vv=160;var nv=161;var Av=162;var Tv=176;var Rv=177;var iv=178;var ov=179;var Ov=180;var sv=181;var fv=182;var Nv=183;var uv=185;var Cv=186;var Pv=224;var Sv=225;var Dv=226;var Iv=227;var Mv=228;var lv=229;var dv=230;var gv=231;var cv=232;var hv=Object.freeze({__proto__:null,ACCESS_ERROR:LE,ACCESS_LOCKED:hE,ACC_PARAMETERS_EXT_FAULT:Y_,ACC_PARAMETERS_FAULT:W_,BAD_TEST_EEPROM:F_,BAD_TEST_FRAM:H_,BATTERY_FAULT:S_,BATTERY_OK:P_,BIPOLAR_POWER_FAULT:Ov,BIPOLAR_POWER_OK:sv,BLOCK_TARIFF_FAULT:B_,CALC_PERIOD_FAULT:x_,CALIBRATION_FAULT:I_,CALIBRATION_FLAG_RESET:U_,CALIBRATION_FLAG_SET:y_,CALIBRATION_OK:D_,CALIBRATION_PARAMETERS_FAULT:w_,CASE_CLOSED:VE,CASE_MODULE_CLOSED:k_,CASE_MODULE_OPENED:z_,CASE_OPENED:pE,CASE_TERMINAL_BOX_CLOSED:j_,CASE_TERMINAL_BOX_OPENED:Q_,CHANGE_ACCESS_KEY0:UE,CHANGE_ACCESS_KEY1:FE,CHANGE_ACCESS_KEY2:HE,CHANGE_ACCESS_KEY3:GE,CHANGE_COR_TIME:wE,CHANGE_PARAMETERS_CHANNEL:uv,CHANGE_PARAMETERS_LOCAL:XE,CHANGE_PARAMETERS_REMOTE:WE,CHANGE_TARIFF_TABLE:bE,CHANGE_TARIFF_TABLE_2:av,CLOCK_FAULT:l_,CLOCK_OK:M_,CMD_RELAY_2_OFF:h_,CMD_RELAY_2_ON:c_,CMD_RELAY_OFF:BE,CMD_RELAY_ON:xE,CMD_SET_DATETIME:YE,COSF_MIN_OVER:r_,COSF_OK:JE,CROSS_ZERO_EN_T1:L_,CROSS_ZERO_EN_T2:p_,CROSS_ZERO_EN_T3:V_,CROSS_ZERO_EN_T4:m_,CROSS_ZERO_EXPORT_EN_T1:Ev,CROSS_ZERO_EXPORT_EN_T2:_v,CROSS_ZERO_EXPORT_EN_T3:vv,CROSS_ZERO_EXPORT_EN_T4:nv,CURRENT_UNEQUAL_FAULT:iv,CURRENT_UNEQUAL_OK:ov,EM_MAGNETIC_INFLUENCE_OFF:Rv,EM_MAGNETIC_INFLUENCE_ON:Tv,ENERGY_REGISTER_FAULT:dE,ENERGY_REGISTER_OVERFLOW:KE,F_MAX_OK:T_,F_MAX_OVER:R_,F_MIN_OK:i_,F_MIN_OVER:o_,I_MAX_OK:O_,I_MAX_OVER:s_,MAGNETIC_INFLUENCE_OFF:yE,MAGNETIC_INFLUENCE_ON:mE,OPERATOR_PARAMETERS_VALUES_FAULT:cE,POWER_A_OFF:d_,POWER_A_ON:g_,POWER_OVER_RELAY_OFF:tv,POWER_SALDO_OK:u_,POWER_SALDO_OVER:C_,P_MAX_A_MINUS_OK:gv,P_MAX_A_MINUS_OVER:cv,P_MAX_OK:f_,P_MAX_OVER:N_,RELAY_HARD_BAD_OFF:q_,RELAY_HARD_BAD_ON:J_,RELAY_HARD_OFF:rv,RELAY_HARD_ON:$_,RELAY_OFF:kE,RELAY_OFF_BAD_SALDO:Cv,RELAY_ON:zE,RESET_EM_FLAG:fv,RESET_MAGNET_FLAG:Nv,RESTART:qE,SALDO_EN_FAULT:b_,SALDO_PARAMETERS_FAULT:X_,SET_DEMAND_EN_10MIN:Iv,SET_DEMAND_EN_15MIN:Mv,SET_DEMAND_EN_1MIN:Pv,SET_DEMAND_EN_30MIN:lv,SET_DEMAND_EN_3MIN:Sv,SET_DEMAND_EN_5MIN:Dv,SET_DEMAND_EN_60MIN:dv,SET_NEW_SALDO:G_,SET_SALDO_PARAM:ev,SET_TARIFF_TABLE:ZE,SUMMER_TIME:QE,TIME_CORRECT:Z_,TIME_CORRECT_NEW:Av,T_MAX_OK:__,T_MAX_OVER:v_,T_MIN_OK:n_,T_MIN_OVER:A_,VENDOR_PAR_FAULT:gE,V_MAX_OK:a_,V_MAX_OVER:e_,V_MIN_OK:t_,V_MIN_OVER:E_,WATCHDOG_RESTART:$E,WINTER_SUMMER_FAULT:K_,WINTER_TIME:jE});Xr(hv);var Lv=1;var pv=2;var Vv=3;var mv=4;var yv=5;var Uv=6;var Fv=7;var Hv=8;var Gv=9;var Xv=10;var Wv=11;var Yv=12;var xv=13;var Bv=14;var wv=15;var Kv=16;var bv=17;var Zv=18;var Qv=19;var jv=20;var zv=21;var kv=22;var qv=23;var $v=24;var Jv=25;var rn=26;var an=28;var en=30;var tn=31;var En=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:mv,ACTIVE_ENERGY_T2:yv,ACTIVE_ENERGY_T3:Uv,ACTIVE_ENERGY_T4:Fv,ACTIVE_POWER_IN_NEUTRAL:Gv,ACTIVE_POWER_PER_PHASE:Hv,BATTERY_VOLTAGE:kv,CURRENT_BALANCE:en,CURRENT_IN_NEUTRAL:Wv,CURRENT_IN_PHASE:Xv,DATE_MONTH_YEAR:Bv,EXPORTED_ACTIVE_ENERGY_T1:Kv,EXPORTED_ACTIVE_ENERGY_T2:bv,EXPORTED_ACTIVE_ENERGY_T3:Zv,EXPORTED_ACTIVE_ENERGY_T4:Qv,HOUR_MINUTE_SECOND:xv,MAGNET_INDUCTION:an,OPTOPORT_SPEED:tn,POWER_FACTOR_PHASE_A:jv,POWER_FACTOR_PHASE_B:zv,POWER_THRESHOLD_T1:qv,POWER_THRESHOLD_T2:$v,POWER_THRESHOLD_T3:Jv,POWER_THRESHOLD_T4:rn,SET_ALL_SEGMENT_DISPLAY:Lv,SOFTWARE_VERSION:pv,TOTAL_ACTIVE_ENERGY:Vv,TOTAL_EXPORTED_ACTIVE_ENERGY:wv,VOLTAGE:Yv});Xr(En);var _n=2400;var vn=9600;var nn={rs485orTwi:{0:vn,2:_n,4:vn},optoport:{0:_n,2:_n,4:vn}};({rs485orTwi:Xr(nn.rs485orTwi),optoport:Xr(nn.optoport)});var An=4;var Tn=1;var Rn=4;var on=3;var On=48;var sn=50;var fn=3+On*2;var Nn=4+sn*2;var un={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};function Cn(r,a,e){var t=1+An;var E=a;e.forEach(function(r,a){E=ht(E,1,a+t,Number(!!r))});r.setUint8(E)}function Pn(r,a){var e=a.tariff,t=a.energy;if(e!==undefined&&t!==undefined){r.setUint16(e<<14|t&16383)}else{r.setUint16(65535)}}var Sn=function(r,a){var e=a.manufacturer,t=a.type,E=a.year,_=a.serial;r.setBytes(O(e));r.setUint8(t);r.setUint8(E);r.setBytes(O(_))};var Dn=function(r,a){r.setUint8(a.isSummerTime?1:0);r.setUint8(a.seconds);r.setUint8(a.minutes);r.setUint8(a.hours);r.setUint8(a.day||0);r.setUint8(a.date);r.setUint8(a.month);r.setUint8(a.year)};var In=function(r,a){r.setBytes(jt(a))};var Mn=function(r,a){var e=a.energyType,t=a.energies;if(e){Cn(r,e,t)}t.forEach(function(a){if(a!==null){r.setInt32(a)}})};var ln=function(r,a){r.setUint8(a.year);r.setUint8(a.month);r.setUint8(a.date)};var dn=function(r,a){a.forEach(function(a){return Pn(r,a)})};var gn=function(r,a){r.setUint16(gt(un,a))};var cn=function(r){if(r?.energyType){var a=r.energies.filter(function(r){return r!==null}).length;return on+Tn+a*Rn}return on+Rn*An};var hn=P;var Ln=2;var pn=function(r){var a=new dt(Ln,true);gn(a,r);return N(hn,a.data)};var Vn=S;var mn=function(r){var a=new dt(cn(r),false);ln(a,r.date);Mn(a,r);return N(Vn,a.data)};var yn=D;var Un=9;var Fn=function(r){var a=new dt(Un,false);In(a,r);return N(yn,a.data)};var Hn=I;var Gn=8;var Xn=function(r){var a=new dt(Gn,false);Sn(a,r);return N(Hn,a.data)};var Wn=M;var Yn=8;var xn=function(r){var a=new dt(Yn,false);Dn(a,r);return N(Wn,a.data)};var Bn=l;var wn=function(){return N(Bn)};var Kn=16;var bn=c;var Zn=function(r){var a=Kn;if(r?.energyType){var e=r.energies.filter(function(r){return r!==null}).length;a=Tn+e*Rn}var t=new dt(a,false);Mn(t,r);return N(bn,t.data)};var Qn=y;var jn=function(r){var a=new dt(r.periods.length>On?Nn:fn,false);ln(a,r.date);dn(a,r.periods);if(r.dstHour){a.setUint8(r.dstHour)}return N(Qn,a.data)};var zn=1;var kn=2;({wh:t(t({},zn,{gType:"1.8",rType:"1.8"}),kn,{gType:"2.8"}),vari:t(t({},zn,{gType:"5.8",rType:"3.8"}),kn,{gType:"6.8"}),vare:t(t({},zn,{gType:"8.8",rType:"4.8"}),kn,{gType:"7.8"})});Xr(ke);var qn=1;var $n=2;var Jn=3;var rA=4;var aA=17;var eA=18;var tA=19;var EA=20;var _A=21;var vA=22;var nA=23;var AA=32;var TA=33;var RA=34;var iA=35;var oA=36;var OA=37;var sA=38;var fA=39;var NA=40;var uA=49;var CA=50;var PA=51;var SA=52;var DA=53;var IA=54;var MA=55;var lA=56;var dA=57;var gA=64;var cA=65;var hA=66;var LA=67;var pA=68;var VA=69;var mA=70;var yA=71;var UA=72;var FA=73;var HA=74;var GA=75;var XA=76;var WA=77;var YA=78;var xA=79;var BA=80;var wA=81;var KA=82;var bA=83;var ZA=84;var QA=85;var jA=86;var zA=87;var kA=88;var qA=89;var $A=90;var JA=91;var rT=92;var aT=93;var eT=94;var tT=95;var ET=96;var _T=97;var vT=98;var nT=99;var AT=100;var TT=101;var RT=102;var iT=103;var oT=104;var OT=105;var sT=106;var fT=107;var NT=108;var uT=109;var CT=110;var PT=111;var ST=112;var DT=113;var IT=114;var MT=115;var lT=116;var dT=117;var gT=118;var cT=119;var hT=120;var LT=121;var pT=122;var VT=123;var mT=124;var yT=125;var UT=126;var FT=127;var HT=128;var GT=129;var XT=130;var WT=131;var YT=132;var xT=133;var BT=134;var wT=135;var KT=136;var bT=137;var ZT=138;var QT=139;var jT=140;var zT=141;var kT=142;var qT=143;var $T=144;var JT=145;var rR=147;var aR=148;var eR=149;var tR=150;var ER=151;var _R=152;var vR=153;var nR=154;var AR=155;var TR=156;var RR=157;var iR=158;var oR=159;var OR=160;var sR=161;var fR=162;var NR=163;var uR=164;var CR=165;var PR=166;var SR=167;var DR=168;var IR=169;var MR=170;var lR=171;var dR=172;var gR=173;var cR=174;var hR=175;var LR=176;var pR=177;var VR=178;var mR=179;var yR=186;var UR=224;var FR=225;var HR=226;var GR=227;var XR=228;var WR=229;var YR=230;var xR=231;var BR=232;var wR=Object.freeze({__proto__:null,ACCESS_ERROR:tA,ACCESS_LOCKED:aA,ACCESS_UNLOCKED:eA,ACCUMULATION_PARAMETERS_EXT_FAULT:BT,ACCUMULATION_PARAMETERS_FAULT:xT,BAD_TEST_EEPROM:GT,BAD_TEST_FRAM:XT,BATTERY_FAULT:OT,BATTERY_OK:oT,BLOCK_TARIFF_FAULT:KT,CALCULATION_PERIOD_FAULT:wT,CALIBRATION_FAULT:fT,CALIBRATION_FLAG_RESET:HT,CALIBRATION_FLAG_SET:FT,CALIBRATION_OK:sT,CALIBRATION_PARAMETERS_FAULT:bT,CASE_CLOSED:_A,CASE_MODULE_CLOSED:AR,CASE_MODULE_OPENED:nR,CASE_OPENED:EA,CASE_TERMINAL_BOX_CLOSED:ER,CASE_TERMINAL_BOX_OPENED:tR,CHANGE_ACCESS_KEY0:AA,CHANGE_ACCESS_KEY1:TA,CHANGE_ACCESS_KEY2:RA,CHANGE_ACCESS_KEY3:iA,CHANGE_COR_TIME:ST,CHANGE_PARAMETERS_LOCAL:oA,CHANGE_PARAMETERS_REMOTE:OA,CHANGE_PARAMETER_CHANNEL1:iR,CHANGE_PARAMETER_CHANNEL2:oR,CHANGE_PARAMETER_CHANNEL3:OR,CHANGE_PARAMETER_CHANNEL4:sR,CHANGE_PARAMETER_CHANNEL5:fR,CHANGE_PARAMETER_CHANNEL6:NR,CHANGE_TARIFF_TABLE:CA,CHANGE_TARIFF_TABLE_2:_R,CHANGE_TARIFF_TABLE_3:vR,CLOCK_FAULT:_T,CLOCK_OK:ET,CMD_RELAY_2_OFF:IT,CMD_RELAY_2_ON:DT,CMD_RELAY_OFF:NA,CMD_RELAY_ON:fA,CMD_SET_DATETIME:sA,COEFFICIENT_TRANSFORMATION_CHANGE:qT,CROSS_ZERO_EN_T1:MT,CROSS_ZERO_EN_T2:lT,CROSS_ZERO_EN_T3:dT,CROSS_ZERO_EN_T4:gT,CROSS_ZERO_EXPORT_EN_T1:uR,CROSS_ZERO_EXPORT_EN_T2:CR,CROSS_ZERO_EXPORT_EN_T3:PR,CROSS_ZERO_EXPORT_EN_T4:SR,CROSS_ZERO_EXPORT_VARE1:dR,CROSS_ZERO_EXPORT_VARE2:gR,CROSS_ZERO_EXPORT_VARE3:cR,CROSS_ZERO_EXPORT_VARE4:hR,CROSS_ZERO_EXPORT_VARI1:DR,CROSS_ZERO_EXPORT_VARI2:IR,CROSS_ZERO_EXPORT_VARI3:MR,CROSS_ZERO_EXPORT_VARI4:lR,CROSS_ZERO_VARE_T1:VT,CROSS_ZERO_VARE_T2:mT,CROSS_ZERO_VARE_T3:yT,CROSS_ZERO_VARE_T4:UT,CROSS_ZERO_VARI_T1:cT,CROSS_ZERO_VARI_T2:hT,CROSS_ZERO_VARI_T3:LT,CROSS_ZERO_VARI_T4:pT,EM_MAGNETIC_INFLUENCE_OFF:pR,EM_MAGNETIC_INFLUENCE_ON:LR,ENERGY_REGISTER_OVERFLOW:uA,ENERGY_T1_FAULT:qn,ENERGY_T2_FAULT:$n,ENERGY_T3_FAULT:Jn,ENERGY_T4_FAULT:rA,F_MAX_OK:XA,F_MAX_OVER:WA,F_MIN_OK:YA,F_MIN_UNDER:xA,IA_MAX_OK:ZA,IA_MAX_OVER:QA,IB_MAX_OK:jA,IB_MAX_OVER:zA,IC_MAX_OK:kA,IC_MAX_OVER:qA,IDIFF_OK:eT,IDIFF_OVER:tT,MAGNETIC_INFLUENCE_OFF:nA,MAGNETIC_INFLUENCE_ON:vA,METER_TROUBLE:eR,OPERATOR_PARAMETERS_EXT_VALUES_FAULT:jT,OPERATOR_PARAMETERS_VALUES_FAULT:QT,O_PARAMETERS_FAULT:PT,O_PARAMETERS_OK:CT,PA_MAX_OK:$A,PA_MAX_OVER:JA,POWER_A_OFF:iT,POWER_A_ON:RT,POWER_B_OFF:TT,POWER_B_ON:AT,POWER_C_OFF:nT,POWER_C_ON:vT,POWER_OVER_RELAY_OFF:RR,PV_MAX_OK:rT,PV_MAX_OVER:aT,P_MAX_A_MINUS_OK:xR,P_MAX_A_MINUS_OVER:BR,RELAY_HARD_BAD_OFF:$T,RELAY_HARD_BAD_ON:rR,RELAY_HARD_OFF:aR,RELAY_HARD_ON:JT,RELAY_OFF:MA,RELAY_OFF_BAD_SALDO:yR,RELAY_ON:IA,RESET_EM_FLAG:VR,RESET_MAGNETIC_FLAG:mR,RESTART:lA,SALDO_ENERGY_FAULT:zT,SALDO_PARAMETERS_FAULT:YT,SET_DEMAND_EN_10_MIN:GR,SET_DEMAND_EN_15_MIN:XR,SET_DEMAND_EN_1_MIN:UR,SET_DEMAND_EN_30_MIN:WR,SET_DEMAND_EN_3_MIN:FR,SET_DEMAND_EN_5_MIN:HR,SET_DEMAND_EN_60_MIN:YR,SET_NEW_SALDO:WT,SET_SALDO_PARAM:TR,SET_TARIFF_TABLE:PA,SUMMER_TIME:SA,TIME_CORRECT:kT,T_MAX_OK:BA,T_MAX_OVER:wA,T_MIN_OK:KA,T_MIN_UNDER:bA,VA_MAX_OK:gA,VA_MAX_OVER:cA,VA_MIN_OK:hA,VA_MIN_UNDER:LA,VB_MAX_OK:pA,VB_MAX_OVER:VA,VB_MIN_OK:mA,VB_MIN_UNDER:yA,VC_MAX_OK:UA,VC_MAX_OVER:FA,VC_MIN_OK:HA,VC_MIN_UNDER:GA,V_PARAMETERS_FAULT:uT,V_PARAMETERS_OK:NT,WATCHDOG_RESTART:dA,WINTER_SUMMER_FAULT:ZT,WINTER_TIME:DA});Xr(wR);var KR=1;var bR=2;var ZR=3;var QR=4;var jR=5;var zR=6;var kR=7;var qR=8;var $R=9;var JR=10;var ri=11;var ai=12;var ei=13;var ti=14;var Ei=15;var _i=16;var vi=17;var ni=18;var Ai=19;var Ti=20;var Ri=21;var ii=22;var oi=23;var Oi=24;var si=25;var fi=26;var Ni=27;var ui=28;var Ci=29;var Pi=30;var Si=31;var Di=32;var Ii=33;var Mi=34;var li=35;var di=36;var gi=37;var ci=38;var hi=39;var Li=40;var pi=41;var Vi=42;var mi=43;var yi=44;var Ui=45;var Fi=46;var Hi=47;var Gi=48;var Xi=49;var Wi=50;var Yi=51;var xi=52;var Bi=53;var wi=54;var Ki=55;var bi=56;var Zi=57;var Qi=58;var ji=59;var zi=60;var ki=61;var qi=62;var $i=63;var Ji=64;var ro=65;var ao=66;var eo=67;var to=68;var Eo=69;var _o=70;var vo=71;var no=72;var Ao=73;var To=74;var Ro=75;var io=76;var oo=77;var Oo=78;var so=79;var fo=80;var No=81;var uo=82;var Co=83;var Po=84;var So=85;var Do=86;var Io=87;var Mo=88;var lo=89;var go=90;var co=91;var ho=92;var Lo=93;var po=94;var Vo=95;var mo=96;var yo=97;var Uo=98;var Fo=99;var Ho=100;var Go=101;var Xo=102;var Wo=103;var Yo=104;var xo=105;var Bo=106;var wo=107;var Ko=108;var bo=109;var Zo=110;var Qo=111;var jo=112;var zo=113;var ko=114;var qo=115;var $o=116;var Jo=117;var rO=118;var aO=119;var eO=120;var tO=121;var EO=122;var _O=123;var vO=124;var nO=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:QR,ACTIVE_ENERGY_T2:jR,ACTIVE_ENERGY_T3:zR,ACTIVE_ENERGY_T4:kR,ACTIVE_POWER_PHASE_A:mi,ACTIVE_POWER_PHASE_B:yi,ACTIVE_POWER_PHASE_C:Ui,APPARENT_POWER_QMINUS_PHASE_A:$i,APPARENT_POWER_QMINUS_PHASE_B:Ji,APPARENT_POWER_QMINUS_PHASE_C:ro,APPARENT_POWER_QPLUS_PHASE_A:ji,APPARENT_POWER_QPLUS_PHASE_B:zi,APPARENT_POWER_QPLUS_PHASE_C:ki,BATTERY_VOLTAGE:Li,CURRENT_BALANCE:rO,CURRENT_IN_NEUTRAL:di,CURRENT_IN_PHASE_A:Ii,CURRENT_IN_PHASE_B:Mi,CURRENT_IN_PHASE_C:li,CURRENT_TRANSFORMATION_RATIO:$o,DATE_MONTH_YEAR:qo,EXPORTED_ACTIVE_ENERGY_T1:Ai,EXPORTED_ACTIVE_ENERGY_T2:Ti,EXPORTED_ACTIVE_ENERGY_T3:Ri,EXPORTED_ACTIVE_ENERGY_T4:ii,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:Ci,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:Pi,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:Si,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:Di,EXPORTED_REACTIVE_ENERGY_T1:Oi,EXPORTED_REACTIVE_ENERGY_T2:si,EXPORTED_REACTIVE_ENERGY_T3:fi,EXPORTED_REACTIVE_ENERGY_T4:Ni,HOUR_MINUTE_SECOND:ko,MAGNET_INDUCTION:vO,MAX_ACTIVE_POWER_DAY_T1:ao,MAX_ACTIVE_POWER_DAY_T2:eo,MAX_ACTIVE_POWER_DAY_T3:to,MAX_ACTIVE_POWER_DAY_T4:Eo,MAX_ACTIVE_POWER_MONTH_T1:_o,MAX_ACTIVE_POWER_MONTH_T2:vo,MAX_ACTIVE_POWER_MONTH_T3:no,MAX_ACTIVE_POWER_MONTH_T4:Ao,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:go,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:co,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:ho,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:Lo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:po,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:Vo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:mo,MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:yo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T1:Bo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T2:wo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T3:Ko,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_DAY_T4:bo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T1:Zo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T2:Qo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T3:jo,MAX_EXPORTED_NEGATIVE_REACTIVE_POWER_MONTH_T4:zo,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:Uo,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:Fo,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:Ho,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:Go,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:Xo,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:Wo,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:Yo,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:xo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:uo,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:Co,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:Po,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:So,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:Do,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:Io,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:Mo,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:lo,MAX_REACTIVE_POWER_DAY_T1:To,MAX_REACTIVE_POWER_DAY_T2:Ro,MAX_REACTIVE_POWER_DAY_T3:io,MAX_REACTIVE_POWER_DAY_T4:oo,MAX_REACTIVE_POWER_MONTH_T1:Oo,MAX_REACTIVE_POWER_MONTH_T2:so,MAX_REACTIVE_POWER_MONTH_T3:fo,MAX_REACTIVE_POWER_MONTH_T4:No,NEGATIVE_REACTIVE_ENERGY_T1:ti,NEGATIVE_REACTIVE_ENERGY_T2:Ei,NEGATIVE_REACTIVE_ENERGY_T3:_i,NEGATIVE_REACTIVE_ENERGY_T4:vi,OPTOPORT_SPEED:_O,POWER_FACTOR_PHASE_A:Ki,POWER_FACTOR_PHASE_B:bi,POWER_FACTOR_PHASE_C:Zi,POWER_THRESHOLD_T1:aO,POWER_THRESHOLD_T2:eO,POWER_THRESHOLD_T3:tO,POWER_THRESHOLD_T4:EO,REACTIVE_ENERGY_T1:$R,REACTIVE_ENERGY_T2:JR,REACTIVE_ENERGY_T3:ri,REACTIVE_ENERGY_T4:ai,REACTIVE_POWER_QMINUS_PHASE_A:Yi,REACTIVE_POWER_QMINUS_PHASE_B:xi,REACTIVE_POWER_QMINUS_PHASE_C:Bi,REACTIVE_POWER_QPLUS_PHASE_A:Hi,REACTIVE_POWER_QPLUS_PHASE_B:Gi,REACTIVE_POWER_QPLUS_PHASE_C:Xi,SET_ALL_SEGMENT_DISPLAY:KR,SOFTWARE_VERSION:bR,SUPPLY_FREQUENCY:pi,TOTAL_ACTIVE_ENERGY:ZR,TOTAL_ACTIVE_POWER:Vi,TOTAL_APPARENT_POWER_QMINUS:qi,TOTAL_APPARENT_POWER_QPLUS:Qi,TOTAL_EXPORTED_ACTIVE_ENERGY:ni,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:ui,TOTAL_EXPORTED_REACTIVE_ENERGY:oi,TOTAL_NEGATIVE_REACTIVE_ENERGY:ei,TOTAL_POWER_FACTOR:wi,TOTAL_REACTIVE_ENERGY:qR,TOTAL_REACTIVE_POWER_QMINUS:Wi,TOTAL_REACTIVE_POWER_QPLUS:Fi,VOLTAGE_IN_PHASE_A:gi,VOLTAGE_IN_PHASE_B:ci,VOLTAGE_IN_PHASE_C:hi,VOLTAGE_TRANSFORMATION_RATIO:Jo});Xr(nO);var AO=2400;var TO=9600;var RO={rs485orTwi:{0:TO,2:AO,4:TO},optoport:{0:TO,2:AO,4:TO}};({rs485orTwi:Xr(RO.rs485orTwi),optoport:Xr(RO.optoport)});var iO=1;var oO=4;function OO(r,a){var e=a.wh,t=a.vari,E=a.vare;var _=1+oO;var v=r;for(var n=0;n<An;n++){v=ht(v,1,n+_,Number(!!e[n]&&!!t[n]&&!!E[n]))}return v}var sO=function(r,a){var e=a.energyType,t=a.energies;if(e){var E=OO(e,t);var _=E>>oO;r.setUint8(E);for(var v=0;v<An;v++){var n=!!ct(_,1,v+1);if(n){r.setInt32(t.wh[v]);r.setInt32(t.vari[v]);r.setInt32(t.vare[v])}}return}for(var A=0;A<An;A++){r.setInt32(t.wh[A]);r.setInt32(t.vari[A]);r.setInt32(t.vare[A])}};var fO=function(r,a){var e=a.date.year<<1|a.date.month>>3&1;var t=a.date.month<<5&224|a.date.date&31;r.setUint8(e);r.setUint8(t);r.setUint8(a.demandType);r.setUint16(a.firstIndex);r.setUint8(a.count);r.setUint8(a.period)};var NO=function(r){var a=r.energies,e=a.wh,t=a.vari,E=a.vare;if(r?.energyType){var _=[].concat(T(e),T(t),T(E)).filter(function(r){return r!==null}).length;return on+iO+_*Rn}return on+Rn*An};var uO=Qa;var CO=function(r){var a=new dt(NO(r),false);ln(a,r.date);sO(a,r);return N(uO,a.data)};var PO=x;var SO=function(r){var a=r.version.split("").map(function(r){return r.charCodeAt(0)});return N(PO,a)};var DO=me;var IO=function(r){var a=r.event,e=r.index,t=r.date,E=r.count;return N(DO,[a,e,t.year,t.month,t.date,t.hours,t.minutes,t.seconds,E])};var MO=7;var lO=je;var dO=65535;var gO=function(r){var a=new dt(MO+r.count*2,false);fO(a,r);r.demands.forEach(function(r){return a.setUint16(r===null?dO:r)});return N(lO,a.data)};var cO=145;var hO=30;var LO=function(r){if(r[0]!==hO){return{}}var a=r[1];var e=r[3];var t=r.slice(4,a+2);if(e===cO){return t}return null};var pO;var VO=(pO={},t(t(t(t(t(t(t(t(t(t(pO,hn,pn),Vn,mn),yn,Fn),Hn,Xn),Wn,xn),Bn,wn),bn,Zn),Qn,jn),uO,CO),PO,SO),t(t(pO,DO,IO),lO,gO));fromBytes=Va(VO,at);getDataSegment=LO})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
