// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function a(t,e,r){return(e=A(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,i,s,o=[],E=!0,_=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;E=!1}else for(;!(E=(a=i.call(r)).done)&&(o.push(a.value),o.length!==e);E=!0);}catch(t){_=!0,n=t}finally{try{if(!E&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(_)throw n}}return o}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(t,r){return e(t)||i(t,r)||u(t,r)||s()}function _(t){return e(t)||n(t)||u(t)||s()}function v(t){return r(t)||n(t)||u(t)||o()}function h(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function A(t){var e=h(t,"string");return"symbol"==typeof e?e:e+""}function u(e,r){if(e){if("string"==typeof e)return t(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):void 0}}var f=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map((function(t){return t.padStart(2,"0")})).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var a=new Array(r);for(var n=0;n<r;n++){a[n]=parseInt(e.substring(n*2,n*2+2),16)}return a};var g={separator:" ",prefix:""};var T=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},g,e),a=r.separator,n=r.prefix;return t.map((function(t){return"".concat(n).concat(t.toString(16).padStart(2,"0"))})).join(a)};var R=0;var O=1;var l=3;var d=4;var c=5;var U=7;var p=8;var P=9;var I=13;var M=15;var m=16;var N=17;var S=18;var y=19;var D=20;var C=21;var L=22;var F=23;var V=24;var x=25;var w=28;var Y=30;var H=31;var W=40;var G=41;var X=42;var B=44;var b=45;var K=46;var z=47;var Z=49;var j=50;var Q=51;var k=52;var q=53;var $=54;var J=57;var tt=58;var et=59;var rt=60;var at=61;var nt=62;var it=65;var st=70;var ot=74;var Et=75;var _t=79;var vt=80;var ht=82;var At=83;var ut=88;var ft=89;var gt=91;var Tt=92;var Rt=93;var Ot=94;var lt=100;var dt=109;var ct=111;var Ut=112;var pt=113;var Pt=114;var It=118;var Mt=122;var mt=Object.freeze({__proto__:null,activateRatePlan:y,getBuildVersion:Ut,getCorrectTime:nt,getCriticalEvent:it,getCurrentStatusMeter:J,getCurrentValues:I,getDateTime:U,getDayDemand:L,getDayDemandExport:_t,getDayMaxDemand:Z,getDayMaxDemandExport:ut,getDayMaxDemandPrevious:ot,getDayProfile:et,getDemand:It,getDeviceId:c,getDeviceType:d,getDisplayParam:Ot,getEnergy:M,getEnergyDayPrevious:l,getEnergyExport:gt,getEnergyExportDayPrevious:vt,getEventStatus:O,getEvents:Q,getEventsCounters:k,getExtendedCurrentValues:tt,getExtendedCurrentValues2:b,getHalfHourDemand:C,getHalfHourDemandExport:At,getHalfHourDemandPrevious:Et,getHalfhoursEnergies:ct,getMagneticFieldThreshold:dt,getMeterInfo:Mt,getMonthDemand:F,getMonthDemandExport:ht,getMonthMaxDemand:j,getMonthMaxDemandExport:ft,getOperatorParameters:Y,getOperatorParametersExtended3:pt,getRatePlanInfo:B,getSaldo:G,getSaldoParameters:K,getSeasonProfile:rt,getSpecialDay:at,getVersion:W,prepareRatePlan:D,resetPowerMaxDay:q,resetPowerMaxMonth:$,runTariffPlan:st,setAccessKey:P,setCorrectDateTime:Tt,setCorrectTime:w,setDateTime:p,setDayProfile:m,setDisplayParam:Rt,setOperatorParameters:H,setOperatorParametersExtended3:Pt,setSaldo:X,setSaldoParameters:z,setSeasonProfile:N,setSpecialDay:S,setSpecialOperation:lt,turnRelayOff:x,turnRelayOn:V});var Nt=120;var St=121;var yt=254;var Dt=Object.freeze({__proto__:null,activateRatePlan:y,errorResponse:yt,getBuildVersion:Ut,getCorrectTime:nt,getCriticalEvent:it,getCurrentStatusMeter:J,getCurrentValues:I,getDateTime:U,getDayDemand:L,getDayDemandExport:_t,getDayEnergies:Nt,getDayMaxDemand:Z,getDayMaxDemandExport:ut,getDayMaxDemandPrevious:ot,getDayMaxPower:St,getDayProfile:et,getDemand:It,getDeviceId:c,getDeviceType:d,getDisplayParam:Ot,getEnergy:M,getEnergyDayPrevious:l,getEnergyExport:gt,getEnergyExportDayPrevious:vt,getEventStatus:O,getEvents:Q,getEventsCounters:k,getExtendedCurrentValues:tt,getExtendedCurrentValues2:b,getHalfHourDemand:C,getHalfHourDemandExport:At,getHalfHourDemandPrevious:Et,getHalfhoursEnergies:ct,getMagneticFieldThreshold:dt,getMeterInfo:Mt,getMonthDemand:F,getMonthDemandExport:ht,getMonthMaxDemand:j,getMonthMaxDemandExport:ft,getOperatorParameters:Y,getOperatorParametersExtended3:pt,getRatePlanInfo:B,getSaldo:G,getSaldoParameters:K,getSeasonProfile:rt,getSpecialDay:at,getVersion:W,prepareRatePlan:D,resetPowerMaxDay:q,resetPowerMaxMonth:$,runTariffPlan:st,setAccessKey:P,setCorrectDateTime:Tt,setCorrectTime:w,setDateTime:p,setDayProfile:m,setDisplayParam:Rt,setOperatorParameters:H,setOperatorParametersExtended3:Pt,setSaldo:X,setSaldoParameters:z,setSeasonProfile:N,setSpecialDay:S,setSpecialOperation:lt,turnRelayOff:x,turnRelayOn:V});var Ct=function(t){var e={};for(var r in t){var a=t[r];e[a]=r}return e};Ct(Dt);var Lt=y;var Ft=0;var Vt=function(t){if(t.length!==Ft){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var xt=1;var wt=2;var Yt=3;var Ht=4;var Wt=Math.log,Gt=Math.pow,Xt=Math.LN2;var Bt=function(t,e,r,a,n){var i,s,o=n*8-a-1,E=(1<<o)-1,_=E>>1,v=-7,h=r?n-1:0,A=r?-1:1,u=t[e+h];h+=A;i=u&(1<<-v)-1;u>>=-v;v+=o;for(;v>0;i=i*256+t[e+h],h+=A,v-=8);s=i&(1<<-v)-1;i>>=-v;v+=a;for(;v>0;s=s*256+t[e+h],h+=A,v-=8);if(i===0){i=1-_}else if(i===E){return s?NaN:u?-Infinity:Infinity}else{s=s+Gt(2,a);i=i-_}return(u?-1:1)*s*Gt(2,i-a)};var bt=function(t,e,r,a,n,i){var s,o,E,_=i*8-n-1,v=(1<<_)-1,h=v>>1,A=n===23?Gt(2,-24)-Gt(2,-77):0,u=a?0:i-1,f=a?1:-1,g=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){o=r!==r?1:0;s=v}else{s=Wt(r)/Xt|0;if(r*(E=Gt(2,-s))<1){s--;E*=2}if(s+h>=1){r+=A/E}else{r+=A*Gt(2,1-h)}if(r*E>=2){s++;E/=2}if(s+h>=v){o=0;s=v}else if(s+h>=1){o=(r*E-1)*Gt(2,n);s=s+h}else{o=r*Gt(2,h-1)*Gt(2,n);s=0}}for(;n>=8;t[e+u]=o&255,u+=f,o/=256,n-=8);s=s<<n|o;_+=n;for(;_>0;t[e+u]=s&255,u+=f,s/=256,_-=8);t[e+u-f]|=g*128};var Kt=[1,0];var zt=[2,1,0];var Zt=[3,2,1,0];var jt=[0,1];var Qt=[0,1,2];var kt=[0,1,2,3];var qt=function(t,e){return t[e]};var $t=function(t,e,r){var a=r?jt:Kt;var n=t[e+a[0]];var i=t[e+a[1]]<<8;return n|i};var Jt=function(t,e,r){var a=r?Qt:zt;var n=t[e+a[0]];var i=t[e+a[1]]<<8;var s=t[e+a[2]]<<16;return n|i|s};var te=function(t,e,r){var a=r?kt:Zt;var n=t[e+a[3]]*16777216;var i=t[e+a[2]]*65536;var s=t[e+a[1]]*256;var o=t[e+a[0]];return n+i+s+o};var ee=function(t,e,r){t[e]=r&255};var re=function(t,e,r,a){var n=a?jt:Kt;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255};var ae=function(t,e,r,a){var n=a?Qt:zt;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255};var ne=function(t,e,r,a){var n=a?kt:Zt;t[e+n[0]]=r&255;t[e+n[1]]=r>>>8&255;t[e+n[2]]=r>>>16&255;t[e+n[3]]=r>>>24&255};function ie(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}ie.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){ee(this.data,this.offset,t<0?t|256:t);this.offset+=xt},getInt8:function(){var t=qt(this.data,this.offset);this.offset+=xt;return t&128?t^-256:t},setUint8:function(t){ee(this.data,this.offset,t);this.offset+=xt},getUint8:function(){var t=qt(this.data,this.offset);this.offset+=xt;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;re(this.data,this.offset,t<0?t|65536:t,e);this.offset+=wt},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=$t(this.data,this.offset,t);this.offset+=wt;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;re(this.data,this.offset,t,e);this.offset+=wt},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=$t(this.data,this.offset,t);this.offset+=wt;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ae(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=Yt},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Jt(this.data,this.offset,t);this.offset+=Yt;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ae(this.data,this.offset,t,e);this.offset+=Yt},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Jt(this.data,this.offset,t);this.offset+=Yt;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ne(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=Ht},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=te(this.data,this.offset,t);this.offset+=Ht;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ne(this.data,this.offset,t,e);this.offset+=Ht},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=te(this.data,this.offset,t);this.offset+=Ht;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;bt(this.data,this.offset,t,e,23,4);this.offset+=Ht},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Bt(this.data,this.offset,t,23,4);this.offset+=Ht;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(v(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(ie.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var se=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var a in e){if(a in t&&e[a]){r|=t[a]}}return r};var oe=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var a in t){r[a]=(e&t[a])!==0}return r};var Ee=function(t,e,r){return(1<<e)-1&t>>r-1};var _e=function(t,e,r,a){var n=(1<<e)-1<<r-1;var i=a;var s=t;s&=~n;i<<=r-1;s|=i;return s};var ve="x";var he=[".","1","3","R","M"];var Ae=[".","A","G","R","T","D"];var ue=[".","0","1","2","3","4","5"];var fe=[".","A","B","C","D","E","F"];var ge=[".","A","B","C","D","E","F","H","K","G"];var Te=[".","1","2","3","4"];var Re=[".","L","M","Z","K"];var Oe=[".","0","1","2","3","4","5","6","7","8","9"];var le=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var de=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var ce=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Ue=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var pe=function(t){return[t>>4,t&15]};var Pe=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var a=pe(t),n=E(a,2),i=n[0],s=n[1];e[r*2]=i;e[r*2+1]=s}));return e};var Ie=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return f(e.join(""))};var Me=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(he[t[0]]??ve);e.push(Ae[t[1]]??ve);e.push(ue[t[2]]??ve);e.push(ue[t[3]]??ve);e.push(".");e.push(fe[t[4]]??ve);e.push(ge[t[5]]??ve);e.push(".");e.push(Te[t[6]]??ve);e.push(Re[t[7]]??ve);var r=t[8];e.push(Oe[t[9]]??ve);e.push("-");var a;if(t.length<14||t[12]===0&&t[13]===0){e.push(le[t[10]]??ve);a=11}else if(t[13]===0){e.push(le[t[10]]??ve);e.push(le[t[11]]??ve);a=12}else{e.push(le[t[10]]??ve);e.push(le[t[11]]??ve);e.push(le[t[12]]??ve);a=13}var n=t[a];if(n&&n!==0){e.push(ce[n]??ve)}return{type:e.join(""),revision:r,meterType:0}};var me=function(t,e,r){var a=[];if(t.length<11){throw new Error("Wrong format")}a.push(he.indexOf(t[0]));a.push(Ae.indexOf(t[1]));a.push(ue.indexOf(t[2]));a.push(ue.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}a.push(fe.indexOf(t[5]));a.push(ge.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}a.push(Te.indexOf(t[8]));a.push(Re.indexOf(t[9]));a.push(r??0);a.push(Oe.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var n=t.length>13?t.length-1:t.length;for(var i=12;i<n;i++){a.push(le.indexOf(t[i]))}if(n<t.length){a.push(ce.indexOf(t[n]))}var s=Ie(a);var o=new Array(9).fill(0);o[0]=0;for(var E=0;E<s.length;E++){o[E+(s.length<8?1:0)]=s[E]}return o};var Ne=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(he[t[0]]??ve);e.push(Ae[t[1]]??ve);e.push(r);for(var a=2;a<t.length;a++){if(t[a]!==0){e.push(de[t[a]]??ve)}}return{type:e.join(""),meterType:0}};var Se=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(he.indexOf(t[0]));e.push(Ae.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(de.indexOf(t[r]))}var a=Ie(e);if(a.length===8){return a}if(a.length>8){throw new Error("Wrong format")}var n=new Array(8).fill(0);for(var i=0;i<a.length;i++){n[i]=a[i]}return n};var ye=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(he[t[0]]??ve);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push(Ue[t[r]]??ve)}}return{type:e.join(""),meterType:0}};var De=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(he.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push(Ue.indexOf(t[r]))}var a=Ie(e);var n=new Array(8).fill(0);for(var i=0;i<a.length&&i<8;i++){n[i]=a[i]}return n};var Ce=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var a=r.indexOf(t[0])!==-1?2:0;var n=Pe(t.slice(0,8));var i=n[a];var s=he[i];if(s==="1"||s==="3"){e=Me(n.slice(a))}else{e=s==="M"?ye(n):Ne(n)}e.meterType=t[8];return e};var Le=function(t,e){var r=t.type,a=t.revision,n=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var i;var s=r.substring(4);var o=r[4];if(o==="1"||o==="3"){i=me(s,e,a)}else{i=o==="M"?De(s):Se(s)}i[8]=n;return i};var Fe=80;var Ve=81;var xe=82;var we=83;var Ye=84;var He=85;var We=86;var Ge=87;var Xe=88;var Be=89;var be=90;var Ke=91;var ze=255;var Ze=Object.freeze({__proto__:null,DATA_REQUEST:Fe,DATA_RESPONSE:Ve,FRAGMENT_REQUEST:be,FRAGMENT_RESPONSE:Ke,IDENT_REQUEST:xe,IDENT_RESPONSE:we,INVALID:ze,L2_CHECK_ADDRESS_REQUEST:We,L2_CHECK_ADDRESS_RESPONSE:Ge,L2_RM_ADDRESS_REQUEST:Xe,L2_RM_ADDRESS_RESPONSE:Be,L2_SET_ADDRESS_REQUEST:Ye,L2_SET_ADDRESS_RESPONSE:He});var je=Ct(Ze);var Qe=1;var ke=2;var qe=3;var $e=16;var Je=17;var tr=18;var er=19;var rr=20;var ar=21;var nr=32;var ir=33;var sr=34;var or=35;var Er=36;var _r=37;var vr=38;var hr=39;var Ar=40;var ur=41;var fr=49;var gr=50;var Tr=51;var Rr=52;var Or=53;var lr=54;var dr=55;var cr=56;var Ur=57;var pr=64;var Pr=65;var Ir=66;var Mr=67;var mr=68;var Nr=69;var Sr=70;var yr=71;var Dr=72;var Cr=73;var Lr=74;var Fr=75;var Vr=76;var xr=77;var wr=78;var Yr=79;var Hr=80;var Wr=81;var Gr=82;var Xr=83;var Br=84;var br=85;var Kr=86;var zr=87;var Zr=88;var jr=89;var Qr=96;var kr=97;var qr=98;var $r=99;var Jr=100;var ta=101;var ea=102;var ra=103;var aa=104;var na=105;var ia=112;var sa=113;var oa=114;var Ea=115;var _a=116;var va=117;var ha=118;var Aa=119;var ua=120;var fa=121;var ga=122;var Ta=123;var Ra=124;var Oa=125;var la=144;var da=145;var ca=147;var Ua=148;var pa=156;var Pa=157;var Ia=158;var Ma=159;var ma=160;var Na=161;var Sa=162;var ya=176;var Da=177;var Ca=178;var La=179;var Fa=180;var Va=181;var xa=182;var wa=183;var Ya=208;var Ha=224;var Wa=225;var Ga=226;var Xa=227;var Ba=228;var ba=229;var Ka=230;var za=Object.freeze({__proto__:null,ACCESS_CLOSED:$e,ACCPARAM_BAD:oa,ACCPARAM_EXT_BAD:Ea,BAD_TEST_EEPROM:aa,BAD_TEST_FRAM:na,BAT_FAULT:Xr,BAT_OK:Gr,BIPOLAR_POWER_FAULT:Fa,BIPOLAR_POWER_OK:Va,BLOCK_TARIFF_BAD:va,CALC_PERIOD_BAD:_a,CALFLAG_RESET:ra,CALFLAG_SET:ea,CALIBR_PARAM_BAD:ha,CAL_FAULT:br,CAL_OK:Br,CASE_CLOSE:er,CASE_MODULE_CLOSE:Oa,CASE_MODULE_OPEN:Ra,CASE_OPEN:tr,CASE_TERMINAL_CLOSE:Ta,CASE_TERMINAL_OPEN:ga,CHANGE_ACCESS_KEY0:nr,CHANGE_ACCESS_KEY1:ir,CHANGE_ACCESS_KEY2:sr,CHANGE_ACCESS_KEY3:or,CHANGE_COR_TIME:ur,CHANGE_PAR_LOCAL:Er,CHANGE_PAR_REMOTE:_r,CHANGE_TARIFF_TBL:gr,CLOCK_FAULT:zr,CLOCK_OK:Kr,CMD_CHANGE_TIME:vr,CMD_RELAY_2_OFF:kr,CMD_RELAY_2_ON:Qr,CMD_RELAY_OFF:Ar,CMD_RELAY_ON:hr,CROSSZERO_ENT0:qr,CROSSZERO_ENT1:$r,CROSSZERO_ENT2:Jr,CROSSZERO_ENT3:ta,CROSSZERO_EXP_ENT0:Ia,CROSSZERO_EXP_ENT1:Ma,CROSSZERO_EXP_ENT2:ma,CROSSZERO_EXP_ENT3:Na,CURRENT_UNEQUIL_FAULT:Ca,CURRENT_UNEQUIL_OK:La,EM_MAGNETIC_OFF:Da,EM_MAGNETIC_ON:ya,ENERGY_REG_FAULT:Qe,ENERGY_REG_OVERFLOW:fr,ERR_ACCESS:Je,F_MAX_OK:Dr,F_MAX_OVER:Cr,F_MIN_OK:Lr,F_MIN_OVER:Fr,I_MAX_OK:Vr,I_MAX_OVER:xr,MAGNETIC_OFF:ar,MAGNETIC_ON:rr,NVRAM_FAULT:Ya,OP_PAR_FAULT:qe,POWERSALDO_OK:Hr,POWERSALDO_OVER:Wr,POWER_A_OFF:Zr,POWER_A_ON:jr,POWER_OVER_RELAY_OFF:Pa,P_MAX_OK:wr,P_MAX_OVER:Yr,RELAY_HARD_BAD_OFF:la,RELAY_HARD_BAD_ON:ca,RELAY_HARD_OFF:Ua,RELAY_HARD_ON:da,RELAY_OFF:dr,RELAY_ON:lr,RESET_EM_FLAG:xa,RESET_MAGN_FLAG:wa,RESTART:cr,SALDO_EN_BAD:ua,SALDO_PARAM_BAD:sa,SET_DEMAND_EN_10MIN:Xa,SET_DEMAND_EN_15MIN:Ba,SET_DEMAND_EN_1MIN:Ha,SET_DEMAND_EN_30MIN:ba,SET_DEMAND_EN_3MIN:Wa,SET_DEMAND_EN_5MIN:Ga,SET_DEMAND_EN_60MIN:Ka,SET_NEW_SALDO:ia,SET_SALDO_PARAM:pa,SET_TARIFF_TBL:Tr,SUMMER_TIME:Rr,TIME_CORRECT:fa,TIME_CORRECT_NEW:Sa,T_MAX_OK:mr,T_MAX_OVER:Nr,T_MIN_OK:Sr,T_MIN_OVER:yr,VENDOR_PAR_FAULT:ke,V_MAX_OK:pr,V_MAX_OVER:Pr,V_MIN_OK:Ir,V_MIN_OVER:Mr,WD_RESTART:Ur,WINTER_SUMMER_BAD:Aa,WINTER_TIME:Or});var Za=Ct(za);var ja={type:Fe,destination:65535,source:65534};var Qa=11;var ka=7;var qa=4;var $a=48;var Ja=50;var tn=3+$a*2;var en={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var rn={...en,AUTO_SCREEN_SCROLLING:2147483648};var an={...en,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var nn={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var sn={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var on={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var En={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var _n={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var vn={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var hn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var An={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var un={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var fn={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var gn={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var Tn={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Rn={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function On(t,e,r){var a=r>>qa;var n=new Array(qa).fill(0);n.forEach((function(e,r){var i=!!Ee(a,1,r+1);if(i){n[r]=t.getUint32()}else{n[r]=null}}));return n}function ln(t,e,r){var a=1+qa;var n=e;r.forEach((function(t,e){n=_e(n,1,e+a,Number(!!t))}));t.setUint8(n)}function dn(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function cn(t,e){var r=e.tariff,a=e.energy;if(r!==undefined&&a!==undefined){t.setUint16(r<<14|a&16383)}else{t.setUint16(65535)}}function Un(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;ie.call(this,t,e)}Un.prototype=Object.create(ie.prototype);Un.prototype.constructor=Un;Un.getDayProfileFromByte=function(t){return{tariff:Ee(t,2,1),isFirstHalfHour:!Ee(t,1,3),hour:Ee(t,5,4)}};Un.getByteFromDayProfile=function(t){var e=0;e=_e(e,2,1,t.tariff);e=_e(e,1,3,+!t.isFirstHalfHour);e=_e(e,5,4,t.hour);return e};Un.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};Un.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:oe(rn,2147496324),relaySet4:oe(En,0),relaySet3:oe(on,0),relaySet2:oe(sn,3),relaySet1:oe(nn,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:oe(vn,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:oe(an,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:oe(_n,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};Un.prototype.getFrameHeader=function(){var t=this.getUint8();var e=je[t];var r=this.getUint16();var a=this.getUint16();return{type:t,typeName:e,destination:r,source:a}};Un.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?ja.type:e,a=t.destination,n=a===void 0?ja.destination:a,i=t.source,s=i===void 0?ja.source:i;this.setUint8(r);this.setUint16(n);this.setUint16(s)};Un.prototype.getDeviceId=function(){var t=T(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var a=T(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:a}};Un.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,a=t.year,n=t.serial;this.setBytes(f(e));this.setUint8(r);this.setUint8(a);this.setBytes(f(n))};Un.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};Un.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};Un.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};Un.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};Un.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};Un.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};Un.prototype.getDayProfile=function(){return Un.getDayProfileFromByte(this.getUint8())};Un.prototype.setDayProfile=function(t){this.setUint8(Un.getByteFromDayProfile(t))};Un.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(ka).fill(0).map((function(){return t.getUint8()}))}};Un.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};Un.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};Un.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};Un.prototype.getDeviceType=function(){return Ce(this.getBytes(9))};Un.prototype.setDeviceType=function(t){this.setBytes(Le(t))};Un.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:oe(rn,this.getUint32()),relaySet4:oe(En,this.getUint8()),relaySet3:oe(on,this.getUint8()),relaySet2:oe(sn,this.getUint8()),relaySet1:oe(nn,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:oe(vn,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:oe(an,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:oe(_n,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};Un.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(se(rn,t.displaySet));this.setUint8(se(En,t.relaySet4));this.setUint8(se(on,t.relaySet3));this.setUint8(se(sn,t.relaySet2));this.setUint8(se(nn,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(se(vn,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(se(an,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(se(_n,t.relaySet5));this.setUint8(e)};Un.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Ee(t,qa,1);var r=On(this,e,t);return{energyType:e,energies:r}};Un.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,a=t.energies;if(r){ln(this,r,a)}a.forEach((function(t){if(t!==null){e.setUint32(t)}}))};Un.prototype.getEnergies=function(){var t=this;return new Array(qa).fill(0).map((function(){return t.getInt32()}))};Un.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};Un.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};Un.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};Un.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};Un.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};Un.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return dn(t)}))};Un.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return cn(e,t)}))};Un.prototype.getEventStatus=function(){var t=this.getUint16();return oe(hn,t)};Un.prototype.setEventStatus=function(t){this.setUint16(se(hn,t))};Un.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=oe(An,this.getUint8());var r=oe(un,this.getUint8());var a=oe(fn,this.getUint8());var n=oe(gn,this.getUint8());var i=oe(Tn,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:a,status2:n,status3:i}};Un.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,a=t.relayStatus2,n=t.status1,i=t.status2,s=t.status3;this.setUint16(e);this.setUint8(se(An,r));this.setUint8(se(un,a));this.setUint8(se(fn,n));this.setUint8(se(gn,i));this.setUint8(se(Tn,s))};Un.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Za[e];switch(e){case Pa:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case vr:case fa:if(r<8){return t}t.newDate=this.getDateTime();break}return t};Un.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Pa:for(var e of t.power){this.setUint8(e)}break;case vr:case fa:this.setDateTime(t.newDate);break}};Un.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};Un.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};Un.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(qa).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};Un.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};Un.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:oe(Rn,this.getUint8())}};Un.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,a=t.pmaxMinusThreshold2,n=t.pmaxMinusThreshold3,i=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(a);this.setUint32(n);this.setUint8(se(Rn,i))};Un.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(qa).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};Un.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var pn=0;var Pn=128;var In=129;var Mn=130;var mn=131;var Nn=132;var Sn=133;var yn=134;var Dn=135;var Cn=136;var Ln=137;var Fn=144;var Vn=145;var xn=146;var wn=147;var Yn=149;var Hn=151;var Wn=152;var Gn=153;var Xn=154;var Bn=155;var bn=156;var Kn=159;var zn=160;var Zn=240;var jn=Object.freeze({__proto__:null,ACCESS_DENIED:wn,BAD_ARRAY_INDEX:yn,BAD_BLOCK_NUMBER:bn,BAD_DATA_LENGTH:Sn,BAD_MESSAGE:Nn,BAD_RATE_PLAN_ID:Cn,BAD_RATE_PLAN_SIZE:Ln,BAD_RESPONSE_LENGTH:Fn,BAD_SALDO_WRITE:Yn,BLOCKED_METER:Hn,CALIBRATION_DISABLED:xn,DECRYPTION_FAILURE:Mn,INTERNAL:Zn,INVALID_CORRECTION_INTERVAL:Xn,NOT_ALIGNED_DATA:In,NOT_PREPARED_RATE_PLAN:Dn,NO_DATA_FOR_DATE:Vn,OK:pn,OUT_OFF_RANGE:Kn,SET_METER_TYPE_FAILURE:zn,TIME_CORRECTION_FAILURE:Gn,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:Bn,UNENCRYPTED_COMMAND_DISABLED:Wn,UNKNOWN_COMMAND:Pn,UNKNOWN_PROTOCOL:mn});var Qn=Ct(jn);var kn=yt;var qn=function(t){return function(e){var r=new Un(e);var a=r.getUint8();var n=r.getUint8();return{commandId:a,commandName:t[a],errorCode:n,errorName:Qn[n]}}};var $n=Ut;var Jn=6;var ti=function(t){if(t.length!==Jn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=E(t,6),r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5];return{date:{date:r,month:a,year:n},version:"".concat(i,".").concat(s,".").concat(o)}};var ei=nt;var ri=function(t){var e=new Un(t);return e.getTimeCorrectionParameters()};var ai=0;var ni=1;var ii=2;var si=3;var oi=4;var Ei=5;var _i=6;var vi=7;var hi=8;var Ai=9;var ui=10;var fi=11;var gi=12;var Ti=13;var Ri=14;var Oi=Object.freeze({__proto__:null,CASE_MODULE_OPEN:ui,CASE_OPEN:ai,CASE_TERMINAL_OPEN:Ai,DEVICE_FAILURE:hi,ERROR_ACCESS:Ei,MAGNETIC_ON:ni,PARAMETERS_UPDATE_LOCAL:si,PARAMETERS_UPDATE_REMOTE:ii,PROTECTION_RESET_EM:Ti,PROTECTION_RESET_MAGNETIC:Ri,RESTART:oi,TARIFF_TABLE_GET:gi,TARIFF_TABLE_SET:fi,TIME_CORRECT:vi,TIME_SET:_i});Ct(Oi);var li=U;var di=function(t){var e=new Un(t);return e.getDateTime()};var ci=4;var Ui=4294967295;var pi={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Pi=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return se(pi,e)};var Ii=function(t){return t<ci?1<<t:0};var Mi=function(t){return t<ci?1<<t<<4:0};var mi=function(t,e){var r=0;if(t<ci){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=Ii(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=Mi(t)}}return r};function Ni(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;ie.call(this,t,e)}Ni.prototype=Object.create(ie.prototype);Ni.prototype.constructor=Ni;Ni.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};Ni.prototype.setDate=function(t){var e=t.year,r=t.month,a=t.date;var n=e<<1|r>>3&1;var i=r<<5&224|a&31;this.setUint8(n);this.setUint8(i)};Ni.prototype.getEnergiesFlags=function(){var t=this.getUint8();return oe(pi,t)};Ni.prototype.setEnergiesFlags=function(t){this.setUint8(Pi(t))};Ni.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var a=this.getUint16();e.push(a===Ui?undefined:a)}return e};Ni.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?Ui:r)}}};Ni.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};Ni.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};Ni.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&pi["A+"]){e["A+"]=this.getUint32()}if(t&pi["A+R+"]){e["A+R+"]=this.getUint32()}if(t&pi["A+R-"]){e["A+R-"]=this.getUint32()}return e};Ni.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};Ni.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&pi["A-"]){e["A-"]=this.getUint32()}if(t&pi["A-R+"]){e["A-R+"]=this.getUint32()}if(t&pi["A-R-"]){e["A-R-"]=this.getUint32()}return e};Ni.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};Ni.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(ci).fill(null);for(var a=0;a<ci;a++){if(e&Ii(a)){r[a]=this.getAPlusTariffEnergies(t)}}for(var n=0;n<ci;n++){if(e&Mi(n)){r[n]={...r[n],...this.getAMinusTariffEnergies(t)}}}return r};Ni.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=Pi(t);a|=mi(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};Ni.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};Ni.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,a=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(a)}};Ni.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&pi["A+"]){e["A+"]=this.getPowerMax()}if(t&pi["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&pi["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};Ni.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};Ni.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&pi["A-"]){e["A-"]=this.getPowerMax()}if(t&pi["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&pi["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};Ni.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};Ni.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(ci).fill(null);for(var a=0;a<ci;a++){if(e&Ii(a)){r[a]=this.getAPlusTariffPowerMax(t)}}for(var n=0;n<ci;n++){if(e&Mi(n)){r[n]={...r[n],...this.getAMinusTariffPowerMax(t)}}}return r};Ni.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var a=0;t.forEach((function(t,e){if(t){r|=Pi(t);a|=mi(e,t)}}));this.setUint8(r);this.setUint8(a);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var Si=255;var yi=et;var Di=function(t){var e=t.indexOf(Si);var r=e===-1?t:t.slice(0,e);return{periods:v(r).map(Un.getDayProfileFromByte)}};Ct(mt);var Ci=c;var Li=function(t){var e=new Un(t);return e.getDeviceId()};var Fi=d;var Vi=function(t){var e=new Un(t);return e.getDeviceType()};var xi=3+1;var wi=4;var Yi=Q;var Hi=xi+255*wi;var Wi=function(t){return function(e){if(e.length>Hi){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var r=new t(e);var a=r.getDate();var n=r.getUint8();var i=[];while(!r.isEmpty){i.push(r.getEvent())}return{date:a,eventsNumber:n,events:i}}};var Gi=Wi(Un);var Xi=14;var Bi=20;var bi=k;var Ki=function(t){if(t.length!==Xi&&t.length!==Bi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Un(t);var r=e.getUint16();var a=e.getUint16();var n=e.getUint16();var i=e.getUint16();var s=e.getUint16();var o=e.getUint16();var E=e.getUint16();return{accessClosed:o,accessError:s,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:r,setClock:E}};var zi=O;var Zi=function(t){var e=new Un(t,true);return e.getEventStatus()};var ji=ct;var Qi=function(t){var e=new Ni(t);var r=e.getDate();var a=e.getEnergiesFlags();var n=e.getUint8();var i=e.getUint8();return{date:r,firstHalfhour:n,halfhoursNumber:i,energies:e.getHalfhoursEnergies(a,i)}};var ki=dt;var qi=function(t){var e=new Un(t);return{induction:e.getUint16(),threshold:e.getUint16(),inductionCoefficient:e.getUint16()/100,reserved:e.getUint32()}};var $i=Mt;var Ji=function(t){var e=E(t,1),r=e[0];return{ten:r}};var ts=pt;var es=function(t){var e=new Un(t);return e.getOperatorParametersExtended3()};var rs=B;var as=1+Qa*2;var ns=function(t){if(t.length!==as){throw new Error("Invalid getRatePlanInfo data size.")}var e=new Un(t);return{tariffTable:e.getUint8(),activePlan:e.getTariffPlan(),passivePlan:e.getTariffPlan()}};var is=G;var ss=29;var os=function(t){if(t.length!==ss){throw new Error("Invalid getSaldo data size.")}var e=new Un(t);return{currentSaldo:e.getInt32(),count:e.getUint8(),energy:new Array(4).fill(0).map((function(){return e.getInt32()})),beginSaldoOfPeriod:e.getInt32(),date:{month:e.getUint8(),date:e.getUint8(),hours:e.getUint8(),minutes:e.getUint8()}}};var Es=K;var _s=37;var vs=function(t){if(t.length!==_s){throw new Error("Invalid getSaldoParameters data size.")}var e=new Un(t);return e.getSaldoParameters()};var hs=rt;var As=function(t){var e=new Un(t);return e.getSeasonProfile()};var us=at;var fs=function(t){var e=new Un(t);return e.getSpecialDay()};var gs=W;var Ts=function(t){return{version:String.fromCharCode.apply(null,v(t))}};var Rs=D;var Os=0;var ls=function(t){if(t.length!==Os){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ds=q;var cs=0;var Us=function(t){if(t.length!==cs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ps=$;var Ps=0;var Is=function(t){if(t.length!==Ps){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ms=st;var ms=0;var Ns=function(t){if(t.length!==ms){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ss=P;var ys=0;var Ds=function(t){if(t.length!==ys){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Cs=Tt;var Ls=0;var Fs=function(t){if(t.length!==Ls){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Vs=w;var xs=0;var ws=function(t){if(t.length!==xs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ys=p;var Hs=0;var Ws=function(t){if(t.length!==Hs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Gs=m;var Xs=0;var Bs=function(t){if(t.length!==Xs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var bs=Rt;var Ks=0;var zs=function(t){if(t.length!==Ks){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Zs=Pt;var js=0;var Qs=function(t){if(t.length!==js){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ks=H;var qs=0;var $s=function(t){if(t.length!==qs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Js=X;var to=0;var eo=function(t){if(t.length!==to){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ro=z;var ao=0;var no=function(t){if(t.length!==ao){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var io=N;var so=0;var oo=function(t){if(t.length!==so){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Eo=S;var _o=0;var vo=function(t){if(t.length!==_o){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ho=lt;var Ao=function(t){var e=new Un(t);var r=e.getUint8();var a=!!(r&1);var n=!!(r&2);return{electroMagneticIndication:a,magneticIndication:n}};var uo=x;var fo=0;var go=function(t){if(t.length!==fo){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var To=V;var Ro=0;var Oo=function(t){if(t.length!==Ro){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var lo={encrypt:function(){},decrypt:function(){}};var co=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var Uo=3;var po=2;var Po=2;var Io=function(t,e){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var s=E(r,2),o=s[0],_=s[1];var h=_&Uo;var A={messageId:o,accessLevel:h,commands:i,bytes:r,lrc:{received:undefined,calculated:0}};var u=r.slice(po);var f;if(n&&h!==R){u=v(lo.decrypt(n,u))}var g=u[u.length-1];u=u.slice(0,-1);var T=co(u);if(h!==R||g!==0){if(g!==T){f="Mismatch LRC."}}var O=u[0]&Uo;var l=u.slice(1);if(h!==O){f="Mismatch access levels."}var d=0;do{var c=l[d];var U=l[d+1];var p=Po+U;var P=l.slice(d+Po,d+p);var I={id:c,name:e[c],headerSize:Po,bytes:l.slice(d,d+p)};if(!c){break}try{if(!t[c]){throw new Error("Unsupported command id: ".concat(c,"!"))}I.parameters=t[c](P,a);i.push(I)}catch(t){i.push({command:I,error:t.message})}d+=p}while(d<=l.length);A.lrc.calculated=T;A.lrc.received=g;if(f){return{message:A,error:f}}return A}};var Mo=1;var mo=3;var No=4;var So=5;var yo=7;var Do=8;var Co=9;var Lo=13;var Fo=15;var Vo=16;var xo=17;var wo=18;var Yo=19;var Ho=20;var Wo=21;var Go=22;var Xo=23;var Bo=24;var bo=25;var Ko=28;var zo=30;var Zo=31;var jo=40;var Qo=41;var ko=42;var qo=44;var $o=46;var Jo=47;var tE=49;var eE=50;var rE=51;var aE=52;var nE=53;var iE=54;var sE=57;var oE=58;var EE=59;var _E=60;var vE=61;var hE=62;var AE=63;var uE=64;var fE=69;var gE=70;var TE=71;var RE=72;var OE=73;var lE=78;var dE=79;var cE=80;var UE=82;var pE=83;var PE=84;var IE=85;var ME=86;var mE=88;var NE=89;var SE=90;var yE=92;var DE=93;var CE=94;var LE=100;var FE=109;var VE=111;var xE=112;var wE=113;var YE=114;var HE=117;var WE=118;var GE=122;var XE=Object.freeze({__proto__:null,activateRatePlan:Yo,getBuildVersion:xE,getCorrectTime:hE,getCriticalEvent:ME,getCurrentStatusMeter:sE,getCurrentValues:Lo,getDateTime:yo,getDayDemand:Go,getDayDemandExport:dE,getDayMaxDemand:tE,getDayMaxDemandExport:mE,getDayProfile:EE,getDemand:WE,getDeviceId:So,getDeviceType:No,getDisplayParam:CE,getEnergy:Fo,getEnergyDayPrevious:mo,getEnergyExport:lE,getEnergyExportDayPrevious:cE,getEventStatus:Mo,getEvents:rE,getEventsCounters:aE,getExtendedCurrentValues:oE,getHalfHourDemand:Wo,getHalfHourDemandChannel:SE,getHalfHourDemandExport:pE,getHalfHourDemandVare:OE,getHalfHourDemandVareExport:IE,getHalfHourDemandVari:RE,getHalfHourDemandVariExport:PE,getHalfhoursEnergies:VE,getMagneticFieldThreshold:FE,getMeterInfo:GE,getMonthDemand:Xo,getMonthDemandExport:UE,getMonthMaxDemand:eE,getMonthMaxDemandExport:NE,getOperatorParameters:zo,getOperatorParametersExtended:AE,getOperatorParametersExtended2:TE,getOperatorParametersExtended3:wE,getRatePlanInfo:qo,getSaldo:Qo,getSaldoParameters:$o,getSeasonProfile:_E,getSpecialDay:vE,getVersion:jo,prepareRatePlan:Ho,resetPowerMaxDay:nE,resetPowerMaxMonth:iE,runTariffPlan:gE,setAccessKey:Co,setCorrectDateTime:yE,setCorrectTime:Ko,setDateTime:Do,setDayProfile:Vo,setDisplayParam:DE,setOperatorParameters:Zo,setOperatorParametersExtended:uE,setOperatorParametersExtended2:fE,setOperatorParametersExtended3:YE,setOperatorParametersExtended4:HE,setSaldo:ko,setSaldoParameters:Jo,setSeasonProfile:xo,setSpecialDay:wo,setSpecialOperation:LE,turnRelayOff:bo,turnRelayOn:Bo});var BE=254;var bE=Object.freeze({__proto__:null,activateRatePlan:Yo,errorResponse:BE,getBuildVersion:xE,getCorrectTime:hE,getCriticalEvent:ME,getCurrentStatusMeter:sE,getCurrentValues:Lo,getDateTime:yo,getDayDemand:Go,getDayDemandExport:dE,getDayMaxDemand:tE,getDayMaxDemandExport:mE,getDayProfile:EE,getDemand:WE,getDeviceId:So,getDeviceType:No,getDisplayParam:CE,getEnergy:Fo,getEnergyDayPrevious:mo,getEnergyExport:lE,getEnergyExportDayPrevious:cE,getEventStatus:Mo,getEvents:rE,getEventsCounters:aE,getExtendedCurrentValues:oE,getHalfHourDemand:Wo,getHalfHourDemandChannel:SE,getHalfHourDemandExport:pE,getHalfHourDemandVare:OE,getHalfHourDemandVareExport:IE,getHalfHourDemandVari:RE,getHalfHourDemandVariExport:PE,getHalfhoursEnergies:VE,getMagneticFieldThreshold:FE,getMeterInfo:GE,getMonthDemand:Xo,getMonthDemandExport:UE,getMonthMaxDemand:eE,getMonthMaxDemandExport:NE,getOperatorParameters:zo,getOperatorParametersExtended:AE,getOperatorParametersExtended2:TE,getOperatorParametersExtended3:wE,getRatePlanInfo:qo,getSaldo:Qo,getSaldoParameters:$o,getSeasonProfile:_E,getSpecialDay:vE,getVersion:jo,prepareRatePlan:Ho,resetPowerMaxDay:nE,resetPowerMaxMonth:iE,runTariffPlan:gE,setAccessKey:Co,setCorrectDateTime:yE,setCorrectTime:Ko,setDateTime:Do,setDayProfile:Vo,setDisplayParam:DE,setOperatorParameters:Zo,setOperatorParametersExtended:uE,setOperatorParametersExtended2:fE,setOperatorParametersExtended3:YE,setOperatorParametersExtended4:HE,setSaldo:ko,setSaldoParameters:Jo,setSeasonProfile:xo,setSpecialDay:wo,setSpecialOperation:LE,turnRelayOff:bo,turnRelayOn:Bo});var KE=Ct(bE);var zE=kn;var ZE=qn(KE);var jE=1;var QE=2;var kE=3;var qE=4;var $E=5;var JE=6;var t_=7;var e_=8;var r_=9;var a_=10;var n_=11;var i_=12;var s_=13;var o_=14;var E_=15;var __=16;var v_=17;var h_=18;var A_=19;var u_=20;var f_=21;var g_=22;var T_=23;var R_=24;var O_=25;var l_=26;var d_=28;var c_=30;var U_=31;var p_=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:qE,ACTIVE_ENERGY_T2:$E,ACTIVE_ENERGY_T3:JE,ACTIVE_ENERGY_T4:t_,ACTIVE_POWER_IN_NEUTRAL:r_,ACTIVE_POWER_PER_PHASE:e_,BATTERY_VOLTAGE:g_,CURRENT_BALANCE:c_,CURRENT_IN_NEUTRAL:n_,CURRENT_IN_PHASE:a_,DATE_MONTH_YEAR:o_,EXPORTED_ACTIVE_ENERGY_T1:__,EXPORTED_ACTIVE_ENERGY_T2:v_,EXPORTED_ACTIVE_ENERGY_T3:h_,EXPORTED_ACTIVE_ENERGY_T4:A_,HOUR_MINUTE_SECOND:s_,MAGNET_INDUCTION:d_,OPTOPORT_SPEED:U_,POWER_COEFFICIENT_PHASE_A:u_,POWER_COEFFICIENT_PHASE_B:f_,POWER_THRESHOLD_T1:T_,POWER_THRESHOLD_T2:R_,POWER_THRESHOLD_T3:O_,POWER_THRESHOLD_T4:l_,SET_ALL_SEGMENT_DISPLAY:jE,SOFTWARE_VERSION:QE,TOTAL_ACTIVE_ENERGY:kE,TOTAL_EXPORTED_ACTIVE_ENERGY:E_,VOLTAGE:i_});Ct(p_);var P_=2400;var I_=9600;var M_={plc:{0:I_,2:P_,4:I_},optoport:{0:P_,2:P_,4:I_}};var m_={plc:Ct(M_.plc),optoport:Ct(M_.optoport)};var N_=1;var S_=2;var y_=1;var D_=2;var C_=3;var L_=4;var F_=17;var V_=18;var x_=19;var w_=20;var Y_=21;var H_=22;var W_=23;var G_=32;var X_=33;var B_=34;var b_=35;var K_=36;var z_=37;var Z_=38;var j_=39;var Q_=40;var k_=49;var q_=50;var $_=51;var J_=52;var tv=53;var ev=54;var rv=55;var av=56;var nv=57;var iv=64;var sv=65;var ov=66;var Ev=67;var _v=68;var vv=69;var hv=70;var Av=71;var uv=72;var fv=73;var gv=74;var Tv=75;var Rv=76;var Ov=77;var lv=78;var dv=79;var cv=80;var Uv=81;var pv=82;var Pv=83;var Iv=84;var Mv=85;var mv=86;var Nv=87;var Sv=88;var yv=89;var Dv=90;var Cv=91;var Lv=92;var Fv=93;var Vv=94;var xv=95;var wv=96;var Yv=97;var Hv=98;var Wv=99;var Gv=100;var Xv=101;var Bv=102;var bv=103;var Kv=104;var zv=105;var Zv=106;var jv=107;var Qv=108;var kv=109;var qv=110;var $v=111;var Jv=112;var th=113;var eh=114;var rh=115;var ah=116;var nh=117;var ih=118;var sh=119;var oh=120;var Eh=121;var _h=122;var vh=123;var hh=124;var Ah=125;var uh=126;var fh=127;var gh=128;var Th=129;var Rh=130;var Oh=131;var lh=132;var dh=133;var ch=134;var Uh=135;var ph=136;var Ph=137;var Ih=138;var Mh=139;var mh=140;var Nh=141;var Sh=142;var yh=143;var Dh=144;var Ch=145;var Lh=147;var Fh=148;var Vh=149;var xh=150;var wh=151;var Yh=152;var Hh=153;var Wh=154;var Gh=155;var Xh=156;var Bh=157;var bh=158;var Kh=159;var zh=160;var Zh=161;var jh=162;var Qh=163;var kh=164;var qh=165;var $h=166;var Jh=167;var tA=168;var eA=169;var rA=170;var aA=171;var nA=172;var iA=173;var sA=174;var oA=175;var EA=176;var _A=177;var vA=178;var hA=179;var AA=224;var uA=225;var fA=226;var gA=227;var TA=228;var RA=229;var OA=230;var lA=231;var dA=232;var cA=Object.freeze({__proto__:null,ACCESS_LOCKED:F_,ACCESS_UNLOCKED:V_,ACCUMULATION_PARAM_BAD:dh,ACCUMULATION_PARAM_EXT_BAD:ch,BAD_TEST_EEPROM:Th,BAD_TEST_FRAM:Rh,BATTERY_FAULT:zv,BATTERY_OK:Kv,BLOCK_TARIFF_BAD:ph,CALCULATION_PERIOD_BAD:Uh,CALIBRATION_FAULT:jv,CALIBRATION_FLAG_RESET:gh,CALIBRATION_FLAG_SET:fh,CALIBRATION_OK:Zv,CALIBRATION_PARAM_BAD:Ph,CASE_CLOSE:Y_,CASE_KLEMA_CLOSE:wh,CASE_KLEMA_OPEN:xh,CASE_MODULE_CLOSE:Gh,CASE_MODULE_OPEN:Wh,CASE_OPEN:w_,CHANGE_ACCESS_KEY0:G_,CHANGE_ACCESS_KEY1:X_,CHANGE_ACCESS_KEY2:B_,CHANGE_ACCESS_KEY3:b_,CHANGE_COR_TIME:Jv,CHANGE_PARAMETERS_LOCAL:K_,CHANGE_PARAMETERS_REMOTE:z_,CHANGE_PARAM_CHANNEL1:bh,CHANGE_PARAM_CHANNEL2:Kh,CHANGE_PARAM_CHANNEL3:zh,CHANGE_PARAM_CHANNEL4:Zh,CHANGE_PARAM_CHANNEL5:jh,CHANGE_PARAM_CHANNEL6:Qh,CHANGE_TARIFF_TABLE:q_,CHANGE_TARIFF_TABLE_2:Yh,CHANGE_TARIFF_TABLE_3:Hh,CLOCK_FAULT:Yv,CLOCK_OK:wv,CMD_CHANGE_TIME:Z_,CMD_RELAY_2_OFF:eh,CMD_RELAY_2_ON:th,CMD_RELAY_OFF:Q_,CMD_RELAY_ON:j_,COEFFICIENT_TRANSFORMATION_CHANGE:yh,CROSS_ZERO_ENT0:rh,CROSS_ZERO_ENT1:ah,CROSS_ZERO_ENT2:nh,CROSS_ZERO_ENT3:ih,CROSS_ZERO_EXPORT_ENT0:kh,CROSS_ZERO_EXPORT_ENT1:qh,CROSS_ZERO_EXPORT_ENT2:$h,CROSS_ZERO_EXPORT_ENT3:Jh,CROSS_ZERO_EXPORT_VARE0:nA,CROSS_ZERO_EXPORT_VARE1:iA,CROSS_ZERO_EXPORT_VARE2:sA,CROSS_ZERO_EXPORT_VARE3:oA,CROSS_ZERO_EXPORT_VARI0:tA,CROSS_ZERO_EXPORT_VARI1:eA,CROSS_ZERO_EXPORT_VARI2:rA,CROSS_ZERO_EXPORT_VARI3:aA,CROSS_ZERO_VARE0:vh,CROSS_ZERO_VARE1:hh,CROSS_ZERO_VARE2:Ah,CROSS_ZERO_VARE3:uh,CROSS_ZERO_VARI0:sh,CROSS_ZERO_VARI1:oh,CROSS_ZERO_VARI2:Eh,CROSS_ZERO_VARI3:_h,EM_MAGNETIC_OFF:_A,EM_MAGNETIC_ON:EA,ENERGY_REGISTER_OVERFLOW:k_,ENERGY_T0_FAULT:y_,ENERGY_T1_FAULT:D_,ENERGY_T2_FAULT:C_,ENERGY_T3_FAULT:L_,ERR_ACCESS:x_,F_MAX_OK:Rv,F_MAX_OVER:Ov,F_MIN_OK:lv,F_MIN_UNDER:dv,IA_MAX_OK:Iv,IA_MAX_OVER:Mv,IB_MAX_OK:mv,IB_MAX_OVER:Nv,IC_MAX_OK:Sv,IC_MAX_OVER:yv,IDIFF_OK:Vv,IDIFF_OVER:xv,MAGNETIC_OFF:W_,MAGNETIC_ON:H_,METER_TROUBLE:Vh,OP_PARAM_BAD:Mh,OP_PARAM_EXT_BAD:mh,O_PARAMETERS_FAULT:$v,O_PARAMETERS_OK:qv,PA_MAX_OK:Dv,PA_MAX_OVER:Cv,POWER_A_OFF:bv,POWER_A_ON:Bv,POWER_B_OFF:Xv,POWER_B_ON:Gv,POWER_C_OFF:Wv,POWER_C_ON:Hv,POWER_OVER_RELAY_OFF:Bh,PV_MAX_OK:Lv,PV_MAX_OVER:Fv,P_MAX_A_MINUS_OK:lA,P_MAX_A_MINUS_OVER:dA,RELAY_HARD_BAD_OFF:Dh,RELAY_HARD_BAD_ON:Lh,RELAY_HARD_OFF:Fh,RELAY_HARD_ON:Ch,RELAY_OFF:rv,RELAY_ON:ev,RESET_EM_FLAG:vA,RESET_MAGNETIC_FLAG:hA,RESTART:av,SALDO_ENERGY_BAD:Nh,SALDO_PARAM_BAD:lh,SET_DEMAND_EN_10_MIN:gA,SET_DEMAND_EN_15_MIN:TA,SET_DEMAND_EN_1_MIN:AA,SET_DEMAND_EN_30_MIN:RA,SET_DEMAND_EN_3_MIN:uA,SET_DEMAND_EN_5_MIN:fA,SET_DEMAND_EN_60_MIN:OA,SET_NEW_SALDO:Oh,SET_SALDO_PARAM:Xh,SET_TARIFF_TABLE:$_,SUMMER_TIME:J_,TIME_CORRECT:Sh,T_MAX_OK:cv,T_MAX_OVER:Uv,T_MIN_OK:pv,T_MIN_UNDER:Pv,VA_MAX_OK:iv,VA_MAX_OVER:sv,VA_MIN_OK:ov,VA_MIN_UNDER:Ev,VB_MAX_OK:_v,VB_MAX_OVER:vv,VB_MIN_OK:hv,VB_MIN_UNDER:Av,VC_MAX_OK:uv,VC_MAX_OVER:fv,VC_MIN_OK:gv,VC_MIN_UNDER:Tv,V_PARAMETERS_FAULT:kv,V_PARAMETERS_OK:Qv,WD_RESTART:nv,WINTER_SUMMER_BAD:Ih,WINTER_TIME:tv});var UA=Ct(cA);var pA=ME;var PA=9;var IA=function(t){if(t.length!==PA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=E(t,9),r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],_=e[6],v=e[7],h=e[8];return{event:r,index:a,date:{year:n,month:i,date:s,hours:o,minutes:_,seconds:v},count:h}};var MA=4;var mA={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var NA={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var SA={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var yA={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var DA={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var CA={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var LA={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var FA={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var VA={OPTOPORT_SPEED:1<<26};var xA={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var wA=function(t){return{plc:M_.plc[Ee(t,4,1)],optoport:M_.optoport[Ee(t,4,5)]}};var YA=function(t){var e=0;e=_e(e,4,1,Number(m_.plc[t.plc]));e=_e(e,4,5,Number(m_.optoport[t.optoport]));return e};function HA(t,e,r){var a=r>>MA;var n=[];var i=[];var s=[];for(var o=0;o<qa;o++){var E=!!Ee(a,1,o+1);if(E){n.push(t.getInt32());i.push(t.getInt32());s.push(t.getInt32())}else{n.push(null);i.push(null);s.push(null)}}return{wh:n,vari:i,vare:s}}function WA(t,e){var r=e.wh,a=e.vari,n=e.vare;var i=1+MA;var s=t;for(var o=0;o<qa;o++){s=_e(s,1,o+i,Number(!!r[o]&&!!a[o]&&!!n[o]))}return s}function GA(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;Un.call(this,t,e)}GA.prototype=Object.create(Un.prototype);GA.prototype.constructor=GA;GA.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:oe(mA,4229),displaySet2:oe(NA,139776),displaySet3:oe(SA,0),relaySet:oe(CA,771),speedOptoPort:wA(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:oe(LA,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:oe(yA,2147876864)}};GA.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:oe(mA,this.getUint32()),displaySet2:oe(NA,this.getUint32()),displaySet3:oe(SA,this.getUint32()),relaySet:oe(CA,this.getUint32()),speedOptoPort:wA(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:oe(LA,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:oe(yA,this.getUint32())}};GA.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(se(mA,t.displaySet1));this.setUint32(se(NA,t.displaySet2));this.setUint32(se(SA,t.displaySet3));this.setUint32(se(CA,t.relaySet));this.setUint8(YA(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(se(LA,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(se(yA,t.displaySet4))};GA.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:oe(FA,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};GA.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(se(FA,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};GA.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var a=0;a<qa;a++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};GA.prototype.setEnergies=function(t){for(var e=0;e<qa;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};GA.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Ee(t,MA,1);var r=HA(this,e,t);return{energyType:e,energies:r}};GA.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var a=WA(e,r);var n=a>>MA;this.setUint8(a);for(var i=0;i<qa;i++){var s=!!Ee(n,1,i+1);if(s){this.setInt32(r.wh[i]);this.setInt32(r.vari[i]);this.setInt32(r.vare[i])}}return}for(var o=0;o<qa;o++){this.setInt32(r.wh[o]);this.setInt32(r.vari[o]);this.setInt32(r.vare[o])}};GA.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};GA.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};GA.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};GA.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};GA.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(qa).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};GA.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};GA.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(qa).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};GA.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};GA.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=UA[e];switch(e){case Bh:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case Z_:case Sh:if(r<8){return t}t.newDate=this.getDateTime();break}return t};GA.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Bh:for(var e of t.power){this.setUint8(e)}break;case Z_:case Sh:this.setDateTime(t.newDate);break}};GA.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};GA.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};GA.prototype.getOperatorParametersExtended2=function(){return{deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:oe(xA,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:oe(VA,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:this.getUint8()}};GA.prototype.setOperatorParametersExtended2=function(t){this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(se(xA,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(se(VA,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(t.timeCorrectPeriod)};GA.prototype.getOperatorParametersExtended4=function(){return{displaySet5:oe(DA,this.getUint32()),displaySet25:oe(DA,this.getUint32()),displaySet31:oe(mA,this.getUint32()),displaySet32:oe(mA,this.getUint32()),displaySet33:oe(mA,this.getUint32()),displaySet34:oe(mA,this.getUint32()),displaySet35:oe(DA,this.getUint32())}};GA.prototype.setOperatorParametersExtended4=function(t){this.setUint32(se(DA,t.displaySet5));this.setUint32(se(DA,t.displaySet25));this.setUint32(se(mA,t.displaySet31));this.setUint32(se(mA,t.displaySet32));this.setUint32(se(mA,t.displaySet33));this.setUint32(se(mA,t.displaySet34));this.setUint32(se(DA,t.displaySet35))};var XA=sE;var BA=function(t){var e=new GA(t);var r=e.getUint32();var a=e.getUint32();var n=e.getUint32();var i=e.getUint32();var s=e.getUint32();var o=e.getUint32();e.getUint32();var E=e.getUint32();var _=!!(e.getUint8()&1);var v=e.getUint8();var h=!!(e.getUint8()&1);var A=!!(e.getUint8()&1);var u={"A+":e.getUint8(),maximumPowers:e.getUint8(),"A-":e.getUint8()};var f=e.getUint8();var g=!!(e.getUint8()&1);var T=v|f<<8;return{operatingSeconds:r,tbadVAAll:a,tbadVBAll:n,tbadVCAll:i,tbadIMAXAll:s,tbadPMAXAll:o,tbadFREQ:E,relayStatus:_,statusEvent:oe(hn,T),centerAlert:h,calEnableFlag:A,currentTariffs:u,isSummerTime:g}};var bA=Lo;var KA=function(t){var e=new GA(t);return{vaRms:e.getInt32(),vbRms:e.getInt32(),vcRms:e.getInt32(),iaRms:e.getInt32(),ibRms:e.getInt32(),icRms:e.getInt32(),powerA:e.getInt32(),powerB:e.getInt32(),powerC:e.getInt32(),varA:e.getInt32(),varB:e.getInt32(),varC:e.getInt32(),iNeutral:e.getInt32()}};({wh:a(a({},N_,{gType:"1.8",rType:"1.8"}),S_,{gType:"2.8"}),vari:a(a({},N_,{gType:"5.8",rType:"3.8"}),S_,{gType:"6.8"}),vare:a(a({},N_,{gType:"8.8",rType:"4.8"}),S_,{gType:"7.8"})});var zA=51;var ZA=Go;var jA=function(t){var e=new GA(t);var r;if(t.length===zA){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var QA=dE;var kA=function(t){var e=new GA(t);return{date:e.getDate(),energies:e.getEnergies()}};var qA=tE;var $A=function(t){var e=new GA(t);return e.getDayMaxDemandResponse()};var JA=mE;var tu=function(t){var e=new GA(t);return e.getDayMaxDemandResponse()};Ct(XE);var eu=7;var ru=WE;var au=function(t){if(!t||t.length<eu){throw new Error("Invalid uplink GetDemand byte length.")}var e=new GA(t);var r=e.getDemand();if(t.length!==eu+2*r.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(r.count).fill(0).map((function(){return e.getUint16()}));return{...r,demands:a}};var nu=CE;var iu=function(t){var e=_(t),r=e[0],a=e.slice(1);return{displayMode:r,order:a}};var su=Fo;var ou=function(t){var e=new GA(t);return e.getEnergies()};var Eu=51;var _u=mo;var vu=function(t){var e=new GA(t);var r;if(t.length===Eu){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var hu=lE;var Au=function(t){var e=new GA(t);return e.getEnergies()};var uu=cE;var fu=function(t){var e=new GA(t);return e.getEnergies()};var gu=oE;var Tu=function(t){var e=new GA(t);return{temperature:e.getInt16(),frequency:e.getUint16(),vPhaseAB:e.getInt32(),vPhaseAC:e.getInt32(),pfA:e.getInt16()/1e3,pfB:e.getInt16()/1e3,pfC:e.getInt16()/1e3,pf:e.getInt16()/1e3,vaA:e.getInt32(),vaB:e.getInt32(),vaC:e.getInt32(),vaSum:e.getInt32(),uBatteryRtc:e.getInt16()}};var Ru=Wo;var Ou=function(t){var e=new GA(t);var r=t.length>tn;var a=e.getDate();var n=e.getEnergyPeriods(r?Ja:$a);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var lu=tn+2;var du=SE;var cu=function(t){var e=new GA(t);var r=t.length>lu;var a=e.getUint8();var n=e.getUint8();var i=e.getDate();var s=e.getEnergyPeriods(r?Ja:$a);if(r){return{channel:a,channelParameter:n,date:i,energies:s,dstHour:e.getUint8()}}return{channel:a,channelParameter:n,date:i,energies:s}};var Uu=pE;var pu=function(t){var e=new GA(t);var r=t.length>tn;var a=e.getDate();var n=e.getEnergyPeriods(r?Ja:$a);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var Pu=OE;var Iu=function(t){var e=new GA(t);var r=t.length>tn;var a=e.getDate();var n=e.getEnergyPeriods(r?Ja:$a);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var Mu=IE;var mu=function(t){var e=new GA(t);var r=t.length>tn;var a=e.getDate();var n=e.getEnergyPeriods(r?Ja:$a);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var Nu=RE;var Su=function(t){var e=new GA(t);var r=t.length>tn;var a=e.getDate();var n=e.getEnergyPeriods(r?Ja:$a);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var yu=PE;var Du=function(t){var e=new GA(t);var r=t.length>tn;var a=e.getDate();var n=e.getEnergyPeriods(r?Ja:$a);if(r){return{date:a,energies:n,dstHour:e.getUint8()}}return{date:a,energies:n}};var Cu=Xo;var Lu=function(t){var e=new GA(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var Fu=UE;var Vu=function(t){var e=new GA(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var xu=eE;var wu=function(t){var e=new GA(t);return e.getMonthMaxDemandResponse()};var Yu=NE;var Hu=function(t){var e=new GA(t);return e.getMonthMaxDemandResponse()};var Wu=zo;var Gu=function(t){var e=new GA(t);return e.getOperatorParameters()};var Xu=AE;var Bu=function(t){var e=new GA(t);return e.getOperatorParametersExtended()};var bu=TE;var Ku=function(t){var e=new GA(t);return e.getOperatorParametersExtended2()};var zu=uE;var Zu=0;var ju=function(t){if(t.length!==Zu){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Qu=fE;var ku=0;var qu=function(t){if(t.length!==ku){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var $u=HE;var Ju=0;var tf=function(t){if(t.length!==Ju){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ef={};var rf=KE;var af=Io(ef,rf);ef[Lt]=Vt;ef[$n]=ti;ef[ei]=ri;ef[li]=di;ef[yi]=Di;ef[Ci]=Li;ef[Fi]=Vi;ef[Yi]=Gi;ef[bi]=Ki;ef[zi]=Zi;ef[ji]=Qi;ef[ki]=qi;ef[$i]=Ji;ef[ts]=es;ef[rs]=ns;ef[is]=os;ef[Es]=vs;ef[hs]=As;ef[us]=fs;ef[gs]=Ts;ef[Rs]=ls;ef[ds]=Us;ef[ps]=Is;ef[Ms]=Ns;ef[Ss]=Ds;ef[Cs]=Fs;ef[Vs]=ws;ef[Ys]=Ws;ef[Gs]=Bs;ef[bs]=zs;ef[ks]=$s;ef[Zs]=Qs;ef[Js]=eo;ef[ro]=no;ef[io]=oo;ef[Eo]=vo;ef[ho]=Ao;ef[uo]=go;ef[To]=Oo;ef[zE]=ZE;ef[pA]=IA;ef[XA]=BA;ef[bA]=KA;ef[ZA]=jA;ef[QA]=kA;ef[qA]=$A;ef[JA]=tu;ef[ru]=au;ef[nu]=iu;ef[su]=ou;ef[_u]=vu;ef[hu]=Au;ef[uu]=fu;ef[gu]=Tu;ef[Ru]=Ou;ef[du]=cu;ef[Uu]=pu;ef[Pu]=Iu;ef[Mu]=mu;ef[Nu]=Su;ef[yu]=Du;ef[Cu]=Lu;ef[Fu]=Vu;ef[xu]=wu;ef[Yu]=Hu;ef[Wu]=Gu;ef[Xu]=Bu;ef[bu]=Ku;ef[ks]=$s;ef[zu]=ju;ef[Qu]=qu;ef[$u]=tf;var nf=145;var sf=30;var of=function(t){if(t[0]!==sf){return{}}var e=t[1];var r=t[3];var a=t.slice(4,e+2);var n=co(t.slice(0,e+2));var i=t[e+2];if(r===nf&&n===i){return a}return null};fromBytes=af;getDataSegment=of})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
