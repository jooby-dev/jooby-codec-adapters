// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function n(t,e,r){return(e=A(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,s,E=[],o=!0,_=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=a.call(r)).done)&&(E.push(n.value),E.length!==e);o=!0);}catch(t){_=!0,i=t}finally{try{if(!o&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(_)throw i}}return E}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){return e(t)||a(t,r)||f(t,r)||s()}function _(t){return e(t)||i(t)||f(t)||s()}function h(t){return r(t)||i(t)||f(t)||E()}function v(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function A(t){var e=v(t,"string");return"symbol"==typeof e?e:e+""}function f(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var u=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map((function(t){return t.padStart(2,"0")})).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var n=new Array(r);for(var i=0;i<r;i++){n[i]=parseInt(e.substring(i*2,i*2+2),16)}return n};var T={separator:" ",prefix:""};var R=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},T,e),n=r.separator,i=r.prefix;return t.map((function(t){return"".concat(i).concat(t.toString(16).padStart(2,"0"))})).join(n)};var g=0;var O=19;var l="activateRatePlan";var U=0;var c=function(t){if(t.length!==U){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var d=1;var p=2;var P=3;var I=4;var N=Math.log,M=Math.pow,S=Math.LN2;var C=function(t,e,r,n,i){var a,s,E=i*8-n-1,o=(1<<E)-1,_=o>>1,h=-7,v=r?i-1:0,A=r?-1:1,f=t[e+v];v+=A;a=f&(1<<-h)-1;f>>=-h;h+=E;for(;h>0;a=a*256+t[e+v],v+=A,h-=8);s=a&(1<<-h)-1;a>>=-h;h+=n;for(;h>0;s=s*256+t[e+v],v+=A,h-=8);if(a===0){a=1-_}else if(a===o){return s?NaN:f?-Infinity:Infinity}else{s=s+M(2,n);a=a-_}return(f?-1:1)*s*M(2,a-n)};var y=function(t,e,r,n,i,a){var s,E,o,_=a*8-i-1,h=(1<<_)-1,v=h>>1,A=i===23?M(2,-24)-M(2,-77):0,f=n?0:a-1,u=n?1:-1,T=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){E=r!==r?1:0;s=h}else{s=N(r)/S|0;if(r*(o=M(2,-s))<1){s--;o*=2}if(s+v>=1){r+=A/o}else{r+=A*M(2,1-v)}if(r*o>=2){s++;o/=2}if(s+v>=h){E=0;s=h}else if(s+v>=1){E=(r*o-1)*M(2,i);s=s+v}else{E=r*M(2,v-1)*M(2,i);s=0}}for(;i>=8;t[e+f]=E&255,f+=u,E/=256,i-=8);s=s<<i|E;_+=i;for(;_>0;t[e+f]=s&255,f+=u,s/=256,_-=8);t[e+f-u]|=T*128};var m=[1,0];var D=[2,1,0];var L=[3,2,1,0];var F=[0,1];var V=[0,1,2];var w=[0,1,2,3];var Y=function(t,e){return t[e]};var x=function(t,e,r){var n=r?F:m;var i=t[e+n[0]];var a=t[e+n[1]]<<8;return i|a};var H=function(t,e,r){var n=r?V:D;var i=t[e+n[0]];var a=t[e+n[1]]<<8;var s=t[e+n[2]]<<16;return i|a|s};var W=function(t,e,r){var n=r?w:L;var i=t[e+n[3]]*16777216;var a=t[e+n[2]]*65536;var s=t[e+n[1]]*256;var E=t[e+n[0]];return i+a+s+E};var G=function(t,e,r){t[e]=r&255};var X=function(t,e,r,n){var i=n?F:m;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255};var B=function(t,e,r,n){var i=n?V:D;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255};var b=function(t,e,r,n){var i=n?w:L;t[e+i[0]]=r&255;t[e+i[1]]=r>>>8&255;t[e+i[2]]=r>>>16&255;t[e+i[3]]=r>>>24&255};function K(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}K.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){G(this.data,this.offset,t<0?t|256:t);this.offset+=d},getInt8:function(){var t=Y(this.data,this.offset);this.offset+=d;return t&128?t^-256:t},setUint8:function(t){G(this.data,this.offset,t);this.offset+=d},getUint8:function(){var t=Y(this.data,this.offset);this.offset+=d;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;X(this.data,this.offset,t<0?t|65536:t,e);this.offset+=p},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=x(this.data,this.offset,t);this.offset+=p;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;X(this.data,this.offset,t,e);this.offset+=p},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=x(this.data,this.offset,t);this.offset+=p;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=P},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=H(this.data,this.offset,t);this.offset+=P;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;B(this.data,this.offset,t,e);this.offset+=P},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=H(this.data,this.offset,t);this.offset+=P;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=I},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=W(this.data,this.offset,t);this.offset+=I;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;b(this.data,this.offset,t,e);this.offset+=I},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=W(this.data,this.offset,t);this.offset+=I;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;y(this.data,this.offset,t,e,23,4);this.offset+=I},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=C(this.data,this.offset,t,23,4);this.offset+=I;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(h(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(K.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var z=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var n in e){if(n in t&&e[n]){r|=t[n]}}return r};var Z=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var n in t){r[n]=(e&t[n])!==0}return r};var Q=function(t,e,r){return(1<<e)-1&t>>r-1};var j=function(t,e,r,n){var i=(1<<e)-1<<r-1;var a=n;var s=t;s&=~i;a<<=r-1;s|=a;return s};var k="x";var q=[".","1","3","R","M"];var $=[".","A","G","R","T","D"];var J=[".","0","1","2","3","4","5"];var tt=[".","A","B","C","D","E","F"];var et=[".","A","B","C","D","E","F","H","K","G"];var rt=[".","1","2","3","4"];var nt=[".","L","M","Z","K"];var it=[".","0","1","2","3","4","5","6","7","8","9"];var at=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var st=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Et=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var ot=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var _t=function(t){return[t>>4,t&15]};var ht=function(t){var e=new Array(t.length*2).fill(0);t.forEach((function(t,r){var n=_t(t),i=o(n,2),a=i[0],s=i[1];e[r*2]=a;e[r*2+1]=s}));return e};var vt=function(t){var e=[];t.forEach((function(t){return e.push(t.toString(16))}));if(t.length&1){e.push("0")}return u(e.join(""))};var At=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(q[t[0]]??k);e.push($[t[1]]??k);e.push(J[t[2]]??k);e.push(J[t[3]]??k);e.push(".");e.push(tt[t[4]]??k);e.push(et[t[5]]??k);e.push(".");e.push(rt[t[6]]??k);e.push(nt[t[7]]??k);var r=t[8];e.push(it[t[9]]??k);e.push("-");var n;if(t.length<14||t[12]===0&&t[13]===0){e.push(at[t[10]]??k);n=11}else if(t[13]===0){e.push(at[t[10]]??k);e.push(at[t[11]]??k);n=12}else{e.push(at[t[10]]??k);e.push(at[t[11]]??k);e.push(at[t[12]]??k);n=13}var i=t[n];if(i&&i!==0){e.push(Et[i]??k)}return{type:e.join(""),revision:r,meterType:0}};var ft=function(t,e,r){var n=[];if(t.length<11){throw new Error("Wrong format")}n.push(q.indexOf(t[0]));n.push($.indexOf(t[1]));n.push(J.indexOf(t[2]));n.push(J.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}n.push(tt.indexOf(t[5]));n.push(et.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}n.push(rt.indexOf(t[8]));n.push(nt.indexOf(t[9]));n.push(r??0);n.push(it.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var i=t.length>13?t.length-1:t.length;for(var a=12;a<i;a++){n.push(at.indexOf(t[a]))}if(i<t.length){n.push(Et.indexOf(t[i]))}var s=vt(n);var E=new Array(9).fill(0);E[0]=0;for(var o=0;o<s.length;o++){E[o+(s.length<8?1:0)]=s[o]}return E};var ut=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(q[t[0]]??k);e.push($[t[1]]??k);e.push(r);for(var n=2;n<t.length;n++){if(t[n]!==0){e.push(st[t[n]]??k)}}return{type:e.join(""),meterType:0}};var Tt=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(q.indexOf(t[0]));e.push($.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(st.indexOf(t[r]))}var n=vt(e);if(n.length===8){return n}if(n.length>8){throw new Error("Wrong format")}var i=new Array(8).fill(0);for(var a=0;a<n.length;a++){i[a]=n[a]}return i};var Rt=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(q[t[0]]??k);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push(ot[t[r]]??k)}}return{type:e.join(""),meterType:0}};var gt=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(q.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push(ot.indexOf(t[r]))}var n=vt(e);var i=new Array(8).fill(0);for(var a=0;a<n.length&&a<8;a++){i[a]=n[a]}return i};var Ot=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var n=r.indexOf(t[0])!==-1?2:0;var i=ht(t.slice(0,8));var a=i[n];var s=q[a];if(s==="1"||s==="3"){e=At(i.slice(n))}else{e=s==="M"?Rt(i):ut(i)}e.meterType=t[8];return e};var lt=function(t,e){var r=t.type,n=t.revision,i=t.meterType;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var a;var s=r.substring(4);var E=r[4];if(E==="1"||E==="3"){a=ft(s,e,n)}else{a=E==="M"?gt(s):Tt(s)}a[8]=i;return a};var Ut=80;var ct=81;var dt=82;var pt=83;var Pt=84;var It=85;var Nt=86;var Mt=87;var St=88;var Ct=89;var yt=90;var mt=91;var Dt=255;var Lt=Object.freeze({__proto__:null,DATA_REQUEST:Ut,DATA_RESPONSE:ct,FRAGMENT_REQUEST:yt,FRAGMENT_RESPONSE:mt,IDENT_REQUEST:dt,IDENT_RESPONSE:pt,INVALID:Dt,L2_CHECK_ADDRESS_REQUEST:Nt,L2_CHECK_ADDRESS_RESPONSE:Mt,L2_RM_ADDRESS_REQUEST:St,L2_RM_ADDRESS_RESPONSE:Ct,L2_SET_ADDRESS_REQUEST:Pt,L2_SET_ADDRESS_RESPONSE:It});var Ft=function(t){var e={};for(var r in t){var n=t[r];e[n]=r}return e};var Vt=Ft(Lt);var wt=1;var Yt=2;var xt=3;var Ht=16;var Wt=17;var Gt=18;var Xt=19;var Bt=20;var bt=21;var Kt=32;var zt=33;var Zt=34;var Qt=35;var jt=36;var kt=37;var qt=38;var $t=39;var Jt=40;var te=41;var ee=49;var re=50;var ne=51;var ie=52;var ae=53;var se=54;var Ee=55;var oe=56;var _e=57;var he=64;var ve=65;var Ae=66;var fe=67;var ue=68;var Te=69;var Re=70;var ge=71;var Oe=72;var le=73;var Ue=74;var ce=75;var de=76;var pe=77;var Pe=78;var Ie=79;var Ne=80;var Me=81;var Se=82;var Ce=83;var ye=84;var me=85;var De=86;var Le=87;var Fe=88;var Ve=89;var we=96;var Ye=97;var xe=98;var He=99;var We=100;var Ge=101;var Xe=102;var Be=103;var be=104;var Ke=105;var ze=112;var Ze=113;var Qe=114;var je=115;var ke=116;var qe=117;var $e=118;var Je=119;var tr=120;var er=121;var rr=122;var nr=123;var ir=124;var ar=125;var sr=144;var Er=145;var or=147;var _r=148;var hr=156;var vr=157;var Ar=158;var fr=159;var ur=160;var Tr=161;var Rr=162;var gr=176;var Or=177;var lr=178;var Ur=179;var cr=180;var dr=181;var pr=182;var Pr=183;var Ir=208;var Nr=224;var Mr=225;var Sr=226;var Cr=227;var yr=228;var mr=229;var Dr=230;var Lr=Object.freeze({__proto__:null,ACCESS_CLOSED:Ht,ACCPARAM_BAD:Qe,ACCPARAM_EXT_BAD:je,BAD_TEST_EEPROM:be,BAD_TEST_FRAM:Ke,BAT_FAULT:Ce,BAT_OK:Se,BIPOLAR_POWER_FAULT:cr,BIPOLAR_POWER_OK:dr,BLOCK_TARIFF_BAD:qe,CALC_PERIOD_BAD:ke,CALFLAG_RESET:Be,CALFLAG_SET:Xe,CALIBR_PARAM_BAD:$e,CAL_FAULT:me,CAL_OK:ye,CASE_CLOSE:Xt,CASE_MODULE_CLOSE:ar,CASE_MODULE_OPEN:ir,CASE_OPEN:Gt,CASE_TERMINAL_CLOSE:nr,CASE_TERMINAL_OPEN:rr,CHANGE_ACCESS_KEY0:Kt,CHANGE_ACCESS_KEY1:zt,CHANGE_ACCESS_KEY2:Zt,CHANGE_ACCESS_KEY3:Qt,CHANGE_COR_TIME:te,CHANGE_PAR_LOCAL:jt,CHANGE_PAR_REMOTE:kt,CHANGE_TARIFF_TBL:re,CLOCK_FAULT:Le,CLOCK_OK:De,CMD_CHANGE_TIME:qt,CMD_RELAY_2_OFF:Ye,CMD_RELAY_2_ON:we,CMD_RELAY_OFF:Jt,CMD_RELAY_ON:$t,CROSSZERO_ENT0:xe,CROSSZERO_ENT1:He,CROSSZERO_ENT2:We,CROSSZERO_ENT3:Ge,CROSSZERO_EXP_ENT0:Ar,CROSSZERO_EXP_ENT1:fr,CROSSZERO_EXP_ENT2:ur,CROSSZERO_EXP_ENT3:Tr,CURRENT_UNEQUIL_FAULT:lr,CURRENT_UNEQUIL_OK:Ur,EM_MAGNETIC_OFF:Or,EM_MAGNETIC_ON:gr,ENERGY_REG_FAULT:wt,ENERGY_REG_OVERFLOW:ee,ERR_ACCESS:Wt,F_MAX_OK:Oe,F_MAX_OVER:le,F_MIN_OK:Ue,F_MIN_OVER:ce,I_MAX_OK:de,I_MAX_OVER:pe,MAGNETIC_OFF:bt,MAGNETIC_ON:Bt,NVRAM_FAULT:Ir,OP_PAR_FAULT:xt,POWERSALDO_OK:Ne,POWERSALDO_OVER:Me,POWER_A_OFF:Fe,POWER_A_ON:Ve,POWER_OVER_RELAY_OFF:vr,P_MAX_OK:Pe,P_MAX_OVER:Ie,RELAY_HARD_BAD_OFF:sr,RELAY_HARD_BAD_ON:or,RELAY_HARD_OFF:_r,RELAY_HARD_ON:Er,RELAY_OFF:Ee,RELAY_ON:se,RESET_EM_FLAG:pr,RESET_MAGN_FLAG:Pr,RESTART:oe,SALDO_EN_BAD:tr,SALDO_PARAM_BAD:Ze,SET_DEMAND_EN_10MIN:Cr,SET_DEMAND_EN_15MIN:yr,SET_DEMAND_EN_1MIN:Nr,SET_DEMAND_EN_30MIN:mr,SET_DEMAND_EN_3MIN:Mr,SET_DEMAND_EN_5MIN:Sr,SET_DEMAND_EN_60MIN:Dr,SET_NEW_SALDO:ze,SET_SALDO_PARAM:hr,SET_TARIFF_TBL:ne,SUMMER_TIME:ie,TIME_CORRECT:er,TIME_CORRECT_NEW:Rr,T_MAX_OK:ue,T_MAX_OVER:Te,T_MIN_OK:Re,T_MIN_OVER:ge,VENDOR_PAR_FAULT:Yt,V_MAX_OK:he,V_MAX_OVER:ve,V_MIN_OK:Ae,V_MIN_OVER:fe,WD_RESTART:_e,WINTER_SUMMER_BAD:Je,WINTER_TIME:ae});var Fr=Ft(Lr);var Vr={type:Ut,destination:65535,source:65534};var wr=11;var Yr=7;var xr=4;var Hr=48;var Wr=50;var Gr=3+Hr*2;var Xr={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_COEFFICIENT_PHASE_A:524288,POWER_COEFFICIENT_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var Br={...Xr,AUTO_SCREEN_SCROLLING:2147483648};var br={...Xr,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Kr={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_0:8,RELAY_ON_TARIFF_1:16,RELAY_ON_TARIFF_2:32,RELAY_ON_TARIFF_3:64,RELAY_ON_V_GOOD:128};var zr={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_0:4,RELAY_OFF_TARIFF_1:8,RELAY_OFF_TARIFF_2:16,RELAY_OFF_TARIFF_3:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Zr={RELAY_OFF_LIM_TARIFF_0:2,RELAY_OFF_LIM_TARIFF_1:4,RELAY_OFF_LIM_TARIFF_2:8,RELAY_OFF_LIM_TARIFF_3:16,RELAY_OFF_PF_MIN:32};var Qr={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var jr={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var kr={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var qr={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var $r={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Jr={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUIL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var tn={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var en={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var rn={UNEQUIL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var nn={RELAY_OFF_LIMIT_P_MINUS_T1:4,RELAY_OFF_LIMIT_P_MINUS_T2:8,RELAY_OFF_LIMIT_P_MINUS_T3:16,RELAY_OFF_LIMIT_P_MINUS_T4:32};function an(t,e,r){var n=r>>xr;var i=new Array(xr).fill(0);i.forEach((function(e,r){var a=!!Q(n,1,r+1);if(a){i[r]=t.getUint32()}else{i[r]=null}}));return i}function sn(t,e,r){var n=1+xr;var i=e;r.forEach((function(t,e){i=j(i,1,e+n,Number(!!t))}));t.setUint8(i)}function En(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function on(t,e){var r=e.tariff,n=e.energy;if(r!==undefined&&n!==undefined){t.setUint16(r<<14|n&16383)}else{t.setUint16(65535)}}function _n(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;K.call(this,t,e)}_n.prototype=Object.create(K.prototype);_n.prototype.constructor=_n;_n.getDayProfileFromByte=function(t){return{tariff:Q(t,2,1),isFirstHalfHour:!Q(t,1,3),hour:Q(t,5,4)}};_n.getByteFromDayProfile=function(t){var e=0;e=j(e,2,1,t.tariff);e=j(e,1,3,+!t.isFirstHalfHour);e=j(e,5,4,t.hour);return e};_n.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};_n.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:Z(Br,2147496324),relaySet4:Z(Qr,0),relaySet3:Z(Zr,0),relaySet2:Z(zr,3),relaySet1:Z(Kr,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:Z(kr,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:Z(br,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:Z(jr,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};_n.prototype.getFrameHeader=function(){var t=this.getUint8();var e=Vt[t];var r=this.getUint16();var n=this.getUint16();return{type:t,typeName:e,destination:r,source:n}};_n.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?Vr.type:e,n=t.destination,i=n===void 0?Vr.destination:n,a=t.source,s=a===void 0?Vr.source:a;this.setUint8(r);this.setUint16(i);this.setUint16(s)};_n.prototype.getDeviceId=function(){var t=R(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var n=R(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:n}};_n.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,n=t.year,i=t.serial;this.setBytes(u(e));this.setUint8(r);this.setUint8(n);this.setBytes(u(i))};_n.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};_n.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};_n.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};_n.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};_n.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};_n.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};_n.prototype.getDayProfile=function(){return _n.getDayProfileFromByte(this.getUint8())};_n.prototype.setDayProfile=function(t){this.setUint8(_n.getByteFromDayProfile(t))};_n.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(Yr).fill(0).map((function(){return t.getUint8()}))}};_n.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach((function(t){return e.setUint8(t)}))};_n.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};_n.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};_n.prototype.getDeviceType=function(){return Ot(this.getBytes(9))};_n.prototype.setDeviceType=function(t){this.setBytes(lt(t))};_n.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:Z(Br,this.getUint32()),relaySet4:Z(Qr,this.getUint8()),relaySet3:Z(Zr,this.getUint8()),relaySet2:Z(zr,this.getUint8()),relaySet1:Z(Kr,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:Z(kr,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:Z(br,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:Z(jr,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};_n.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(z(Br,t.displaySet));this.setUint8(z(Qr,t.relaySet4));this.setUint8(z(Zr,t.relaySet3));this.setUint8(z(zr,t.relaySet2));this.setUint8(z(Kr,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(z(kr,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(z(br,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(z(jr,t.relaySet5));this.setUint8(e)};_n.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Q(t,xr,1);var r=an(this,e,t);return{energyType:e,energies:r}};_n.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,n=t.energies;if(r){sn(this,r,n)}n.forEach((function(t){if(t!==null){e.setUint32(t)}}))};_n.prototype.getEnergies=function(){var t=this;return new Array(xr).fill(0).map((function(){return t.getInt32()}))};_n.prototype.setEnergies=function(t){var e=this;t.forEach((function(t){return e.setUint32(t)}))};_n.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};_n.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};_n.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map((function(){return t.getUint32()})),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};_n.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach((function(t){return e.setUint32(t)}));this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};_n.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map((function(){return e.getUint16()}));return r.map((function(t){return En(t)}))};_n.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return on(e,t)}))};_n.prototype.getEventStatus=function(){var t=this.getUint16();return Z(qr,t)};_n.prototype.setEventStatus=function(t){this.setUint16(z(qr,t))};_n.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=Z($r,this.getUint8());var r=Z(Jr,this.getUint8());var n=Z(tn,this.getUint8());var i=Z(en,this.getUint8());var a=Z(rn,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:n,status2:i,status3:a}};_n.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,n=t.relayStatus2,i=t.status1,a=t.status2,s=t.status3;this.setUint16(e);this.setUint8(z($r,r));this.setUint8(z(Jr,n));this.setUint8(z(tn,i));this.setUint8(z(en,a));this.setUint8(z(rn,s))};_n.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Fr[e];switch(e){case vr:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case qt:case er:if(r<8){return t}t.newDate=this.getDateTime();break}return t};_n.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case vr:for(var e of t.power){this.setUint8(e)}break;case qt:case er:this.setDateTime(t.newDate);break}};_n.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};_n.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};_n.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(xr).fill(0).map((function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}));return{date:e,power:r}};_n.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach((function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};_n.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:Z(nn,this.getUint8())}};_n.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,n=t.pmaxMinusThreshold2,i=t.pmaxMinusThreshold3,a=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(n);this.setUint32(i);this.setUint8(z(nn,a))};_n.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(xr).fill(0).map((function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}}))};_n.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach((function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)}))};var hn=0;var vn=128;var An=129;var fn=130;var un=131;var Tn=132;var Rn=133;var gn=134;var On=135;var ln=136;var Un=137;var cn=144;var dn=145;var pn=146;var Pn=147;var In=149;var Nn=151;var Mn=152;var Sn=153;var Cn=154;var yn=155;var mn=156;var Dn=159;var Ln=160;var Fn=240;var Vn=Object.freeze({__proto__:null,ACCESS_DENIED:Pn,BAD_ARRAY_INDEX:gn,BAD_BLOCK_NUMBER:mn,BAD_DATA_LENGTH:Rn,BAD_MESSAGE:Tn,BAD_RATE_PLAN_ID:ln,BAD_RATE_PLAN_SIZE:Un,BAD_RESPONSE_LENGTH:cn,BAD_SALDO_WRITE:In,BLOCKED_METER:Nn,CALIBRATION_DISABLED:pn,DECRYPTION_FAILURE:fn,INTERNAL:Fn,INVALID_CORRECTION_INTERVAL:Cn,NOT_ALIGNED_DATA:An,NOT_PREPARED_RATE_PLAN:On,NO_DATA_FOR_DATE:dn,OK:hn,OUT_OFF_RANGE:Dn,SET_METER_TYPE_FAILURE:Ln,TIME_CORRECTION_FAILURE:Sn,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:yn,UNENCRYPTED_COMMAND_DISABLED:Mn,UNKNOWN_COMMAND:vn,UNKNOWN_PROTOCOL:un});Ft(Vn);var wn=112;var Yn="getBuildVersion";var xn=6;var Hn=function(t){if(t.length!==xn){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=o(t,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],E=e[5];return{date:{date:r,month:n,year:i},version:"".concat(a,".").concat(s,".").concat(E)}};var Wn=62;var Gn="getCorrectTime";var Xn=function(t){var e=new _n(t);return e.getTimeCorrectionParameters()};var Bn=0;var bn=1;var Kn=2;var zn=3;var Zn=4;var Qn=5;var jn=6;var kn=7;var qn=8;var $n=9;var Jn=10;var ti=11;var ei=12;var ri=13;var ni=14;var ii=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Jn,CASE_OPEN:Bn,CASE_TERMINAL_OPEN:$n,DEVICE_FAILURE:qn,ERROR_ACCESS:Qn,MAGNETIC_ON:bn,PARAMETERS_UPDATE_LOCAL:zn,PARAMETERS_UPDATE_REMOTE:Kn,PROTECTION_RESET_EM:ri,PROTECTION_RESET_MAGNETIC:ni,RESTART:Zn,TARIFF_TABLE_GET:ei,TARIFF_TABLE_SET:ti,TIME_CORRECT:kn,TIME_SET:jn});Ft(ii);var ai=7;var si="getDateTime";var Ei=function(t){var e=new _n(t);return e.getDateTime()};var oi=4;var _i=4294967295;var hi={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var vi=function(t){var e={};Object.keys(t).forEach((function(r){e[r]=!!t[r]}));return z(hi,e)};var Ai=function(t){return t<oi?1<<t:0};var fi=function(t){return t<oi?1<<t<<4:0};var ui=function(t,e){var r=0;if(t<oi){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=Ai(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=fi(t)}}return r};function Ti(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;K.call(this,t,e)}Ti.prototype=Object.create(K.prototype);Ti.prototype.constructor=Ti;Ti.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};Ti.prototype.setDate=function(t){var e=t.year,r=t.month,n=t.date;var i=e<<1|r>>3&1;var a=r<<5&224|n&31;this.setUint8(i);this.setUint8(a)};Ti.prototype.getEnergiesFlags=function(){var t=this.getUint8();return Z(hi,t)};Ti.prototype.setEnergiesFlags=function(t){this.setUint8(vi(t))};Ti.prototype.getHalfhoursEnergy=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();e.push(n===_i?undefined:n)}return e};Ti.prototype.setHalfhoursEnergy=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?_i:r)}}};Ti.prototype.getHalfhoursEnergies=function(t,e){var r={};if(t["A+"]){r["A+"]=this.getHalfhoursEnergy(e)}if(t["A+R+"]){r["A+R+"]=this.getHalfhoursEnergy(e)}if(t["A+R-"]){r["A+R-"]=this.getHalfhoursEnergy(e)}if(t["A-"]){r["A-"]=this.getHalfhoursEnergy(e)}if(t["A-R+"]){r["A-R+"]=this.getHalfhoursEnergy(e)}if(t["A-R-"]){r["A-R-"]=this.getHalfhoursEnergy(e)}return r};Ti.prototype.setHalfhoursEnergies=function(t){this.setHalfhoursEnergy(t["A+"]);this.setHalfhoursEnergy(t["A+R+"]);this.setHalfhoursEnergy(t["A+R-"]);this.setHalfhoursEnergy(t["A-"]);this.setHalfhoursEnergy(t["A-R+"]);this.setHalfhoursEnergy(t["A-R-"])};Ti.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&hi["A+"]){e["A+"]=this.getUint32()}if(t&hi["A+R+"]){e["A+R+"]=this.getUint32()}if(t&hi["A+R-"]){e["A+R-"]=this.getUint32()}return e};Ti.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};Ti.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&hi["A-"]){e["A-"]=this.getUint32()}if(t&hi["A-R+"]){e["A-R+"]=this.getUint32()}if(t&hi["A-R-"]){e["A-R-"]=this.getUint32()}return e};Ti.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};Ti.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(oi).fill(null);for(var n=0;n<oi;n++){if(e&Ai(n)){r[n]=this.getAPlusTariffEnergies(t)}}for(var i=0;i<oi;i++){if(e&fi(i)){r[i]={...r[i],...this.getAMinusTariffEnergies(t)}}}return r};Ti.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var n=0;t.forEach((function(t,e){if(t){r|=vi(t);n|=ui(e,t)}}));this.setUint8(r);this.setUint8(n);t.forEach((function(t){return e.setAPlusTariffEnergies(t)}));t.forEach((function(t){return e.setAMinusTariffEnergies(t)}))};Ti.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};Ti.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,n=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(n)}};Ti.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&hi["A+"]){e["A+"]=this.getPowerMax()}if(t&hi["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&hi["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};Ti.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};Ti.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&hi["A-"]){e["A-"]=this.getPowerMax()}if(t&hi["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&hi["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};Ti.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};Ti.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(oi).fill(null);for(var n=0;n<oi;n++){if(e&Ai(n)){r[n]=this.getAPlusTariffPowerMax(t)}}for(var i=0;i<oi;i++){if(e&fi(i)){r[i]={...r[i],...this.getAMinusTariffPowerMax(t)}}}return r};Ti.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var n=0;t.forEach((function(t,e){if(t){r|=vi(t);n|=ui(e,t)}}));this.setUint8(r);this.setUint8(n);t.forEach((function(t){return e.setAPlusTariffPowerMax(t)}));t.forEach((function(t){return e.setAMinusTariffPowerMax(t)}))};var Ri=255;var gi=59;var Oi="getDayProfile";var li=function(t){var e=t.indexOf(Ri);var r=e===-1?t:t.slice(0,e);return{periods:h(r).map(_n.getDayProfileFromByte)}};var Ui=5;var ci="getDeviceId";var di=function(t){var e=new _n(t);return e.getDeviceId()};var pi=4;var Pi="getDeviceType";var Ii=function(t){var e=new _n(t);return e.getDeviceType()};var Ni=3+1;var Mi=4;var Si=51;var Ci="getEvents";var yi=Ni+255*Mi;var mi=function(t){if(t.length>yi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new _n(t);var r=e.getDate();var n=e.getUint8();var i=[];while(!e.isEmpty){i.push(e.getEvent())}return{date:r,eventsNumber:n,events:i}};var Di=14;var Li=20;var Fi=52;var Vi="getEventsCounters";var wi=function(t){if(t.length!==Di&&t.length!==Li){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new _n(t);var r=e.getUint16();var n=e.getUint16();var i=e.getUint16();var a=e.getUint16();var s=e.getUint16();var E=e.getUint16();var o=e.getUint16();return{accessClosed:E,accessError:s,localParametersChange:i,remoteParametersChange:a,powerOff:n,restart:r,setClock:o}};var Yi=1;var xi="getEventStatus";var Hi=function(t){var e=new _n(t,true);return e.getEventStatus()};var Wi=111;var Gi="getHalfhoursEnergies";var Xi=function(t){var e=new Ti(t);var r=e.getDate();var n=e.getEnergiesFlags();var i=e.getUint8();var a=e.getUint8();return{date:r,firstHalfhour:i,halfhoursNumber:a,energies:e.getHalfhoursEnergies(n,a)}};var Bi=109;var bi="getMagneticFieldThreshold";var Ki=function(t){var e=new _n(t);return{induction:e.getUint16(),threshold:e.getUint16(),inductionCoefficient:e.getUint16()/100,reserved:e.getUint32()}};var zi=122;var Zi="getMeterInfo";var Qi=function(t){var e=o(t,1),r=e[0];return{ten:r}};var ji=113;var ki="getOperatorParametersExtended3";var qi=function(t){var e=new _n(t);return e.getOperatorParametersExtended3()};var $i=44;var Ji="getRatePlanInfo";var ta=1+wr*2;var ea=function(t){if(t.length!==ta){throw new Error("Invalid getRatePlanInfo data size.")}var e=new _n(t);return{tariffTable:e.getUint8(),activePlan:e.getTariffPlan(),passivePlan:e.getTariffPlan()}};var ra=41;var na="getSaldo";var ia=29;var aa=function(t){if(t.length!==ia){throw new Error("Invalid getSaldo data size.")}var e=new _n(t);return{currentSaldo:e.getInt32(),count:e.getUint8(),energy:new Array(4).fill(0).map((function(){return e.getInt32()})),beginSaldoOfPeriod:e.getInt32(),date:{month:e.getUint8(),date:e.getUint8(),hours:e.getUint8(),minutes:e.getUint8()}}};var sa=46;var Ea="getSaldoParameters";var oa=37;var _a=function(t){if(t.length!==oa){throw new Error("Invalid getSaldoParameters data size.")}var e=new _n(t);return e.getSaldoParameters()};var ha=60;var va="getSeasonProfile";var Aa=function(t){var e=new _n(t);return e.getSeasonProfile()};var fa=61;var ua="getSpecialDay";var Ta=function(t){var e=new _n(t);return e.getSpecialDay()};var Ra=40;var ga="getVersion";var Oa=function(t){return{version:String.fromCharCode.apply(null,h(t))}};var la=20;var Ua="prepareRatePlan";var ca=0;var da=function(t){if(t.length!==ca){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var pa=53;var Pa="resetPowerMaxDay";var Ia=0;var Na=function(t){if(t.length!==Ia){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ma=54;var Sa="resetPowerMaxMonth";var Ca=0;var ya=function(t){if(t.length!==Ca){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ma=70;var Da="runTariffPlan";var La=0;var Fa=function(t){if(t.length!==La){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Va=9;var wa="setAccessKey";var Ya=0;var xa=function(t){if(t.length!==Ya){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ha=92;var Wa="setCorrectDateTime";var Ga=0;var Xa=function(t){if(t.length!==Ga){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ba=28;var ba="setCorrectTime";var Ka=0;var za=function(t){if(t.length!==Ka){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Za=8;var Qa="setDateTime";var ja=0;var ka=function(t){if(t.length!==ja){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var qa=16;var $a="setDayProfile";var Ja=0;var ts=function(t){if(t.length!==Ja){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var es=93;var rs="setDisplayParam";var ns=0;var is=function(t){if(t.length!==ns){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var as=114;var ss="setOperatorParametersExtended3";var Es=0;var os=function(t){if(t.length!==Es){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var _s=31;var hs="setOperatorParameters";var vs=0;var As=function(t){if(t.length!==vs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var fs=42;var us="setSaldo";var Ts=0;var Rs=function(t){if(t.length!==Ts){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var gs=47;var Os="setSaldoParameters";var ls=0;var Us=function(t){if(t.length!==ls){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var cs=17;var ds="setSeasonProfile";var ps=0;var Ps=function(t){if(t.length!==ps){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Is=18;var Ns="setSpecialDay";var Ms=0;var Ss=function(t){if(t.length!==Ms){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Cs=100;var ys="setSpecialOperation";var ms=function(t){var e=new _n(t);var r=e.getUint8();var n=!!(r&1);var i=!!(r&2);return{electroMagneticIndication:n,magneticIndication:i}};var Ds=25;var Ls="turnRelayOff";var Fs=0;var Vs=function(t){if(t.length!==Fs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ws=24;var Ys="turnRelayOn";var xs=0;var Hs=function(t){if(t.length!==xs){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ws={encrypt:function(){},decrypt:function(){}};var Gs=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach((function(t){r^=t}));return r};var Xs=3;var Bs=2;var bs=2;var Ks=function(t,e){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=n?.aesKey;var a=[];var s=o(r,2),E=s[0],_=s[1];var v=_&Xs;var A={messageId:E,accessLevel:v,commands:a,bytes:r,lrc:{received:undefined,calculated:0}};var f=r.slice(Bs);var u;if(i&&v!==g){f=h(Ws.decrypt(i,f))}var T=f[f.length-1];f=f.slice(0,-1);var R=Gs(f);if(v!==g||T!==0){if(T!==R){u="Mismatch LRC."}}var O=f[0]&Xs;var l=f.slice(1);if(v!==O){u="Mismatch access levels."}var U=0;do{var c=l[U];var d=l[U+1];var p=bs+d;var P=l.slice(U+bs,U+p);var I={id:c,name:e[c],headerSize:bs,bytes:l.slice(U,U+p)};if(!c){break}try{if(!t[c]){throw new Error("Unsupported command id: ".concat(c,"!"))}I.parameters=t[c](P,n);a.push(I)}catch(t){a.push({command:I,error:t.message})}U+=p}while(U<=l.length);A.lrc.calculated=R;A.lrc.received=T;if(u){return{message:A,error:u}}return A}};var zs=1;var Zs=2;var Qs=3;var js=4;var ks=5;var qs=6;var $s=7;var Js=8;var tE=9;var eE=10;var rE=11;var nE=12;var iE=13;var aE=14;var sE=15;var EE=16;var oE=17;var _E=18;var hE=19;var vE=20;var AE=21;var fE=22;var uE=23;var TE=24;var RE=25;var gE=26;var OE=28;var lE=30;var UE=31;var cE=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:js,ACTIVE_ENERGY_T2:ks,ACTIVE_ENERGY_T3:qs,ACTIVE_ENERGY_T4:$s,ACTIVE_POWER_IN_NEUTRAL:tE,ACTIVE_POWER_PER_PHASE:Js,BATTERY_VOLTAGE:fE,CURRENT_BALANCE:lE,CURRENT_IN_NEUTRAL:rE,CURRENT_IN_PHASE:eE,DATE_MONTH_YEAR:aE,EXPORTED_ACTIVE_ENERGY_T1:EE,EXPORTED_ACTIVE_ENERGY_T2:oE,EXPORTED_ACTIVE_ENERGY_T3:_E,EXPORTED_ACTIVE_ENERGY_T4:hE,HOUR_MINUTE_SECOND:iE,MAGNET_INDUCTION:OE,OPTOPORT_SPEED:UE,POWER_COEFFICIENT_PHASE_A:vE,POWER_COEFFICIENT_PHASE_B:AE,POWER_THRESHOLD_T1:uE,POWER_THRESHOLD_T2:TE,POWER_THRESHOLD_T3:RE,POWER_THRESHOLD_T4:gE,SET_ALL_SEGMENT_DISPLAY:zs,SOFTWARE_VERSION:Zs,TOTAL_ACTIVE_ENERGY:Qs,TOTAL_EXPORTED_ACTIVE_ENERGY:sE,VOLTAGE:nE});Ft(cE);var dE=2400;var pE=9600;var PE={plc:{0:pE,2:dE,4:pE},optoport:{0:dE,2:dE,4:pE}};var IE={plc:Ft(PE.plc),optoport:Ft(PE.optoport)};var NE=1;var ME=2;var SE=1;var CE=2;var yE=3;var mE=4;var DE=17;var LE=18;var FE=19;var VE=20;var wE=21;var YE=22;var xE=23;var HE=32;var WE=33;var GE=34;var XE=35;var BE=36;var bE=37;var KE=38;var zE=39;var ZE=40;var QE=49;var jE=50;var kE=51;var qE=52;var $E=53;var JE=54;var to=55;var eo=56;var ro=57;var no=64;var io=65;var ao=66;var so=67;var Eo=68;var oo=69;var _o=70;var ho=71;var vo=72;var Ao=73;var fo=74;var uo=75;var To=76;var Ro=77;var go=78;var Oo=79;var lo=80;var Uo=81;var co=82;var po=83;var Po=84;var Io=85;var No=86;var Mo=87;var So=88;var Co=89;var yo=90;var mo=91;var Do=92;var Lo=93;var Fo=94;var Vo=95;var wo=96;var Yo=97;var xo=98;var Ho=99;var Wo=100;var Go=101;var Xo=102;var Bo=103;var bo=104;var Ko=105;var zo=106;var Zo=107;var Qo=108;var jo=109;var ko=110;var qo=111;var $o=112;var Jo=113;var t_=114;var e_=115;var r_=116;var n_=117;var i_=118;var a_=119;var s_=120;var E_=121;var o_=122;var __=123;var h_=124;var v_=125;var A_=126;var f_=127;var u_=128;var T_=129;var R_=130;var g_=131;var O_=132;var l_=133;var U_=134;var c_=135;var d_=136;var p_=137;var P_=138;var I_=139;var N_=140;var M_=141;var S_=142;var C_=143;var y_=144;var m_=145;var D_=147;var L_=148;var F_=149;var V_=150;var w_=151;var Y_=152;var x_=153;var H_=154;var W_=155;var G_=156;var X_=157;var B_=158;var b_=159;var K_=160;var z_=161;var Z_=162;var Q_=163;var j_=164;var k_=165;var q_=166;var $_=167;var J_=168;var th=169;var eh=170;var rh=171;var nh=172;var ih=173;var ah=174;var sh=175;var Eh=176;var oh=177;var _h=178;var hh=179;var vh=224;var Ah=225;var fh=226;var uh=227;var Th=228;var Rh=229;var gh=230;var Oh=231;var lh=232;var Uh=Object.freeze({__proto__:null,ACCESS_LOCKED:DE,ACCESS_UNLOCKED:LE,ACCUMULATION_PARAM_BAD:l_,ACCUMULATION_PARAM_EXT_BAD:U_,BAD_TEST_EEPROM:T_,BAD_TEST_FRAM:R_,BATTERY_FAULT:Ko,BATTERY_OK:bo,BLOCK_TARIFF_BAD:d_,CALCULATION_PERIOD_BAD:c_,CALIBRATION_FAULT:Zo,CALIBRATION_FLAG_RESET:u_,CALIBRATION_FLAG_SET:f_,CALIBRATION_OK:zo,CALIBRATION_PARAM_BAD:p_,CASE_CLOSE:wE,CASE_KLEMA_CLOSE:w_,CASE_KLEMA_OPEN:V_,CASE_MODULE_CLOSE:W_,CASE_MODULE_OPEN:H_,CASE_OPEN:VE,CHANGE_ACCESS_KEY0:HE,CHANGE_ACCESS_KEY1:WE,CHANGE_ACCESS_KEY2:GE,CHANGE_ACCESS_KEY3:XE,CHANGE_COR_TIME:$o,CHANGE_PARAMETERS_LOCAL:BE,CHANGE_PARAMETERS_REMOTE:bE,CHANGE_PARAM_CHANNEL1:B_,CHANGE_PARAM_CHANNEL2:b_,CHANGE_PARAM_CHANNEL3:K_,CHANGE_PARAM_CHANNEL4:z_,CHANGE_PARAM_CHANNEL5:Z_,CHANGE_PARAM_CHANNEL6:Q_,CHANGE_TARIFF_TABLE:jE,CHANGE_TARIFF_TABLE_2:Y_,CHANGE_TARIFF_TABLE_3:x_,CLOCK_FAULT:Yo,CLOCK_OK:wo,CMD_CHANGE_TIME:KE,CMD_RELAY_2_OFF:t_,CMD_RELAY_2_ON:Jo,CMD_RELAY_OFF:ZE,CMD_RELAY_ON:zE,COEFFICIENT_TRANSFORMATION_CHANGE:C_,CROSS_ZERO_ENT0:e_,CROSS_ZERO_ENT1:r_,CROSS_ZERO_ENT2:n_,CROSS_ZERO_ENT3:i_,CROSS_ZERO_EXPORT_ENT0:j_,CROSS_ZERO_EXPORT_ENT1:k_,CROSS_ZERO_EXPORT_ENT2:q_,CROSS_ZERO_EXPORT_ENT3:$_,CROSS_ZERO_EXPORT_VARE0:nh,CROSS_ZERO_EXPORT_VARE1:ih,CROSS_ZERO_EXPORT_VARE2:ah,CROSS_ZERO_EXPORT_VARE3:sh,CROSS_ZERO_EXPORT_VARI0:J_,CROSS_ZERO_EXPORT_VARI1:th,CROSS_ZERO_EXPORT_VARI2:eh,CROSS_ZERO_EXPORT_VARI3:rh,CROSS_ZERO_VARE0:__,CROSS_ZERO_VARE1:h_,CROSS_ZERO_VARE2:v_,CROSS_ZERO_VARE3:A_,CROSS_ZERO_VARI0:a_,CROSS_ZERO_VARI1:s_,CROSS_ZERO_VARI2:E_,CROSS_ZERO_VARI3:o_,EM_MAGNETIC_OFF:oh,EM_MAGNETIC_ON:Eh,ENERGY_REGISTER_OVERFLOW:QE,ENERGY_T0_FAULT:SE,ENERGY_T1_FAULT:CE,ENERGY_T2_FAULT:yE,ENERGY_T3_FAULT:mE,ERR_ACCESS:FE,F_MAX_OK:To,F_MAX_OVER:Ro,F_MIN_OK:go,F_MIN_UNDER:Oo,IA_MAX_OK:Po,IA_MAX_OVER:Io,IB_MAX_OK:No,IB_MAX_OVER:Mo,IC_MAX_OK:So,IC_MAX_OVER:Co,IDIFF_OK:Fo,IDIFF_OVER:Vo,MAGNETIC_OFF:xE,MAGNETIC_ON:YE,METER_TROUBLE:F_,OP_PARAM_BAD:I_,OP_PARAM_EXT_BAD:N_,O_PARAMETERS_FAULT:qo,O_PARAMETERS_OK:ko,PA_MAX_OK:yo,PA_MAX_OVER:mo,POWER_A_OFF:Bo,POWER_A_ON:Xo,POWER_B_OFF:Go,POWER_B_ON:Wo,POWER_C_OFF:Ho,POWER_C_ON:xo,POWER_OVER_RELAY_OFF:X_,PV_MAX_OK:Do,PV_MAX_OVER:Lo,P_MAX_A_MINUS_OK:Oh,P_MAX_A_MINUS_OVER:lh,RELAY_HARD_BAD_OFF:y_,RELAY_HARD_BAD_ON:D_,RELAY_HARD_OFF:L_,RELAY_HARD_ON:m_,RELAY_OFF:to,RELAY_ON:JE,RESET_EM_FLAG:_h,RESET_MAGNETIC_FLAG:hh,RESTART:eo,SALDO_ENERGY_BAD:M_,SALDO_PARAM_BAD:O_,SET_DEMAND_EN_10_MIN:uh,SET_DEMAND_EN_15_MIN:Th,SET_DEMAND_EN_1_MIN:vh,SET_DEMAND_EN_30_MIN:Rh,SET_DEMAND_EN_3_MIN:Ah,SET_DEMAND_EN_5_MIN:fh,SET_DEMAND_EN_60_MIN:gh,SET_NEW_SALDO:g_,SET_SALDO_PARAM:G_,SET_TARIFF_TABLE:kE,SUMMER_TIME:qE,TIME_CORRECT:S_,T_MAX_OK:lo,T_MAX_OVER:Uo,T_MIN_OK:co,T_MIN_UNDER:po,VA_MAX_OK:no,VA_MAX_OVER:io,VA_MIN_OK:ao,VA_MIN_UNDER:so,VB_MAX_OK:Eo,VB_MAX_OVER:oo,VB_MIN_OK:_o,VB_MIN_UNDER:ho,VC_MAX_OK:vo,VC_MAX_OVER:Ao,VC_MIN_OK:fo,VC_MIN_UNDER:uo,V_PARAMETERS_FAULT:jo,V_PARAMETERS_OK:Qo,WD_RESTART:ro,WINTER_SUMMER_BAD:P_,WINTER_TIME:$E});var ch=Ft(Uh);var dh=86;var ph="getCriticalEvent";var Ph=9;var Ih=function(t){if(t.length!==Ph){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=o(t,9),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],E=e[5],_=e[6],h=e[7],v=e[8];return{event:r,index:n,date:{year:i,month:a,date:s,hours:E,minutes:_,seconds:h},count:v}};var Nh=4;var Mh={SET_ALL_SEGMENT_DISPLAY:1<<0,SOFTWARE_VERSION:1<<1,TOTAL_ACTIVE_ENERGY:1<<2,ACTIVE_ENERGY_T1:1<<3,ACTIVE_ENERGY_T2:1<<4,ACTIVE_ENERGY_T3:1<<5,ACTIVE_ENERGY_T4:1<<6,TOTAL_REACTIVE_ENERGY:1<<7,REACTIVE_ENERGY_T1:1<<8,REACTIVE_ENERGY_T2:1<<9,REACTIVE_ENERGY_T3:1<<10,REACTIVE_ENERGY_T4:1<<11,TOTAL_NEGATIVE_REACTIVE_ENERGY:1<<12,NEGATIVE_REACTIVE_ENERGY_T1:1<<13,NEGATIVE_REACTIVE_ENERGY_T2:1<<14,NEGATIVE_REACTIVE_ENERGY_T3:1<<15,NEGATIVE_REACTIVE_ENERGY_T4:1<<16,TOTAL_EXPORTED_ACTIVE_ENERGY:1<<17,EXPORTED_ACTIVE_ENERGY_T1:1<<18,EXPORTED_ACTIVE_ENERGY_T2:1<<19,EXPORTED_ACTIVE_ENERGY_T3:1<<20,EXPORTED_ACTIVE_ENERGY_T4:1<<21,TOTAL_EXPORTED_REACTIVE_ENERGY:1<<22,EXPORTED_REACTIVE_ENERGY_T1:1<<23,EXPORTED_REACTIVE_ENERGY_T2:1<<24,EXPORTED_REACTIVE_ENERGY_T3:1<<25,EXPORTED_REACTIVE_ENERGY_T4:1<<26,TOTAL_EXPORTED_NEGATIVE_REACTIVE_ENERGY:1<<27,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T1:1<<28,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T2:1<<29,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T3:1<<30,EXPORTED_NEGATIVE_REACTIVE_ENERGY_T4:1<<31};var Sh={CURRENT_IN_PHASE_A:1<<0,CURRENT_IN_PHASE_B:1<<1,CURRENT_IN_PHASE_C:1<<2,CURRENT_IN_NEUTRAL:1<<3,VOLTAGE_IN_PHASE_A:1<<4,VOLTAGE_IN_PHASE_B:1<<5,VOLTAGE_IN_PHASE_C:1<<6,BATTERY_VOLTAGE:1<<7,FREQUENCY:1<<8,ACTIVE_POWER_SUM:1<<9,ACTIVE_POWER_PHASE_A:1<<10,ACTIVE_POWER_PHASE_B:1<<11,ACTIVE_POWER_PHASE_C:1<<12,REACTIVE_POWER_QPLUS_SUM:1<<13,REACTIVE_POWER_QPLUS_PHASE_A:1<<14,REACTIVE_POWER_QPLUS_PHASE_B:1<<15,REACTIVE_POWER_QPLUS_PHASE_C:1<<16,REACTIVE_POWER_QMINUS_SUM:1<<17,REACTIVE_POWER_QMINUS_PHASE_A:1<<18,REACTIVE_POWER_QMINUS_PHASE_B:1<<19,REACTIVE_POWER_QMINUS_PHASE_C:1<<20,POWER_COEFFICIENT_SUM:1<<21,POWER_COEFFICIENT_PHASE_A:1<<22,POWER_COEFFICIENT_PHASE_B:1<<23,POWER_COEFFICIENT_PHASE_C:1<<24,APPARENT_POWER_QPLUS_SUM:1<<25,APPARENT_POWER_QPLUS_PHASE_A:1<<26,APPARENT_POWER_QPLUS_PHASE_B:1<<27,APPARENT_POWER_QPLUS_PHASE_C:1<<28,APPARENT_POWER_QMINUS_SUM:1<<29,APPARENT_POWER_QMINUS_PHASE_A:1<<30,APPARENT_POWER_QMINUS_PHASE_B:1<<31};var Ch={APPARENT_POWER_QMINUS_PHASE_C:1<<0,MAX_ACTIVE_POWER_DAY_T1:1<<1,MAX_ACTIVE_POWER_DAY_T2:1<<2,MAX_ACTIVE_POWER_DAY_T3:1<<3,MAX_ACTIVE_POWER_DAY_T4:1<<4,MAX_ACTIVE_POWER_MONTH_T1:1<<5,MAX_ACTIVE_POWER_MONTH_T2:1<<6,MAX_ACTIVE_POWER_MONTH_T3:1<<7,MAX_ACTIVE_POWER_MONTH_T4:1<<8,MAX_REACTIVE_POWER_DAY_T1:1<<9,MAX_REACTIVE_POWER_DAY_T2:1<<10,MAX_REACTIVE_POWER_DAY_T3:1<<11,MAX_REACTIVE_POWER_DAY_T4:1<<12,MAX_REACTIVE_POWER_MONTH_T1:1<<13,MAX_REACTIVE_POWER_MONTH_T2:1<<14,MAX_REACTIVE_POWER_MONTH_T3:1<<15,MAX_REACTIVE_POWER_MONTH_T4:1<<16,MAX_NEGATIVE_REACTIVE_POWER_DAY_T1:1<<17,MAX_NEGATIVE_REACTIVE_POWER_DAY_T2:1<<18,MAX_NEGATIVE_REACTIVE_POWER_DAY_T3:1<<19,MAX_NEGATIVE_REACTIVE_POWER_DAY_T4:1<<20,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T1:1<<21,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T2:1<<22,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T3:1<<23,MAX_NEGATIVE_REACTIVE_POWER_MONTH_T4:1<<24,MAX_EXPORTED_ACTIVE_POWER_DAY_T1:1<<25,MAX_EXPORTED_ACTIVE_POWER_DAY_T2:1<<26,MAX_EXPORTED_ACTIVE_POWER_DAY_T3:1<<27,MAX_EXPORTED_ACTIVE_POWER_DAY_T4:1<<28,MAX_EXPORTED_ACTIVE_POWER_MONTH_T1:1<<29,MAX_EXPORTED_ACTIVE_POWER_MONTH_T2:1<<30,MAX_EXPORTED_ACTIVE_POWER_MONTH_T3:1<<31};var yh={MAX_EXPORTED_ACTIVE_POWER_MONTH_T4:1<<0,MAX_EXPORTED_REACTIVE_POWER_DAY_T1:1<<1,MAX_EXPORTED_REACTIVE_POWER_DAY_T2:1<<2,MAX_EXPORTED_REACTIVE_POWER_DAY_T3:1<<3,MAX_EXPORTED_REACTIVE_POWER_DAY_T4:1<<4,MAX_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<5,MAX_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<6,MAX_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<7,MAX_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<8,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T1:1<<9,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T2:1<<10,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T3:1<<11,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_DAY_T4:1<<12,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T1:1<<13,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T2:1<<14,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T3:1<<15,MAX_NEGATIVE_EXPORTED_REACTIVE_POWER_MONTH_T4:1<<16,HOUR_MINUTE_SECOND:1<<17,DATE_MONTH_YEAR:1<<18,CURRENT_TRANSFORMATION_RATIO:1<<19,VOLTAGE_TRANSFORMATION_RATIO:1<<20,CURRENT_BALANCE:1<<21,POWER_THRESHOLD_T1:1<<22,POWER_THRESHOLD_T2:1<<23,POWER_THRESHOLD_T3:1<<24,POWER_THRESHOLD_T4:1<<25,OPTOPORT_SPEED:1<<26,MAGNET_INDUCTION:1<<27,SORT_DISPLAY_SCREENS:1<<29,TURN_OFF_DISPLAY:1<<30,AUTO_SCREEN_SCROLLING:1<<31};var mh={EVENT:1<<0,PROFILE_P01:1<<1,PROFILE_P02:1<<2,PROFILE_P03:1<<3,PROFILE_P04:1<<4,PROFILE_P05:1<<5,PROFILE_P06:1<<6};var Dh={RELAY_ON_Y:1<<0,RELAY_ON_CENTER:1<<1,RELAY_ON_PB:1<<2,RELAY_ON_TARIFF_0:1<<3,RELAY_ON_TARIFF_1:1<<4,RELAY_ON_TARIFF_2:1<<5,RELAY_ON_TARIFF_3:1<<6,RELAY_ON_V_GOOD:1<<7,RELAY_OFF_Y:1<<8,RELAY_OFF_CENTER:1<<9,RELAY_OFF_TARIFF_0:1<<10,RELAY_OFF_TARIFF_1:1<<11,RELAY_OFF_TARIFF_2:1<<12,RELAY_OFF_TARIFF_3:1<<13,RELAY_OFF_I_LIMIT:1<<14,RELAY_OFF_V_BAD:1<<15,RELAY_OFF_DIFF_BAD:1<<16,RELAY_OFF_LIM_TARIFF_0:1<<17,RELAY_OFF_LIM_TARIFF_1:1<<18,RELAY_OFF_LIM_TARIFF_2:1<<19,RELAY_OFF_LIM_TARIFF_3:1<<20,RELAY_OFF_LIM_VAR_TARIFF_0:1<<21,RELAY_OFF_LIM_VAR_TARIFF_1:1<<22,RELAY_OFF_LIM_VAR_TARIFF_2:1<<23,RELAY_OFF_LIM_VAR_TARIFF_3:1<<24,RELAY_ON_PF_MIN:1<<25,RELAY_OFF_PF_MIN:1<<26,RELAY_ON_TIMEOUT:1<<27,RELAY_ON_SALDO:1<<28,RELAY_OFF_SALDO:1<<29,RELAY_OFF_SALDO_SOFT:1<<30};var Lh={TRANSFORMATION_RATIO:1<<0,METER_TYPE_R:1<<4,ACCUMULATE_BY_R_PLUS_MINUS:1<<7};var Fh={RESET_DAY_MAX_POWER_KEY:1<<0,RESET_MONTH_MAX_POWER_KEY:1<<1,BLOCK_KEY_OPTOPORT:1<<2,MAGNET_SCREEN_CONST:1<<5,ALLOW_BROWNOUT_INDICATION:1<<7};var Vh={OPTOPORT_SPEED:1<<26};var wh={RELAY_OFF_MAGNET:1<<0,RELAY_ON_MAGNET_TIMEOUT:1<<1,RELAY_ON_MAGNET_AUTO:1<<2};var Yh=function(t){return{plc:PE.plc[Q(t,4,1)],optoport:PE.optoport[Q(t,4,5)]}};var xh=function(t){var e=0;e=j(e,4,1,Number(IE.plc[t.plc]));e=j(e,4,5,Number(IE.optoport[t.optoport]));return e};function Hh(t,e,r){var n=r>>Nh;var i=[];var a=[];var s=[];for(var E=0;E<xr;E++){var o=!!Q(n,1,E+1);if(o){i.push(t.getInt32());a.push(t.getInt32());s.push(t.getInt32())}else{i.push(null);a.push(null);s.push(null)}}return{wh:i,vari:a,vare:s}}function Wh(t,e){var r=e.wh,n=e.vari,i=e.vare;var a=1+Nh;var s=t;for(var E=0;E<xr;E++){s=j(s,1,E+a,Number(!!r[E]&&!!n[E]&&!!i[E]))}return s}function Gh(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_n.call(this,t,e)}Gh.prototype=Object.create(_n.prototype);Gh.prototype.constructor=Gh;Gh.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,rmaxThreshold0:31800,rmaxThreshold1:31800,rmaxThreshold2:31800,rmaxThreshold3:31800,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet1:Z(Mh,4229),displaySet2:Z(Sh,139776),displaySet3:Z(Ch,0),relaySet:Z(Dh,771),speedOptoPort:Yh(64),ten:30,tu:30,timeIntervalPowerOff:3,reserved:0,timeoutBadVAVB:5,freqMax:55,freqMin:45,year:0,month:0,date:0,energyDecimalPoint:2,voltageTransformationRatioNumerator:1,voltageTransformationRatioDenominator:1,currentTransformationRatioNumerator:1,currentTransformationRatioDenominator:1,typeMeter:Z(Lh,0),phMin:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySet4:Z(yh,2147876864)}};Gh.prototype.getOperatorParameters=function(){return{vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),rmaxThreshold0:this.getUint32(),rmaxThreshold1:this.getUint32(),rmaxThreshold2:this.getUint32(),rmaxThreshold3:this.getUint32(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet1:Z(Mh,this.getUint32()),displaySet2:Z(Sh,this.getUint32()),displaySet3:Z(Ch,this.getUint32()),relaySet:Z(Dh,this.getUint32()),speedOptoPort:Yh(this.getUint8()),ten:this.getUint8(),tu:this.getUint8(),timeIntervalPowerOff:this.getUint8(),reserved:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),voltageTransformationRatioNumerator:this.getUint16(),voltageTransformationRatioDenominator:this.getUint16(),currentTransformationRatioNumerator:this.getUint16(),currentTransformationRatioDenominator:this.getUint16(),typeMeter:Z(Lh,this.getUint8()),phMin:this.getUint16(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySet4:Z(yh,this.getUint32())}};Gh.prototype.setOperatorParameters=function(t){this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint32(t.rmaxThreshold0);this.setUint32(t.rmaxThreshold1);this.setUint32(t.rmaxThreshold2);this.setUint32(t.rmaxThreshold3);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(z(Mh,t.displaySet1));this.setUint32(z(Sh,t.displaySet2));this.setUint32(z(Ch,t.displaySet3));this.setUint32(z(Dh,t.relaySet));this.setUint8(xh(t.speedOptoPort));this.setUint8(t.ten);this.setUint8(t.tu);this.setUint8(t.timeIntervalPowerOff);this.setUint8(t.reserved);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint16(t.voltageTransformationRatioNumerator);this.setUint16(t.voltageTransformationRatioDenominator);this.setUint16(t.currentTransformationRatioNumerator);this.setUint16(t.currentTransformationRatioDenominator);this.setUint8(z(Lh,t.typeMeter));this.setUint16(t.phMin);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(z(yh,t.displaySet4))};Gh.prototype.getOperatorParametersExtended=function(){return{timeoutRelayOn:this.getUint8(),define1:Z(Fh,this.getUint8()),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8()}};Gh.prototype.setOperatorParametersExtended=function(t){this.setUint8(t.timeoutRelayOn);this.setUint8(z(Fh,t.define1));this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint32(0);this.setUint8(0)};Gh.prototype.getEnergies=function(){var t=[];var e=[];var r=[];for(var n=0;n<xr;n++){t.push(this.getInt32());e.push(this.getInt32());r.push(this.getInt32())}return{wh:t,vari:e,vare:r}};Gh.prototype.setEnergies=function(t){for(var e=0;e<xr;e++){this.setInt32(t.wh[e]);this.setInt32(t.vari[e]);this.setInt32(t.vare[e])}};Gh.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=Q(t,Nh,1);var r=Hh(this,e,t);return{energyType:e,energies:r}};Gh.prototype.setPackedEnergyWithType=function(t){var e=t.energyType,r=t.energies;if(e){var n=Wh(e,r);var i=n>>Nh;this.setUint8(n);for(var a=0;a<xr;a++){var s=!!Q(i,1,a+1);if(s){this.setInt32(r.wh[a]);this.setInt32(r.vari[a]);this.setInt32(r.vare[a])}}return}for(var E=0;E<xr;E++){this.setInt32(r.wh[E]);this.setInt32(r.vari[E]);this.setInt32(r.vare[E])}};Gh.prototype.getEnergyPeriods=function(t){var e=this;return new Array(t).fill(0).map((function(){var t=e.getUint16();return t===65535?undefined:t}))};Gh.prototype.setEnergyPeriods=function(t){var e=this;t.forEach((function(t){return e.setUint16(t===undefined?65535:t)}))};Gh.prototype.getMaxDemand=function(){return{hourPmax:this.getUint8(),minPmax:this.getUint8(),pmax:this.getInt32(),hourVariMax:this.getUint8(),minVariMax:this.getUint8(),variMax:this.getInt32(),hourVareMax:this.getUint8(),minVareMax:this.getUint8(),vareMax:this.getInt32()}};Gh.prototype.setMaxDemand=function(t){this.setUint8(t.hourPmax);this.setUint8(t.minPmax);this.setInt32(t.pmax);this.setUint8(t.hourVariMax);this.setUint8(t.minVariMax);this.setInt32(t.variMax);this.setUint8(t.hourVareMax);this.setUint8(t.minVareMax);this.setInt32(t.vareMax)};Gh.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(xr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};Gh.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};Gh.prototype.getMonthMaxDemandResponse=function(){var t=this;var e={year:this.getUint8(),month:this.getUint8()};var r=new Array(xr).fill(0).map((function(){return t.getMaxDemand()}));return{date:e,maxDemands:r}};Gh.prototype.setMonthMaxDemandResponse=function(t){var e=this;this.setUint8(t.date.year);this.setUint8(t.date.month);t.maxDemands.forEach((function(t){return e.setMaxDemand(t)}))};Gh.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=ch[e];switch(e){case X_:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case KE:case S_:if(r<8){return t}t.newDate=this.getDateTime();break}return t};Gh.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case X_:for(var e of t.power){this.setUint8(e)}break;case KE:case S_:this.setDateTime(t.newDate);break}};Gh.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandParam:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};Gh.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.demandParam);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};Gh.prototype.getOperatorParametersExtended2=function(){return{deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),relaySetExt:Z(wh,this.getUint8()),timeoutMagnetOn:this.getUint8(),phaseDefault:this.getUint8(),displaySet21:this.getUint32(),displaySet22:this.getUint32(),displaySet23:this.getUint32(),displaySet24:Z(Vh,this.getUint32()),channel1:this.getUint8(),channel2:this.getUint8(),channel3:this.getUint8(),channel4:this.getUint8(),channel5:this.getUint8(),channel6:this.getUint8(),timeCorrectPeriod:this.getUint8()}};Gh.prototype.setOperatorParametersExtended2=function(t){this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(z(wh,t.relaySetExt));this.setUint8(t.timeoutMagnetOn);this.setUint8(t.phaseDefault);this.setUint32(t.displaySet21);this.setUint32(t.displaySet22);this.setUint32(t.displaySet23);this.setUint32(z(Vh,t.displaySet24));this.setUint8(t.channel1);this.setUint8(t.channel2);this.setUint8(t.channel3);this.setUint8(t.channel4);this.setUint8(t.channel5);this.setUint8(t.channel6);this.setUint8(t.timeCorrectPeriod)};Gh.prototype.getOperatorParametersExtended4=function(){return{displaySet5:Z(mh,this.getUint32()),displaySet25:Z(mh,this.getUint32()),displaySet31:Z(Mh,this.getUint32()),displaySet32:Z(Mh,this.getUint32()),displaySet33:Z(Mh,this.getUint32()),displaySet34:Z(Mh,this.getUint32()),displaySet35:Z(mh,this.getUint32())}};Gh.prototype.setOperatorParametersExtended4=function(t){this.setUint32(z(mh,t.displaySet5));this.setUint32(z(mh,t.displaySet25));this.setUint32(z(Mh,t.displaySet31));this.setUint32(z(Mh,t.displaySet32));this.setUint32(z(Mh,t.displaySet33));this.setUint32(z(Mh,t.displaySet34));this.setUint32(z(mh,t.displaySet35))};var Xh=57;var Bh="getCurrentStatusMeter";var bh=function(t){var e=new Gh(t);var r=e.getUint32();var n=e.getUint32();var i=e.getUint32();var a=e.getUint32();var s=e.getUint32();var E=e.getUint32();e.getUint32();var o=e.getUint32();var _=!!(e.getUint8()&1);var h=e.getUint8();var v=!!(e.getUint8()&1);var A=!!(e.getUint8()&1);var f={"A+":e.getUint8(),maximumPowers:e.getUint8(),"A-":e.getUint8()};var u=e.getUint8();var T=!!(e.getUint8()&1);var R=h|u<<8;return{operatingSeconds:r,tbadVAAll:n,tbadVBAll:i,tbadVCAll:a,tbadIMAXAll:s,tbadPMAXAll:E,tbadFREQ:o,relayStatus:_,statusEvent:Z(qr,R),centerAlert:v,calEnableFlag:A,currentTariffs:f,isSummerTime:T}};var Kh=13;var zh="getCurrentValues";var Zh=function(t){var e=new Gh(t);return{vaRms:e.getInt32(),vbRms:e.getInt32(),vcRms:e.getInt32(),iaRms:e.getInt32(),ibRms:e.getInt32(),icRms:e.getInt32(),powerA:e.getInt32(),powerB:e.getInt32(),powerC:e.getInt32(),varA:e.getInt32(),varB:e.getInt32(),varC:e.getInt32(),iNeutral:e.getInt32()}};({wh:n(n({},NE,{gType:"1.8",rType:"1.8"}),ME,{gType:"2.8"}),vari:n(n({},NE,{gType:"5.8",rType:"3.8"}),ME,{gType:"6.8"}),vare:n(n({},NE,{gType:"8.8",rType:"4.8"}),ME,{gType:"7.8"})});var Qh=51;var jh=22;var kh="getDayDemand";var qh=function(t){var e=new Gh(t);var r;if(t.length===Qh){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var $h=79;var Jh="getDayDemandExport";var tv=function(t){var e=new Gh(t);return{date:e.getDate(),energies:e.getEnergies()}};var ev=49;var rv="getDayMaxDemand";var nv=function(t){var e=new Gh(t);return e.getDayMaxDemandResponse()};var iv=88;var av="getDayMaxDemandExport";var sv=function(t){var e=new Gh(t);return e.getDayMaxDemandResponse()};var Ev=7;var ov=118;var _v="getDemand";var hv=function(t){if(!t||t.length<Ev){throw new Error("Invalid uplink GetDemand byte length.")}var e=new Gh(t);var r=e.getDemand();if(t.length!==Ev+2*r.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var n=new Array(r.count).fill(0).map((function(){return e.getUint16()}));return{...r,demands:n}};var vv=94;var Av="getDisplayParam";var fv=function(t){var e=_(t),r=e[0],n=e.slice(1);return{displayMode:r,order:n}};var uv=15;var Tv="getEnergy";var Rv=function(t){var e=new Gh(t);return e.getEnergies()};var gv=51;var Ov=3;var lv="getEnergyDayPrevious";var Uv=function(t){var e=new Gh(t);var r;if(t.length===gv){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var cv=78;var dv="getEnergyExport";var pv=function(t){var e=new Gh(t);return e.getEnergies()};var Pv=80;var Iv="getEnergyExportDayPrevious";var Nv=function(t){var e=new Gh(t);return e.getEnergies()};var Mv=58;var Sv="getExtendedCurrentValues";var Cv=function(t){var e=new Gh(t);return{temperature:e.getInt16(),frequency:e.getUint16(),vPhaseAB:e.getInt32(),vPhaseAC:e.getInt32(),pfA:e.getInt16()/1e3,pfB:e.getInt16()/1e3,pfC:e.getInt16()/1e3,pf:e.getInt16()/1e3,vaA:e.getInt32(),vaB:e.getInt32(),vaC:e.getInt32(),vaSum:e.getInt32(),uBatteryRtc:e.getInt16()}};var yv=21;var mv="getHalfHourDemand";var Dv=function(t){var e=new Gh(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Lv=Gr+2;var Fv=90;var Vv="getHalfHourDemandChannel";var wv=function(t){var e=new Gh(t);var r=t.length>Lv;var n=e.getUint8();var i=e.getUint8();var a=e.getDate();var s=e.getEnergyPeriods(r?Wr:Hr);if(r){return{channel:n,channelParameter:i,date:a,energies:s,dstHour:e.getUint8()}}return{channel:n,channelParameter:i,date:a,energies:s}};var Yv=83;var xv="getHalfHourDemandExport";var Hv=function(t){var e=new Gh(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Wv=73;var Gv="getHalfHourDemandVare";var Xv=function(t){var e=new Gh(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var Bv=85;var bv="getHalfHourDemandVareExport";var Kv=function(t){var e=new Gh(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var zv=72;var Zv="getHalfHourDemandVari";var Qv=function(t){var e=new Gh(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var jv=84;var kv="getHalfHourDemandVariExport";var qv=function(t){var e=new Gh(t);var r=t.length>Gr;var n=e.getDate();var i=e.getEnergyPeriods(r?Wr:Hr);if(r){return{date:n,energies:i,dstHour:e.getUint8()}}return{date:n,energies:i}};var $v=23;var Jv="getMonthDemand";var tA=function(t){var e=new Gh(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var eA=82;var rA="getMonthDemandExport";var nA=function(t){var e=new Gh(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var iA=50;var aA="getMonthMaxDemand";var sA=function(t){var e=new Gh(t);return e.getMonthMaxDemandResponse()};var EA=89;var oA="getMonthMaxDemandExport";var _A=function(t){var e=new Gh(t);return e.getMonthMaxDemandResponse()};var hA=30;var vA="getOperatorParameters";var AA=function(t){var e=new Gh(t);return e.getOperatorParameters()};var fA=63;var uA="getOperatorParametersExtended";var TA=function(t){var e=new Gh(t);return e.getOperatorParametersExtended()};var RA=71;var gA="getOperatorParametersExtended2";var OA=function(t){var e=new Gh(t);return e.getOperatorParametersExtended2()};var lA=64;var UA="setOperatorParametersExtended";var cA=0;var dA=function(t){if(t.length!==cA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var pA=69;var PA="setOperatorParametersExtended2";var IA=0;var NA=function(t){if(t.length!==IA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var MA=117;var SA="setOperatorParametersExtended4";var CA=0;var yA=function(t){if(t.length!==CA){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var mA={};var DA={};var LA=Ks(mA,DA);mA[O]=c;mA[wn]=Hn;mA[Wn]=Xn;mA[ai]=Ei;mA[gi]=li;mA[Ui]=di;mA[pi]=Ii;mA[Si]=mi;mA[Fi]=wi;mA[Yi]=Hi;mA[Wi]=Xi;mA[Bi]=Ki;mA[zi]=Qi;mA[ji]=qi;mA[$i]=ea;mA[ra]=aa;mA[sa]=_a;mA[ha]=Aa;mA[fa]=Ta;mA[Ra]=Oa;mA[la]=da;mA[pa]=Na;mA[Ma]=ya;mA[ma]=Fa;mA[Va]=xa;mA[Ha]=Xa;mA[Ba]=za;mA[Za]=ka;mA[qa]=ts;mA[es]=is;mA[_s]=As;mA[as]=os;mA[fs]=Rs;mA[gs]=Us;mA[cs]=Ps;mA[Is]=Ss;mA[Cs]=ms;mA[Ds]=Vs;mA[ws]=Hs;mA[dh]=Ih;mA[Xh]=bh;mA[Kh]=Zh;mA[jh]=qh;mA[$h]=tv;mA[ev]=nv;mA[iv]=sv;mA[ov]=hv;mA[vv]=fv;mA[uv]=Rv;mA[Ov]=Uv;mA[cv]=pv;mA[Pv]=Nv;mA[Mv]=Cv;mA[yv]=Dv;mA[Fv]=wv;mA[Yv]=Hv;mA[Wv]=Xv;mA[Bv]=Kv;mA[zv]=Qv;mA[jv]=qv;mA[$v]=tA;mA[eA]=nA;mA[iA]=sA;mA[EA]=_A;mA[hA]=AA;mA[fA]=TA;mA[RA]=OA;mA[_s]=As;mA[lA]=dA;mA[pA]=NA;mA[MA]=yA;DA[O]=l;DA[wn]=Yn;DA[Wn]=Gn;DA[ai]=si;DA[gi]=Oi;DA[Ui]=ci;DA[pi]=Pi;DA[Si]=Ci;DA[Fi]=Vi;DA[Yi]=xi;DA[Wi]=Gi;DA[Bi]=bi;DA[zi]=Zi;DA[ji]=ki;DA[$i]=Ji;DA[ra]=na;DA[sa]=Ea;DA[ha]=va;DA[fa]=ua;DA[Ra]=ga;DA[la]=Ua;DA[pa]=Pa;DA[Ma]=Sa;DA[ma]=Da;DA[Va]=wa;DA[Ha]=Wa;DA[Ba]=ba;DA[Za]=Qa;DA[qa]=$a;DA[es]=rs;DA[_s]=hs;DA[as]=ss;DA[fs]=us;DA[gs]=Os;DA[cs]=ds;DA[Is]=Ns;DA[Cs]=ys;DA[Ds]=Ls;DA[ws]=Ys;DA[dh]=ph;DA[Xh]=Bh;DA[Kh]=zh;DA[jh]=kh;DA[$h]=Jh;DA[ev]=rv;DA[iv]=av;DA[ov]=_v;DA[vv]=Av;DA[uv]=Tv;DA[Ov]=lv;DA[cv]=dv;DA[Pv]=Iv;DA[Mv]=Sv;DA[yv]=mv;DA[Fv]=Vv;DA[Yv]=xv;DA[Wv]=Gv;DA[Bv]=bv;DA[zv]=Zv;DA[jv]=kv;DA[$v]=Jv;DA[eA]=rA;DA[iA]=aA;DA[EA]=oA;DA[hA]=vA;DA[fA]=uA;DA[RA]=gA;DA[_s]=hs;DA[lA]=UA;DA[pA]=PA;DA[MA]=SA;var FA=145;var VA=30;var wA=function(t){if(t[0]!==VA){return{}}var e=t[1];var r=t[3];var n=t.slice(4,e+2);var i=Gs(t.slice(0,e+2));var a=t[e+2];if(r===FA&&i===a){return n}return null};fromBytes=LA;getDataSegment=wA})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
