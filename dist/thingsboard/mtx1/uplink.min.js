// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=Array(t);e<t;e++)a[e]=r[e];return a}function t(r){if(Array.isArray(r))return r}function e(t){if(Array.isArray(t))return r(t)}function a(r,t,e){return(t=_(t))in r?Object.defineProperty(r,t,{value:e,enumerable:true,configurable:true,writable:true}):r[t]=e,r}function n(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function i(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,n,i,v,o=[],E=true,f=false;try{if(i=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;E=!1}else for(;!(E=(a=i.call(e)).done)&&(o.push(a.value),o.length!==t);E=!0);}catch(r){f=true,n=r}finally{try{if(!E&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(f)throw n}}return o}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(r,e){return t(r)||i(r,e)||g(r,e)||v()}function f(r){return t(r)||n(r)||g(r)||v()}function u(r){return e(r)||n(r)||g(r)||o()}function s(r,t){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var a=e.call(r,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}function _(r){var t=s(r,"string");return"symbol"==typeof t?t:t+""}function g(t,e){if(t){if("string"==typeof t)return r(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}var A={separator:" ",prefix:""};var l=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},A,t),a=e.separator,n=e.prefix;return r.map(function(r){return"".concat(n).concat(r.toString(16).padStart(2,"0"))}).join(a)};var c=0;var R=1;var T=2;var h=3;var d=Object.freeze({__proto__:null,READ_ONLY:h,READ_WRITE:T,ROOT:R,UNENCRYPTED:c});var O=1;var U=3;var S=4;var N=5;var I=7;var L=8;var m=9;var D=13;var C=15;var p=16;var M=17;var P=18;var y=19;var F=20;var w=21;var Y=22;var b=23;var G=24;var B=25;var H=28;var V=30;var W=31;var x=40;var z=41;var X=42;var K=44;var j=45;var k=46;var Q=47;var Z=49;var q=50;var $=51;var J=52;var rr=53;var tr=54;var er=57;var ar=58;var nr=59;var ir=60;var vr=61;var or=62;var Er=65;var fr=70;var ur=74;var sr=75;var _r=79;var gr=80;var Ar=82;var lr=83;var cr=88;var Rr=89;var Tr=91;var hr=92;var dr=93;var Or=94;var Ur=100;var Sr=109;var Nr=111;var Ir=112;var Lr=113;var mr=114;var Dr=116;var Cr=117;var pr=118;var Mr=122;var Pr=Object.freeze({__proto__:null,activateRatePlan:y,getBv:Ir,getCorrectTime:or,getCriticalEvent:Er,getCurrentStatusMeter:er,getCurrentValues:D,getDateTime:I,getDayDemand:Y,getDayDemandExport:_r,getDayMaxDemand:Z,getDayMaxDemandExport:cr,getDayMaxDemandPrevious:ur,getDayProfile:nr,getDemand:pr,getDemandParameters:Cr,getDeviceId:N,getDeviceType:S,getDisplayParam:Or,getEnergy:C,getEnergyDayPrevious:U,getEnergyExport:Tr,getEnergyExportDayPrevious:gr,getEventStatus:O,getEvents:$,getEventsCounters:J,getExtendedCurrentValues:ar,getExtendedCurrentValues2:j,getHalfHourDemand:w,getHalfHourDemandExport:lr,getHalfHourDemandPrevious:sr,getHalfHourEnergies:Nr,getMagneticFieldThreshold:Sr,getMeterInfo:Mr,getMonthDemand:b,getMonthDemandExport:Ar,getMonthMaxDemand:q,getMonthMaxDemandExport:Rr,getOperatorParameters:V,getOperatorParametersExtended3:Lr,getRatePlanInfo:K,getSaldo:z,getSaldoParameters:k,getSeasonProfile:ir,getSpecialDay:vr,getVersion:x,prepareRatePlan:F,resetPowerMaxDay:rr,resetPowerMaxMonth:tr,runTariffPlan:fr,setAccessKey:m,setCorrectDateTime:hr,setCorrectTime:H,setDateTime:L,setDayProfile:p,setDemandParameters:Dr,setDisplayParam:dr,setOperatorParameters:W,setOperatorParametersExtended3:mr,setSaldo:X,setSaldoParameters:Q,setSeasonProfile:M,setSpecialDay:P,setSpecialOperation:Ur,turnRelayOff:B,turnRelayOn:G});var yr=120;var Fr=121;var wr=254;var Yr=255;var br=Object.freeze({__proto__:null,activateRatePlan:y,errorDataFrameResponse:Yr,errorResponse:wr,getBv:Ir,getCorrectTime:or,getCriticalEvent:Er,getCurrentStatusMeter:er,getCurrentValues:D,getDateTime:I,getDayDemand:Y,getDayDemandExport:_r,getDayEnergies:yr,getDayMaxDemand:Z,getDayMaxDemandExport:cr,getDayMaxDemandPrevious:ur,getDayMaxPower:Fr,getDayProfile:nr,getDemand:pr,getDemandParameters:Cr,getDeviceId:N,getDeviceType:S,getDisplayParam:Or,getEnergy:C,getEnergyDayPrevious:U,getEnergyExport:Tr,getEnergyExportDayPrevious:gr,getEventStatus:O,getEvents:$,getEventsCounters:J,getExtendedCurrentValues:ar,getExtendedCurrentValues2:j,getHalfHourDemand:w,getHalfHourDemandExport:lr,getHalfHourDemandPrevious:sr,getHalfHourEnergies:Nr,getMagneticFieldThreshold:Sr,getMeterInfo:Mr,getMonthDemand:b,getMonthDemandExport:Ar,getMonthMaxDemand:q,getMonthMaxDemandExport:Rr,getOperatorParameters:V,getOperatorParametersExtended3:Lr,getRatePlanInfo:K,getSaldo:z,getSaldoParameters:k,getSeasonProfile:ir,getSpecialDay:vr,getVersion:x,prepareRatePlan:F,resetPowerMaxDay:rr,resetPowerMaxMonth:tr,runTariffPlan:fr,setAccessKey:m,setCorrectDateTime:hr,setCorrectTime:H,setDateTime:L,setDayProfile:p,setDemandParameters:Dr,setDisplayParam:dr,setOperatorParameters:W,setOperatorParametersExtended3:mr,setSaldo:X,setSaldoParameters:Q,setSeasonProfile:M,setSpecialDay:P,setSpecialOperation:Ur,turnRelayOff:B,turnRelayOn:G});var Gr=function(r){var t={};for(var e in r){var a=r[e];t[a]=e}return t};var Br=Gr(br);var Hr=y;var Vr=0;var Wr=function(r){if(r.length!==Vr){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var xr=0;var zr=128;var Xr=129;var Kr=130;var jr=131;var kr=132;var Qr=133;var Zr=134;var qr=135;var $r=136;var Jr=137;var rt=144;var tt=145;var et=146;var at=147;var nt=149;var it=151;var vt=152;var ot=153;var Et=154;var ft=155;var ut=156;var st=159;var _t=160;var gt=240;var At=Object.freeze({__proto__:null,ACCESS_DENIED:at,BAD_ARRAY_INDEX:Zr,BAD_BLOCK_NUMBER:ut,BAD_DATA_LENGTH:Qr,BAD_MESSAGE:kr,BAD_RATE_PLAN_ID:$r,BAD_RATE_PLAN_SIZE:Jr,BAD_RESPONSE_LENGTH:rt,BAD_SALDO_WRITE:nt,BLOCKED_METER:it,CALIBRATION_DISABLED:et,DECRYPTION_FAILURE:Kr,INTERNAL:gt,INVALID_CORRECTION_INTERVAL:Et,NOT_ALIGNED_DATA:Xr,NOT_PREPARED_RATE_PLAN:qr,NO_DATA_FOR_DATE:tt,OK:xr,OUT_OFF_RANGE:st,SET_METER_TYPE_FAILURE:_t,TIME_CORRECTION_FAILURE:ot,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:ft,UNENCRYPTED_COMMAND_DISABLED:vt,UNKNOWN_COMMAND:zr,UNKNOWN_PROTOCOL:jr});var lt=Gr(At);var ct=Yr;var Rt=Br[Yr];var Tt=1;var ht=function(r){if(r.length!==Tt){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=E(r,1),e=t[0];return{errorCode:e,errorName:lt[e]}};var dt=1;var Ot=2;var Ut=3;var St=4;var Nt=Math.log,It=Math.pow,Lt=Math.LN2;var mt=function(r,t,e,a,n){var i,v,o=n*8-a-1,E=(1<<o)-1,f=E>>1,u=-7,s=e?n-1:0,_=e?-1:1,g=r[t+s];s+=_;i=g&(1<<-u)-1;g>>=-u;u+=o;for(;u>0;i=i*256+r[t+s],s+=_,u-=8);v=i&(1<<-u)-1;i>>=-u;u+=a;for(;u>0;v=v*256+r[t+s],s+=_,u-=8);if(i===0){i=1-f}else if(i===E){return v?NaN:g?-Infinity:Infinity}else{v=v+It(2,a);i=i-f}return(g?-1:1)*v*It(2,i-a)};var Dt=function(r,t,e,a,n,i){var v,o,E,f=i*8-n-1,u=(1<<f)-1,s=u>>1,_=n===23?It(2,-24)-It(2,-77):0,g=a?0:i-1,A=a?1:-1,l=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){o=e!==e?1:0;v=u}else{v=Nt(e)/Lt|0;if(e*(E=It(2,-v))<1){v--;E*=2}if(v+s>=1){e+=_/E}else{e+=_*It(2,1-s)}if(e*E>=2){v++;E/=2}if(v+s>=u){o=0;v=u}else if(v+s>=1){o=(e*E-1)*It(2,n);v=v+s}else{o=e*It(2,s-1)*It(2,n);v=0}}for(;n>=8;r[t+g]=o&255,g+=A,o/=256,n-=8);v=v<<n|o;f+=n;for(;f>0;r[t+g]=v&255,g+=A,v/=256,f-=8);r[t+g-A]|=l*128};var Ct=[1,0];var pt=[2,1,0];var Mt=[3,2,1,0];var Pt=[0,1];var yt=[0,1,2];var Ft=[0,1,2,3];var wt=function(r,t){return r[t]};var Yt=function(r,t,e){var a=e?Pt:Ct;var n=r[t+a[0]];var i=r[t+a[1]]<<8;return n|i};var bt=function(r,t,e){var a=e?yt:pt;var n=r[t+a[0]];var i=r[t+a[1]]<<8;var v=r[t+a[2]]<<16;return n|i|v};var Gt=function(r,t,e){var a=e?Ft:Mt;var n=r[t+a[3]]*16777216;var i=r[t+a[2]]*65536;var v=r[t+a[1]]*256;var o=r[t+a[0]];return n+i+v+o};var Bt=function(r,t,e){r[t]=e&255};var Ht=function(r,t,e,a){var n=a?Pt:Ct;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255};var Vt=function(r,t,e,a){var n=a?yt:pt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255};var Wt=function(r,t,e,a){var n=a?Ft:Mt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255;r[t+n[3]]=e>>>24&255};function xt(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=t}xt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){Bt(this.data,this.offset,r<0?r|256:r);this.offset+=dt},getInt8:function(){var r=wt(this.data,this.offset);this.offset+=dt;return r&128?r^-256:r},setUint8:function(r){Bt(this.data,this.offset,r);this.offset+=dt},getUint8:function(){var r=wt(this.data,this.offset);this.offset+=dt;return r},setInt16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Ht(this.data,this.offset,r<0?r|65536:r,t);this.offset+=Ot},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Yt(this.data,this.offset,r);this.offset+=Ot;return t&32768?t^-65536:t},setUint16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Ht(this.data,this.offset,r,t);this.offset+=Ot},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Yt(this.data,this.offset,r);this.offset+=Ot;return t},setInt24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Vt(this.data,this.offset,r<0?r|16777216:r,t);this.offset+=Ut},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=bt(this.data,this.offset,r);this.offset+=Ut;return t&8388608?t^-16777216:t},setUint24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Vt(this.data,this.offset,r,t);this.offset+=Ut},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=bt(this.data,this.offset,r);this.offset+=Ut;return t},setInt32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Wt(this.data,this.offset,r<0?r|4294967296:r,t);this.offset+=St},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Gt(this.data,this.offset,r);this.offset+=St;return t&2147483648?t^-4294967296:t},setUint32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Wt(this.data,this.offset,r,t);this.offset+=St},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Gt(this.data,this.offset,r);this.offset+=St;return t},setFloat32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Dt(this.data,this.offset,r,t,23,4);this.offset+=St},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=mt(this.data,this.offset,r,23,4);this.offset+=St;return t},setString:function(r){this.setUint8(r.length);for(var t=0;t<r.length;++t){this.setUint8(r.charCodeAt(t))}},getString:function(){var r=this.getUint8();var t=this.offset+r;var e=[];while(this.offset<t){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=t+r;return this.data.slice(t,this.offset)},setBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[t,r.length].concat(u(r)));this.data=e;this.offset=t+r.length}};Object.defineProperties(xt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var zt=wr;var Xt=function(r){return function(t){var e=new xt(t,false);var a=e.getUint8();var n=e.getUint8();return{commandId:a,commandName:r[a],errorCode:n,errorName:lt[n]}}};var Kt=Xt(Br);var jt=Ir;var kt=6;var Qt=function(r){if(r.length!==kt){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{vector:r}};var Zt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var e={};for(var a in r){e[a]=(t&r[a])!==0}return e};var qt=function(r,t,e){return(1<<t)-1&r>>e-1};var $t="x";var Jt=[".","1","3","R","M"];var re=[".","A","G","R","T","D"];var te=[".","0","1","2","3","4","5"];var ee=[".","A","B","C","D","E","F"];var ae=[".","A","B","C","D","E","F","H","K","G"];var ne=[".","1","2","3","4"];var ie=[".","L","M","Z","K"];var ve=[".","0","1","2","3","4","5","6","7","8","9"];var oe=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Ee=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var fe=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var ue=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var se={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var _e={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var ge=function(r){var t=Zt(_e,r);return{meterType:"mtx3",...t,typeMeterG:!t.typeMeterG}};var Ae=function(r){return[r>>4,r&15]};var le=function(r){var t=new Array(r.length*2).fill(0);r.forEach(function(r,e){var a=Ae(r),n=E(a,2),i=n[0],v=n[1];t[e*2]=i;t[e*2+1]=v});return t};var ce=function(r){if(r.length!==14&&r.length!==16){throw new Error("Device type bytes wrong size")}var t=["MTX "];t.push(Jt[r[0]]??$t);t.push(re[r[1]]??$t);t.push(te[r[2]]??$t);t.push(te[r[3]]??$t);t.push(".");t.push(ee[r[4]]??$t);t.push(ae[r[5]]??$t);t.push(".");t.push(ne[r[6]]??$t);t.push(ie[r[7]]??$t);var e=r[8];t.push(ve[r[9]]??$t);t.push("-");var a;if(r.length<14||r[12]===0&&r[13]===0){t.push(oe[r[10]]??$t);a=11}else if(r[13]===0){t.push(oe[r[10]]??$t);t.push(oe[r[11]]??$t);a=12}else{t.push(oe[r[10]]??$t);t.push(oe[r[11]]??$t);t.push(oe[r[12]]??$t);a=13}var n=r[a];if(n&&n!==0){t.push(fe[n]??$t)}return{type:t.join(""),revision:e}};var Re=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=["MTX "];var e=r[1]===5?"-":" ";t.push(Jt[r[0]]??$t);t.push(re[r[1]]??$t);t.push(e);for(var a=2;a<r.length;a++){if(r[a]!==0){t.push(Ee[r[a]]??$t)}}return{type:t.join("")}};var Te=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=[];t.push(Jt[r[0]]??$t);for(var e=1;e<r.length;e++){if(r[e]!==0){t.push(ue[r[e]]??$t)}}return{type:t.join("")}};var he=function(r){if(r.length!==9){throw new Error("The buffer is too small")}var t;var e=[0,5,6,7,9,127,239];var a=e.indexOf(r[0])!==-1?2:0;var n=le(r.slice(0,8));var i=n[a];var v=Jt[i];if(v==="1"||v==="3"){t={...ce(n.slice(a)),descriptor:v==="3"?ge(r[8]):{meterType:"mtx1",...Zt(se,r[8])}}}else{t=v==="M"?Te(n):Re(n)}return t};var de=80;var Oe=81;var Ue=82;var Se=83;var Ne=84;var Ie=85;var Le=86;var me=87;var De=88;var Ce=89;var pe=90;var Me=91;var Pe=255;var ye=Object.freeze({__proto__:null,DATA_REQUEST:de,DATA_RESPONSE:Oe,FRAGMENT_REQUEST:pe,FRAGMENT_RESPONSE:Me,IDENT_REQUEST:Ue,IDENT_RESPONSE:Se,INVALID:Pe,L2_CHECK_ADDRESS_REQUEST:Le,L2_CHECK_ADDRESS_RESPONSE:me,L2_RM_ADDRESS_REQUEST:De,L2_RM_ADDRESS_RESPONSE:Ce,L2_SET_ADDRESS_REQUEST:Ne,L2_SET_ADDRESS_RESPONSE:Ie});Gr(ye);Gr(d);var Fe=0;var we=1;var Ye=2;var be=3;var Ge=4;var Be=5;var He=6;var Ve=7;var We=8;var xe=9;var ze=10;var Xe=11;var Ke=12;var je=13;var ke=14;var Qe=Object.freeze({__proto__:null,CASE_MODULE_OPEN:ze,CASE_OPEN:Fe,CASE_TERMINAL_OPEN:xe,DEVICE_FAILURE:We,ERROR_ACCESS:Be,MAGNETIC_ON:we,PARAMETERS_UPDATE_LOCAL:be,PARAMETERS_UPDATE_REMOTE:Ye,PROTECTION_RESET_EM:je,PROTECTION_RESET_MAGNETIC:ke,RESTART:Ge,TARIFF_TABLE_GET:Ke,TARIFF_TABLE_SET:Xe,TIME_CORRECT:Ve,TIME_SET:He});var Ze=Gr(Qe);Gr(Pr);var qe=1;var $e=2;var Je=3;var ra=16;var ta=17;var ea=18;var aa=19;var na=20;var ia=21;var va=32;var oa=33;var Ea=34;var fa=35;var ua=36;var sa=37;var _a=38;var ga=39;var Aa=40;var la=41;var ca=49;var Ra=50;var Ta=51;var ha=52;var da=53;var Oa=54;var Ua=55;var Sa=56;var Na=57;var Ia=58;var La=59;var ma=64;var Da=65;var Ca=66;var pa=67;var Ma=68;var Pa=69;var ya=70;var Fa=71;var wa=72;var Ya=73;var ba=74;var Ga=75;var Ba=76;var Ha=77;var Va=78;var Wa=79;var xa=80;var za=81;var Xa=82;var Ka=83;var ja=84;var ka=85;var Qa=86;var Za=87;var qa=88;var $a=89;var Ja=96;var rn=97;var tn=98;var en=99;var an=100;var nn=101;var vn=102;var on=103;var En=104;var fn=105;var un=112;var sn=113;var _n=114;var gn=115;var An=116;var ln=117;var cn=118;var Rn=119;var Tn=120;var hn=121;var dn=122;var On=123;var Un=124;var Sn=125;var Nn=144;var In=145;var Ln=147;var mn=148;var Dn=152;var Cn=156;var pn=157;var Mn=158;var Pn=159;var yn=160;var Fn=161;var wn=162;var Yn=176;var bn=177;var Gn=178;var Bn=179;var Hn=180;var Vn=181;var Wn=182;var xn=183;var zn=185;var Xn=186;var Kn=224;var jn=225;var kn=226;var Qn=227;var Zn=228;var qn=229;var $n=230;var Jn=231;var ri=232;var ti=Object.freeze({__proto__:null,ACCESS_ERROR:ta,ACCESS_LOCKED:ra,ACC_PARAMETERS_EXT_FAULT:gn,ACC_PARAMETERS_FAULT:_n,BAD_TEST_EEPROM:En,BAD_TEST_FRAM:fn,BATTERY_FAULT:Ka,BATTERY_OK:Xa,BIPOLAR_POWER_FAULT:Hn,BIPOLAR_POWER_OK:Vn,BLOCK_TARIFF_FAULT:ln,CALC_PERIOD_FAULT:An,CALIBRATION_FAULT:ka,CALIBRATION_FLAG_RESET:on,CALIBRATION_FLAG_SET:vn,CALIBRATION_OK:ja,CALIBRATION_PARAMETERS_FAULT:cn,CASE_CLOSED:aa,CASE_MODULE_CLOSED:Sn,CASE_MODULE_OPENED:Un,CASE_OPENED:ea,CASE_TERMINAL_BOX_CLOSED:On,CASE_TERMINAL_BOX_OPENED:dn,CHANGE_ACCESS_KEY0:va,CHANGE_ACCESS_KEY1:oa,CHANGE_ACCESS_KEY2:Ea,CHANGE_ACCESS_KEY3:fa,CHANGE_COR_TIME:la,CHANGE_PARAMETERS_CHANNEL:zn,CHANGE_PARAMETERS_LOCAL:ua,CHANGE_PARAMETERS_REMOTE:sa,CHANGE_TARIFF_TABLE:Ra,CHANGE_TARIFF_TABLE_2:Dn,CLOCK_FAULT:Za,CLOCK_OK:Qa,CMD_RELAY_2_OFF:rn,CMD_RELAY_2_ON:Ja,CMD_RELAY_OFF:Aa,CMD_RELAY_ON:ga,CMD_SET_DATETIME:_a,COSF_MIN_OVER:La,COSF_OK:Ia,CROSS_ZERO_EN_T1:tn,CROSS_ZERO_EN_T2:en,CROSS_ZERO_EN_T3:an,CROSS_ZERO_EN_T4:nn,CROSS_ZERO_EXPORT_EN_T1:Mn,CROSS_ZERO_EXPORT_EN_T2:Pn,CROSS_ZERO_EXPORT_EN_T3:yn,CROSS_ZERO_EXPORT_EN_T4:Fn,CURRENT_UNEQUAL_FAULT:Gn,CURRENT_UNEQUAL_OK:Bn,EM_MAGNETIC_INFLUENCE_OFF:bn,EM_MAGNETIC_INFLUENCE_ON:Yn,ENERGY_REGISTER_FAULT:qe,ENERGY_REGISTER_OVERFLOW:ca,F_MAX_OK:wa,F_MAX_OVER:Ya,F_MIN_OK:ba,F_MIN_OVER:Ga,I_MAX_OK:Ba,I_MAX_OVER:Ha,MAGNETIC_INFLUENCE_OFF:ia,MAGNETIC_INFLUENCE_ON:na,OPERATOR_PARAMETERS_VALUES_FAULT:Je,POWER_A_OFF:qa,POWER_A_ON:$a,POWER_OVER_RELAY_OFF:pn,POWER_SALDO_OK:xa,POWER_SALDO_OVER:za,P_MAX_A_MINUS_OK:Jn,P_MAX_A_MINUS_OVER:ri,P_MAX_OK:Va,P_MAX_OVER:Wa,RELAY_HARD_BAD_OFF:Nn,RELAY_HARD_BAD_ON:Ln,RELAY_HARD_OFF:mn,RELAY_HARD_ON:In,RELAY_OFF:Ua,RELAY_OFF_BAD_SALDO:Xn,RELAY_ON:Oa,RESET_EM_FLAG:Wn,RESET_MAGNET_FLAG:xn,RESTART:Sa,SALDO_EN_FAULT:Tn,SALDO_PARAMETERS_FAULT:sn,SET_DEMAND_EN_10MIN:Qn,SET_DEMAND_EN_15MIN:Zn,SET_DEMAND_EN_1MIN:Kn,SET_DEMAND_EN_30MIN:qn,SET_DEMAND_EN_3MIN:jn,SET_DEMAND_EN_5MIN:kn,SET_DEMAND_EN_60MIN:$n,SET_NEW_SALDO:un,SET_SALDO_PARAM:Cn,SET_TARIFF_TABLE:Ta,SUMMER_TIME:ha,TIME_CORRECT:hn,TIME_CORRECT_NEW:wn,T_MAX_OK:Ma,T_MAX_OVER:Pa,T_MIN_OK:ya,T_MIN_OVER:Fa,VENDOR_PAR_FAULT:$e,V_MAX_OK:ma,V_MAX_OVER:Da,V_MIN_OK:Ca,V_MIN_OVER:pa,WATCHDOG_RESTART:Na,WINTER_SUMMER_FAULT:Rn,WINTER_TIME:da});var ei=Gr(ti);var ai=1;var ni=2;var ii=3;var vi=4;var oi=5;var Ei=6;var fi=7;var ui=8;var si=9;var _i=10;var gi=11;var Ai=12;var li=13;var ci=14;var Ri=15;var Ti=16;var hi=17;var di=18;var Oi=19;var Ui=20;var Si=21;var Ni=22;var Ii=23;var Li=24;var mi=25;var Di=26;var Ci=28;var pi=30;var Mi=31;var Pi=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:vi,ACTIVE_ENERGY_T2:oi,ACTIVE_ENERGY_T3:Ei,ACTIVE_ENERGY_T4:fi,ACTIVE_POWER_IN_NEUTRAL:si,ACTIVE_POWER_PER_PHASE:ui,BATTERY_VOLTAGE:Ni,CURRENT_BALANCE:pi,CURRENT_IN_NEUTRAL:gi,CURRENT_IN_PHASE:_i,DATE_MONTH_YEAR:ci,EXPORTED_ACTIVE_ENERGY_T1:Ti,EXPORTED_ACTIVE_ENERGY_T2:hi,EXPORTED_ACTIVE_ENERGY_T3:di,EXPORTED_ACTIVE_ENERGY_T4:Oi,HOUR_MINUTE_SECOND:li,MAGNET_INDUCTION:Ci,OPTOPORT_SPEED:Mi,POWER_FACTOR_PHASE_A:Ui,POWER_FACTOR_PHASE_B:Si,POWER_THRESHOLD_T1:Ii,POWER_THRESHOLD_T2:Li,POWER_THRESHOLD_T3:mi,POWER_THRESHOLD_T4:Di,SET_ALL_SEGMENT_DISPLAY:ai,SOFTWARE_VERSION:ni,TOTAL_ACTIVE_ENERGY:ii,TOTAL_EXPORTED_ACTIVE_ENERGY:Ri,VOLTAGE:Ai});Gr(Pi);var yi=2400;var Fi=9600;var wi={rs485orTwi:{0:Fi,2:yi,4:Fi},optoport:{0:yi,2:yi,4:Fi}};({rs485orTwi:Gr(wi.rs485orTwi),optoport:Gr(wi.optoport)});var Yi=1;var bi=2;var Gi=11;var Bi=7;var Hi=4;var Vi=48;var Wi=50;var xi=3+Vi*2;var zi={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var Xi={...zi,AUTO_SCREEN_SCROLLING:2147483648};var Ki={...zi,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var ji={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var ki={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Qi={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var Zi={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var qi={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var $i={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Ji={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var rv={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var tv={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5,RELAY_MAGNET_OFF:2**6,RELAY_P_MINUS_MAX_OFF:2**7};var ev={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var av={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var nv={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var iv={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};var vv=function(r){return{rs485orTwi:wi.rs485orTwi[qt(r,4,1)],optoport:wi.optoport[qt(r,4,5)]}};function ov(r,t,e){var a=e>>Hi;var n=new Array(Hi).fill(0);n.forEach(function(t,e){var i=!!qt(a,1,e+1);if(i){n[e]=r.getInt32()}else{n[e]=null}});return n}function Ev(r){if(r===65535){return{tariff:undefined,energy:undefined}}return{tariff:r>>14&3,energy:r&16383}}var fv=function(r){return{tariff:qt(r,2,1),isFirstHalfHour:!qt(r,1,3),hour:qt(r,5,4)}};var uv=function(r){var t=l(r.getBytes(3),{separator:""});var e=r.getUint8();var a=r.getUint8();var n=l(r.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:a,serial:n}};var sv=function(r){return{isSummerTime:!!r.getUint8(),seconds:r.getUint8(),minutes:r.getUint8(),hours:r.getUint8(),day:r.getUint8(),date:r.getUint8(),month:r.getUint8(),year:r.getUint8()}};var _v=function(r){return{id:r.getUint32(),tariffSet:r.getUint8(),activateYear:r.getUint8(),activateMonth:r.getUint8(),activateDay:r.getUint8(),specialProfilesArraySize:r.getUint8(),seasonProfilesArraySize:r.getUint8(),dayProfilesArraySize:r.getUint8()}};var gv=function(r){return{monthTransitionSummer:r.getUint8(),dateTransitionSummer:r.getUint8(),hoursTransitionSummer:r.getUint8(),hoursCorrectSummer:r.getUint8(),monthTransitionWinter:r.getUint8(),dateTransitionWinter:r.getUint8(),hoursTransitionWinter:r.getUint8(),hoursCorrectWinter:r.getUint8(),isCorrectionNeeded:r.getUint8()===1}};var Av=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndexes:new Array(Bi).fill(0).map(function(){return r.getUint8()})}};var lv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndex:r.getUint8(),year:r.getUint8()}};var cv=function(r){return he(r.getBytes(9))};var Rv=function(r){var t={vpThreshold:r.getUint32(),vThreshold:r.getUint32(),ipThreshold:r.getUint32(),pmaxThreshold0:r.getUint32(),pmaxThreshold1:r.getUint32(),pmaxThreshold2:r.getUint32(),pmaxThreshold3:r.getUint32(),serialPortsSpeed:vv(r.getUint8()),tint:r.getUint8(),calcPeriodDate:r.getUint8(),timeoutDisplay:r.getUint8(),timeoutScreen:r.getUint8(),displaySet:Zt(Xi,r.getUint32()),relaySet4:Zt(Zi,r.getUint8()),relaySet3:Zt(Qi,r.getUint8()),relaySet2:Zt(ki,r.getUint8()),relaySet1:Zt(ji,r.getUint8()),displayType:r.getUint8(),ten:r.getUint8(),timeoutRefresh:r.getUint16(),deltaCorMin:r.getUint8(),timeoutMagnetOff:r.getUint8(),timeoutMagnetOn:r.getUint8(),define1:Zt($i,r.getUint8()),timeoutRelayOn:r.getUint8(),timeoutRelayKey:r.getUint8(),timeoutRelayAuto:r.getUint8(),timeoutBadVAVB:r.getUint8(),freqMax:r.getUint8(),freqMin:r.getUint8(),phMin:r.getUint16(),year:r.getUint8(),month:r.getUint8(),date:r.getUint8(),energyDecimalPoint:r.getUint8(),typeMeter:r.getUint8(),timeoutIMax:r.getUint8(),timeoutPMax:r.getUint8(),timeoutCos:r.getUint8(),pMaxDef:r.getUint8(),displaySetExt:Zt(Ki,r.getUint32()),timeoutUneqCurrent:r.getUint8(),timeoutBipolarPower:r.getUint8(),relaySet5:Zt(qi,r.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=r.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};var Tv=function(r){var t=r.getUint8();var e=qt(t,Hi,1);var a=ov(r,e,t);return{energyType:e,energies:a}};var hv=function(r){return new Array(Hi).fill(0).map(function(){return r.getInt32()})};var dv=function(r){return{year:r.getUint8(),month:r.getUint8(),date:r.getUint8()}};var Ov=function(r){return{coefficients:new Array(4).fill(0).map(function(){return r.getUint32()}),decimalPointTariff:r.getUint8(),indicationThreshold:r.getInt32(),relayThreshold:r.getInt32(),mode:r.getUint8(),saldoOffTimeBegin:r.getUint8(),saldoOffTimeEnd:r.getUint8(),decimalPointIndication:r.getUint8(),powerThreshold:r.getUint32(),creditThreshold:r.getInt32()}};var Uv=function(r,t){var e=new Array(t).fill(0).map(function(){return r.getUint16()});return e.map(function(r){return Ev(r)})};var Sv=function(r){var t=r.getUint16();return Zt(Ji,t)};var Nv=function(r){var t=r.getUint16();var e=Zt(rv,r.getUint8());var a=Zt(tv,r.getUint8());var n=Zt(ev,r.getUint8());var i=Zt(av,r.getUint8());var v=Zt(nv,r.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:a,status1:n,status2:i,status3:v}};var Iv=function(r){var t={hours:r.getUint8(),minutes:r.getUint8(),seconds:r.getUint8(),event:r.getUint8()};var e=t.event;var a=r.bytesLeft;t.eventName=ei[e];switch(e){case pn:if(a<4){return t}t.power=[r.getUint8(),r.getUint8(),r.getUint8(),r.getUint8()];break;case _a:case hn:if(a<8){return t}t.newDate=sv(r);break}return t};var Lv=function(r){var t=r.getUint8();var e=r.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandType:r.getUint8(),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var mv=function(r){var t=r.getUint8();var e=r.getUint8();var a=r.getUint8();return{channelParam1:t,counterInterval:e,channelParam2:a}};var Dv=function(r){var t=dv(r);var e=new Array(Hi).fill(0).map(function(){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}});return{date:t,power:e}};var Cv=function(r){return{pmaxMinusThreshold0:r.getUint32(),pmaxMinusThreshold1:r.getUint32(),pmaxMinusThreshold2:r.getUint32(),pmaxMinusThreshold3:r.getUint32(),relaySet:Zt(iv,r.getUint8())}};var pv=function(r){return new Array(Hi).fill(0).map(function(){return{date:r.getUint8(),hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}})};var Mv=or;var Pv=function(r){var t=new xt(r,false);return gv(t)};var yv=Er;var Fv=9;var wv=function(r){if(r.length!==Fv){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=E(r,9),e=t[0],a=t[1],n=t[2],i=t[3],v=t[4],o=t[5],f=t[6],u=t[7],s=t[8];return{event:e,name:Ze[e],index:a,date:{year:n,month:i,date:v,hours:o,minutes:f,seconds:u},count:s}};var Yv=er;var bv={calibrationEnable:1,hardkey:2,keyPressTest:4,keyOpenkeyTest:8,keyGerkonTest:16,keyOpenKlemaTest:32,keyOpenModuleTest:64,keyPress2Test:128};var Gv=function(r){var t=new xt(r,false);var e=t.getUint32();var a=t.getUint32();var n=t.getUint32();var i=t.getUint32();t.getUint32();var v=t.getUint32();var o=Zt(rv,t.getUint8());var E=t.getUint8();var f=t.getUint8();var u=Zt(bv,t.getUint8());var s={"A+":t.getUint8(),"A-":t.getUint8()};var _=!!(t.getUint8()&1);var g=E|f<<8;return{operatingSeconds:e,tbadVAVB:a,tbadImaxAll:n,tbadPmaxAll:i,tbadFREQ:v,relayStatus:o,statusEvent:Zt(Ji,g),calibrationFlags:u,currentTariffs:s,isSummerTime:_}};var Bv=D;var Hv=function(r){var t=new xt(r,false);return{powerA:t.getInt32(),iaRms:t.getInt32(),vavbRms:t.getInt32(),varA:t.getInt32(),pfA:t.getInt16()/1e3,ibRms:t.getInt32(),powerB:t.getInt32(),varB:t.getInt32(),pfB:t.getInt16()/1e3}};var Vv=I;var Wv=function(r){var t=new xt(r,false);return sv(t)};var xv=19;var zv=Y;var Xv=function(r){var t=new xt(r,false);var e;if(r.length===xv){e={date:dv(t),energies:hv(t)}}else{e={date:dv(t),...Tv(t)}}return e};var Kv=19;var jv=_r;var kv=function(r){var t=new xt(r,false);var e;if(r.length===Kv){e={date:dv(t),energies:hv(t)}}else{e={date:dv(t),...Tv(t)}}return e};var Qv=4;var Zv=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var qv=4294967295;var $v={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Jv=function(r){return r<Qv?1<<r:0};var ro=function(r){return r<Qv?1<<r<<4:0};var to=function(r){var t=r.getUint8();var e=r.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};var eo=function(r){var t=r.getUint8();return Zt($v,t)};var ao=function(r,t){var e=[];for(var a=0;a<t;a++){var n=r.getUint16();var i=n>>14&3;var v=n&16383;e.push(n===qv?undefined:{tariff:i,energy:v})}return e};var no=function(r,t,e){var a={};Zv.forEach(function(n){if(t[n]){a[n]=ao(r,e)}});return a};var io=function(r,t){var e={};if(t&$v["A+"]){e["A+"]=r.getUint32()}if(t&$v["A+R+"]){e["A+R+"]=r.getUint32()}if(t&$v["A+R-"]){e["A+R-"]=r.getUint32()}return e};var vo=function(r,t){var e={};if(t&$v["A-"]){e["A-"]=r.getUint32()}if(t&$v["A-R+"]){e["A-R+"]=r.getUint32()}if(t&$v["A-R-"]){e["A-R-"]=r.getUint32()}return e};var oo=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(Qv).fill(null);for(var n=0;n<Qv;n++){if(e&Jv(n)){a[n]=io(r,t)}}for(var i=0;i<Qv;i++){if(e&ro(i)){a[i]={...a[i],...vo(r,t)}}}return a};var Eo=function(r){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}};var fo=function(r,t){var e={};if(t&$v["A+"]){e["A+"]=Eo(r)}if(t&$v["A+R+"]){e["A+R+"]=Eo(r)}if(t&$v["A+R-"]){e["A+R-"]=Eo(r)}return e};var uo=function(r,t){var e={};if(t&$v["A-"]){e["A-"]=Eo(r)}if(t&$v["A-R+"]){e["A-R+"]=Eo(r)}if(t&$v["A-R-"]){e["A-R-"]=Eo(r)}return e};var so=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(Qv).fill(null);for(var n=0;n<Qv;n++){if(e&Jv(n)){a[n]=fo(r,t)}}for(var i=0;i<Qv;i++){if(e&ro(i)){a[i]={...a[i],...uo(r,t)}}}return a};var _o=yr;var go=function(r){var t=new xt(r,false);return{date:to(t),energies:oo(t)}};var Ao=Z;var lo=function(r){var t=new xt(r,false);return Dv(t)};var co=cr;var Ro=function(r){var t=new xt(r,false);return Dv(t)};var To=ur;var ho=function(r){var t=new xt(r,false);return Dv(t)};var Oo=Fr;var Uo=function(r){var t=new xt(r,false);return{date:to(t),tariffs:so(t)}};var So=255;var No=nr;var Io=function(r){var t=r.indexOf(So);var e=t===-1?r:r.slice(0,t);return{periods:u(e).map(fv)}};var Lo=7;var mo=25;var Do=function(r,t,e){return Math.trunc((r*60+t)/e)};var Co=function(r){return Do(mo,0,r)};var po=function(r,t,e){if(r===65535){return null}var a=Co(e);if(t===a){return{lastSummerHour:r>>8&255}}return e===60?{energy:r}:{tariff:r>>14&3,energy:r&16383}};var Mo=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(po(a,(t??0)+n,e));return r},[])};var Po=function(r,t,e){if(r===65535){return 65535}var a=Co(e);return t===a?{lastSummerHour:r>>8&255}:{voltage:r}};var yo=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(Po(a,(t??0)+n,e));return r},[])};var Fo=pr;var wo=function(r){if(!r||r.length<Lo){throw new Error("Invalid uplink GetDemand byte length.")}var t=new xt(r,false);var e=Lv(t);if(r.length!==Lo+2*e.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(e.count).fill(0).map(function(){return t.getUint16()});var n=e.demandType===Yi||e.demandType===bi;e.demands=n?Mo(a,e.firstIndex,e.period):yo(a,e.firstIndex,e.period);return e};var Yo=function(r,t,e){if(!r){throw new Error("Command name is required.")}if(t&&!Array.isArray(t)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof t,"."))}if(t.length!==e){var a=l(t,{separator:""});throw new Error("Wrong buffer size for ".concat(r,": ").concat(t.length,". Expected: ").concat(e,". Payload: 0x").concat(a,"."))}};var bo=Cr;var Go=Br[Cr];var Bo=4;var Ho=function(r){Yo(Go,r,Bo);var t=new xt(r,false);return mv(t)};var Vo=N;var Wo=function(r){var t=new xt(r,false);return uv(t)};var xo=S;var zo=function(r){var t=new xt(r,false);return cv(t)};var Xo=Or;var Ko=function(t){var e=f(t),a=e[0],n=r(e).slice(1);return{displayMode:a,order:n}};var jo=16;var ko=C;var Qo=function(r){var t=new xt(r,false);var e;if(r.length===jo){e={energies:hv(t)}}else{e=Tv(t)}return e};var Zo=19;var qo=U;var $o=function(r){var t=new xt(r,false);var e;if(r.length===Zo){e={date:dv(t),energies:hv(t)}}else{e={date:dv(t),...Tv(t)}}return e};var Jo=16;var rE=Tr;var tE=function(r){var t=new xt(r,false);var e;if(r.length===Jo){e={energies:hv(t)}}else{e=Tv(t)}return e};var eE=19;var aE=gr;var nE=function(r){var t=new xt(r,false);var e;if(r.length===eE){e={date:dv(t),energies:hv(t)}}else{e={date:dv(t),...Tv(t)}}return e};var iE=3+1;var vE=4;var oE=$;var EE=iE+255*vE;var fE=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Iv;return function(e){if(e.length>EE){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var a=new r(e,false);var n=dv(a);var i=a.getUint8();var v=[];while(!a.isEmpty){v.push(t(a))}return{date:n,eventsNumber:i,events:v}}};var uE=fE(xt);var sE=14;var _E=20;var gE=J;var AE=function(r){if(r.length!==sE&&r.length!==_E){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=new xt(r,false);var e=t.getUint16();var a=t.getUint16();var n=t.getUint16();var i=t.getUint16();var v=t.getUint16();var o=t.getUint16();var E=t.getUint16();return{accessClosed:o,accessError:v,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:e,setClock:E}};var lE=O;var cE=function(r){var t=new xt(r,true);return Sv(t)};var RE=ar;var TE=function(r){var t=new xt(r,false);return{temperature:t.getInt16(),frequency:t.getInt16()}};var hE=j;var dE=function(r){var t=new xt(r,false);return Nv(t)};var OE=w;var UE=function(r){var t=new xt(r,false);var e=r.length>xi;var a=dv(t);var n=Uv(t,e?Wi:Vi);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var SE=lr;var NE=function(r){var t=new xt(r,false);var e=r.length>xi;var a=dv(t);var n=Uv(t,e?Wi:Vi);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var IE=sr;var LE=function(r){var t=new xt(r,false);var e=r.length>xi;var a=dv(t);var n=Uv(t,e?Wi:Vi);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var mE=Nr;var DE=function(r){var t=new xt(r,false);var e=to(t);var a=eo(t);var n=t.getUint8();var i=t.getUint8();return{date:e,firstHalfhour:n,halfhoursNumber:i,energies:no(t,a,i)}};var CE=Sr;var pE=function(r){var t=new xt(r,false);return{induction:t.getUint16(),threshold:t.getUint16(),inductionCoefficient:t.getUint16()/100,reserved:t.getUint32()}};var ME=Mr;var PE=function(r){var t=E(r,1),e=t[0];return{ten:e}};var yE=b;var FE=function(r){var t=new xt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:hv(t)}};var wE=Ar;var YE=function(r){var t=new xt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:hv(t)}};var bE=q;var GE=function(r){var t=new xt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:pv(t)}};var BE=Rr;var HE=function(r){var t=new xt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:pv(t)}};var VE=V;var WE=function(r){var t=new xt(r,false);return Rv(t)};var xE=Lr;var zE=function(r){var t=new xt(r,false);return Cv(t)};var XE=K;var KE=1+Gi*2;var jE=function(r){if(r.length!==KE){throw new Error("Invalid getRatePlanInfo data size.")}var t=new xt(r,false);return{tariffTable:t.getUint8(),activePlan:_v(t),passivePlan:_v(t)}};var kE=z;var QE=29;var ZE=function(r){if(r.length!==QE){throw new Error("Invalid getSaldo data size.")}var t=new xt(r,false);return{currentSaldo:t.getInt32(),count:t.getUint8(),energy:new Array(4).fill(0).map(function(){return t.getInt32()}),beginSaldoOfPeriod:t.getInt32(),date:{month:t.getUint8(),date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8()}}};var qE=k;var $E=37;var JE=function(r){if(r.length!==$E){throw new Error("Invalid getSaldoParameters data size.")}var t=new xt(r,false);return Ov(t)};var rf=ir;var tf=function(r){var t=new xt(r,false);return Av(t)};var ef=vr;var af=function(r){var t=new xt(r,false);return lv(t)};var nf=x;var vf=function(r){return{version:String.fromCharCode.apply(null,u(r))}};var of=F;var Ef=0;var ff=function(r){if(r.length!==Ef){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var uf=rr;var sf=0;var _f=function(r){if(r.length!==sf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var gf=tr;var Af=0;var lf=function(r){if(r.length!==Af){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var cf=fr;var Rf=0;var Tf=function(r){if(r.length!==Rf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var hf=m;var df=0;var Of=function(r){if(r.length!==df){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Uf=hr;var Sf=0;var Nf=function(r){if(r.length!==Sf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var If=H;var Lf=0;var mf=function(r){if(r.length!==Lf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Df=L;var Cf=0;var pf=function(r){if(r.length!==Cf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Mf=p;var Pf=0;var yf=function(r){if(r.length!==Pf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Ff=Dr;var wf=Br[Dr];var Yf=0;var bf=function(r){Yo(wf,r,Yf);return{}};var Gf=dr;var Bf=0;var Hf=function(r){if(r.length!==Bf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Vf=W;var Wf=0;var xf=function(r){if(r.length!==Wf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var zf=mr;var Xf=0;var Kf=function(r){if(r.length!==Xf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var jf=X;var kf=0;var Qf=function(r){if(r.length!==kf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Zf=Q;var qf=0;var $f=function(r){if(r.length!==qf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Jf=M;var ru=0;var tu=function(r){if(r.length!==ru){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var eu=P;var au=0;var nu=function(r){if(r.length!==au){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var iu=Ur;var vu=function(r){var t=new xt(r,false);var e=t.getUint8();var a=!!(e&1);var n=!!(e&2);return{electroMagneticIndication:a,magneticIndication:n}};var ou=B;var Eu=0;var fu=function(r){if(r.length!==Eu){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var uu=G;var su=0;var _u=function(r){if(r.length!==su){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var gu={encrypt:function(){},decrypt:function(){}};var Au=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=t;r.forEach(function(r){e^=r});return e};var lu=2;var cu=2;var Ru=function(r){var t=E(r,1),e=t[0];if(e===ct){try{var a=ht(r.slice(lu));return{id:e,name:Rt,headerSize:lu,bytes:r,parameters:a}}catch{return null}}return null};var Tu=function(r,t){var e=E(t,1),a=e[0];var n=Ru(t.slice(cu-1));var i=Ru(t.slice(cu));var v={messageId:a,bytes:t};if(n){return{...v,accessLevel:c,commands:[n]}}if(i){return{...v,accessLevel:r,commands:[i]}}return null};var hu=3;a(a(a(a({},c,0),h,1),T,2),R,3);var du=2;var Ou=2;var Uu=function(r,t){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var v=E(e,2),o=v[0],f=v[1];var s=f&hu;var _=Tu(s,e);var g={messageId:o,accessLevel:s,commands:i,bytes:e,lrc:{received:undefined,calculated:0}};var A=e.slice(du);var l;if(_){return _}if(n&&s!==c){A=u(gu.decrypt(n,A))}var R=A[A.length-1];A=A.slice(0,-1);var T=Au(A);if(s!==c||R!==0){if(R!==T){l="Mismatch LRC."}}var h=A[0]&hu;var d=A.slice(1);if(s!==h){l="Mismatch access levels."}var O=0;do{var U=d[O];var S=d[O+1];var N=Ou+S;var I=d.slice(O+Ou,O+N);var L={id:U,name:t[U],headerSize:Ou,bytes:d.slice(O,O+N)};if(!U){break}try{if(!r[U]){throw new Error("Unsupported command id: ".concat(U,"!"))}L.parameters=r[U](I,a);i.push(L)}catch(r){i.push({command:L,error:r.message})}O+=N}while(O<=d.length);g.lrc.calculated=T;g.lrc.received=R;if(l){return{message:g,error:l}}return g}};var Su={};var Nu=Br;var Iu=Uu(Su,Nu);Su[Hr]=Wr;Su[ct]=ht;Su[zt]=Kt;Su[jt]=Qt;Su[Mv]=Pv;Su[yv]=wv;Su[Yv]=Gv;Su[Bv]=Hv;Su[Vv]=Wv;Su[zv]=Xv;Su[jv]=kv;Su[_o]=go;Su[Ao]=lo;Su[co]=Ro;Su[To]=ho;Su[Oo]=Uo;Su[No]=Io;Su[Fo]=wo;Su[bo]=Ho;Su[Vo]=Wo;Su[xo]=zo;Su[Xo]=Ko;Su[ko]=Qo;Su[qo]=$o;Su[rE]=tE;Su[aE]=nE;Su[oE]=uE;Su[gE]=AE;Su[lE]=cE;Su[RE]=TE;Su[hE]=dE;Su[OE]=UE;Su[SE]=NE;Su[IE]=LE;Su[mE]=DE;Su[CE]=pE;Su[ME]=PE;Su[yE]=FE;Su[wE]=YE;Su[bE]=GE;Su[BE]=HE;Su[VE]=WE;Su[xE]=zE;Su[XE]=jE;Su[kE]=ZE;Su[qE]=JE;Su[rf]=tf;Su[ef]=af;Su[nf]=vf;Su[of]=ff;Su[uf]=_f;Su[gf]=lf;Su[cf]=Tf;Su[hf]=Of;Su[Uf]=Nf;Su[If]=mf;Su[Df]=pf;Su[Mf]=yf;Su[Ff]=bf;Su[Gf]=Hf;Su[Vf]=xf;Su[zf]=Kf;Su[jf]=Qf;Su[Zf]=$f;Su[Jf]=tu;Su[eu]=nu;Su[iu]=vu;Su[ou]=fu;Su[uu]=_u;var Lu=145;var mu=30;var Du=function(r){if(r[0]!==mu){return{}}var t=r[1];var e=r[3];var a=r.slice(4,t+2);if(e===Lu){return a}return null};fromBytes=Iu;getDataSegment=Du})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
