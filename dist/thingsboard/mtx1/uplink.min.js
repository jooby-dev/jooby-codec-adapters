// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=Array(t);e<t;e++)a[e]=r[e];return a}function t(r){if(Array.isArray(r))return r}function e(t){if(Array.isArray(t))return r(t)}function a(r,t,e){return(t=s(t))in r?Object.defineProperty(r,t,{value:e,enumerable:true,configurable:true,writable:true}):r[t]=e,r}function n(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function i(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,n,i,v,o=[],E=true,u=false;try{if(i=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;E=!1}else for(;!(E=(a=i.call(e)).done)&&(o.push(a.value),o.length!==t);E=!0);}catch(r){u=true,n=r}finally{try{if(!E&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(u)throw n}}return o}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(r,e){return t(r)||i(r,e)||A(r,e)||v()}function u(r){return t(r)||n(r)||A(r)||v()}function f(r){return e(r)||n(r)||A(r)||o()}function _(r,t){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var a=e.call(r,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}function s(r){var t=_(r,"string");return"symbol"==typeof t?t:t+""}function A(t,e){if(t){if("string"==typeof t)return r(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}var g={separator:" ",prefix:""};var R=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},g,t),a=e.separator,n=e.prefix;return r.map(function(r){return"".concat(n).concat(r.toString(16).padStart(2,"0"))}).join(a)};var T=function(r,t,e){if(!r){throw new Error("Command name is required.")}if(t&&!Array.isArray(t)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof t,"."))}if(e.min>0&&t.length<e.min||e.max>0&&t.length>e.max){var a=R(t,{separator:""});var n=e.min===e.max?"".concat(e.max):JSON.stringify(e);throw new Error("Wrong buffer size for ".concat(r,": ").concat(t.length,". Expected: ").concat(n,". Payload: 0x").concat(a,"."))}};var l=function(r,t,e){return T(r,t,{min:e,max:e})};var c=0;var d=1;var O=2;var h=3;var U=Object.freeze({__proto__:null,READ_ONLY:h,READ_WRITE:O,ROOT:d,UNENCRYPTED:c});var S=1;var N=3;var I=4;var m=5;var L=7;var p=8;var C=9;var D=13;var M=15;var y=16;var P=17;var F=18;var w=19;var Y=20;var G=21;var B=22;var H=23;var x=24;var V=25;var b=28;var W=30;var X=31;var K=40;var j=41;var z=42;var k=44;var Q=45;var Z=46;var q=47;var J=49;var $=50;var rr=51;var tr=52;var er=53;var ar=54;var nr=57;var ir=58;var vr=59;var or=60;var Er=61;var ur=62;var fr=65;var _r=70;var sr=74;var Ar=75;var gr=79;var Rr=80;var Tr=82;var lr=83;var cr=88;var dr=89;var Or=91;var hr=92;var Ur=93;var Sr=94;var Nr=100;var Ir=109;var mr=111;var Lr=112;var pr=113;var Cr=114;var Dr=115;var Mr=116;var yr=117;var Pr=118;var Fr=122;var wr=Object.freeze({__proto__:null,activateRatePlan:w,getBv:Lr,getCorrectTime:ur,getCriticalEvent:fr,getCurrentStatusMeter:nr,getCurrentValues:D,getDateTime:L,getDayDemand:B,getDayDemandExport:gr,getDayMaxDemand:J,getDayMaxDemandExport:cr,getDayMaxDemandPrevious:sr,getDayProfile:vr,getDemand:Pr,getDemandParameters:yr,getDeviceId:m,getDeviceType:I,getDisplayParam:Sr,getEnergy:M,getEnergyDayPrevious:N,getEnergyExport:Or,getEnergyExportDayPrevious:Rr,getEventStatus:S,getEvents:rr,getEventsCounters:tr,getExtendedCurrentValues:ir,getExtendedCurrentValues2:Q,getHalfHourDemand:G,getHalfHourDemandExport:lr,getHalfHourDemandPrevious:Ar,getHalfHourEnergies:mr,getMagneticFieldThreshold:Ir,getMeterInfo:Fr,getMonthDemand:H,getMonthDemandExport:Tr,getMonthMaxDemand:$,getMonthMaxDemandExport:dr,getOperatorParameters:W,getOperatorParametersExtended3:pr,getQuality:Dr,getRatePlanInfo:k,getSaldo:j,getSaldoParameters:Z,getSeasonProfile:or,getSpecialDay:Er,getVersion:K,prepareRatePlan:Y,resetPowerMaxDay:er,resetPowerMaxMonth:ar,runTariffPlan:_r,setAccessKey:C,setCorrectDateTime:hr,setCorrectTime:b,setDateTime:p,setDayProfile:y,setDemandParameters:Mr,setDisplayParam:Ur,setOperatorParameters:X,setOperatorParametersExtended3:Cr,setSaldo:z,setSaldoParameters:q,setSeasonProfile:P,setSpecialDay:F,setSpecialOperation:Nr,turnRelayOff:V,turnRelayOn:x});var Yr=120;var Gr=121;var Br=123;var Hr=254;var xr=255;var Vr=Object.freeze({__proto__:null,activateRatePlan:w,errorDataFrameResponse:xr,errorResponse:Hr,getBv:Lr,getCorrectTime:ur,getCriticalEvent:fr,getCurrentDemand:Br,getCurrentStatusMeter:nr,getCurrentValues:D,getDateTime:L,getDayDemand:B,getDayDemandExport:gr,getDayEnergies:Yr,getDayMaxDemand:J,getDayMaxDemandExport:cr,getDayMaxDemandPrevious:sr,getDayMaxPower:Gr,getDayProfile:vr,getDemand:Pr,getDemandParameters:yr,getDeviceId:m,getDeviceType:I,getDisplayParam:Sr,getEnergy:M,getEnergyDayPrevious:N,getEnergyExport:Or,getEnergyExportDayPrevious:Rr,getEventStatus:S,getEvents:rr,getEventsCounters:tr,getExtendedCurrentValues:ir,getExtendedCurrentValues2:Q,getHalfHourDemand:G,getHalfHourDemandExport:lr,getHalfHourDemandPrevious:Ar,getHalfHourEnergies:mr,getMagneticFieldThreshold:Ir,getMeterInfo:Fr,getMonthDemand:H,getMonthDemandExport:Tr,getMonthMaxDemand:$,getMonthMaxDemandExport:dr,getOperatorParameters:W,getOperatorParametersExtended3:pr,getQuality:Dr,getRatePlanInfo:k,getSaldo:j,getSaldoParameters:Z,getSeasonProfile:or,getSpecialDay:Er,getVersion:K,prepareRatePlan:Y,resetPowerMaxDay:er,resetPowerMaxMonth:ar,runTariffPlan:_r,setAccessKey:C,setCorrectDateTime:hr,setCorrectTime:b,setDateTime:p,setDayProfile:y,setDemandParameters:Mr,setDisplayParam:Ur,setOperatorParameters:X,setOperatorParametersExtended3:Cr,setSaldo:z,setSaldoParameters:q,setSeasonProfile:P,setSpecialDay:F,setSpecialOperation:Nr,turnRelayOff:V,turnRelayOn:x});var br=function(r){var t={};for(var e in r){var a=r[e];t[a]=e}return t};var Wr=br(Vr);var Xr=w;var Kr=Wr[w];var jr=0;var zr=function(r){l(Kr,r,jr);return{}};var kr=0;var Qr=128;var Zr=129;var qr=130;var Jr=131;var $r=132;var rt=133;var tt=134;var et=135;var at=136;var nt=137;var it=144;var vt=145;var ot=146;var Et=147;var ut=149;var ft=151;var _t=152;var st=153;var At=154;var gt=155;var Rt=156;var Tt=159;var lt=160;var ct=240;var dt=Object.freeze({__proto__:null,ACCESS_DENIED:Et,BAD_ARRAY_INDEX:tt,BAD_BLOCK_NUMBER:Rt,BAD_DATA_LENGTH:rt,BAD_MESSAGE:$r,BAD_RATE_PLAN_ID:at,BAD_RATE_PLAN_SIZE:nt,BAD_RESPONSE_LENGTH:it,BAD_SALDO_WRITE:ut,BLOCKED_METER:ft,CALIBRATION_DISABLED:ot,DECRYPTION_FAILURE:qr,INTERNAL:ct,INVALID_CORRECTION_INTERVAL:At,NOT_ALIGNED_DATA:Zr,NOT_PREPARED_RATE_PLAN:et,NO_DATA_FOR_DATE:vt,OK:kr,OUT_OFF_RANGE:Tt,SET_METER_TYPE_FAILURE:lt,TIME_CORRECTION_FAILURE:st,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:gt,UNENCRYPTED_COMMAND_DISABLED:_t,UNKNOWN_COMMAND:Qr,UNKNOWN_PROTOCOL:Jr});var Ot=br(dt);var ht=xr;var Ut=Wr[xr];var St=1;var Nt=function(r){l(Ut,r,St);var t=E(r,1),e=t[0];return{errorCode:e,errorName:Ot[e]}};var It=1;var mt=2;var Lt=3;var pt=4;var Ct=Math.log,Dt=Math.pow,Mt=Math.LN2;var yt=function(r,t,e,a,n){var i,v,o=n*8-a-1,E=(1<<o)-1,u=E>>1,f=-7,_=e?n-1:0,s=e?-1:1,A=r[t+_];_+=s;i=A&(1<<-f)-1;A>>=-f;f+=o;for(;f>0;i=i*256+r[t+_],_+=s,f-=8);v=i&(1<<-f)-1;i>>=-f;f+=a;for(;f>0;v=v*256+r[t+_],_+=s,f-=8);if(i===0){i=1-u}else if(i===E){return v?NaN:A?-Infinity:Infinity}else{v=v+Dt(2,a);i=i-u}return(A?-1:1)*v*Dt(2,i-a)};var Pt=function(r,t,e,a,n,i){var v,o,E,u=i*8-n-1,f=(1<<u)-1,_=f>>1,s=n===23?Dt(2,-24)-Dt(2,-77):0,A=a?0:i-1,g=a?1:-1,R=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){o=e!==e?1:0;v=f}else{v=Ct(e)/Mt|0;if(e*(E=Dt(2,-v))<1){v--;E*=2}if(v+_>=1){e+=s/E}else{e+=s*Dt(2,1-_)}if(e*E>=2){v++;E/=2}if(v+_>=f){o=0;v=f}else if(v+_>=1){o=(e*E-1)*Dt(2,n);v=v+_}else{o=e*Dt(2,_-1)*Dt(2,n);v=0}}for(;n>=8;r[t+A]=o&255,A+=g,o/=256,n-=8);v=v<<n|o;u+=n;for(;u>0;r[t+A]=v&255,A+=g,v/=256,u-=8);r[t+A-g]|=R*128};var Ft=[1,0];var wt=[2,1,0];var Yt=[3,2,1,0];var Gt=[0,1];var Bt=[0,1,2];var Ht=[0,1,2,3];var xt=function(r,t){return r[t]};var Vt=function(r,t,e){var a=e?Gt:Ft;var n=r[t+a[0]];var i=r[t+a[1]]<<8;return n|i};var bt=function(r,t,e){var a=e?Bt:wt;var n=r[t+a[0]];var i=r[t+a[1]]<<8;var v=r[t+a[2]]<<16;return n|i|v};var Wt=function(r,t,e){var a=e?Ht:Yt;var n=r[t+a[3]]*16777216;var i=r[t+a[2]]*65536;var v=r[t+a[1]]*256;var o=r[t+a[0]];return n+i+v+o};var Xt=function(r,t,e){r[t]=e&255};var Kt=function(r,t,e,a){var n=a?Gt:Ft;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255};var jt=function(r,t,e,a){var n=a?Bt:wt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255};var zt=function(r,t,e,a){var n=a?Ht:Yt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255;r[t+n[3]]=e>>>24&255};function kt(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=t}kt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){Xt(this.data,this.offset,r<0?r|256:r);this.offset+=It},getInt8:function(){var r=xt(this.data,this.offset);this.offset+=It;return r&128?r^-256:r},setUint8:function(r){Xt(this.data,this.offset,r);this.offset+=It},getUint8:function(){var r=xt(this.data,this.offset);this.offset+=It;return r},setInt16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Kt(this.data,this.offset,r<0?r|65536:r,t);this.offset+=mt},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Vt(this.data,this.offset,r);this.offset+=mt;return t&32768?t^-65536:t},setUint16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Kt(this.data,this.offset,r,t);this.offset+=mt},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Vt(this.data,this.offset,r);this.offset+=mt;return t},setInt24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;jt(this.data,this.offset,r<0?r|16777216:r,t);this.offset+=Lt},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=bt(this.data,this.offset,r);this.offset+=Lt;return t&8388608?t^-16777216:t},setUint24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;jt(this.data,this.offset,r,t);this.offset+=Lt},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=bt(this.data,this.offset,r);this.offset+=Lt;return t},setInt32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;zt(this.data,this.offset,r<0?r|4294967296:r,t);this.offset+=pt},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Wt(this.data,this.offset,r);this.offset+=pt;return t&2147483648?t^-4294967296:t},setUint32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;zt(this.data,this.offset,r,t);this.offset+=pt},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Wt(this.data,this.offset,r);this.offset+=pt;return t},setFloat32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Pt(this.data,this.offset,r,t,23,4);this.offset+=pt},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=yt(this.data,this.offset,r,23,4);this.offset+=pt;return t},setString:function(r){this.setUint8(r.length);for(var t=0;t<r.length;++t){this.setUint8(r.charCodeAt(t))}},getString:function(){var r=this.getUint8();var t=this.offset+r;var e=[];while(this.offset<t){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=t+r;return this.data.slice(t,this.offset)},setBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[t,r.length].concat(f(r)));this.data=e;this.offset=t+r.length}};Object.defineProperties(kt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var Qt=Hr;var Zt=Wr[Hr];var qt=2;var Jt=function(r){return function(t){l(Zt,t,qt);var e=new kt(t,false);var a=e.getUint8();var n=e.getUint8();return{commandId:a,commandName:r[a],errorCode:n,errorName:Ot[n]}}};var $t=Jt(Wr);var re=Lr;var te=Wr[Lr];var ee=6;var ae=function(r){l(te,r,ee);return{vector:r}};var ne=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var e={};for(var a in r){e[a]=(t&r[a])!==0}return e};var ie=function(r,t,e){return(1<<t)-1&r>>e-1};var ve="x";var oe=[".","1","3","R","M"];var Ee=[".","A","G","R","T","D"];var ue=[".","0","1","2","3","4","5"];var fe=[".","A","B","C","D","E","F"];var _e=[".","A","B","C","D","E","F","H","K","G"];var se=[".","1","2","3","4"];var Ae=[".","L","M","Z","K"];var ge=[".","0","1","2","3","4","5","6","7","8","9"];var Re=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Te=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var le=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var ce=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var de={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Oe={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var he=function(r){var t=ne(Oe,r);return{meterType:"mtx3",...t,typeMeterG:!t.typeMeterG}};var Ue=function(r){return[r>>4,r&15]};var Se=function(r){var t=new Array(r.length*2).fill(0);r.forEach(function(r,e){var a=Ue(r),n=E(a,2),i=n[0],v=n[1];t[e*2]=i;t[e*2+1]=v});return t};var Ne=function(r){if(r.length!==14&&r.length!==16){throw new Error("Device type bytes wrong size")}var t=["MTX "];t.push(oe[r[0]]??ve);t.push(Ee[r[1]]??ve);t.push(ue[r[2]]??ve);t.push(ue[r[3]]??ve);t.push(".");t.push(fe[r[4]]??ve);t.push(_e[r[5]]??ve);t.push(".");t.push(se[r[6]]??ve);t.push(Ae[r[7]]??ve);var e=r[8];t.push(ge[r[9]]??ve);t.push("-");var a;if(r.length<14||r[12]===0&&r[13]===0){t.push(Re[r[10]]??ve);a=11}else if(r[13]===0){t.push(Re[r[10]]??ve);t.push(Re[r[11]]??ve);a=12}else{t.push(Re[r[10]]??ve);t.push(Re[r[11]]??ve);t.push(Re[r[12]]??ve);a=13}var n=r[a];if(n&&n!==0){t.push(le[n]??ve)}return{type:t.join(""),revision:e}};var Ie=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=["MTX "];var e=r[1]===5?"-":" ";t.push(oe[r[0]]??ve);t.push(Ee[r[1]]??ve);t.push(e);for(var a=2;a<r.length;a++){if(r[a]!==0){t.push(Te[r[a]]??ve)}}return{type:t.join("")}};var me=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=[];t.push(oe[r[0]]??ve);for(var e=1;e<r.length;e++){if(r[e]!==0){t.push(ce[r[e]]??ve)}}return{type:t.join("")}};var Le=function(r){if(r.length!==9){throw new Error("The buffer is too small")}var t;var e=[0,5,6,7,9,127,239];var a=e.indexOf(r[0])!==-1?2:0;var n=Se(r.slice(0,8));var i=n[a];var v=oe[i];if(v==="1"||v==="3"){t={...Ne(n.slice(a)),descriptor:v==="3"?he(r[8]):{meterType:"mtx1",...ne(de,r[8])}}}else{t=v==="M"?me(n):Ie(n)}return t};var pe=80;var Ce=81;var De=82;var Me=83;var ye=84;var Pe=85;var Fe=86;var we=87;var Ye=88;var Ge=89;var Be=90;var He=91;var xe=255;var Ve=Object.freeze({__proto__:null,DATA_REQUEST:pe,DATA_RESPONSE:Ce,FRAGMENT_REQUEST:Be,FRAGMENT_RESPONSE:He,IDENT_REQUEST:De,IDENT_RESPONSE:Me,INVALID:xe,L2_CHECK_ADDRESS_REQUEST:Fe,L2_CHECK_ADDRESS_RESPONSE:we,L2_RM_ADDRESS_REQUEST:Ye,L2_RM_ADDRESS_RESPONSE:Ge,L2_SET_ADDRESS_REQUEST:ye,L2_SET_ADDRESS_RESPONSE:Pe});br(Ve);br(U);var be=0;var We=1;var Xe=2;var Ke=3;var je=4;var ze=5;var ke=6;var Qe=7;var Ze=8;var qe=9;var Je=10;var $e=11;var ra=12;var ta=13;var ea=14;var aa=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Je,CASE_OPEN:be,CASE_TERMINAL_OPEN:qe,DEVICE_FAILURE:Ze,ERROR_ACCESS:ze,MAGNETIC_ON:We,PARAMETERS_UPDATE_LOCAL:Ke,PARAMETERS_UPDATE_REMOTE:Xe,PROTECTION_RESET_EM:ta,PROTECTION_RESET_MAGNETIC:ea,RESTART:je,TARIFF_TABLE_GET:ra,TARIFF_TABLE_SET:$e,TIME_CORRECT:Qe,TIME_SET:ke});var na=br(aa);br(wr);var ia=1;var va=2;var oa=3;var Ea=16;var ua=17;var fa=18;var _a=19;var sa=20;var Aa=21;var ga=32;var Ra=33;var Ta=34;var la=35;var ca=36;var da=37;var Oa=38;var ha=39;var Ua=40;var Sa=41;var Na=49;var Ia=50;var ma=51;var La=52;var pa=53;var Ca=54;var Da=55;var Ma=56;var ya=57;var Pa=58;var Fa=59;var wa=64;var Ya=65;var Ga=66;var Ba=67;var Ha=68;var xa=69;var Va=70;var ba=71;var Wa=72;var Xa=73;var Ka=74;var ja=75;var za=76;var ka=77;var Qa=78;var Za=79;var qa=80;var Ja=81;var $a=82;var rn=83;var tn=84;var en=85;var an=86;var nn=87;var vn=88;var on=89;var En=96;var un=97;var fn=98;var _n=99;var sn=100;var An=101;var gn=102;var Rn=103;var Tn=104;var ln=105;var cn=112;var dn=113;var On=114;var hn=115;var Un=116;var Sn=117;var Nn=118;var In=119;var mn=120;var Ln=121;var pn=122;var Cn=123;var Dn=124;var Mn=125;var yn=144;var Pn=145;var Fn=147;var wn=148;var Yn=152;var Gn=156;var Bn=157;var Hn=158;var xn=159;var Vn=160;var bn=161;var Wn=162;var Xn=176;var Kn=177;var jn=178;var zn=179;var kn=180;var Qn=181;var Zn=182;var qn=183;var Jn=185;var $n=186;var ri=224;var ti=225;var ei=226;var ai=227;var ni=228;var ii=229;var vi=230;var oi=231;var Ei=232;var ui=Object.freeze({__proto__:null,ACCESS_ERROR:ua,ACCESS_LOCKED:Ea,ACC_PARAMETERS_EXT_FAULT:hn,ACC_PARAMETERS_FAULT:On,BAD_TEST_EEPROM:Tn,BAD_TEST_FRAM:ln,BATTERY_FAULT:rn,BATTERY_OK:$a,BIPOLAR_POWER_FAULT:kn,BIPOLAR_POWER_OK:Qn,BLOCK_TARIFF_FAULT:Sn,CALC_PERIOD_FAULT:Un,CALIBRATION_FAULT:en,CALIBRATION_FLAG_RESET:Rn,CALIBRATION_FLAG_SET:gn,CALIBRATION_OK:tn,CALIBRATION_PARAMETERS_FAULT:Nn,CASE_CLOSED:_a,CASE_MODULE_CLOSED:Mn,CASE_MODULE_OPENED:Dn,CASE_OPENED:fa,CASE_TERMINAL_BOX_CLOSED:Cn,CASE_TERMINAL_BOX_OPENED:pn,CHANGE_ACCESS_KEY0:ga,CHANGE_ACCESS_KEY1:Ra,CHANGE_ACCESS_KEY2:Ta,CHANGE_ACCESS_KEY3:la,CHANGE_COR_TIME:Sa,CHANGE_PARAMETERS_CHANNEL:Jn,CHANGE_PARAMETERS_LOCAL:ca,CHANGE_PARAMETERS_REMOTE:da,CHANGE_TARIFF_TABLE:Ia,CHANGE_TARIFF_TABLE_2:Yn,CLOCK_FAULT:nn,CLOCK_OK:an,CMD_RELAY_2_OFF:un,CMD_RELAY_2_ON:En,CMD_RELAY_OFF:Ua,CMD_RELAY_ON:ha,CMD_SET_DATETIME:Oa,COSF_MIN_OVER:Fa,COSF_OK:Pa,CROSS_ZERO_EN_T1:fn,CROSS_ZERO_EN_T2:_n,CROSS_ZERO_EN_T3:sn,CROSS_ZERO_EN_T4:An,CROSS_ZERO_EXPORT_EN_T1:Hn,CROSS_ZERO_EXPORT_EN_T2:xn,CROSS_ZERO_EXPORT_EN_T3:Vn,CROSS_ZERO_EXPORT_EN_T4:bn,CURRENT_UNEQUAL_FAULT:jn,CURRENT_UNEQUAL_OK:zn,EM_MAGNETIC_INFLUENCE_OFF:Kn,EM_MAGNETIC_INFLUENCE_ON:Xn,ENERGY_REGISTER_FAULT:ia,ENERGY_REGISTER_OVERFLOW:Na,F_MAX_OK:Wa,F_MAX_OVER:Xa,F_MIN_OK:Ka,F_MIN_OVER:ja,I_MAX_OK:za,I_MAX_OVER:ka,MAGNETIC_INFLUENCE_OFF:Aa,MAGNETIC_INFLUENCE_ON:sa,OPERATOR_PARAMETERS_VALUES_FAULT:oa,POWER_A_OFF:vn,POWER_A_ON:on,POWER_OVER_RELAY_OFF:Bn,POWER_SALDO_OK:qa,POWER_SALDO_OVER:Ja,P_MAX_A_MINUS_OK:oi,P_MAX_A_MINUS_OVER:Ei,P_MAX_OK:Qa,P_MAX_OVER:Za,RELAY_HARD_BAD_OFF:yn,RELAY_HARD_BAD_ON:Fn,RELAY_HARD_OFF:wn,RELAY_HARD_ON:Pn,RELAY_OFF:Da,RELAY_OFF_BAD_SALDO:$n,RELAY_ON:Ca,RESET_EM_FLAG:Zn,RESET_MAGNET_FLAG:qn,RESTART:Ma,SALDO_EN_FAULT:mn,SALDO_PARAMETERS_FAULT:dn,SET_DEMAND_EN_10MIN:ai,SET_DEMAND_EN_15MIN:ni,SET_DEMAND_EN_1MIN:ri,SET_DEMAND_EN_30MIN:ii,SET_DEMAND_EN_3MIN:ti,SET_DEMAND_EN_5MIN:ei,SET_DEMAND_EN_60MIN:vi,SET_NEW_SALDO:cn,SET_SALDO_PARAM:Gn,SET_TARIFF_TABLE:ma,SUMMER_TIME:La,TIME_CORRECT:Ln,TIME_CORRECT_NEW:Wn,T_MAX_OK:Ha,T_MAX_OVER:xa,T_MIN_OK:Va,T_MIN_OVER:ba,VENDOR_PAR_FAULT:va,V_MAX_OK:wa,V_MAX_OVER:Ya,V_MIN_OK:Ga,V_MIN_OVER:Ba,WATCHDOG_RESTART:ya,WINTER_SUMMER_FAULT:In,WINTER_TIME:pa});var fi=br(ui);var _i=1;var si=2;var Ai=3;var gi=4;var Ri=5;var Ti=6;var li=7;var ci=8;var di=9;var Oi=10;var hi=11;var Ui=12;var Si=13;var Ni=14;var Ii=15;var mi=16;var Li=17;var pi=18;var Ci=19;var Di=20;var Mi=21;var yi=22;var Pi=23;var Fi=24;var wi=25;var Yi=26;var Gi=28;var Bi=30;var Hi=31;var xi=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:gi,ACTIVE_ENERGY_T2:Ri,ACTIVE_ENERGY_T3:Ti,ACTIVE_ENERGY_T4:li,ACTIVE_POWER_IN_NEUTRAL:di,ACTIVE_POWER_PER_PHASE:ci,BATTERY_VOLTAGE:yi,CURRENT_BALANCE:Bi,CURRENT_IN_NEUTRAL:hi,CURRENT_IN_PHASE:Oi,DATE_MONTH_YEAR:Ni,EXPORTED_ACTIVE_ENERGY_T1:mi,EXPORTED_ACTIVE_ENERGY_T2:Li,EXPORTED_ACTIVE_ENERGY_T3:pi,EXPORTED_ACTIVE_ENERGY_T4:Ci,HOUR_MINUTE_SECOND:Si,MAGNET_INDUCTION:Gi,OPTOPORT_SPEED:Hi,POWER_FACTOR_PHASE_A:Di,POWER_FACTOR_PHASE_B:Mi,POWER_THRESHOLD_T1:Pi,POWER_THRESHOLD_T2:Fi,POWER_THRESHOLD_T3:wi,POWER_THRESHOLD_T4:Yi,SET_ALL_SEGMENT_DISPLAY:_i,SOFTWARE_VERSION:si,TOTAL_ACTIVE_ENERGY:Ai,TOTAL_EXPORTED_ACTIVE_ENERGY:Ii,VOLTAGE:Ui});br(xi);var Vi=2400;var bi=9600;var Wi={rs485orTwi:{0:bi,2:Vi,4:bi},optoport:{0:Vi,2:Vi,4:bi}};({rs485orTwi:br(Wi.rs485orTwi),optoport:br(Wi.optoport)});var Xi=1;var Ki=2;var ji=11;var zi=74;var ki=7;var Qi=4;var Zi=48;var qi=50;var Ji=3+Zi*2;var $i={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var rv={...$i,AUTO_SCREEN_SCROLLING:2147483648};var tv={...$i,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var ev={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var av={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var nv={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var iv={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var vv={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var ov={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Ev={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var uv={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var fv={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5,RELAY_MAGNET_OFF:2**6,RELAY_P_MINUS_MAX_OFF:2**7};var _v={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var sv={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var Av={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var gv={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};var Rv=function(r){return{rs485orTwi:Wi.rs485orTwi[ie(r,4,1)],optoport:Wi.optoport[ie(r,4,5)]}};function Tv(r,t,e){var a=e>>Qi;var n=new Array(Qi).fill(0);n.forEach(function(t,e){var i=!!ie(a,1,e+1);if(i){n[e]=r.getInt32()}else{n[e]=null}});return n}function lv(r){if(r===65535){return{tariff:undefined,energy:undefined}}return{tariff:r>>14&3,energy:r&16383}}var cv=function(r){return{tariff:ie(r,2,1),isFirstHalfHour:!ie(r,1,3),hour:ie(r,5,4)}};var dv=function(r){var t=R(r.getBytes(3),{separator:""});var e=r.getUint8();var a=r.getUint8();var n=R(r.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:a,serial:n}};var Ov=function(r){return{isSummerTime:!!r.getUint8(),seconds:r.getUint8(),minutes:r.getUint8(),hours:r.getUint8(),day:r.getUint8(),date:r.getUint8(),month:r.getUint8(),year:r.getUint8()}};var hv=function(r){return{id:r.getUint32(),tariffSet:r.getUint8(),activateYear:r.getUint8(),activateMonth:r.getUint8(),activateDay:r.getUint8(),specialProfilesArraySize:r.getUint8(),seasonProfilesArraySize:r.getUint8(),dayProfilesArraySize:r.getUint8()}};var Uv=function(r){return{monthTransitionSummer:r.getUint8(),dateTransitionSummer:r.getUint8(),hoursTransitionSummer:r.getUint8(),hoursCorrectSummer:r.getUint8(),monthTransitionWinter:r.getUint8(),dateTransitionWinter:r.getUint8(),hoursTransitionWinter:r.getUint8(),hoursCorrectWinter:r.getUint8(),isCorrectionNeeded:r.getUint8()===1}};var Sv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndexes:new Array(ki).fill(0).map(function(){return r.getUint8()})}};var Nv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndex:r.getUint8(),year:r.getUint8()}};var Iv=function(r){return Le(r.getBytes(9))};var mv=function(r){var t;var e={vpThreshold:r.getUint32(),vThreshold:r.getUint32(),ipThreshold:r.getUint32(),pmaxThreshold0:r.getUint32(),pmaxThreshold1:r.getUint32(),pmaxThreshold2:r.getUint32(),pmaxThreshold3:r.getUint32(),serialPortsSpeed:Rv(r.getUint8()),tint:r.getUint8(),calcPeriodDate:r.getUint8(),timeoutDisplay:r.getUint8(),timeoutScreen:r.getUint8(),displaySet:ne(rv,r.getUint32()),relaySet4:ne(iv,r.getUint8()),relaySet3:ne(nv,r.getUint8()),relaySet2:ne(av,r.getUint8()),relaySet1:ne(ev,r.getUint8()),displayType:r.getUint8(),ten:r.getUint8(),voltageAveragingInterval:(t=r.getUint8(),r.getUint8(),t),deltaCorMin:r.getUint8(),timeoutMagnetOff:r.getUint8(),timeoutMagnetOn:r.getUint8(),define1:ne(ov,r.getUint8()),timeoutRelayOn:r.getUint8(),timeoutRelayKey:r.getUint8(),timeoutRelayAuto:r.getUint8(),timeoutBadVAVB:r.getUint8(),freqMax:r.getUint8(),freqMin:r.getUint8(),phMin:r.getUint16(),year:r.getUint8(),month:r.getUint8(),date:r.getUint8(),energyDecimalPoint:r.getUint8(),typeMeter:r.getUint8(),timeoutIMax:r.getUint8(),timeoutPMax:r.getUint8(),timeoutCos:r.getUint8(),pMaxDef:r.getUint8(),displaySetExt:ne(tv,r.getUint32()),timeoutUneqCurrent:r.getUint8(),timeoutBipolarPower:r.getUint8(),relaySet5:ne(vv,r.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var a=r.getUint8();e.timeCorrectPeriod=a&127;e.timeCorrectPassHalfhour=!!(a&128);return e};var Lv=function(r){var t=r.getUint8();var e=ie(t,Qi,1);var a=Tv(r,e,t);return{energyType:e,energies:a}};var pv=function(r){return new Array(Qi).fill(0).map(function(){return r.getInt32()})};var Cv=function(r){return{year:r.getUint8(),month:r.getUint8(),date:r.getUint8()}};var Dv=function(r){return{coefficients:new Array(4).fill(0).map(function(){return r.getUint32()}),decimalPointTariff:r.getUint8(),indicationThreshold:r.getInt32(),relayThreshold:r.getInt32(),mode:r.getUint8(),saldoOffTimeBegin:r.getUint8(),saldoOffTimeEnd:r.getUint8(),decimalPointIndication:r.getUint8(),powerThreshold:r.getUint32(),creditThreshold:r.getInt32()}};var Mv=function(r,t){var e=new Array(t).fill(0).map(function(){return r.getUint16()});return e.map(function(r){return lv(r)})};var yv=function(r){var t=r.getUint16();return ne(Ev,t)};var Pv=function(r){var t=r.getUint16();var e=ne(uv,r.getUint8());var a=ne(fv,r.getUint8());var n=ne(_v,r.getUint8());var i=ne(sv,r.getUint8());var v=ne(Av,r.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:a,status1:n,status2:i,status3:v}};var Fv=function(r){var t={hours:r.getUint8(),minutes:r.getUint8(),seconds:r.getUint8(),event:r.getUint8()};var e=t.event;var a=r.bytesLeft;t.eventName=fi[e];switch(e){case Bn:if(a<4){return t}t.power=[r.getUint8(),r.getUint8(),r.getUint8(),r.getUint8()];break;case Oa:case Ln:if(a<8){return t}t.newDate=Ov(r);break}return t};var wv=function(r){var t=r.getUint8();var e=r.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandType:r.getUint8(),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var Yv=function(r){var t=r.getUint8();var e=r.getUint8();var a=r.getUint8();return{channelParam1:t,powerOffTrackingInterval:e,channelParam2:a}};var Gv=function(r){var t=Cv(r);var e=new Array(Qi).fill(0).map(function(){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}});return{date:t,power:e}};var Bv=function(r){return{pmaxMinusThreshold0:r.getUint32(),pmaxMinusThreshold1:r.getUint32(),pmaxMinusThreshold2:r.getUint32(),pmaxMinusThreshold3:r.getUint32(),relaySet:ne(gv,r.getUint8())}};var Hv=function(r){return new Array(Qi).fill(0).map(function(){return{date:r.getUint8(),hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}})};var xv=ur;var Vv=Wr[ur];var bv=9;var Wv=function(r){l(Vv,r,bv);var t=new kt(r,false);return Uv(t)};var Xv=fr;var Kv=Wr[fr];var jv=9;var zv=function(r){l(Kv,r,jv);var t=E(r,9),e=t[0],a=t[1],n=t[2],i=t[3],v=t[4],o=t[5],u=t[6],f=t[7],_=t[8];return{event:e,name:na[e],index:a,date:{year:n,month:i,date:v,hours:o,minutes:u,seconds:f},count:_}};var kv=nr;var Qv=Wr[nr];var Zv=31;var qv={calibrationEnable:1,hardkey:2,keyPressTest:4,keyOpenkeyTest:8,keyGerkonTest:16,keyOpenKlemaTest:32,keyOpenModuleTest:64,keyPress2Test:128};var Jv=function(r){l(Qv,r,Zv);var t=new kt(r,false);var e=t.getUint32();var a=t.getUint32();var n=t.getUint32();var i=t.getUint32();t.getUint32();var v=t.getUint32();var o=ne(uv,t.getUint8());var E=t.getUint8();var u=t.getUint8();var f=ne(qv,t.getUint8());var _={"A+":t.getUint8(),"A-":t.getUint8()};var s=!!(t.getUint8()&1);var A=E|u<<8;return{operatingSeconds:e,tbadVAVB:a,tbadImaxAll:n,tbadPmaxAll:i,tbadFREQ:v,relayStatus:o,statusEvent:ne(Ev,A),calibrationFlags:f,currentTariffs:_,isSummerTime:s}};var $v=D;var ro=Wr[D];var to=32;var eo=function(r){l(ro,r,to);var t=new kt(r,false);return{powerA:t.getInt32(),iaRms:t.getInt32(),vavbRms:t.getInt32(),varA:t.getInt32(),pfA:t.getInt16()/1e3,ibRms:t.getInt32(),powerB:t.getInt32(),varB:t.getInt32(),pfB:t.getInt16()/1e3}};var ao=L;var no=Wr[L];var io=8;var vo=function(r){l(no,r,io);var t=new kt(r,false);return Ov(t)};var oo=19;var Eo=B;var uo=function(r){var t=new kt(r,false);var e;if(r.length===oo){e={date:Cv(t),energies:pv(t)}}else{e={date:Cv(t),...Lv(t)}}return e};var fo=19;var _o=gr;var so=function(r){var t=new kt(r,false);var e;if(r.length===fo){e={date:Cv(t),energies:pv(t)}}else{e={date:Cv(t),...Lv(t)}}return e};var Ao=4;var go=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var Ro=4294967295;var To={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var lo=function(r){return r<Ao?1<<r:0};var co=function(r){return r<Ao?1<<r<<4:0};var Oo=function(r){var t=r.getUint8();var e=r.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};var ho=function(r){var t=r.getUint8();return ne(To,t)};var Uo=function(r,t){var e=[];for(var a=0;a<t;a++){var n=r.getUint16();var i=n>>14&3;var v=n&16383;e.push(n===Ro?undefined:{tariff:i,energy:v})}return e};var So=function(r,t,e){var a={};go.forEach(function(n){if(t[n]){a[n]=Uo(r,e)}});return a};var No=function(r,t){var e={};if(t&To["A+"]){e["A+"]=r.getUint32()}if(t&To["A+R+"]){e["A+R+"]=r.getUint32()}if(t&To["A+R-"]){e["A+R-"]=r.getUint32()}return e};var Io=function(r,t){var e={};if(t&To["A-"]){e["A-"]=r.getUint32()}if(t&To["A-R+"]){e["A-R+"]=r.getUint32()}if(t&To["A-R-"]){e["A-R-"]=r.getUint32()}return e};var mo=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(Ao).fill(null);for(var n=0;n<Ao;n++){if(e&lo(n)){a[n]=No(r,t)}}for(var i=0;i<Ao;i++){if(e&co(i)){a[i]={...a[i],...Io(r,t)}}}return a};var Lo=function(r){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}};var po=function(r,t){var e={};if(t&To["A+"]){e["A+"]=Lo(r)}if(t&To["A+R+"]){e["A+R+"]=Lo(r)}if(t&To["A+R-"]){e["A+R-"]=Lo(r)}return e};var Co=function(r,t){var e={};if(t&To["A-"]){e["A-"]=Lo(r)}if(t&To["A-R+"]){e["A-R+"]=Lo(r)}if(t&To["A-R-"]){e["A-R-"]=Lo(r)}return e};var Do=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(Ao).fill(null);for(var n=0;n<Ao;n++){if(e&lo(n)){a[n]=po(r,t)}}for(var i=0;i<Ao;i++){if(e&co(i)){a[i]={...a[i],...Co(r,t)}}}return a};var Mo=Yr;var yo=function(r){var t=new kt(r,false);return{date:Oo(t),energies:mo(t)}};var Po=J;var Fo=Wr[J];var wo=27;var Yo=function(r){l(Fo,r,wo);var t=new kt(r,false);return Gv(t)};var Go=cr;var Bo=Wr[cr];var Ho=27;var xo=function(r){l(Bo,r,Ho);var t=new kt(r,false);return Gv(t)};var Vo=sr;var bo=Wr[sr];var Wo=27;var Xo=function(r){l(bo,r,Wo);var t=new kt(r,false);return Gv(t)};var Ko=Gr;var jo=function(r){var t=new kt(r,false);return{date:Oo(t),tariffs:Do(t)}};var zo=255;var ko=vr;var Qo=function(r){var t=r.indexOf(zo);var e=t===-1?r:r.slice(0,t);return{periods:f(e).map(cv)}};var Zo=25;var qo=function(r,t,e){return Math.trunc((r*60+t)/e)};var Jo=function(r){return qo(Zo,0,r)};var $o=function(r,t,e){if(r===65535){return null}var a=Jo(e);if(t===a){return{lastSummerHour:r>>8&255}}return e===60?{energy:r}:{tariff:r>>14&3,energy:r&16383}};var rE=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push($o(a,(t??0)+n,e));return r},[])};var tE=function(r,t,e){if(r===65535){return 65535}var a=Jo(e);return t===a?{lastSummerHour:r>>8&255}:{voltage:r}};var eE=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(tE(a,(t??0)+n,e));return r},[])};var aE=7;var nE=Pr;var iE=function(r){if(!r||r.length<aE){throw new Error("Invalid uplink GetDemand byte length.")}var t=new kt(r,false);var e=wv(t);if(r.length!==aE+2*e.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(e.count).fill(0).map(function(){return t.getUint16()});var n=e.demandType===Xi||e.demandType===Ki;e.demands=n?rE(a,e.firstIndex,e.period):eE(a,e.firstIndex,e.period);return e};var vE=yr;var oE=Wr[yr];var EE=4;var uE=function(r){l(oE,r,EE);var t=new kt(r,false);return Yv(t)};var fE=m;var _E=Wr[m];var sE=8;var AE=function(r){l(_E,r,sE);var t=new kt(r,false);return dv(t)};var gE=I;var RE=Wr[I];var TE=9;var lE=function(r){l(RE,r,TE);var t=new kt(r,false);return Iv(t)};var cE=Sr;var dE=function(t){var e=u(t),a=e[0],n=r(e).slice(1);return{displayMode:a,order:n}};var OE=16;var hE=M;var UE=function(r){var t=new kt(r,false);var e;if(r.length===OE){e={energies:pv(t)}}else{e=Lv(t)}return e};var SE=19;var NE=N;var IE=function(r){var t=new kt(r,false);var e;if(r.length===SE){e={date:Cv(t),energies:pv(t)}}else{e={date:Cv(t),...Lv(t)}}return e};var mE=16;var LE=Or;var pE=function(r){var t=new kt(r,false);var e;if(r.length===mE){e={energies:pv(t)}}else{e=Lv(t)}return e};var CE=19;var DE=Rr;var ME=function(r){var t=new kt(r,false);var e;if(r.length===CE){e={date:Cv(t),energies:pv(t)}}else{e={date:Cv(t),...Lv(t)}}return e};var yE=3+1;var PE=4;var FE=rr;var wE=yE+255*PE;var YE=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Fv;return function(e){if(e.length>wE){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var a=new r(e,false);var n=Cv(a);var i=a.getUint8();var v=[];while(!a.isEmpty){v.push(t(a))}return{date:n,eventsNumber:i,events:v}}};var GE=YE(kt);var BE=14;var HE=20;var xE=tr;var VE=function(r){if(r.length!==BE&&r.length!==HE){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=new kt(r,false);var e=t.getUint16();var a=t.getUint16();var n=t.getUint16();var i=t.getUint16();var v=t.getUint16();var o=t.getUint16();var E=t.getUint16();return{accessClosed:o,accessError:v,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:e,setClock:E}};var bE=S;var WE=Wr[S];var XE=2;var KE=function(r){l(WE,r,XE);var t=new kt(r,true);return yv(t)};var jE=ir;var zE=Wr[ir];var kE=4;var QE=function(r){l(zE,r,kE);var t=new kt(r,false);return{temperature:t.getInt16(),frequency:t.getInt16()}};var ZE=Q;var qE=Wr[Q];var JE=7;var $E=function(r){l(qE,r,JE);var t=new kt(r,false);return Pv(t)};var ru=G;var tu=function(r){var t=new kt(r,false);var e=r.length>Ji;var a=Cv(t);var n=Mv(t,e?qi:Zi);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var eu=lr;var au=function(r){var t=new kt(r,false);var e=r.length>Ji;var a=Cv(t);var n=Mv(t,e?qi:Zi);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var nu=Ar;var iu=function(r){var t=new kt(r,false);var e=r.length>Ji;var a=Cv(t);var n=Mv(t,e?qi:Zi);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var vu=mr;var ou=function(r){var t=new kt(r,false);var e=Oo(t);var a=ho(t);var n=t.getUint8();var i=t.getUint8();return{date:e,firstHalfhour:n,halfhoursNumber:i,energies:So(t,a,i)}};var Eu=1+1+6+3;var uu=252;var fu=Br;var _u=Wr[Br];var su=function(r){return{date:Oo(r),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var Au=function(r,t){var e=1+t.count*2;var a=Math.floor(r.bytesLeft/e);var n=[];for(var i=0;i<a;i++){var v=r.getUint8();var o=v===Xi||v===Ki;var E=new Array(t.count).fill(0).map(function(){return r.getUint16()});var u=o?rE(E,t.firstIndex,t.period):eE(E,t.firstIndex,t.period);n.push({demandType:v,values:u})}return n};var gu=function(r){T(_u,r,{min:Eu,max:uu});var t=new kt(r,false);var e=su(t);var a=Au(t,e);return{...e,demands:a}};var Ru=Ir;var Tu=Wr[Ir];var lu=10;var cu=function(r){l(Tu,r,lu);var t=new kt(r,false);return{induction:t.getUint16(),threshold:t.getUint16(),inductionCoefficient:t.getUint16()/100,reserved:t.getUint32()}};var du=Fr;var Ou=Wr[Fr];var hu=1;var Uu=function(r){var t=E(r,1),e=t[0];l(Ou,[e],hu);return{ten:e}};var Su=H;var Nu=Wr[H];var Iu=18;var mu=function(r){l(Nu,r,Iu);var t=new kt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:pv(t)}};var Lu=Tr;var pu=Wr[Tr];var Cu=18;var Du=function(r){l(pu,r,Cu);var t=new kt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:pv(t)}};var Mu=$;var yu=Wr[$];var Pu=2+Qi*7;var Fu=function(r){l(yu,r,Pu);var t=new kt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:Hv(t)}};var wu=dr;var Yu=Wr[dr];var Gu=2+Qi*7;var Bu=function(r){l(Yu,r,Gu);var t=new kt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:Hv(t)}};var Hu=W;var xu=Wr[W];var Vu=zi;var bu=function(r){l(xu,r,Vu);var t=new kt(r,false);return mv(t)};var Wu=pr;var Xu=Wr[pr];var Ku=17;var ju=function(r){l(Xu,r,Ku);var t=new kt(r,false);return Bv(t)};var zu=Dr;var ku=Wr[Dr];var Qu=16;var Zu=function(r){l(ku,r,Qu);var t=new kt(r,false);return{year:t.getUint8(),month:t.getUint8(),powerOffSaidiMinutes:t.getUint32(),powerOffSaidiCount:t.getUint16(),powerOffMaidiMinutes:t.getUint32(),powerOffMaifiCount:t.getUint16(),badVoltagePhaseAMinutes:t.getUint16()}};var qu=k;var Ju=Wr[k];var $u=1+ji*2;var rf=function(r){l(Ju,r,$u);var t=new kt(r,false);return{tariffTable:t.getUint8(),activePlan:hv(t),passivePlan:hv(t)}};var tf=j;var ef=Wr[j];var af=29;var nf=function(r){l(ef,r,af);var t=new kt(r,false);return{currentSaldo:t.getInt32(),count:t.getUint8(),energy:new Array(4).fill(0).map(function(){return t.getInt32()}),beginSaldoOfPeriod:t.getInt32(),date:{month:t.getUint8(),date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8()}}};var vf=Z;var of=Wr[Z];var Ef=37;var uf=function(r){l(of,r,Ef);var t=new kt(r,false);return Dv(t)};var ff=or;var _f=Wr[or];var sf=9;var Af=function(r){l(_f,r,sf);var t=new kt(r,false);return Sv(t)};var gf=Er;var Rf=Wr[Er];var Tf=4;var lf=function(r){l(Rf,r,Tf);var t=new kt(r,false);return Nv(t)};var cf=K;var df=Wr[K];var Of=10;var hf=function(r){l(df,r,Of);return{version:String.fromCharCode.apply(null,f(r))}};var Uf=Y;var Sf=Wr[Y];var Nf=0;var If=function(r){l(Sf,r,Nf);return{}};var mf=er;var Lf=Wr[er];var pf=0;var Cf=function(r){l(Lf,r,pf);return{}};var Df=ar;var Mf=Wr[ar];var yf=0;var Pf=function(r){l(Mf,r,yf);return{}};var Ff=_r;var wf=Wr[_r];var Yf=0;var Gf=function(r){l(wf,r,Yf);return{}};var Bf=C;var Hf=Wr[C];var xf=0;var Vf=function(r){l(Hf,r,xf);return{}};var bf=hr;var Wf=Wr[hr];var Xf=0;var Kf=function(r){l(Wf,r,Xf);return{}};var jf=b;var zf=Wr[b];var kf=0;var Qf=function(r){l(zf,r,kf);return{}};var Zf=p;var qf=Wr[p];var Jf=0;var $f=function(r){l(qf,r,Jf);return{}};var r_=y;var t_=Wr[y];var e_=0;var a_=function(r){l(t_,r,e_);return{}};var n_=Mr;var i_=Wr[Mr];var v_=0;var o_=function(r){l(i_,r,v_);return{}};var E_=Ur;var u_=Wr[Ur];var f_=0;var __=function(r){l(u_,r,f_);return{}};var s_=X;var A_=Wr[X];var g_=0;var R_=function(r){l(A_,r,g_);return{}};var T_=Cr;var l_=Wr[Cr];var c_=0;var d_=function(r){l(l_,r,c_);return{}};var O_=z;var h_=Wr[z];var U_=0;var S_=function(r){l(h_,r,U_);return{}};var N_=q;var I_=Wr[q];var m_=0;var L_=function(r){l(I_,r,m_);return{}};var p_=P;var C_=Wr[P];var D_=0;var M_=function(r){l(C_,r,D_);return{}};var y_=F;var P_=Wr[F];var F_=0;var w_=function(r){l(P_,r,F_);return{}};var Y_=Nr;var G_=Wr[Nr];var B_=1;var H_=function(r){l(G_,r,B_);var t=r[0];var e=!!(t&1);var a=!!(t&2);return{electroMagneticIndication:e,magneticIndication:a}};var x_=V;var V_=Wr[V];var b_=0;var W_=function(r){l(V_,r,b_);return{}};var X_=x;var K_=Wr[x];var j_=0;var z_=function(r){l(K_,r,j_);return{}};var k_={encrypt:function(){},decrypt:function(){}};var Q_=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=t;r.forEach(function(r){e^=r});return e};var Z_=2;var q_=2;var J_=function(r){var t=E(r,1),e=t[0];if(e===ht){try{var a=Nt(r.slice(Z_));return{id:e,name:Ut,headerSize:Z_,bytes:r,parameters:a}}catch{return null}}return null};var $_=function(r,t){var e=E(t,1),a=e[0];var n=J_(t.slice(q_-1));var i=J_(t.slice(q_));var v={messageId:a,bytes:t};if(n){return{...v,accessLevel:c,commands:[n]}}if(i){return{...v,accessLevel:r,commands:[i]}}return null};var rs=3;a(a(a(a({},c,0),h,1),O,2),d,3);var ts=2;var es=2;var as=function(r,t){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var v=E(e,2),o=v[0],u=v[1];var _=u&rs;var s=$_(_,e);var A={messageId:o,accessLevel:_,commands:i,bytes:e,lrc:{received:undefined,calculated:0}};var g=e.slice(ts);var R;if(s){return s}if(n&&_!==c){g=f(k_.decrypt(n,g))}var T=g[g.length-1];g=g.slice(0,-1);var l=Q_(g);if(_!==c||T!==0){if(T!==l){R="Mismatch LRC."}}var d=g[0]&rs;var O=g.slice(1);if(_!==d){R="Mismatch access levels."}var h=0;do{var U=O[h];var S=O[h+1];var N=es+S;var I=O.slice(h+es,h+N);var m={id:U,name:t[U],headerSize:es,bytes:O.slice(h,h+N)};if(!U){break}try{if(!r[U]){throw new Error("Unsupported command id: ".concat(U,"!"))}m.parameters=r[U](I,a);i.push(m)}catch(r){i.push({command:m,error:r.message})}h+=N}while(h<=O.length);A.lrc.calculated=l;A.lrc.received=T;if(R){return{message:A,error:R}}return A}};var ns={};var is=Wr;var vs=as(ns,is);ns[Xr]=zr;ns[ht]=Nt;ns[Qt]=$t;ns[re]=ae;ns[xv]=Wv;ns[Xv]=zv;ns[kv]=Jv;ns[$v]=eo;ns[ao]=vo;ns[Eo]=uo;ns[_o]=so;ns[Mo]=yo;ns[Po]=Yo;ns[Go]=xo;ns[Vo]=Xo;ns[Ko]=jo;ns[ko]=Qo;ns[nE]=iE;ns[vE]=uE;ns[fE]=AE;ns[gE]=lE;ns[cE]=dE;ns[hE]=UE;ns[NE]=IE;ns[LE]=pE;ns[DE]=ME;ns[FE]=GE;ns[xE]=VE;ns[bE]=KE;ns[jE]=QE;ns[ZE]=$E;ns[ru]=tu;ns[eu]=au;ns[nu]=iu;ns[vu]=ou;ns[fu]=gu;ns[Ru]=cu;ns[du]=Uu;ns[Su]=mu;ns[Lu]=Du;ns[Mu]=Fu;ns[wu]=Bu;ns[Hu]=bu;ns[Wu]=ju;ns[zu]=Zu;ns[qu]=rf;ns[tf]=nf;ns[vf]=uf;ns[ff]=Af;ns[gf]=lf;ns[cf]=hf;ns[Uf]=If;ns[mf]=Cf;ns[Df]=Pf;ns[Ff]=Gf;ns[Bf]=Vf;ns[bf]=Kf;ns[jf]=Qf;ns[Zf]=$f;ns[r_]=a_;ns[n_]=o_;ns[E_]=__;ns[s_]=R_;ns[T_]=d_;ns[O_]=S_;ns[N_]=L_;ns[p_]=M_;ns[y_]=w_;ns[Y_]=H_;ns[x_]=W_;ns[X_]=z_;var os=145;var Es=30;var us=function(r){if(r[0]!==Es){return{}}var t=r[1];var e=r[3];var a=r.slice(4,t+2);if(e===os){return a}return null};fromBytes=vs;getDataSegment=us})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
