// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i,s,o=[],v=true,f=false;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;v=!1}else for(;!(v=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);v=!0);}catch(t){f=true,a=t}finally{try{if(!v&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return o}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){return e(t)||a(t,r)||u(t,r)||i()}function v(t){return e(t)||n(t)||u(t)||i()}function f(t){return r(t)||n(t)||u(t)||s()}function u(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var h=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map(function(t){return t.padStart(2,"0")}).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var n=new Array(r);for(var a=0;a<r;a++){n[a]=parseInt(e.substring(a*2,a*2+2),16)}return n};var E={separator:" ",prefix:""};var g=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},E,e),n=r.separator,a=r.prefix;return t.map(function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))}).join(n)};var _=0;var c=1;var l=3;var A=4;var d=5;var T=7;var p=8;var R=9;var U=13;var y=15;var O=16;var m=17;var P=18;var D=19;var S=20;var M=21;var I=22;var N=23;var C=24;var L=25;var w=28;var F=30;var x=31;var B=40;var H=41;var Y=42;var W=44;var G=45;var b=46;var V=47;var K=49;var z=50;var X=51;var k=52;var j=53;var Q=54;var q=57;var Z=58;var $=59;var J=60;var tt=61;var et=62;var rt=65;var nt=70;var at=74;var it=75;var st=79;var ot=80;var vt=82;var ft=83;var ut=88;var ht=89;var Et=91;var gt=92;var _t=93;var ct=94;var lt=100;var At=109;var dt=111;var Tt=112;var pt=113;var Rt=114;var Ut=116;var yt=117;var Ot=118;var mt=122;var Pt=Object.freeze({__proto__:null,activateRatePlan:D,getBuildVersion:Tt,getCorrectTime:et,getCriticalEvent:rt,getCurrentStatusMeter:q,getCurrentValues:U,getDateTime:T,getDayDemand:I,getDayDemandExport:st,getDayMaxDemand:K,getDayMaxDemandExport:ut,getDayMaxDemandPrevious:at,getDayProfile:$,getDemand:Ot,getDemandParameters:yt,getDeviceId:d,getDeviceType:A,getDisplayParam:ct,getEnergy:y,getEnergyDayPrevious:l,getEnergyExport:Et,getEnergyExportDayPrevious:ot,getEventStatus:c,getEvents:X,getEventsCounters:k,getExtendedCurrentValues:Z,getExtendedCurrentValues2:G,getHalfHourDemand:M,getHalfHourDemandExport:ft,getHalfHourDemandPrevious:it,getHalfHourEnergies:dt,getMagneticFieldThreshold:At,getMeterInfo:mt,getMonthDemand:N,getMonthDemandExport:vt,getMonthMaxDemand:z,getMonthMaxDemandExport:ht,getOperatorParameters:F,getOperatorParametersExtended3:pt,getRatePlanInfo:W,getSaldo:H,getSaldoParameters:b,getSeasonProfile:J,getSpecialDay:tt,getVersion:B,prepareRatePlan:S,resetPowerMaxDay:j,resetPowerMaxMonth:Q,runTariffPlan:nt,setAccessKey:R,setCorrectDateTime:gt,setCorrectTime:w,setDateTime:p,setDayProfile:O,setDemandParameters:Ut,setDisplayParam:_t,setOperatorParameters:x,setOperatorParametersExtended3:Rt,setSaldo:Y,setSaldoParameters:V,setSeasonProfile:m,setSpecialDay:P,setSpecialOperation:lt,turnRelayOff:L,turnRelayOn:C});var Dt=120;var St=121;var Mt=254;var It=Object.freeze({__proto__:null,activateRatePlan:D,errorResponse:Mt,getBuildVersion:Tt,getCorrectTime:et,getCriticalEvent:rt,getCurrentStatusMeter:q,getCurrentValues:U,getDateTime:T,getDayDemand:I,getDayDemandExport:st,getDayEnergies:Dt,getDayMaxDemand:K,getDayMaxDemandExport:ut,getDayMaxDemandPrevious:at,getDayMaxPower:St,getDayProfile:$,getDemand:Ot,getDemandParameters:yt,getDeviceId:d,getDeviceType:A,getDisplayParam:ct,getEnergy:y,getEnergyDayPrevious:l,getEnergyExport:Et,getEnergyExportDayPrevious:ot,getEventStatus:c,getEvents:X,getEventsCounters:k,getExtendedCurrentValues:Z,getExtendedCurrentValues2:G,getHalfHourDemand:M,getHalfHourDemandExport:ft,getHalfHourDemandPrevious:it,getHalfHourEnergies:dt,getMagneticFieldThreshold:At,getMeterInfo:mt,getMonthDemand:N,getMonthDemandExport:vt,getMonthMaxDemand:z,getMonthMaxDemandExport:ht,getOperatorParameters:F,getOperatorParametersExtended3:pt,getRatePlanInfo:W,getSaldo:H,getSaldoParameters:b,getSeasonProfile:J,getSpecialDay:tt,getVersion:B,prepareRatePlan:S,resetPowerMaxDay:j,resetPowerMaxMonth:Q,runTariffPlan:nt,setAccessKey:R,setCorrectDateTime:gt,setCorrectTime:w,setDateTime:p,setDayProfile:O,setDemandParameters:Ut,setDisplayParam:_t,setOperatorParameters:x,setOperatorParametersExtended3:Rt,setSaldo:Y,setSaldoParameters:V,setSeasonProfile:m,setSpecialDay:P,setSpecialOperation:lt,turnRelayOff:L,turnRelayOn:C});var Nt=function(t){var e={};for(var r in t){var n=t[r];e[n]=r}return e};var Ct=Nt(It);var Lt=D;var wt=0;var Ft=function(t){if(t.length!==wt){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var xt=1;var Bt=2;var Ht=3;var Yt=4;var Wt=Math.log,Gt=Math.pow,bt=Math.LN2;var Vt=function(t,e,r,n,a){var i,s,o=a*8-n-1,v=(1<<o)-1,f=v>>1,u=-7,h=r?a-1:0,E=r?-1:1,g=t[e+h];h+=E;i=g&(1<<-u)-1;g>>=-u;u+=o;for(;u>0;i=i*256+t[e+h],h+=E,u-=8);s=i&(1<<-u)-1;i>>=-u;u+=n;for(;u>0;s=s*256+t[e+h],h+=E,u-=8);if(i===0){i=1-f}else if(i===v){return s?NaN:g?-Infinity:Infinity}else{s=s+Gt(2,n);i=i-f}return(g?-1:1)*s*Gt(2,i-n)};var Kt=function(t,e,r,n,a,i){var s,o,v,f=i*8-a-1,u=(1<<f)-1,h=u>>1,E=a===23?Gt(2,-24)-Gt(2,-77):0,g=n?0:i-1,_=n?1:-1,c=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){o=r!==r?1:0;s=u}else{s=Wt(r)/bt|0;if(r*(v=Gt(2,-s))<1){s--;v*=2}if(s+h>=1){r+=E/v}else{r+=E*Gt(2,1-h)}if(r*v>=2){s++;v/=2}if(s+h>=u){o=0;s=u}else if(s+h>=1){o=(r*v-1)*Gt(2,a);s=s+h}else{o=r*Gt(2,h-1)*Gt(2,a);s=0}}for(;a>=8;t[e+g]=o&255,g+=_,o/=256,a-=8);s=s<<a|o;f+=a;for(;f>0;t[e+g]=s&255,g+=_,s/=256,f-=8);t[e+g-_]|=c*128};var zt=[1,0];var Xt=[2,1,0];var kt=[3,2,1,0];var jt=[0,1];var Qt=[0,1,2];var qt=[0,1,2,3];var Zt=function(t,e){return t[e]};var $t=function(t,e,r){var n=r?jt:zt;var a=t[e+n[0]];var i=t[e+n[1]]<<8;return a|i};var Jt=function(t,e,r){var n=r?Qt:Xt;var a=t[e+n[0]];var i=t[e+n[1]]<<8;var s=t[e+n[2]]<<16;return a|i|s};var te=function(t,e,r){var n=r?qt:kt;var a=t[e+n[3]]*16777216;var i=t[e+n[2]]*65536;var s=t[e+n[1]]*256;var o=t[e+n[0]];return a+i+s+o};var ee=function(t,e,r){t[e]=r&255};var re=function(t,e,r,n){var a=n?jt:zt;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255};var ne=function(t,e,r,n){var a=n?Qt:Xt;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255;t[e+a[2]]=r>>>16&255};var ae=function(t,e,r,n){var a=n?qt:kt;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255;t[e+a[2]]=r>>>16&255;t[e+a[3]]=r>>>24&255};function ie(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}ie.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){ee(this.data,this.offset,t<0?t|256:t);this.offset+=xt},getInt8:function(){var t=Zt(this.data,this.offset);this.offset+=xt;return t&128?t^-256:t},setUint8:function(t){ee(this.data,this.offset,t);this.offset+=xt},getUint8:function(){var t=Zt(this.data,this.offset);this.offset+=xt;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;re(this.data,this.offset,t<0?t|65536:t,e);this.offset+=Bt},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=$t(this.data,this.offset,t);this.offset+=Bt;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;re(this.data,this.offset,t,e);this.offset+=Bt},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=$t(this.data,this.offset,t);this.offset+=Bt;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ne(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=Ht},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Jt(this.data,this.offset,t);this.offset+=Ht;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ne(this.data,this.offset,t,e);this.offset+=Ht},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Jt(this.data,this.offset,t);this.offset+=Ht;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ae(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=Yt},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=te(this.data,this.offset,t);this.offset+=Yt;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;ae(this.data,this.offset,t,e);this.offset+=Yt},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=te(this.data,this.offset,t);this.offset+=Yt;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Kt(this.data,this.offset,t,e,23,4);this.offset+=Yt},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=Vt(this.data,this.offset,t,23,4);this.offset+=Yt;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(f(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(ie.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var se=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var n in e){if(n in t&&e[n]){r|=t[n]}}return r};var oe=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var n in t){r[n]=(e&t[n])!==0}return r};var ve=function(t,e,r){return(1<<e)-1&t>>r-1};var fe=function(t,e,r,n){var a=(1<<e)-1<<r-1;var i=n;var s=t;s&=~a;i<<=r-1;s|=i;return s};var ue="x";var he=[".","1","3","R","M"];var Ee=[".","A","G","R","T","D"];var ge=[".","0","1","2","3","4","5"];var _e=[".","A","B","C","D","E","F"];var ce=[".","A","B","C","D","E","F","H","K","G"];var le=[".","1","2","3","4"];var Ae=[".","L","M","Z","K"];var de=[".","0","1","2","3","4","5","6","7","8","9"];var Te=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var pe=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Re=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Ue=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var ye={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Oe={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var me=function(t){var e=oe(Oe,t);return{meterType:"mtx3",...e,typeMeterG:!e.typeMeterG}};var Pe=function(t){return se(Oe,{...t,typeMeterG:!t.typeMeterG})};var De=function(t){return[t>>4,t&15]};var Se=function(t){var e=new Array(t.length*2).fill(0);t.forEach(function(t,r){var n=De(t),a=o(n,2),i=a[0],s=a[1];e[r*2]=i;e[r*2+1]=s});return e};var Me=function(t){var e=[];t.forEach(function(t){return e.push(t.toString(16))});if(t.length&1){e.push("0")}return h(e.join(""))};var Ie=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(he[t[0]]??ue);e.push(Ee[t[1]]??ue);e.push(ge[t[2]]??ue);e.push(ge[t[3]]??ue);e.push(".");e.push(_e[t[4]]??ue);e.push(ce[t[5]]??ue);e.push(".");e.push(le[t[6]]??ue);e.push(Ae[t[7]]??ue);var r=t[8];e.push(de[t[9]]??ue);e.push("-");var n;if(t.length<14||t[12]===0&&t[13]===0){e.push(Te[t[10]]??ue);n=11}else if(t[13]===0){e.push(Te[t[10]]??ue);e.push(Te[t[11]]??ue);n=12}else{e.push(Te[t[10]]??ue);e.push(Te[t[11]]??ue);e.push(Te[t[12]]??ue);n=13}var a=t[n];if(a&&a!==0){e.push(Re[a]??ue)}return{type:e.join(""),revision:r}};var Ne=function(t,e,r){var n=[];if(t.length<11){throw new Error("Wrong format")}n.push(he.indexOf(t[0]));n.push(Ee.indexOf(t[1]));n.push(ge.indexOf(t[2]));n.push(ge.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}n.push(_e.indexOf(t[5]));n.push(ce.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}n.push(le.indexOf(t[8]));n.push(Ae.indexOf(t[9]));n.push(r??0);n.push(de.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var a=t.length>13?t.length-1:t.length;for(var i=12;i<a;i++){n.push(Te.indexOf(t[i]))}if(a<t.length){n.push(Re.indexOf(t[a]))}var s=Me(n);var o=new Array(9).fill(0);o[0]=0;for(var v=0;v<s.length;v++){o[v+(s.length<8?1:0)]=s[v]}return o};var Ce=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(he[t[0]]??ue);e.push(Ee[t[1]]??ue);e.push(r);for(var n=2;n<t.length;n++){if(t[n]!==0){e.push(pe[t[n]]??ue)}}return{type:e.join("")}};var Le=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(he.indexOf(t[0]));e.push(Ee.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(pe.indexOf(t[r]))}var n=Me(e);if(n.length===8){return n}if(n.length>8){throw new Error("Wrong format")}var a=new Array(8).fill(0);for(var i=0;i<n.length;i++){a[i]=n[i]}return a};var we=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(he[t[0]]??ue);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push(Ue[t[r]]??ue)}}return{type:e.join("")}};var Fe=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(he.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push(Ue.indexOf(t[r]))}var n=Me(e);var a=new Array(8).fill(0);for(var i=0;i<n.length&&i<8;i++){a[i]=n[i]}return a};var xe=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var n=r.indexOf(t[0])!==-1?2:0;var a=Se(t.slice(0,8));var i=a[n];var s=he[i];if(s==="1"||s==="3"){e={...Ie(a.slice(n)),descriptor:s==="3"?me(t[8]):{meterType:"mtx1",...oe(ye,t[8])}}}else{e=s==="M"?we(a):Ce(a)}return e};var Be=function(t,e){var r=t.type,n=t.revision,a=t.descriptor;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var i;var s=r.substring(4);var o=r[4];if(o==="1"||o==="3"){i=Ne(s,e,n)}else{i=o==="M"?Fe(s):Le(s)}if(a?.meterType){i[8]=a.meterType==="mtx1"?se(ye,a):Pe(a)}else{i[8]=0}return i};var He=80;var Ye=81;var We=82;var Ge=83;var be=84;var Ve=85;var Ke=86;var ze=87;var Xe=88;var ke=89;var je=90;var Qe=91;var qe=255;var Ze=Object.freeze({__proto__:null,DATA_REQUEST:He,DATA_RESPONSE:Ye,FRAGMENT_REQUEST:je,FRAGMENT_RESPONSE:Qe,IDENT_REQUEST:We,IDENT_RESPONSE:Ge,INVALID:qe,L2_CHECK_ADDRESS_REQUEST:Ke,L2_CHECK_ADDRESS_RESPONSE:ze,L2_RM_ADDRESS_REQUEST:Xe,L2_RM_ADDRESS_RESPONSE:ke,L2_SET_ADDRESS_REQUEST:be,L2_SET_ADDRESS_RESPONSE:Ve});var $e=Nt(Ze);var Je=1;var tr=2;var er=3;var rr=16;var nr=17;var ar=18;var ir=19;var sr=20;var or=21;var vr=32;var fr=33;var ur=34;var hr=35;var Er=36;var gr=37;var _r=38;var cr=39;var lr=40;var Ar=41;var dr=49;var Tr=50;var pr=51;var Rr=52;var Ur=53;var yr=54;var Or=55;var mr=56;var Pr=57;var Dr=60;var Sr=61;var Mr=62;var Ir=63;var Nr=64;var Cr=65;var Lr=66;var wr=67;var Fr=68;var xr=69;var Br=70;var Hr=71;var Yr=72;var Wr=73;var Gr=74;var br=75;var Vr=76;var Kr=77;var zr=78;var Xr=79;var kr=80;var jr=81;var Qr=82;var qr=83;var Zr=84;var $r=85;var Jr=86;var tn=87;var en=88;var rn=89;var nn=96;var an=97;var sn=98;var on=99;var vn=100;var fn=101;var un=102;var hn=103;var En=104;var gn=105;var _n=112;var cn=113;var ln=114;var An=115;var dn=116;var Tn=117;var pn=118;var Rn=119;var Un=120;var yn=121;var On=122;var mn=123;var Pn=124;var Dn=125;var Sn=126;var Mn=144;var In=145;var Nn=147;var Cn=148;var Ln=152;var wn=156;var Fn=157;var xn=158;var Bn=159;var Hn=160;var Yn=161;var Wn=162;var Gn=176;var bn=177;var Vn=178;var Kn=179;var zn=180;var Xn=181;var kn=182;var jn=183;var Qn=185;var qn=186;var Zn=224;var $n=225;var Jn=226;var ta=227;var ea=228;var ra=229;var na=230;var aa=231;var ia=232;var sa=Object.freeze({__proto__:null,ACCESS_LOCKED:rr,ACC_PARAM_BAD:ln,ACC_PARAM_EXT_BAD:An,BAD_TEST_EEPROM:En,BAD_TEST_FRAM:gn,BATTERY_FAULT:qr,BATTERY_OK:Qr,BIPOLAR_POWER_FAULT:zn,BIPOLAR_POWER_OK:Xn,BLOCK_TARIFF_BAD:Tn,CALC_PERIOD_BAD:dn,CALIBRATION_FAULT:$r,CALIBRATION_FLAG_RESET:hn,CALIBRATION_FLAG_SET:un,CALIBRATION_OK:Zr,CALIBRATION_PARAM_BAD:pn,CASE_CLOSE:ir,CASE_KLEMA_CLOSE:mn,CASE_KLEMA_OPEN:On,CASE_MODULE_CLOSE:Dn,CASE_MODULE_OPEN:Pn,CASE_OPEN:ar,CHANGE_ACCESS_KEY0:vr,CHANGE_ACCESS_KEY1:fr,CHANGE_ACCESS_KEY2:ur,CHANGE_ACCESS_KEY3:hr,CHANGE_COR_TIME:Ar,CHANGE_PARAM_CANAL:Qn,CHANGE_PAR_LOCAL:Er,CHANGE_PAR_REMOTE:gr,CHANGE_TARIFF_TABLE:Tr,CHANGE_TARIFF_TBL_2:Ln,CLOCK_FAULT:tn,CLOCK_OK:Jr,CMD_CHANGE_TIME:_r,CMD_RELAY_2_OFF:an,CMD_RELAY_2_ON:nn,CMD_RELAY_OFF:lr,CMD_RELAY_ON:cr,CROSS_ZERO_ENT0:sn,CROSS_ZERO_ENT1:on,CROSS_ZERO_ENT2:vn,CROSS_ZERO_ENT3:fn,CROSS_ZERO_EXPORT_ENT0:xn,CROSS_ZERO_EXPORT_ENT1:Bn,CROSS_ZERO_EXPORT_ENT2:Hn,CROSS_ZERO_EXPORT_ENT3:Yn,CURRENT_UNEQUAL_FAULT:Vn,CURRENT_UNEQUAL_OK:Kn,EM_MAGNETIC_OFF:bn,EM_MAGNETIC_ON:Gn,ENERGY_REGISTER_FAULT:Je,ENERGY_REGISTER_OVERFLOW:dr,ERR_ACCESS:nr,F_MAX_OK:Yr,F_MAX_OVER:Wr,F_MIN_OK:Gr,F_MIN_OVER:br,I_MAX_OK:Vr,I_MAX_OVER:Kr,MAGNETIC_OFF:or,MAGNETIC_ON:sr,OP_PAR_FAULT:er,POWER_A_OFF:en,POWER_A_ON:rn,POWER_B_OFF:Sr,POWER_B_ON:Dr,POWER_C_OFF:Ir,POWER_C_ON:Mr,POWER_GOOD_DIO:Sn,POWER_OVER_RELAY_OFF:Fn,POWER_SALDO_OK:kr,POWER_SALDO_OVER:jr,P_MAX_A_MINUS_OK:aa,P_MAX_A_MINUS_OVER:ia,P_MAX_OK:zr,P_MAX_OVER:Xr,RELAY_HARD_BAD_OFF:Mn,RELAY_HARD_BAD_ON:Nn,RELAY_HARD_OFF:Cn,RELAY_HARD_ON:In,RELAY_OFF:Or,RELAY_OFF_BAD_SALDO:qn,RELAY_ON:yr,RESET_EM_FLAG:kn,RESET_MAGNET_FLAG:jn,RESTART:mr,SALDO_EN_BAD:Un,SALDO_PARAM_BAD:cn,SET_DEMAND_EN_10MIN:ta,SET_DEMAND_EN_15MIN:ea,SET_DEMAND_EN_1MIN:Zn,SET_DEMAND_EN_30MIN:ra,SET_DEMAND_EN_3MIN:$n,SET_DEMAND_EN_5MIN:Jn,SET_DEMAND_EN_60MIN:na,SET_NEW_SALDO:_n,SET_SALDO_PARAM:wn,SET_TARIFF_TABLE:pr,SUMMER_TIME:Rr,TIME_CORRECT:yn,TIME_CORRECT_NEW:Wn,T_MAX_OK:Fr,T_MAX_OVER:xr,T_MIN_OK:Br,T_MIN_OVER:Hr,VENDOR_PAR_FAULT:tr,V_MAX_OK:Nr,V_MAX_OVER:Cr,V_MIN_OK:Lr,V_MIN_OVER:wr,WD_RESTART:Pr,WINTER_SUMMER_BAD:Rn,WINTER_TIME:Ur});var oa=Nt(sa);var va={type:He,destination:65535,source:65534};var fa=11;var ua=7;var ha=4;var Ea=48;var ga=50;var _a=3+Ea*2;var ca={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var la={...ca,AUTO_SCREEN_SCROLLING:2147483648};var Aa={...ca,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var da={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var Ta={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var pa={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var Ra={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var Ua={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var ya={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var Oa={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var ma={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Pa={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var Da={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var Sa={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var Ma={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Ia={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};function Na(t,e,r){var n=r>>ha;var a=new Array(ha).fill(0);a.forEach(function(e,r){var i=!!ve(n,1,r+1);if(i){a[r]=t.getUint32()}else{a[r]=null}});return a}function Ca(t,e,r){var n=1+ha;var a=e;r.forEach(function(t,e){a=fe(a,1,e+n,Number(!!t))});t.setUint8(a)}function La(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function wa(t,e){var r=e.tariff,n=e.energy;if(r!==undefined&&n!==undefined){t.setUint16(r<<14|n&16383)}else{t.setUint16(65535)}}function Fa(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;ie.call(this,t,e)}Fa.prototype=Object.create(ie.prototype);Fa.prototype.constructor=Fa;Fa.getDayProfileFromByte=function(t){return{tariff:ve(t,2,1),isFirstHalfHour:!ve(t,1,3),hour:ve(t,5,4)}};Fa.getByteFromDayProfile=function(t){var e=0;e=fe(e,2,1,t.tariff);e=fe(e,1,3,+!t.isFirstHalfHour);e=fe(e,5,4,t.hour);return e};Fa.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};Fa.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:oe(la,2147496324),relaySet4:oe(Ra,0),relaySet3:oe(pa,0),relaySet2:oe(Ta,3),relaySet1:oe(da,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:oe(ya,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:oe(Aa,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:oe(Ua,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};Fa.getDefaultOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:0,pmaxMinusThreshold1:0,pmaxMinusThreshold2:0,pmaxMinusThreshold3:0,relaySet:oe(Ia,0)}};Fa.prototype.getFrameHeader=function(){var t=this.getUint8();var e=$e[t];var r=this.getUint16();var n=this.getUint16();return{type:t,typeName:e,destination:r,source:n}};Fa.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?va.type:e,n=t.destination,a=n===void 0?va.destination:n,i=t.source,s=i===void 0?va.source:i;this.setUint8(r);this.setUint16(a);this.setUint16(s)};Fa.prototype.getDeviceId=function(){var t=g(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var n=g(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:n}};Fa.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,n=t.year,a=t.serial;this.setBytes(h(e));this.setUint8(r);this.setUint8(n);this.setBytes(h(a))};Fa.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};Fa.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};Fa.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};Fa.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};Fa.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};Fa.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};Fa.prototype.getDayProfile=function(){return Fa.getDayProfileFromByte(this.getUint8())};Fa.prototype.setDayProfile=function(t){this.setUint8(Fa.getByteFromDayProfile(t))};Fa.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(ua).fill(0).map(function(){return t.getUint8()})}};Fa.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach(function(t){return e.setUint8(t)})};Fa.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};Fa.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};Fa.prototype.getDeviceType=function(){return xe(this.getBytes(9))};Fa.prototype.setDeviceType=function(t){this.setBytes(Be(t))};Fa.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:oe(la,this.getUint32()),relaySet4:oe(Ra,this.getUint8()),relaySet3:oe(pa,this.getUint8()),relaySet2:oe(Ta,this.getUint8()),relaySet1:oe(da,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:oe(ya,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:oe(Aa,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:oe(Ua,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};Fa.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(se(la,t.displaySet));this.setUint8(se(Ra,t.relaySet4));this.setUint8(se(pa,t.relaySet3));this.setUint8(se(Ta,t.relaySet2));this.setUint8(se(da,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(se(ya,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(se(Aa,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(se(Ua,t.relaySet5));this.setUint8(e)};Fa.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=ve(t,ha,1);var r=Na(this,e,t);return{energyType:e,energies:r}};Fa.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,n=t.energies;if(r){Ca(this,r,n)}n.forEach(function(t){if(t!==null){e.setUint32(t)}})};Fa.prototype.getEnergies=function(){var t=this;return new Array(ha).fill(0).map(function(){return t.getInt32()})};Fa.prototype.setEnergies=function(t){var e=this;t.forEach(function(t){return e.setUint32(t)})};Fa.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};Fa.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};Fa.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map(function(){return t.getUint32()}),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};Fa.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach(function(t){return e.setUint32(t)});this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};Fa.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map(function(){return e.getUint16()});return r.map(function(t){return La(t)})};Fa.prototype.setEnergyPeriods=function(t){var e=this;t.forEach(function(t){return wa(e,t)})};Fa.prototype.getEventStatus=function(){var t=this.getUint16();return oe(Oa,t)};Fa.prototype.setEventStatus=function(t){this.setUint16(se(Oa,t))};Fa.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=oe(ma,this.getUint8());var r=oe(Pa,this.getUint8());var n=oe(Da,this.getUint8());var a=oe(Sa,this.getUint8());var i=oe(Ma,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:n,status2:a,status3:i}};Fa.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,n=t.relayStatus2,a=t.status1,i=t.status2,s=t.status3;this.setUint16(e);this.setUint8(se(ma,r));this.setUint8(se(Pa,n));this.setUint8(se(Da,a));this.setUint8(se(Sa,i));this.setUint8(se(Ma,s))};Fa.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=oa[e];switch(e){case Fn:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case _r:case yn:if(r<8){return t}t.newDate=this.getDateTime();break}return t};Fa.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Fn:for(var e of t.power){this.setUint8(e)}break;case _r:case yn:this.setDateTime(t.newDate);break}};Fa.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};Fa.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};Fa.prototype.getDemandParameters=function(){var t=this.getUint8();var e=this.getUint8();var r=this.getUint8();return{channelParam1:t,counterInterval:e,channelParam2:r}};Fa.prototype.setDemandParameters=function(t){this.setUint8(t.channelParam1);this.setUint8(t.counterInterval);this.setUint8(t.channelParam2);this.setUint8(0)};Fa.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(ha).fill(0).map(function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}});return{date:e,power:r}};Fa.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach(function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)})};Fa.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:oe(Ia,this.getUint8())}};Fa.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,n=t.pmaxMinusThreshold2,a=t.pmaxMinusThreshold3,i=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(n);this.setUint32(a);this.setUint8(se(Ia,i))};Fa.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(ha).fill(0).map(function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}})};Fa.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach(function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)})};var xa=0;var Ba=128;var Ha=129;var Ya=130;var Wa=131;var Ga=132;var ba=133;var Va=134;var Ka=135;var za=136;var Xa=137;var ka=144;var ja=145;var Qa=146;var qa=147;var Za=149;var $a=151;var Ja=152;var ti=153;var ei=154;var ri=155;var ni=156;var ai=159;var ii=160;var si=240;var oi=Object.freeze({__proto__:null,ACCESS_DENIED:qa,BAD_ARRAY_INDEX:Va,BAD_BLOCK_NUMBER:ni,BAD_DATA_LENGTH:ba,BAD_MESSAGE:Ga,BAD_RATE_PLAN_ID:za,BAD_RATE_PLAN_SIZE:Xa,BAD_RESPONSE_LENGTH:ka,BAD_SALDO_WRITE:Za,BLOCKED_METER:$a,CALIBRATION_DISABLED:Qa,DECRYPTION_FAILURE:Ya,INTERNAL:si,INVALID_CORRECTION_INTERVAL:ei,NOT_ALIGNED_DATA:Ha,NOT_PREPARED_RATE_PLAN:Ka,NO_DATA_FOR_DATE:ja,OK:xa,OUT_OFF_RANGE:ai,SET_METER_TYPE_FAILURE:ii,TIME_CORRECTION_FAILURE:ti,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:ri,UNENCRYPTED_COMMAND_DISABLED:Ja,UNKNOWN_COMMAND:Ba,UNKNOWN_PROTOCOL:Wa});var vi=Nt(oi);var fi=Mt;var ui=function(t){return function(e){var r=new Fa(e);var n=r.getUint8();var a=r.getUint8();return{commandId:n,commandName:t[n],errorCode:a,errorName:vi[a]}}};var hi=ui(Ct);var Ei=Tt;var gi=6;var _i=function(t){if(t.length!==gi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=o(t,6),r=e[0],n=e[1],a=e[2],i=e[3],s=e[4],v=e[5];return{date:{date:r,month:n,year:a},version:"".concat(i,".").concat(s,".").concat(v)}};var ci=et;var li=function(t){var e=new Fa(t);return e.getTimeCorrectionParameters()};var Ai=0;var di=1;var Ti=2;var pi=3;var Ri=4;var Ui=5;var yi=6;var Oi=7;var mi=8;var Pi=9;var Di=10;var Si=11;var Mi=12;var Ii=13;var Ni=14;var Ci=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Di,CASE_OPEN:Ai,CASE_TERMINAL_OPEN:Pi,DEVICE_FAILURE:mi,ERROR_ACCESS:Ui,MAGNETIC_ON:di,PARAMETERS_UPDATE_LOCAL:pi,PARAMETERS_UPDATE_REMOTE:Ti,PROTECTION_RESET_EM:Ii,PROTECTION_RESET_MAGNETIC:Ni,RESTART:Ri,TARIFF_TABLE_GET:Mi,TARIFF_TABLE_SET:Si,TIME_CORRECT:Oi,TIME_SET:yi});var Li=Nt(Ci);var wi=rt;var Fi=9;var xi=function(t){if(t.length!==Fi){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=o(t,9),r=e[0],n=e[1],a=e[2],i=e[3],s=e[4],v=e[5],f=e[6],u=e[7],h=e[8];return{event:r,name:Li[r],index:n,date:{year:a,month:i,date:s,hours:v,minutes:f,seconds:u},count:h}};var Bi=q;var Hi={calibrationEnable:1,hardkey:2,keyPressTest:4,keyOpenkeyTest:8,keyGerkonTest:16,keyOpenKlemaTest:32,keyOpenModuleTest:64,keyPress2Test:128};var Yi=function(t){var e=new Fa(t);var r=e.getUint32();var n=e.getUint32();var a=e.getUint32();var i=e.getUint32();e.getUint32();var s=e.getUint32();var o=oe(ma,e.getUint8());var v=e.getUint8();var f=e.getUint8();var u=oe(Hi,e.getUint8());var h={"A+":e.getUint8(),"A-":e.getUint8()};var E=!!(e.getUint8()&1);var g=v|f<<8;return{operatingSeconds:r,tbadVAVB:n,tbadImaxAll:a,tbadPmaxAll:i,tbadFREQ:s,relayStatus:o,statusEvent:oe(Oa,g),calibrationFlags:u,currentTariffs:h,isSummerTime:E}};var Wi=U;var Gi=function(t){var e=new Fa(t);return{powerA:e.getInt32(),iaRms:e.getInt32(),vavbRms:e.getInt32(),varA:e.getInt32(),pfA:e.getInt16()/1e3,ibRms:e.getInt32(),powerB:e.getInt32(),varB:e.getInt32(),pfB:e.getInt16()/1e3}};var bi=T;var Vi=function(t){var e=new Fa(t);return e.getDateTime()};var Ki=19;var zi=I;var Xi=function(t){var e=new Fa(t);var r;if(t.length===Ki){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var ki=19;var ji=st;var Qi=function(t){var e=new Fa(t);var r;if(t.length===ki){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var qi=4;var Zi=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var $i=4294967295;var Ji={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var ts=function(t){var e={};Object.keys(t).forEach(function(r){e[r]=!!t[r]});return se(Ji,e)};var es=function(t){return t<qi?1<<t:0};var rs=function(t){return t<qi?1<<t<<4:0};var ns=function(t,e){var r=0;if(t<qi){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=es(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=rs(t)}}return r};function as(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;ie.call(this,t,e)}as.prototype=Object.create(ie.prototype);as.prototype.constructor=as;as.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};as.prototype.setDate=function(t){var e=t.year,r=t.month,n=t.date;var a=e<<1|r>>3&1;var i=r<<5&224|n&31;this.setUint8(a);this.setUint8(i)};as.prototype.getEnergiesFlags=function(){var t=this.getUint8();return oe(Ji,t)};as.prototype.setEnergiesFlags=function(t){this.setUint8(ts(t))};as.prototype.getHalfHourEnergy1=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();var a=n>>14&3;var i=n&16383;e.push(n===$i?undefined:{tariff:a,energy:i})}return e};as.prototype.setHalfHourEnergy1=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e],n=r.tariff,a=r.energy;var i=n<<14|a;this.setUint16(i===undefined?$i:i)}}};as.prototype.getHalfHourEnergy3=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();e.push(n===$i?undefined:n)}return e};as.prototype.setHalfHourEnergy3=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?$i:r)}}};as.prototype.getHalfHourEnergies1=function(t,e){var r=this;var n={};Zi.forEach(function(a){if(t[a]){n[a]=r.getHalfHourEnergy1(e)}});return n};as.prototype.getHalfHourEnergies3=function(t,e){var r=this;var n={};Zi.forEach(function(a){if(t[a]){n[a]=r.getHalfHourEnergy3(e)}});return n};as.prototype.setHalfHourEnergies1=function(t){var e=this;Zi.forEach(function(r){e.setHalfHourEnergy1(t[r])})};as.prototype.setHalfHourEnergies3=function(t){var e=this;Zi.forEach(function(r){e.setHalfHourEnergy3(t[r])})};as.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&Ji["A+"]){e["A+"]=this.getUint32()}if(t&Ji["A+R+"]){e["A+R+"]=this.getUint32()}if(t&Ji["A+R-"]){e["A+R-"]=this.getUint32()}return e};as.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};as.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&Ji["A-"]){e["A-"]=this.getUint32()}if(t&Ji["A-R+"]){e["A-R+"]=this.getUint32()}if(t&Ji["A-R-"]){e["A-R-"]=this.getUint32()}return e};as.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};as.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(qi).fill(null);for(var n=0;n<qi;n++){if(e&es(n)){r[n]=this.getAPlusTariffEnergies(t)}}for(var a=0;a<qi;a++){if(e&rs(a)){r[a]={...r[a],...this.getAMinusTariffEnergies(t)}}}return r};as.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var n=0;t.forEach(function(t,e){if(t){r|=ts(t);n|=ns(e,t)}});this.setUint8(r);this.setUint8(n);t.forEach(function(t){return e.setAPlusTariffEnergies(t)});t.forEach(function(t){return e.setAMinusTariffEnergies(t)})};as.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};as.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,n=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(n)}};as.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&Ji["A+"]){e["A+"]=this.getPowerMax()}if(t&Ji["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&Ji["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};as.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};as.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&Ji["A-"]){e["A-"]=this.getPowerMax()}if(t&Ji["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&Ji["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};as.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};as.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(qi).fill(null);for(var n=0;n<qi;n++){if(e&es(n)){r[n]=this.getAPlusTariffPowerMax(t)}}for(var a=0;a<qi;a++){if(e&rs(a)){r[a]={...r[a],...this.getAMinusTariffPowerMax(t)}}}return r};as.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var n=0;t.forEach(function(t,e){if(t){r|=ts(t);n|=ns(e,t)}});this.setUint8(r);this.setUint8(n);t.forEach(function(t){return e.setAPlusTariffPowerMax(t)});t.forEach(function(t){return e.setAMinusTariffPowerMax(t)})};var is=Dt;var ss=function(t){var e=new as(t);return{date:e.getDate(),energies:e.getTariffsEnergies()}};var os=K;var vs=function(t){var e=new Fa(t);return e.getDayMaxDemandResponse()};var fs=ut;var us=function(t){var e=new Fa(t);return e.getDayMaxDemandResponse()};var hs=at;var Es=function(t){var e=new Fa(t);return e.getDayMaxDemandResponse()};var gs=St;var _s=function(t){var e=new as(t);return{date:e.getDate(),tariffs:e.getTariffsPowerMax()}};var cs=255;var ls=$;var As=function(t){var e=t.indexOf(cs);var r=e===-1?t:t.slice(0,e);return{periods:f(r).map(Fa.getDayProfileFromByte)}};var ds=1;var Ts=2;Nt(Pt);var ps=7;var Rs=25;var Us=function(t,e,r){return Math.trunc((t*60+e)/r)};var ys=function(t){return Us(Rs,0,t)};var Os=function(t,e,r){if(t===65535){return null}var n=ys(r);if(e===n){return{lastSummerHour:t>>8&255}}return r===60?{energy:t}:{tariff:t>>14&3,energy:t&16383}};var ms=function(t,e){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return t.reduce(function(t,n,a){t.push(Os(n,(e??0)+a,r));return t},[])};var Ps=function(t,e,r){if(t===65535){return 65535}var n=ys(r);return e===n?{lastSummerHour:t>>8&255}:{voltage:t}};var Ds=function(t,e){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return t.reduce(function(t,n,a){t.push(Ps(n,(e??0)+a,r));return t},[])};var Ss=Ot;var Ms=function(t){if(!t||t.length<ps){throw new Error("Invalid uplink GetDemand byte length.")}var e=new Fa(t);var r=e.getDemand();if(t.length!==ps+2*r.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var n=new Array(r.count).fill(0).map(function(){return e.getUint16()});var a=r.energyType===ds||r.energyType===Ts;r.demands=a?ms(n,r.firstIndex,r.period):Ds(n,r.firstIndex,r.period);return r};var Is=function(t,e,r){if(!t){throw new Error("Command name is required.")}if(e&&!Array.isArray(e)){throw new Error("Invalid payload for ".concat(t,". Expected array, got: ").concat(typeof e,"."))}if(e.length!==r){var n=g(e,{separator:""});throw new Error("Wrong buffer size for ".concat(t,": ").concat(e.length,". Expected: ").concat(r,". Payload: 0x").concat(n,"."))}};var Ns=yt;var Cs=Ct[yt];var Ls=4;var ws=function(t){Is(Cs,t,Ls);var e=new Fa(t);return e.getDemandParameters()};var Fs=d;var xs=function(t){var e=new Fa(t);return e.getDeviceId()};var Bs=A;var Hs=function(t){var e=new Fa(t);return e.getDeviceType()};var Ys=1;var Ws=2;var Gs=3;var bs=4;var Vs=5;var Ks=6;var zs=7;var Xs=8;var ks=9;var js=10;var Qs=11;var qs=12;var Zs=13;var $s=14;var Js=15;var to=16;var eo=17;var ro=18;var no=19;var ao=20;var io=21;var so=22;var oo=23;var vo=24;var fo=25;var uo=26;var ho=28;var Eo=30;var go=31;var _o=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:bs,ACTIVE_ENERGY_T2:Vs,ACTIVE_ENERGY_T3:Ks,ACTIVE_ENERGY_T4:zs,ACTIVE_POWER_IN_NEUTRAL:ks,ACTIVE_POWER_PER_PHASE:Xs,BATTERY_VOLTAGE:so,CURRENT_BALANCE:Eo,CURRENT_IN_NEUTRAL:Qs,CURRENT_IN_PHASE:js,DATE_MONTH_YEAR:$s,EXPORTED_ACTIVE_ENERGY_T1:to,EXPORTED_ACTIVE_ENERGY_T2:eo,EXPORTED_ACTIVE_ENERGY_T3:ro,EXPORTED_ACTIVE_ENERGY_T4:no,HOUR_MINUTE_SECOND:Zs,MAGNET_INDUCTION:ho,OPTOPORT_SPEED:go,POWER_FACTOR_PHASE_A:ao,POWER_FACTOR_PHASE_B:io,POWER_THRESHOLD_T1:oo,POWER_THRESHOLD_T2:vo,POWER_THRESHOLD_T3:fo,POWER_THRESHOLD_T4:uo,SET_ALL_SEGMENT_DISPLAY:Ys,SOFTWARE_VERSION:Ws,TOTAL_ACTIVE_ENERGY:Gs,TOTAL_EXPORTED_ACTIVE_ENERGY:Js,VOLTAGE:qs});Nt(_o);var co=ct;var lo=function(t){var e=v(t),r=e[0],n=e.slice(1);return{displayMode:r,order:n}};var Ao=16;var To=y;var po=function(t){var e=new Fa(t);var r;if(t.length===Ao){r={energies:e.getEnergies()}}else{r=e.getPackedEnergyWithType()}return r};var Ro=19;var Uo=l;var yo=function(t){var e=new Fa(t);var r;if(t.length===Ro){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var Oo=16;var mo=Et;var Po=function(t){var e=new Fa(t);var r;if(t.length===Oo){r={energies:e.getEnergies()}}else{r=e.getPackedEnergyWithType()}return r};var Do=19;var So=ot;var Mo=function(t){var e=new Fa(t);var r;if(t.length===Do){r={date:e.getDate(),energies:e.getEnergies()}}else{r={date:e.getDate(),...e.getPackedEnergyWithType()}}return r};var Io=3+1;var No=4;var Co=X;var Lo=Io+255*No;var wo=function(t){return function(e){if(e.length>Lo){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var r=new t(e);var n=r.getDate();var a=r.getUint8();var i=[];while(!r.isEmpty){i.push(r.getEvent())}return{date:n,eventsNumber:a,events:i}}};var Fo=wo(Fa);var xo=14;var Bo=20;var Ho=k;var Yo=function(t){if(t.length!==xo&&t.length!==Bo){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new Fa(t);var r=e.getUint16();var n=e.getUint16();var a=e.getUint16();var i=e.getUint16();var s=e.getUint16();var o=e.getUint16();var v=e.getUint16();return{accessClosed:o,accessError:s,localParametersChange:a,remoteParametersChange:i,powerOff:n,restart:r,setClock:v}};var Wo=c;var Go=function(t){var e=new Fa(t,true);return e.getEventStatus()};var bo=Z;var Vo=function(t){var e=new Fa(t);return{temperature:e.getInt16(),frequency:e.getInt16()}};var Ko=G;var zo=function(t){var e=new Fa(t);return e.getExtendedCurrentValues2()};var Xo=M;var ko=function(t){var e=new Fa(t);var r=t.length>_a;var n=e.getDate();var a=e.getEnergyPeriods(r?ga:Ea);if(r){return{date:n,periods:a,dstHour:e.getUint8()}}return{date:n,periods:a}};var jo=ft;var Qo=function(t){var e=new Fa(t);var r=t.length>_a;var n=e.getDate();var a=e.getEnergyPeriods(r?ga:Ea);if(r){return{date:n,periods:a,dstHour:e.getUint8()}}return{date:n,periods:a}};var qo=it;var Zo=function(t){var e=new Fa(t);var r=t.length>_a;var n=e.getDate();var a=e.getEnergyPeriods(r?ga:Ea);if(r){return{date:n,periods:a,dstHour:e.getUint8()}}return{date:n,periods:a}};var $o=dt;var Jo=function(t){var e=new as(t);var r=e.getDate();var n=e.getEnergiesFlags();var a=e.getUint8();var i=e.getUint8();return{date:r,firstHalfhour:a,halfhoursNumber:i,energies:e.getHalfHourEnergies1(n,i)}};var tv=At;var ev=function(t){var e=new Fa(t);return{induction:e.getUint16(),threshold:e.getUint16(),inductionCoefficient:e.getUint16()/100,reserved:e.getUint32()}};var rv=mt;var nv=function(t){var e=o(t,1),r=e[0];return{ten:r}};var av=N;var iv=function(t){var e=new Fa(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var sv=vt;var ov=function(t){var e=new Fa(t);return{year:e.getUint8(),month:e.getUint8(),energies:e.getEnergies()}};var vv=z;var fv=function(t){var e=new Fa(t);return{year:e.getUint8(),month:e.getUint8(),tariffs:e.getMonthMaxPowerByTariffs()}};var uv=ht;var hv=function(t){var e=new Fa(t);return{year:e.getUint8(),month:e.getUint8(),tariffs:e.getMonthMaxPowerByTariffs()}};var Ev=F;var gv=function(t){var e=new Fa(t);return e.getOperatorParameters()};var _v=pt;var cv=function(t){var e=new Fa(t);return e.getOperatorParametersExtended3()};var lv=W;var Av=1+fa*2;var dv=function(t){if(t.length!==Av){throw new Error("Invalid getRatePlanInfo data size.")}var e=new Fa(t);return{tariffTable:e.getUint8(),activePlan:e.getTariffPlan(),passivePlan:e.getTariffPlan()}};var Tv=H;var pv=29;var Rv=function(t){if(t.length!==pv){throw new Error("Invalid getSaldo data size.")}var e=new Fa(t);return{currentSaldo:e.getInt32(),count:e.getUint8(),energy:new Array(4).fill(0).map(function(){return e.getInt32()}),beginSaldoOfPeriod:e.getInt32(),date:{month:e.getUint8(),date:e.getUint8(),hours:e.getUint8(),minutes:e.getUint8()}}};var Uv=b;var yv=37;var Ov=function(t){if(t.length!==yv){throw new Error("Invalid getSaldoParameters data size.")}var e=new Fa(t);return e.getSaldoParameters()};var mv=J;var Pv=function(t){var e=new Fa(t);return e.getSeasonProfile()};var Dv=tt;var Sv=function(t){var e=new Fa(t);return e.getSpecialDay()};var Mv=B;var Iv=function(t){return{version:String.fromCharCode.apply(null,f(t))}};var Nv=S;var Cv=0;var Lv=function(t){if(t.length!==Cv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var wv=j;var Fv=0;var xv=function(t){if(t.length!==Fv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Bv=Q;var Hv=0;var Yv=function(t){if(t.length!==Hv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Wv=nt;var Gv=0;var bv=function(t){if(t.length!==Gv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Vv=R;var Kv=0;var zv=function(t){if(t.length!==Kv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Xv=gt;var kv=0;var jv=function(t){if(t.length!==kv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Qv=w;var qv=0;var Zv=function(t){if(t.length!==qv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var $v=p;var Jv=0;var tf=function(t){if(t.length!==Jv){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var ef=O;var rf=0;var nf=function(t){if(t.length!==rf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var af=Ut;var sf=Ct[Ut];var of=0;var vf=function(t){Is(sf,t,of);return{}};var ff=_t;var uf=0;var hf=function(t){if(t.length!==uf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ef=x;var gf=0;var _f=function(t){if(t.length!==gf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var cf=Rt;var lf=0;var Af=function(t){if(t.length!==lf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var df=Y;var Tf=0;var pf=function(t){if(t.length!==Tf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Rf=V;var Uf=0;var yf=function(t){if(t.length!==Uf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Of=m;var mf=0;var Pf=function(t){if(t.length!==mf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Df=P;var Sf=0;var Mf=function(t){if(t.length!==Sf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var If=lt;var Nf=function(t){var e=new Fa(t);var r=e.getUint8();var n=!!(r&1);var a=!!(r&2);return{electroMagneticIndication:n,magneticIndication:a}};var Cf=L;var Lf=0;var wf=function(t){if(t.length!==Lf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Ff=C;var xf=0;var Bf=function(t){if(t.length!==xf){throw new Error("Wrong buffer size: ".concat(t.length,"."))}return{}};var Hf={encrypt:function(){},decrypt:function(){}};var Yf=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach(function(t){r^=t});return r};var Wf=3;var Gf=2;var bf=2;var Vf=function(t,e){return function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a=n?.aesKey;var i=[];var s=o(r,2),v=s[0],u=s[1];var h=u&Wf;var E={messageId:v,accessLevel:h,commands:i,bytes:r,lrc:{received:undefined,calculated:0}};var g=r.slice(Gf);var c;if(a&&h!==_){g=f(Hf.decrypt(a,g))}var l=g[g.length-1];g=g.slice(0,-1);var A=Yf(g);if(h!==_||l!==0){if(l!==A){c="Mismatch LRC."}}var d=g[0]&Wf;var T=g.slice(1);if(h!==d){c="Mismatch access levels."}var p=0;do{var R=T[p];var U=T[p+1];var y=bf+U;var O=T.slice(p+bf,p+y);var m={id:R,name:e[R],headerSize:bf,bytes:T.slice(p,p+y)};if(!R){break}try{if(!t[R]){throw new Error("Unsupported command id: ".concat(R,"!"))}m.parameters=t[R](O,n);i.push(m)}catch(t){i.push({command:m,error:t.message})}p+=y}while(p<=T.length);E.lrc.calculated=A;E.lrc.received=l;if(c){return{message:E,error:c}}return E}};var Kf={};var zf=Ct;var Xf=Vf(Kf,zf);Kf[Lt]=Ft;Kf[fi]=hi;Kf[Ei]=_i;Kf[ci]=li;Kf[wi]=xi;Kf[Bi]=Yi;Kf[Wi]=Gi;Kf[bi]=Vi;Kf[zi]=Xi;Kf[ji]=Qi;Kf[is]=ss;Kf[os]=vs;Kf[fs]=us;Kf[hs]=Es;Kf[gs]=_s;Kf[ls]=As;Kf[Ss]=Ms;Kf[Ns]=ws;Kf[Fs]=xs;Kf[Bs]=Hs;Kf[co]=lo;Kf[To]=po;Kf[Uo]=yo;Kf[mo]=Po;Kf[So]=Mo;Kf[Co]=Fo;Kf[Ho]=Yo;Kf[Wo]=Go;Kf[bo]=Vo;Kf[Ko]=zo;Kf[Xo]=ko;Kf[jo]=Qo;Kf[qo]=Zo;Kf[$o]=Jo;Kf[tv]=ev;Kf[rv]=nv;Kf[av]=iv;Kf[sv]=ov;Kf[vv]=fv;Kf[uv]=hv;Kf[Ev]=gv;Kf[_v]=cv;Kf[lv]=dv;Kf[Tv]=Rv;Kf[Uv]=Ov;Kf[mv]=Pv;Kf[Dv]=Sv;Kf[Mv]=Iv;Kf[Nv]=Lv;Kf[wv]=xv;Kf[Bv]=Yv;Kf[Wv]=bv;Kf[Vv]=zv;Kf[Xv]=jv;Kf[Qv]=Zv;Kf[$v]=tf;Kf[ef]=nf;Kf[af]=vf;Kf[ff]=hf;Kf[Ef]=_f;Kf[cf]=Af;Kf[df]=pf;Kf[Rf]=yf;Kf[Of]=Pf;Kf[Df]=Mf;Kf[If]=Nf;Kf[Cf]=wf;Kf[Ff]=Bf;var kf=145;var jf=30;var Qf=function(t){if(t[0]!==jf){return{}}var e=t[1];var r=t[3];var n=t.slice(4,e+2);if(r===kf){return n}return null};fromBytes=Xf;getDataSegment=Qf})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
