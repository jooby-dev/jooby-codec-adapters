// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=Array(t);e<t;e++)a[e]=r[e];return a}function t(r){if(Array.isArray(r))return r}function e(t){if(Array.isArray(t))return r(t)}function a(r,t,e){return(t=s(t))in r?Object.defineProperty(r,t,{value:e,enumerable:true,configurable:true,writable:true}):r[t]=e,r}function n(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function i(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,n,i,v,o=[],E=true,u=false;try{if(i=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;E=!1}else for(;!(E=(a=i.call(e)).done)&&(o.push(a.value),o.length!==t);E=!0);}catch(r){u=true,n=r}finally{try{if(!E&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(u)throw n}}return o}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(r,e){return t(r)||i(r,e)||A(r,e)||v()}function u(r){return t(r)||n(r)||A(r)||v()}function _(r){return e(r)||n(r)||A(r)||o()}function f(r,t){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var a=e.call(r,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}function s(r){var t=f(r,"string");return"symbol"==typeof t?t:t+""}function A(t,e){if(t){if("string"==typeof t)return r(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}var g={separator:" ",prefix:""};var R=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},g,t),a=e.separator,n=e.prefix;return r.map(function(r){return"".concat(n).concat(r.toString(16).padStart(2,"0"))}).join(a)};var T=function(r,t,e){if(!r){throw new Error("Command name is required.")}if(t&&!Array.isArray(t)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof t,"."))}if(t.length!==e){var a=R(t,{separator:""});throw new Error("Wrong buffer size for ".concat(r,": ").concat(t.length,". Expected: ").concat(e,". Payload: 0x").concat(a,"."))}};var l=0;var c=1;var d=2;var O=3;var h=Object.freeze({__proto__:null,READ_ONLY:O,READ_WRITE:d,ROOT:c,UNENCRYPTED:l});var U=1;var S=3;var N=4;var I=5;var L=7;var m=8;var C=9;var D=13;var p=15;var M=16;var P=17;var y=18;var F=19;var w=20;var Y=21;var G=22;var B=23;var H=24;var V=25;var b=28;var x=30;var W=31;var X=40;var K=41;var j=42;var z=44;var k=45;var Q=46;var Z=47;var q=49;var $=50;var J=51;var rr=52;var tr=53;var er=54;var ar=57;var nr=58;var ir=59;var vr=60;var or=61;var Er=62;var ur=65;var _r=70;var fr=74;var sr=75;var Ar=79;var gr=80;var Rr=82;var Tr=83;var lr=88;var cr=89;var dr=91;var Or=92;var hr=93;var Ur=94;var Sr=100;var Nr=109;var Ir=111;var Lr=112;var mr=113;var Cr=114;var Dr=115;var pr=116;var Mr=117;var Pr=118;var yr=122;var Fr=Object.freeze({__proto__:null,activateRatePlan:F,getBv:Lr,getCorrectTime:Er,getCriticalEvent:ur,getCurrentStatusMeter:ar,getCurrentValues:D,getDateTime:L,getDayDemand:G,getDayDemandExport:Ar,getDayMaxDemand:q,getDayMaxDemandExport:lr,getDayMaxDemandPrevious:fr,getDayProfile:ir,getDemand:Pr,getDemandParameters:Mr,getDeviceId:I,getDeviceType:N,getDisplayParam:Ur,getEnergy:p,getEnergyDayPrevious:S,getEnergyExport:dr,getEnergyExportDayPrevious:gr,getEventStatus:U,getEvents:J,getEventsCounters:rr,getExtendedCurrentValues:nr,getExtendedCurrentValues2:k,getHalfHourDemand:Y,getHalfHourDemandExport:Tr,getHalfHourDemandPrevious:sr,getHalfHourEnergies:Ir,getMagneticFieldThreshold:Nr,getMeterInfo:yr,getMonthDemand:B,getMonthDemandExport:Rr,getMonthMaxDemand:$,getMonthMaxDemandExport:cr,getOperatorParameters:x,getOperatorParametersExtended3:mr,getQuality:Dr,getRatePlanInfo:z,getSaldo:K,getSaldoParameters:Q,getSeasonProfile:vr,getSpecialDay:or,getVersion:X,prepareRatePlan:w,resetPowerMaxDay:tr,resetPowerMaxMonth:er,runTariffPlan:_r,setAccessKey:C,setCorrectDateTime:Or,setCorrectTime:b,setDateTime:m,setDayProfile:M,setDemandParameters:pr,setDisplayParam:hr,setOperatorParameters:W,setOperatorParametersExtended3:Cr,setSaldo:j,setSaldoParameters:Z,setSeasonProfile:P,setSpecialDay:y,setSpecialOperation:Sr,turnRelayOff:V,turnRelayOn:H});var wr=120;var Yr=121;var Gr=254;var Br=255;var Hr=Object.freeze({__proto__:null,activateRatePlan:F,errorDataFrameResponse:Br,errorResponse:Gr,getBv:Lr,getCorrectTime:Er,getCriticalEvent:ur,getCurrentStatusMeter:ar,getCurrentValues:D,getDateTime:L,getDayDemand:G,getDayDemandExport:Ar,getDayEnergies:wr,getDayMaxDemand:q,getDayMaxDemandExport:lr,getDayMaxDemandPrevious:fr,getDayMaxPower:Yr,getDayProfile:ir,getDemand:Pr,getDemandParameters:Mr,getDeviceId:I,getDeviceType:N,getDisplayParam:Ur,getEnergy:p,getEnergyDayPrevious:S,getEnergyExport:dr,getEnergyExportDayPrevious:gr,getEventStatus:U,getEvents:J,getEventsCounters:rr,getExtendedCurrentValues:nr,getExtendedCurrentValues2:k,getHalfHourDemand:Y,getHalfHourDemandExport:Tr,getHalfHourDemandPrevious:sr,getHalfHourEnergies:Ir,getMagneticFieldThreshold:Nr,getMeterInfo:yr,getMonthDemand:B,getMonthDemandExport:Rr,getMonthMaxDemand:$,getMonthMaxDemandExport:cr,getOperatorParameters:x,getOperatorParametersExtended3:mr,getQuality:Dr,getRatePlanInfo:z,getSaldo:K,getSaldoParameters:Q,getSeasonProfile:vr,getSpecialDay:or,getVersion:X,prepareRatePlan:w,resetPowerMaxDay:tr,resetPowerMaxMonth:er,runTariffPlan:_r,setAccessKey:C,setCorrectDateTime:Or,setCorrectTime:b,setDateTime:m,setDayProfile:M,setDemandParameters:pr,setDisplayParam:hr,setOperatorParameters:W,setOperatorParametersExtended3:Cr,setSaldo:j,setSaldoParameters:Z,setSeasonProfile:P,setSpecialDay:y,setSpecialOperation:Sr,turnRelayOff:V,turnRelayOn:H});var Vr=function(r){var t={};for(var e in r){var a=r[e];t[a]=e}return t};var br=Vr(Hr);var xr=F;var Wr=br[F];var Xr=0;var Kr=function(r){T(Wr,r,Xr);return{}};var jr=0;var zr=128;var kr=129;var Qr=130;var Zr=131;var qr=132;var $r=133;var Jr=134;var rt=135;var tt=136;var et=137;var at=144;var nt=145;var it=146;var vt=147;var ot=149;var Et=151;var ut=152;var _t=153;var ft=154;var st=155;var At=156;var gt=159;var Rt=160;var Tt=240;var lt=Object.freeze({__proto__:null,ACCESS_DENIED:vt,BAD_ARRAY_INDEX:Jr,BAD_BLOCK_NUMBER:At,BAD_DATA_LENGTH:$r,BAD_MESSAGE:qr,BAD_RATE_PLAN_ID:tt,BAD_RATE_PLAN_SIZE:et,BAD_RESPONSE_LENGTH:at,BAD_SALDO_WRITE:ot,BLOCKED_METER:Et,CALIBRATION_DISABLED:it,DECRYPTION_FAILURE:Qr,INTERNAL:Tt,INVALID_CORRECTION_INTERVAL:ft,NOT_ALIGNED_DATA:kr,NOT_PREPARED_RATE_PLAN:rt,NO_DATA_FOR_DATE:nt,OK:jr,OUT_OFF_RANGE:gt,SET_METER_TYPE_FAILURE:Rt,TIME_CORRECTION_FAILURE:_t,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:st,UNENCRYPTED_COMMAND_DISABLED:ut,UNKNOWN_COMMAND:zr,UNKNOWN_PROTOCOL:Zr});var ct=Vr(lt);var dt=Br;var Ot=br[Br];var ht=1;var Ut=function(r){T(Ot,r,ht);var t=E(r,1),e=t[0];return{errorCode:e,errorName:ct[e]}};var St=1;var Nt=2;var It=3;var Lt=4;var mt=Math.log,Ct=Math.pow,Dt=Math.LN2;var pt=function(r,t,e,a,n){var i,v,o=n*8-a-1,E=(1<<o)-1,u=E>>1,_=-7,f=e?n-1:0,s=e?-1:1,A=r[t+f];f+=s;i=A&(1<<-_)-1;A>>=-_;_+=o;for(;_>0;i=i*256+r[t+f],f+=s,_-=8);v=i&(1<<-_)-1;i>>=-_;_+=a;for(;_>0;v=v*256+r[t+f],f+=s,_-=8);if(i===0){i=1-u}else if(i===E){return v?NaN:A?-Infinity:Infinity}else{v=v+Ct(2,a);i=i-u}return(A?-1:1)*v*Ct(2,i-a)};var Mt=function(r,t,e,a,n,i){var v,o,E,u=i*8-n-1,_=(1<<u)-1,f=_>>1,s=n===23?Ct(2,-24)-Ct(2,-77):0,A=a?0:i-1,g=a?1:-1,R=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){o=e!==e?1:0;v=_}else{v=mt(e)/Dt|0;if(e*(E=Ct(2,-v))<1){v--;E*=2}if(v+f>=1){e+=s/E}else{e+=s*Ct(2,1-f)}if(e*E>=2){v++;E/=2}if(v+f>=_){o=0;v=_}else if(v+f>=1){o=(e*E-1)*Ct(2,n);v=v+f}else{o=e*Ct(2,f-1)*Ct(2,n);v=0}}for(;n>=8;r[t+A]=o&255,A+=g,o/=256,n-=8);v=v<<n|o;u+=n;for(;u>0;r[t+A]=v&255,A+=g,v/=256,u-=8);r[t+A-g]|=R*128};var Pt=[1,0];var yt=[2,1,0];var Ft=[3,2,1,0];var wt=[0,1];var Yt=[0,1,2];var Gt=[0,1,2,3];var Bt=function(r,t){return r[t]};var Ht=function(r,t,e){var a=e?wt:Pt;var n=r[t+a[0]];var i=r[t+a[1]]<<8;return n|i};var Vt=function(r,t,e){var a=e?Yt:yt;var n=r[t+a[0]];var i=r[t+a[1]]<<8;var v=r[t+a[2]]<<16;return n|i|v};var bt=function(r,t,e){var a=e?Gt:Ft;var n=r[t+a[3]]*16777216;var i=r[t+a[2]]*65536;var v=r[t+a[1]]*256;var o=r[t+a[0]];return n+i+v+o};var xt=function(r,t,e){r[t]=e&255};var Wt=function(r,t,e,a){var n=a?wt:Pt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255};var Xt=function(r,t,e,a){var n=a?Yt:yt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255};var Kt=function(r,t,e,a){var n=a?Gt:Ft;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255;r[t+n[3]]=e>>>24&255};function jt(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=t}jt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){xt(this.data,this.offset,r<0?r|256:r);this.offset+=St},getInt8:function(){var r=Bt(this.data,this.offset);this.offset+=St;return r&128?r^-256:r},setUint8:function(r){xt(this.data,this.offset,r);this.offset+=St},getUint8:function(){var r=Bt(this.data,this.offset);this.offset+=St;return r},setInt16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Wt(this.data,this.offset,r<0?r|65536:r,t);this.offset+=Nt},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Ht(this.data,this.offset,r);this.offset+=Nt;return t&32768?t^-65536:t},setUint16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Wt(this.data,this.offset,r,t);this.offset+=Nt},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Ht(this.data,this.offset,r);this.offset+=Nt;return t},setInt24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Xt(this.data,this.offset,r<0?r|16777216:r,t);this.offset+=It},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Vt(this.data,this.offset,r);this.offset+=It;return t&8388608?t^-16777216:t},setUint24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Xt(this.data,this.offset,r,t);this.offset+=It},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Vt(this.data,this.offset,r);this.offset+=It;return t},setInt32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Kt(this.data,this.offset,r<0?r|4294967296:r,t);this.offset+=Lt},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=bt(this.data,this.offset,r);this.offset+=Lt;return t&2147483648?t^-4294967296:t},setUint32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Kt(this.data,this.offset,r,t);this.offset+=Lt},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=bt(this.data,this.offset,r);this.offset+=Lt;return t},setFloat32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Mt(this.data,this.offset,r,t,23,4);this.offset+=Lt},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=pt(this.data,this.offset,r,23,4);this.offset+=Lt;return t},setString:function(r){this.setUint8(r.length);for(var t=0;t<r.length;++t){this.setUint8(r.charCodeAt(t))}},getString:function(){var r=this.getUint8();var t=this.offset+r;var e=[];while(this.offset<t){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=t+r;return this.data.slice(t,this.offset)},setBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[t,r.length].concat(_(r)));this.data=e;this.offset=t+r.length}};Object.defineProperties(jt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var zt=Gr;var kt=br[Gr];var Qt=2;var Zt=function(r){return function(t){T(kt,t,Qt);var e=new jt(t,false);var a=e.getUint8();var n=e.getUint8();return{commandId:a,commandName:r[a],errorCode:n,errorName:ct[n]}}};var qt=Zt(br);var $t=Lr;var Jt=br[Lr];var re=6;var te=function(r){T(Jt,r,re);return{vector:r}};var ee=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var e={};for(var a in r){e[a]=(t&r[a])!==0}return e};var ae=function(r,t,e){return(1<<t)-1&r>>e-1};var ne="x";var ie=[".","1","3","R","M"];var ve=[".","A","G","R","T","D"];var oe=[".","0","1","2","3","4","5"];var Ee=[".","A","B","C","D","E","F"];var ue=[".","A","B","C","D","E","F","H","K","G"];var _e=[".","1","2","3","4"];var fe=[".","L","M","Z","K"];var se=[".","0","1","2","3","4","5","6","7","8","9"];var Ae=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var ge=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var Re=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Te=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var le={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var ce={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var de=function(r){var t=ee(ce,r);return{meterType:"mtx3",...t,typeMeterG:!t.typeMeterG}};var Oe=function(r){return[r>>4,r&15]};var he=function(r){var t=new Array(r.length*2).fill(0);r.forEach(function(r,e){var a=Oe(r),n=E(a,2),i=n[0],v=n[1];t[e*2]=i;t[e*2+1]=v});return t};var Ue=function(r){if(r.length!==14&&r.length!==16){throw new Error("Device type bytes wrong size")}var t=["MTX "];t.push(ie[r[0]]??ne);t.push(ve[r[1]]??ne);t.push(oe[r[2]]??ne);t.push(oe[r[3]]??ne);t.push(".");t.push(Ee[r[4]]??ne);t.push(ue[r[5]]??ne);t.push(".");t.push(_e[r[6]]??ne);t.push(fe[r[7]]??ne);var e=r[8];t.push(se[r[9]]??ne);t.push("-");var a;if(r.length<14||r[12]===0&&r[13]===0){t.push(Ae[r[10]]??ne);a=11}else if(r[13]===0){t.push(Ae[r[10]]??ne);t.push(Ae[r[11]]??ne);a=12}else{t.push(Ae[r[10]]??ne);t.push(Ae[r[11]]??ne);t.push(Ae[r[12]]??ne);a=13}var n=r[a];if(n&&n!==0){t.push(Re[n]??ne)}return{type:t.join(""),revision:e}};var Se=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=["MTX "];var e=r[1]===5?"-":" ";t.push(ie[r[0]]??ne);t.push(ve[r[1]]??ne);t.push(e);for(var a=2;a<r.length;a++){if(r[a]!==0){t.push(ge[r[a]]??ne)}}return{type:t.join("")}};var Ne=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=[];t.push(ie[r[0]]??ne);for(var e=1;e<r.length;e++){if(r[e]!==0){t.push(Te[r[e]]??ne)}}return{type:t.join("")}};var Ie=function(r){if(r.length!==9){throw new Error("The buffer is too small")}var t;var e=[0,5,6,7,9,127,239];var a=e.indexOf(r[0])!==-1?2:0;var n=he(r.slice(0,8));var i=n[a];var v=ie[i];if(v==="1"||v==="3"){t={...Ue(n.slice(a)),descriptor:v==="3"?de(r[8]):{meterType:"mtx1",...ee(le,r[8])}}}else{t=v==="M"?Ne(n):Se(n)}return t};var Le=80;var me=81;var Ce=82;var De=83;var pe=84;var Me=85;var Pe=86;var ye=87;var Fe=88;var we=89;var Ye=90;var Ge=91;var Be=255;var He=Object.freeze({__proto__:null,DATA_REQUEST:Le,DATA_RESPONSE:me,FRAGMENT_REQUEST:Ye,FRAGMENT_RESPONSE:Ge,IDENT_REQUEST:Ce,IDENT_RESPONSE:De,INVALID:Be,L2_CHECK_ADDRESS_REQUEST:Pe,L2_CHECK_ADDRESS_RESPONSE:ye,L2_RM_ADDRESS_REQUEST:Fe,L2_RM_ADDRESS_RESPONSE:we,L2_SET_ADDRESS_REQUEST:pe,L2_SET_ADDRESS_RESPONSE:Me});Vr(He);Vr(h);var Ve=0;var be=1;var xe=2;var We=3;var Xe=4;var Ke=5;var je=6;var ze=7;var ke=8;var Qe=9;var Ze=10;var qe=11;var $e=12;var Je=13;var ra=14;var ta=Object.freeze({__proto__:null,CASE_MODULE_OPEN:Ze,CASE_OPEN:Ve,CASE_TERMINAL_OPEN:Qe,DEVICE_FAILURE:ke,ERROR_ACCESS:Ke,MAGNETIC_ON:be,PARAMETERS_UPDATE_LOCAL:We,PARAMETERS_UPDATE_REMOTE:xe,PROTECTION_RESET_EM:Je,PROTECTION_RESET_MAGNETIC:ra,RESTART:Xe,TARIFF_TABLE_GET:$e,TARIFF_TABLE_SET:qe,TIME_CORRECT:ze,TIME_SET:je});var ea=Vr(ta);Vr(Fr);var aa=1;var na=2;var ia=3;var va=16;var oa=17;var Ea=18;var ua=19;var _a=20;var fa=21;var sa=32;var Aa=33;var ga=34;var Ra=35;var Ta=36;var la=37;var ca=38;var da=39;var Oa=40;var ha=41;var Ua=49;var Sa=50;var Na=51;var Ia=52;var La=53;var ma=54;var Ca=55;var Da=56;var pa=57;var Ma=58;var Pa=59;var ya=64;var Fa=65;var wa=66;var Ya=67;var Ga=68;var Ba=69;var Ha=70;var Va=71;var ba=72;var xa=73;var Wa=74;var Xa=75;var Ka=76;var ja=77;var za=78;var ka=79;var Qa=80;var Za=81;var qa=82;var $a=83;var Ja=84;var rn=85;var tn=86;var en=87;var an=88;var nn=89;var vn=96;var on=97;var En=98;var un=99;var _n=100;var fn=101;var sn=102;var An=103;var gn=104;var Rn=105;var Tn=112;var ln=113;var cn=114;var dn=115;var On=116;var hn=117;var Un=118;var Sn=119;var Nn=120;var In=121;var Ln=122;var mn=123;var Cn=124;var Dn=125;var pn=144;var Mn=145;var Pn=147;var yn=148;var Fn=152;var wn=156;var Yn=157;var Gn=158;var Bn=159;var Hn=160;var Vn=161;var bn=162;var xn=176;var Wn=177;var Xn=178;var Kn=179;var jn=180;var zn=181;var kn=182;var Qn=183;var Zn=185;var qn=186;var $n=224;var Jn=225;var ri=226;var ti=227;var ei=228;var ai=229;var ni=230;var ii=231;var vi=232;var oi=Object.freeze({__proto__:null,ACCESS_ERROR:oa,ACCESS_LOCKED:va,ACC_PARAMETERS_EXT_FAULT:dn,ACC_PARAMETERS_FAULT:cn,BAD_TEST_EEPROM:gn,BAD_TEST_FRAM:Rn,BATTERY_FAULT:$a,BATTERY_OK:qa,BIPOLAR_POWER_FAULT:jn,BIPOLAR_POWER_OK:zn,BLOCK_TARIFF_FAULT:hn,CALC_PERIOD_FAULT:On,CALIBRATION_FAULT:rn,CALIBRATION_FLAG_RESET:An,CALIBRATION_FLAG_SET:sn,CALIBRATION_OK:Ja,CALIBRATION_PARAMETERS_FAULT:Un,CASE_CLOSED:ua,CASE_MODULE_CLOSED:Dn,CASE_MODULE_OPENED:Cn,CASE_OPENED:Ea,CASE_TERMINAL_BOX_CLOSED:mn,CASE_TERMINAL_BOX_OPENED:Ln,CHANGE_ACCESS_KEY0:sa,CHANGE_ACCESS_KEY1:Aa,CHANGE_ACCESS_KEY2:ga,CHANGE_ACCESS_KEY3:Ra,CHANGE_COR_TIME:ha,CHANGE_PARAMETERS_CHANNEL:Zn,CHANGE_PARAMETERS_LOCAL:Ta,CHANGE_PARAMETERS_REMOTE:la,CHANGE_TARIFF_TABLE:Sa,CHANGE_TARIFF_TABLE_2:Fn,CLOCK_FAULT:en,CLOCK_OK:tn,CMD_RELAY_2_OFF:on,CMD_RELAY_2_ON:vn,CMD_RELAY_OFF:Oa,CMD_RELAY_ON:da,CMD_SET_DATETIME:ca,COSF_MIN_OVER:Pa,COSF_OK:Ma,CROSS_ZERO_EN_T1:En,CROSS_ZERO_EN_T2:un,CROSS_ZERO_EN_T3:_n,CROSS_ZERO_EN_T4:fn,CROSS_ZERO_EXPORT_EN_T1:Gn,CROSS_ZERO_EXPORT_EN_T2:Bn,CROSS_ZERO_EXPORT_EN_T3:Hn,CROSS_ZERO_EXPORT_EN_T4:Vn,CURRENT_UNEQUAL_FAULT:Xn,CURRENT_UNEQUAL_OK:Kn,EM_MAGNETIC_INFLUENCE_OFF:Wn,EM_MAGNETIC_INFLUENCE_ON:xn,ENERGY_REGISTER_FAULT:aa,ENERGY_REGISTER_OVERFLOW:Ua,F_MAX_OK:ba,F_MAX_OVER:xa,F_MIN_OK:Wa,F_MIN_OVER:Xa,I_MAX_OK:Ka,I_MAX_OVER:ja,MAGNETIC_INFLUENCE_OFF:fa,MAGNETIC_INFLUENCE_ON:_a,OPERATOR_PARAMETERS_VALUES_FAULT:ia,POWER_A_OFF:an,POWER_A_ON:nn,POWER_OVER_RELAY_OFF:Yn,POWER_SALDO_OK:Qa,POWER_SALDO_OVER:Za,P_MAX_A_MINUS_OK:ii,P_MAX_A_MINUS_OVER:vi,P_MAX_OK:za,P_MAX_OVER:ka,RELAY_HARD_BAD_OFF:pn,RELAY_HARD_BAD_ON:Pn,RELAY_HARD_OFF:yn,RELAY_HARD_ON:Mn,RELAY_OFF:Ca,RELAY_OFF_BAD_SALDO:qn,RELAY_ON:ma,RESET_EM_FLAG:kn,RESET_MAGNET_FLAG:Qn,RESTART:Da,SALDO_EN_FAULT:Nn,SALDO_PARAMETERS_FAULT:ln,SET_DEMAND_EN_10MIN:ti,SET_DEMAND_EN_15MIN:ei,SET_DEMAND_EN_1MIN:$n,SET_DEMAND_EN_30MIN:ai,SET_DEMAND_EN_3MIN:Jn,SET_DEMAND_EN_5MIN:ri,SET_DEMAND_EN_60MIN:ni,SET_NEW_SALDO:Tn,SET_SALDO_PARAM:wn,SET_TARIFF_TABLE:Na,SUMMER_TIME:Ia,TIME_CORRECT:In,TIME_CORRECT_NEW:bn,T_MAX_OK:Ga,T_MAX_OVER:Ba,T_MIN_OK:Ha,T_MIN_OVER:Va,VENDOR_PAR_FAULT:na,V_MAX_OK:ya,V_MAX_OVER:Fa,V_MIN_OK:wa,V_MIN_OVER:Ya,WATCHDOG_RESTART:pa,WINTER_SUMMER_FAULT:Sn,WINTER_TIME:La});var Ei=Vr(oi);var ui=1;var _i=2;var fi=3;var si=4;var Ai=5;var gi=6;var Ri=7;var Ti=8;var li=9;var ci=10;var di=11;var Oi=12;var hi=13;var Ui=14;var Si=15;var Ni=16;var Ii=17;var Li=18;var mi=19;var Ci=20;var Di=21;var pi=22;var Mi=23;var Pi=24;var yi=25;var Fi=26;var wi=28;var Yi=30;var Gi=31;var Bi=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:si,ACTIVE_ENERGY_T2:Ai,ACTIVE_ENERGY_T3:gi,ACTIVE_ENERGY_T4:Ri,ACTIVE_POWER_IN_NEUTRAL:li,ACTIVE_POWER_PER_PHASE:Ti,BATTERY_VOLTAGE:pi,CURRENT_BALANCE:Yi,CURRENT_IN_NEUTRAL:di,CURRENT_IN_PHASE:ci,DATE_MONTH_YEAR:Ui,EXPORTED_ACTIVE_ENERGY_T1:Ni,EXPORTED_ACTIVE_ENERGY_T2:Ii,EXPORTED_ACTIVE_ENERGY_T3:Li,EXPORTED_ACTIVE_ENERGY_T4:mi,HOUR_MINUTE_SECOND:hi,MAGNET_INDUCTION:wi,OPTOPORT_SPEED:Gi,POWER_FACTOR_PHASE_A:Ci,POWER_FACTOR_PHASE_B:Di,POWER_THRESHOLD_T1:Mi,POWER_THRESHOLD_T2:Pi,POWER_THRESHOLD_T3:yi,POWER_THRESHOLD_T4:Fi,SET_ALL_SEGMENT_DISPLAY:ui,SOFTWARE_VERSION:_i,TOTAL_ACTIVE_ENERGY:fi,TOTAL_EXPORTED_ACTIVE_ENERGY:Si,VOLTAGE:Oi});Vr(Bi);var Hi=2400;var Vi=9600;var bi={rs485orTwi:{0:Vi,2:Hi,4:Vi},optoport:{0:Hi,2:Hi,4:Vi}};({rs485orTwi:Vr(bi.rs485orTwi),optoport:Vr(bi.optoport)});var xi=1;var Wi=2;var Xi=11;var Ki=74;var ji=7;var zi=4;var ki=48;var Qi=50;var Zi=3+ki*2;var qi={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var $i={...qi,AUTO_SCREEN_SCROLLING:2147483648};var Ji={...qi,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var rv={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var tv={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var ev={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var av={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var nv={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var iv={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var vv={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var ov={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Ev={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5,RELAY_MAGNET_OFF:2**6,RELAY_P_MINUS_MAX_OFF:2**7};var uv={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var _v={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var fv={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var sv={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};var Av=function(r){return{rs485orTwi:bi.rs485orTwi[ae(r,4,1)],optoport:bi.optoport[ae(r,4,5)]}};function gv(r,t,e){var a=e>>zi;var n=new Array(zi).fill(0);n.forEach(function(t,e){var i=!!ae(a,1,e+1);if(i){n[e]=r.getInt32()}else{n[e]=null}});return n}function Rv(r){if(r===65535){return{tariff:undefined,energy:undefined}}return{tariff:r>>14&3,energy:r&16383}}var Tv=function(r){return{tariff:ae(r,2,1),isFirstHalfHour:!ae(r,1,3),hour:ae(r,5,4)}};var lv=function(r){var t=R(r.getBytes(3),{separator:""});var e=r.getUint8();var a=r.getUint8();var n=R(r.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:a,serial:n}};var cv=function(r){return{isSummerTime:!!r.getUint8(),seconds:r.getUint8(),minutes:r.getUint8(),hours:r.getUint8(),day:r.getUint8(),date:r.getUint8(),month:r.getUint8(),year:r.getUint8()}};var dv=function(r){return{id:r.getUint32(),tariffSet:r.getUint8(),activateYear:r.getUint8(),activateMonth:r.getUint8(),activateDay:r.getUint8(),specialProfilesArraySize:r.getUint8(),seasonProfilesArraySize:r.getUint8(),dayProfilesArraySize:r.getUint8()}};var Ov=function(r){return{monthTransitionSummer:r.getUint8(),dateTransitionSummer:r.getUint8(),hoursTransitionSummer:r.getUint8(),hoursCorrectSummer:r.getUint8(),monthTransitionWinter:r.getUint8(),dateTransitionWinter:r.getUint8(),hoursTransitionWinter:r.getUint8(),hoursCorrectWinter:r.getUint8(),isCorrectionNeeded:r.getUint8()===1}};var hv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndexes:new Array(ji).fill(0).map(function(){return r.getUint8()})}};var Uv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndex:r.getUint8(),year:r.getUint8()}};var Sv=function(r){return Ie(r.getBytes(9))};var Nv=function(r){var t;var e={vpThreshold:r.getUint32(),vThreshold:r.getUint32(),ipThreshold:r.getUint32(),pmaxThreshold0:r.getUint32(),pmaxThreshold1:r.getUint32(),pmaxThreshold2:r.getUint32(),pmaxThreshold3:r.getUint32(),serialPortsSpeed:Av(r.getUint8()),tint:r.getUint8(),calcPeriodDate:r.getUint8(),timeoutDisplay:r.getUint8(),timeoutScreen:r.getUint8(),displaySet:ee($i,r.getUint32()),relaySet4:ee(av,r.getUint8()),relaySet3:ee(ev,r.getUint8()),relaySet2:ee(tv,r.getUint8()),relaySet1:ee(rv,r.getUint8()),displayType:r.getUint8(),ten:r.getUint8(),voltageAveragingInterval:(t=r.getUint8(),r.getUint8(),t),deltaCorMin:r.getUint8(),timeoutMagnetOff:r.getUint8(),timeoutMagnetOn:r.getUint8(),define1:ee(iv,r.getUint8()),timeoutRelayOn:r.getUint8(),timeoutRelayKey:r.getUint8(),timeoutRelayAuto:r.getUint8(),timeoutBadVAVB:r.getUint8(),freqMax:r.getUint8(),freqMin:r.getUint8(),phMin:r.getUint16(),year:r.getUint8(),month:r.getUint8(),date:r.getUint8(),energyDecimalPoint:r.getUint8(),typeMeter:r.getUint8(),timeoutIMax:r.getUint8(),timeoutPMax:r.getUint8(),timeoutCos:r.getUint8(),pMaxDef:r.getUint8(),displaySetExt:ee(Ji,r.getUint32()),timeoutUneqCurrent:r.getUint8(),timeoutBipolarPower:r.getUint8(),relaySet5:ee(nv,r.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var a=r.getUint8();e.timeCorrectPeriod=a&127;e.timeCorrectPassHalfhour=!!(a&128);return e};var Iv=function(r){var t=r.getUint8();var e=ae(t,zi,1);var a=gv(r,e,t);return{energyType:e,energies:a}};var Lv=function(r){return new Array(zi).fill(0).map(function(){return r.getInt32()})};var mv=function(r){return{year:r.getUint8(),month:r.getUint8(),date:r.getUint8()}};var Cv=function(r){return{coefficients:new Array(4).fill(0).map(function(){return r.getUint32()}),decimalPointTariff:r.getUint8(),indicationThreshold:r.getInt32(),relayThreshold:r.getInt32(),mode:r.getUint8(),saldoOffTimeBegin:r.getUint8(),saldoOffTimeEnd:r.getUint8(),decimalPointIndication:r.getUint8(),powerThreshold:r.getUint32(),creditThreshold:r.getInt32()}};var Dv=function(r,t){var e=new Array(t).fill(0).map(function(){return r.getUint16()});return e.map(function(r){return Rv(r)})};var pv=function(r){var t=r.getUint16();return ee(vv,t)};var Mv=function(r){var t=r.getUint16();var e=ee(ov,r.getUint8());var a=ee(Ev,r.getUint8());var n=ee(uv,r.getUint8());var i=ee(_v,r.getUint8());var v=ee(fv,r.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:a,status1:n,status2:i,status3:v}};var Pv=function(r){var t={hours:r.getUint8(),minutes:r.getUint8(),seconds:r.getUint8(),event:r.getUint8()};var e=t.event;var a=r.bytesLeft;t.eventName=Ei[e];switch(e){case Yn:if(a<4){return t}t.power=[r.getUint8(),r.getUint8(),r.getUint8(),r.getUint8()];break;case ca:case In:if(a<8){return t}t.newDate=cv(r);break}return t};var yv=function(r){var t=r.getUint8();var e=r.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandType:r.getUint8(),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var Fv=function(r){var t=r.getUint8();var e=r.getUint8();var a=r.getUint8();return{channelParam1:t,powerOffTrackingInterval:e,channelParam2:a}};var wv=function(r){var t=mv(r);var e=new Array(zi).fill(0).map(function(){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}});return{date:t,power:e}};var Yv=function(r){return{pmaxMinusThreshold0:r.getUint32(),pmaxMinusThreshold1:r.getUint32(),pmaxMinusThreshold2:r.getUint32(),pmaxMinusThreshold3:r.getUint32(),relaySet:ee(sv,r.getUint8())}};var Gv=function(r){return new Array(zi).fill(0).map(function(){return{date:r.getUint8(),hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}})};var Bv=Er;var Hv=br[Er];var Vv=9;var bv=function(r){T(Hv,r,Vv);var t=new jt(r,false);return Ov(t)};var xv=ur;var Wv=br[ur];var Xv=9;var Kv=function(r){T(Wv,r,Xv);var t=E(r,9),e=t[0],a=t[1],n=t[2],i=t[3],v=t[4],o=t[5],u=t[6],_=t[7],f=t[8];return{event:e,name:ea[e],index:a,date:{year:n,month:i,date:v,hours:o,minutes:u,seconds:_},count:f}};var jv=ar;var zv=br[ar];var kv=31;var Qv={calibrationEnable:1,hardkey:2,keyPressTest:4,keyOpenkeyTest:8,keyGerkonTest:16,keyOpenKlemaTest:32,keyOpenModuleTest:64,keyPress2Test:128};var Zv=function(r){T(zv,r,kv);var t=new jt(r,false);var e=t.getUint32();var a=t.getUint32();var n=t.getUint32();var i=t.getUint32();t.getUint32();var v=t.getUint32();var o=ee(ov,t.getUint8());var E=t.getUint8();var u=t.getUint8();var _=ee(Qv,t.getUint8());var f={"A+":t.getUint8(),"A-":t.getUint8()};var s=!!(t.getUint8()&1);var A=E|u<<8;return{operatingSeconds:e,tbadVAVB:a,tbadImaxAll:n,tbadPmaxAll:i,tbadFREQ:v,relayStatus:o,statusEvent:ee(vv,A),calibrationFlags:_,currentTariffs:f,isSummerTime:s}};var qv=D;var $v=br[D];var Jv=32;var ro=function(r){T($v,r,Jv);var t=new jt(r,false);return{powerA:t.getInt32(),iaRms:t.getInt32(),vavbRms:t.getInt32(),varA:t.getInt32(),pfA:t.getInt16()/1e3,ibRms:t.getInt32(),powerB:t.getInt32(),varB:t.getInt32(),pfB:t.getInt16()/1e3}};var to=L;var eo=br[L];var ao=8;var no=function(r){T(eo,r,ao);var t=new jt(r,false);return cv(t)};var io=19;var vo=G;var oo=function(r){var t=new jt(r,false);var e;if(r.length===io){e={date:mv(t),energies:Lv(t)}}else{e={date:mv(t),...Iv(t)}}return e};var Eo=19;var uo=Ar;var _o=function(r){var t=new jt(r,false);var e;if(r.length===Eo){e={date:mv(t),energies:Lv(t)}}else{e={date:mv(t),...Iv(t)}}return e};var fo=4;var so=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var Ao=4294967295;var go={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Ro=function(r){return r<fo?1<<r:0};var To=function(r){return r<fo?1<<r<<4:0};var lo=function(r){var t=r.getUint8();var e=r.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};var co=function(r){var t=r.getUint8();return ee(go,t)};var Oo=function(r,t){var e=[];for(var a=0;a<t;a++){var n=r.getUint16();var i=n>>14&3;var v=n&16383;e.push(n===Ao?undefined:{tariff:i,energy:v})}return e};var ho=function(r,t,e){var a={};so.forEach(function(n){if(t[n]){a[n]=Oo(r,e)}});return a};var Uo=function(r,t){var e={};if(t&go["A+"]){e["A+"]=r.getUint32()}if(t&go["A+R+"]){e["A+R+"]=r.getUint32()}if(t&go["A+R-"]){e["A+R-"]=r.getUint32()}return e};var So=function(r,t){var e={};if(t&go["A-"]){e["A-"]=r.getUint32()}if(t&go["A-R+"]){e["A-R+"]=r.getUint32()}if(t&go["A-R-"]){e["A-R-"]=r.getUint32()}return e};var No=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(fo).fill(null);for(var n=0;n<fo;n++){if(e&Ro(n)){a[n]=Uo(r,t)}}for(var i=0;i<fo;i++){if(e&To(i)){a[i]={...a[i],...So(r,t)}}}return a};var Io=function(r){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}};var Lo=function(r,t){var e={};if(t&go["A+"]){e["A+"]=Io(r)}if(t&go["A+R+"]){e["A+R+"]=Io(r)}if(t&go["A+R-"]){e["A+R-"]=Io(r)}return e};var mo=function(r,t){var e={};if(t&go["A-"]){e["A-"]=Io(r)}if(t&go["A-R+"]){e["A-R+"]=Io(r)}if(t&go["A-R-"]){e["A-R-"]=Io(r)}return e};var Co=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(fo).fill(null);for(var n=0;n<fo;n++){if(e&Ro(n)){a[n]=Lo(r,t)}}for(var i=0;i<fo;i++){if(e&To(i)){a[i]={...a[i],...mo(r,t)}}}return a};var Do=wr;var po=function(r){var t=new jt(r,false);return{date:lo(t),energies:No(t)}};var Mo=q;var Po=br[q];var yo=27;var Fo=function(r){T(Po,r,yo);var t=new jt(r,false);return wv(t)};var wo=lr;var Yo=br[lr];var Go=27;var Bo=function(r){T(Yo,r,Go);var t=new jt(r,false);return wv(t)};var Ho=fr;var Vo=br[fr];var bo=27;var xo=function(r){T(Vo,r,bo);var t=new jt(r,false);return wv(t)};var Wo=Yr;var Xo=function(r){var t=new jt(r,false);return{date:lo(t),tariffs:Co(t)}};var Ko=255;var jo=ir;var zo=function(r){var t=r.indexOf(Ko);var e=t===-1?r:r.slice(0,t);return{periods:_(e).map(Tv)}};var ko=25;var Qo=function(r,t,e){return Math.trunc((r*60+t)/e)};var Zo=function(r){return Qo(ko,0,r)};var qo=function(r,t,e){if(r===65535){return null}var a=Zo(e);if(t===a){return{lastSummerHour:r>>8&255}}return e===60?{energy:r}:{tariff:r>>14&3,energy:r&16383}};var $o=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(qo(a,(t??0)+n,e));return r},[])};var Jo=function(r,t,e){if(r===65535){return 65535}var a=Zo(e);return t===a?{lastSummerHour:r>>8&255}:{voltage:r}};var rE=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(Jo(a,(t??0)+n,e));return r},[])};var tE=7;var eE=Pr;var aE=function(r){if(!r||r.length<tE){throw new Error("Invalid uplink GetDemand byte length.")}var t=new jt(r,false);var e=yv(t);if(r.length!==tE+2*e.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(e.count).fill(0).map(function(){return t.getUint16()});var n=e.demandType===xi||e.demandType===Wi;e.demands=n?$o(a,e.firstIndex,e.period):rE(a,e.firstIndex,e.period);return e};var nE=Mr;var iE=br[Mr];var vE=4;var oE=function(r){T(iE,r,vE);var t=new jt(r,false);return Fv(t)};var EE=I;var uE=br[I];var _E=8;var fE=function(r){T(uE,r,_E);var t=new jt(r,false);return lv(t)};var sE=N;var AE=br[N];var gE=9;var RE=function(r){T(AE,r,gE);var t=new jt(r,false);return Sv(t)};var TE=Ur;var lE=function(t){var e=u(t),a=e[0],n=r(e).slice(1);return{displayMode:a,order:n}};var cE=16;var dE=p;var OE=function(r){var t=new jt(r,false);var e;if(r.length===cE){e={energies:Lv(t)}}else{e=Iv(t)}return e};var hE=19;var UE=S;var SE=function(r){var t=new jt(r,false);var e;if(r.length===hE){e={date:mv(t),energies:Lv(t)}}else{e={date:mv(t),...Iv(t)}}return e};var NE=16;var IE=dr;var LE=function(r){var t=new jt(r,false);var e;if(r.length===NE){e={energies:Lv(t)}}else{e=Iv(t)}return e};var mE=19;var CE=gr;var DE=function(r){var t=new jt(r,false);var e;if(r.length===mE){e={date:mv(t),energies:Lv(t)}}else{e={date:mv(t),...Iv(t)}}return e};var pE=3+1;var ME=4;var PE=J;var yE=pE+255*ME;var FE=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Pv;return function(e){if(e.length>yE){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var a=new r(e,false);var n=mv(a);var i=a.getUint8();var v=[];while(!a.isEmpty){v.push(t(a))}return{date:n,eventsNumber:i,events:v}}};var wE=FE(jt);var YE=14;var GE=20;var BE=rr;var HE=function(r){if(r.length!==YE&&r.length!==GE){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=new jt(r,false);var e=t.getUint16();var a=t.getUint16();var n=t.getUint16();var i=t.getUint16();var v=t.getUint16();var o=t.getUint16();var E=t.getUint16();return{accessClosed:o,accessError:v,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:e,setClock:E}};var VE=U;var bE=br[U];var xE=2;var WE=function(r){T(bE,r,xE);var t=new jt(r,true);return pv(t)};var XE=nr;var KE=br[nr];var jE=4;var zE=function(r){T(KE,r,jE);var t=new jt(r,false);return{temperature:t.getInt16(),frequency:t.getInt16()}};var kE=k;var QE=br[k];var ZE=7;var qE=function(r){T(QE,r,ZE);var t=new jt(r,false);return Mv(t)};var $E=Y;var JE=function(r){var t=new jt(r,false);var e=r.length>Zi;var a=mv(t);var n=Dv(t,e?Qi:ki);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var ru=Tr;var tu=function(r){var t=new jt(r,false);var e=r.length>Zi;var a=mv(t);var n=Dv(t,e?Qi:ki);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var eu=sr;var au=function(r){var t=new jt(r,false);var e=r.length>Zi;var a=mv(t);var n=Dv(t,e?Qi:ki);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var nu=Ir;var iu=function(r){var t=new jt(r,false);var e=lo(t);var a=co(t);var n=t.getUint8();var i=t.getUint8();return{date:e,firstHalfhour:n,halfhoursNumber:i,energies:ho(t,a,i)}};var vu=Nr;var ou=br[Nr];var Eu=10;var uu=function(r){T(ou,r,Eu);var t=new jt(r,false);return{induction:t.getUint16(),threshold:t.getUint16(),inductionCoefficient:t.getUint16()/100,reserved:t.getUint32()}};var _u=yr;var fu=br[yr];var su=1;var Au=function(r){var t=E(r,1),e=t[0];T(fu,[e],su);return{ten:e}};var gu=B;var Ru=br[B];var Tu=18;var lu=function(r){T(Ru,r,Tu);var t=new jt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:Lv(t)}};var cu=Rr;var du=br[Rr];var Ou=18;var hu=function(r){T(du,r,Ou);var t=new jt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:Lv(t)}};var Uu=$;var Su=br[$];var Nu=2+zi*7;var Iu=function(r){T(Su,r,Nu);var t=new jt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:Gv(t)}};var Lu=cr;var mu=br[cr];var Cu=2+zi*7;var Du=function(r){T(mu,r,Cu);var t=new jt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:Gv(t)}};var pu=x;var Mu=br[x];var Pu=Ki;var yu=function(r){T(Mu,r,Pu);var t=new jt(r,false);return Nv(t)};var Fu=mr;var wu=br[mr];var Yu=17;var Gu=function(r){T(wu,r,Yu);var t=new jt(r,false);return Yv(t)};var Bu=Dr;var Hu=br[Dr];var Vu=16;var bu=function(r){T(Hu,r,Vu);var t=new jt(r,false);return{year:t.getUint8(),month:t.getUint8(),powerOffSaidiMinutes:t.getUint32(),powerOffSaidiCount:t.getUint16(),powerOffMaidiMinutes:t.getUint32(),powerOffMaifiCount:t.getUint16(),badVoltagePhaseAMinutes:t.getUint16()}};var xu=z;var Wu=br[z];var Xu=1+Xi*2;var Ku=function(r){T(Wu,r,Xu);var t=new jt(r,false);return{tariffTable:t.getUint8(),activePlan:dv(t),passivePlan:dv(t)}};var ju=K;var zu=br[K];var ku=29;var Qu=function(r){T(zu,r,ku);var t=new jt(r,false);return{currentSaldo:t.getInt32(),count:t.getUint8(),energy:new Array(4).fill(0).map(function(){return t.getInt32()}),beginSaldoOfPeriod:t.getInt32(),date:{month:t.getUint8(),date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8()}}};var Zu=Q;var qu=br[Q];var $u=37;var Ju=function(r){T(qu,r,$u);var t=new jt(r,false);return Cv(t)};var r_=vr;var t_=br[vr];var e_=9;var a_=function(r){T(t_,r,e_);var t=new jt(r,false);return hv(t)};var n_=or;var i_=br[or];var v_=4;var o_=function(r){T(i_,r,v_);var t=new jt(r,false);return Uv(t)};var E_=X;var u_=br[X];var __=10;var f_=function(r){T(u_,r,__);return{version:String.fromCharCode.apply(null,_(r))}};var s_=w;var A_=br[w];var g_=0;var R_=function(r){T(A_,r,g_);return{}};var T_=tr;var l_=br[tr];var c_=0;var d_=function(r){T(l_,r,c_);return{}};var O_=er;var h_=br[er];var U_=0;var S_=function(r){T(h_,r,U_);return{}};var N_=_r;var I_=br[_r];var L_=0;var m_=function(r){T(I_,r,L_);return{}};var C_=C;var D_=br[C];var p_=0;var M_=function(r){T(D_,r,p_);return{}};var P_=Or;var y_=br[Or];var F_=0;var w_=function(r){T(y_,r,F_);return{}};var Y_=b;var G_=br[b];var B_=0;var H_=function(r){T(G_,r,B_);return{}};var V_=m;var b_=br[m];var x_=0;var W_=function(r){T(b_,r,x_);return{}};var X_=M;var K_=br[M];var j_=0;var z_=function(r){T(K_,r,j_);return{}};var k_=pr;var Q_=br[pr];var Z_=0;var q_=function(r){T(Q_,r,Z_);return{}};var $_=hr;var J_=br[hr];var rf=0;var tf=function(r){T(J_,r,rf);return{}};var ef=W;var af=br[W];var nf=0;var vf=function(r){T(af,r,nf);return{}};var of=Cr;var Ef=br[Cr];var uf=0;var _f=function(r){T(Ef,r,uf);return{}};var ff=j;var sf=br[j];var Af=0;var gf=function(r){T(sf,r,Af);return{}};var Rf=Z;var Tf=br[Z];var lf=0;var cf=function(r){T(Tf,r,lf);return{}};var df=P;var Of=br[P];var hf=0;var Uf=function(r){T(Of,r,hf);return{}};var Sf=y;var Nf=br[y];var If=0;var Lf=function(r){T(Nf,r,If);return{}};var mf=Sr;var Cf=br[Sr];var Df=1;var pf=function(r){T(Cf,r,Df);var t=r[0];var e=!!(t&1);var a=!!(t&2);return{electroMagneticIndication:e,magneticIndication:a}};var Mf=V;var Pf=br[V];var yf=0;var Ff=function(r){T(Pf,r,yf);return{}};var wf=H;var Yf=br[H];var Gf=0;var Bf=function(r){T(Yf,r,Gf);return{}};var Hf={encrypt:function(){},decrypt:function(){}};var Vf=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=t;r.forEach(function(r){e^=r});return e};var bf=2;var xf=2;var Wf=function(r){var t=E(r,1),e=t[0];if(e===dt){try{var a=Ut(r.slice(bf));return{id:e,name:Ot,headerSize:bf,bytes:r,parameters:a}}catch{return null}}return null};var Xf=function(r,t){var e=E(t,1),a=e[0];var n=Wf(t.slice(xf-1));var i=Wf(t.slice(xf));var v={messageId:a,bytes:t};if(n){return{...v,accessLevel:l,commands:[n]}}if(i){return{...v,accessLevel:r,commands:[i]}}return null};var Kf=3;a(a(a(a({},l,0),O,1),d,2),c,3);var jf=2;var zf=2;var kf=function(r,t){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var v=E(e,2),o=v[0],u=v[1];var f=u&Kf;var s=Xf(f,e);var A={messageId:o,accessLevel:f,commands:i,bytes:e,lrc:{received:undefined,calculated:0}};var g=e.slice(jf);var R;if(s){return s}if(n&&f!==l){g=_(Hf.decrypt(n,g))}var T=g[g.length-1];g=g.slice(0,-1);var c=Vf(g);if(f!==l||T!==0){if(T!==c){R="Mismatch LRC."}}var d=g[0]&Kf;var O=g.slice(1);if(f!==d){R="Mismatch access levels."}var h=0;do{var U=O[h];var S=O[h+1];var N=zf+S;var I=O.slice(h+zf,h+N);var L={id:U,name:t[U],headerSize:zf,bytes:O.slice(h,h+N)};if(!U){break}try{if(!r[U]){throw new Error("Unsupported command id: ".concat(U,"!"))}L.parameters=r[U](I,a);i.push(L)}catch(r){i.push({command:L,error:r.message})}h+=N}while(h<=O.length);A.lrc.calculated=c;A.lrc.received=T;if(R){return{message:A,error:R}}return A}};var Qf={};var Zf=br;var qf=kf(Qf,Zf);Qf[xr]=Kr;Qf[dt]=Ut;Qf[zt]=qt;Qf[$t]=te;Qf[Bv]=bv;Qf[xv]=Kv;Qf[jv]=Zv;Qf[qv]=ro;Qf[to]=no;Qf[vo]=oo;Qf[uo]=_o;Qf[Do]=po;Qf[Mo]=Fo;Qf[wo]=Bo;Qf[Ho]=xo;Qf[Wo]=Xo;Qf[jo]=zo;Qf[eE]=aE;Qf[nE]=oE;Qf[EE]=fE;Qf[sE]=RE;Qf[TE]=lE;Qf[dE]=OE;Qf[UE]=SE;Qf[IE]=LE;Qf[CE]=DE;Qf[PE]=wE;Qf[BE]=HE;Qf[VE]=WE;Qf[XE]=zE;Qf[kE]=qE;Qf[$E]=JE;Qf[ru]=tu;Qf[eu]=au;Qf[nu]=iu;Qf[vu]=uu;Qf[_u]=Au;Qf[gu]=lu;Qf[cu]=hu;Qf[Uu]=Iu;Qf[Lu]=Du;Qf[pu]=yu;Qf[Fu]=Gu;Qf[Bu]=bu;Qf[xu]=Ku;Qf[ju]=Qu;Qf[Zu]=Ju;Qf[r_]=a_;Qf[n_]=o_;Qf[E_]=f_;Qf[s_]=R_;Qf[T_]=d_;Qf[O_]=S_;Qf[N_]=m_;Qf[C_]=M_;Qf[P_]=w_;Qf[Y_]=H_;Qf[V_]=W_;Qf[X_]=z_;Qf[k_]=q_;Qf[$_]=tf;Qf[ef]=vf;Qf[of]=_f;Qf[ff]=gf;Qf[Rf]=cf;Qf[df]=Uf;Qf[Sf]=Lf;Qf[mf]=pf;Qf[Mf]=Ff;Qf[wf]=Bf;var $f=145;var Jf=30;var rs=function(r){if(r[0]!==Jf){return{}}var t=r[1];var e=r[3];var a=r.slice(4,t+2);if(e===$f){return a}return null};fromBytes=qf;getDataSegment=rs})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
