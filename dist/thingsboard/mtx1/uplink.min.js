// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=Array(t);e<t;e++)a[e]=r[e];return a}function t(r){if(Array.isArray(r))return r}function e(t){if(Array.isArray(t))return r(t)}function a(r,t,e){return(t=_(t))in r?Object.defineProperty(r,t,{value:e,enumerable:true,configurable:true,writable:true}):r[t]=e,r}function n(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function i(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,n,i,v,o=[],E=true,u=false;try{if(i=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;E=!1}else for(;!(E=(a=i.call(e)).done)&&(o.push(a.value),o.length!==t);E=!0);}catch(r){u=true,n=r}finally{try{if(!E&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(u)throw n}}return o}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(r,e){return t(r)||i(r,e)||A(r,e)||v()}function u(r){return t(r)||n(r)||A(r)||v()}function f(r){return e(r)||n(r)||A(r)||o()}function s(r,t){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var a=e.call(r,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}function _(r){var t=s(r,"string");return"symbol"==typeof t?t:t+""}function A(t,e){if(t){if("string"==typeof t)return r(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}var g={separator:" ",prefix:""};var c=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},g,t),a=e.separator,n=e.prefix;return r.map(function(r){return"".concat(n).concat(r.toString(16).padStart(2,"0"))}).join(a)};var l=function(r,t,e){if(!r){throw new Error("Command name is required.")}if(t&&!Array.isArray(t)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof t,"."))}if(e.min>0&&t.length<e.min||e.max>0&&t.length>e.max){var a=c(t,{separator:""});var n=e.min===e.max?"".concat(e.max):JSON.stringify(e);throw new Error("Wrong buffer size for ".concat(r,": ").concat(t.length,". Expected: ").concat(n,". Payload: 0x").concat(a,"."))}};var R=function(r,t,e){return l(r,t,{min:e,max:e})};var T=0;var d=1;var O=2;var h=3;var U=Object.freeze({__proto__:null,READ_ONLY:h,READ_WRITE:O,ROOT:d,UNENCRYPTED:T});var S=1;var N=3;var I=4;var m=5;var C=7;var L=8;var p=9;var D=13;var P=15;var M=16;var y=17;var F=18;var w=19;var Y=20;var G=21;var x=22;var B=23;var b=24;var H=25;var V=28;var W=30;var X=31;var K=40;var j=41;var k=42;var z=44;var Q=45;var Z=46;var q=47;var J=49;var $=50;var rr=51;var tr=52;var er=53;var ar=54;var nr=57;var ir=58;var vr=59;var or=60;var Er=61;var ur=62;var fr=65;var sr=70;var _r=74;var Ar=75;var gr=79;var cr=80;var lr=82;var Rr=83;var Tr=88;var dr=89;var Or=91;var hr=92;var Ur=93;var Sr=94;var Nr=96;var Ir=97;var mr=100;var Cr=109;var Lr=111;var pr=112;var Dr=113;var Pr=114;var Mr=115;var yr=116;var Fr=117;var wr=118;var Yr=122;var Gr=Object.freeze({__proto__:null,activateRatePlan:w,getBv:pr,getCorrectTime:ur,getCriticalEvent:fr,getCurrentStatusMeter:nr,getCurrentValues:D,getDateTime:C,getDayDemand:x,getDayDemandExport:gr,getDayMaxDemand:J,getDayMaxDemandExport:Tr,getDayMaxDemandPrevious:_r,getDayProfile:vr,getDemand:wr,getDemandParameters:Fr,getDeviceId:m,getDeviceType:I,getDisplayParam:Sr,getEnergy:P,getEnergyDayPrevious:N,getEnergyExport:Or,getEnergyExportDayPrevious:cr,getEventStatus:S,getEvents:rr,getEventsCounters:tr,getExtendedCurrentValues:ir,getExtendedCurrentValues2:Q,getGsmParameters:Ir,getHalfHourDemand:G,getHalfHourDemandExport:Rr,getHalfHourDemandPrevious:Ar,getHalfHourEnergies:Lr,getMagneticFieldThreshold:Cr,getMeterInfo:Yr,getMonthDemand:B,getMonthDemandExport:lr,getMonthMaxDemand:$,getMonthMaxDemandExport:dr,getOperatorParameters:W,getOperatorParametersExtended3:Dr,getQuality:Mr,getRatePlanInfo:z,getSaldo:j,getSaldoParameters:Z,getSeasonProfile:or,getSpecialDay:Er,getVersion:K,prepareRatePlan:Y,resetPowerMaxDay:er,resetPowerMaxMonth:ar,runTariffPlan:sr,setAccessKey:p,setCorrectDateTime:hr,setCorrectTime:V,setDateTime:L,setDayProfile:M,setDemandParameters:yr,setDisplayParam:Ur,setGsmParameters:Nr,setOperatorParameters:X,setOperatorParametersExtended3:Pr,setSaldo:k,setSaldoParameters:q,setSeasonProfile:y,setSpecialDay:F,setSpecialOperation:mr,turnRelayOff:H,turnRelayOn:b});var xr=120;var Br=121;var br=123;var Hr=254;var Vr=255;var Wr=Object.freeze({__proto__:null,activateRatePlan:w,errorDataFrameResponse:Vr,errorResponse:Hr,getBv:pr,getCorrectTime:ur,getCriticalEvent:fr,getCurrentDemand:br,getCurrentStatusMeter:nr,getCurrentValues:D,getDateTime:C,getDayDemand:x,getDayDemandExport:gr,getDayEnergies:xr,getDayMaxDemand:J,getDayMaxDemandExport:Tr,getDayMaxDemandPrevious:_r,getDayMaxPower:Br,getDayProfile:vr,getDemand:wr,getDemandParameters:Fr,getDeviceId:m,getDeviceType:I,getDisplayParam:Sr,getEnergy:P,getEnergyDayPrevious:N,getEnergyExport:Or,getEnergyExportDayPrevious:cr,getEventStatus:S,getEvents:rr,getEventsCounters:tr,getExtendedCurrentValues:ir,getExtendedCurrentValues2:Q,getGsmParameters:Ir,getHalfHourDemand:G,getHalfHourDemandExport:Rr,getHalfHourDemandPrevious:Ar,getHalfHourEnergies:Lr,getMagneticFieldThreshold:Cr,getMeterInfo:Yr,getMonthDemand:B,getMonthDemandExport:lr,getMonthMaxDemand:$,getMonthMaxDemandExport:dr,getOperatorParameters:W,getOperatorParametersExtended3:Dr,getQuality:Mr,getRatePlanInfo:z,getSaldo:j,getSaldoParameters:Z,getSeasonProfile:or,getSpecialDay:Er,getVersion:K,prepareRatePlan:Y,resetPowerMaxDay:er,resetPowerMaxMonth:ar,runTariffPlan:sr,setAccessKey:p,setCorrectDateTime:hr,setCorrectTime:V,setDateTime:L,setDayProfile:M,setDemandParameters:yr,setDisplayParam:Ur,setGsmParameters:Nr,setOperatorParameters:X,setOperatorParametersExtended3:Pr,setSaldo:k,setSaldoParameters:q,setSeasonProfile:y,setSpecialDay:F,setSpecialOperation:mr,turnRelayOff:H,turnRelayOn:b});var Xr=function(r){var t={};for(var e in r){var a=r[e];t[a]=e}return t};var Kr=Xr(Wr);var jr=w;var kr=Kr[w];var zr=0;var Qr=function(r){R(kr,r,zr);return{}};var Zr=0;var qr=128;var Jr=129;var $r=130;var rt=131;var tt=132;var et=133;var at=134;var nt=135;var it=136;var vt=137;var ot=144;var Et=145;var ut=146;var ft=147;var st=149;var _t=151;var At=152;var gt=153;var ct=154;var lt=155;var Rt=156;var Tt=159;var dt=160;var Ot=240;var ht=Object.freeze({__proto__:null,ACCESS_DENIED:ft,BAD_ARRAY_INDEX:at,BAD_BLOCK_NUMBER:Rt,BAD_DATA_LENGTH:et,BAD_MESSAGE:tt,BAD_RATE_PLAN_ID:it,BAD_RATE_PLAN_SIZE:vt,BAD_RESPONSE_LENGTH:ot,BAD_SALDO_WRITE:st,BLOCKED_METER:_t,CALIBRATION_DISABLED:ut,DECRYPTION_FAILURE:$r,INTERNAL:Ot,INVALID_CORRECTION_INTERVAL:ct,NOT_ALIGNED_DATA:Jr,NOT_PREPARED_RATE_PLAN:nt,NO_DATA_FOR_DATE:Et,OK:Zr,OUT_OFF_RANGE:Tt,SET_METER_TYPE_FAILURE:dt,TIME_CORRECTION_FAILURE:gt,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:lt,UNENCRYPTED_COMMAND_DISABLED:At,UNKNOWN_COMMAND:qr,UNKNOWN_PROTOCOL:rt});var Ut=Xr(ht);var St=Vr;var Nt=Kr[Vr];var It=1;var mt=function(r){R(Nt,r,It);var t=E(r,1),e=t[0];return{errorCode:e,errorName:Ut[e]}};var Ct=1;var Lt=2;var pt=3;var Dt=4;var Pt=Math.log,Mt=Math.pow,yt=Math.LN2;var Ft=function(r,t,e,a,n){var i,v,o=n*8-a-1,E=(1<<o)-1,u=E>>1,f=-7,s=e?n-1:0,_=e?-1:1,A=r[t+s];s+=_;i=A&(1<<-f)-1;A>>=-f;f+=o;for(;f>0;i=i*256+r[t+s],s+=_,f-=8);v=i&(1<<-f)-1;i>>=-f;f+=a;for(;f>0;v=v*256+r[t+s],s+=_,f-=8);if(i===0){i=1-u}else if(i===E){return v?NaN:A?-Infinity:Infinity}else{v=v+Mt(2,a);i=i-u}return(A?-1:1)*v*Mt(2,i-a)};var wt=function(r,t,e,a,n,i){var v,o,E,u=i*8-n-1,f=(1<<u)-1,s=f>>1,_=n===23?Mt(2,-24)-Mt(2,-77):0,A=a?0:i-1,g=a?1:-1,c=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){o=e!==e?1:0;v=f}else{v=Pt(e)/yt|0;if(e*(E=Mt(2,-v))<1){v--;E*=2}if(v+s>=1){e+=_/E}else{e+=_*Mt(2,1-s)}if(e*E>=2){v++;E/=2}if(v+s>=f){o=0;v=f}else if(v+s>=1){o=(e*E-1)*Mt(2,n);v=v+s}else{o=e*Mt(2,s-1)*Mt(2,n);v=0}}for(;n>=8;r[t+A]=o&255,A+=g,o/=256,n-=8);v=v<<n|o;u+=n;for(;u>0;r[t+A]=v&255,A+=g,v/=256,u-=8);r[t+A-g]|=c*128};var Yt=[1,0];var Gt=[2,1,0];var xt=[3,2,1,0];var Bt=[0,1];var bt=[0,1,2];var Ht=[0,1,2,3];var Vt=function(r,t){return r[t]};var Wt=function(r,t,e){var a=e?Bt:Yt;var n=r[t+a[0]];var i=r[t+a[1]]<<8;return n|i};var Xt=function(r,t,e){var a=e?bt:Gt;var n=r[t+a[0]];var i=r[t+a[1]]<<8;var v=r[t+a[2]]<<16;return n|i|v};var Kt=function(r,t,e){var a=e?Ht:xt;var n=r[t+a[3]]*16777216;var i=r[t+a[2]]*65536;var v=r[t+a[1]]*256;var o=r[t+a[0]];return n+i+v+o};var jt=function(r,t,e){r[t]=e&255};var kt=function(r,t,e,a){var n=a?Bt:Yt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255};var zt=function(r,t,e,a){var n=a?bt:Gt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255};var Qt=function(r,t,e,a){var n=a?Ht:xt;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255;r[t+n[3]]=e>>>24&255};function Zt(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=t}Zt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){jt(this.data,this.offset,r<0?r|256:r);this.offset+=Ct},getInt8:function(){var r=Vt(this.data,this.offset);this.offset+=Ct;return r&128?r^-256:r},setUint8:function(r){jt(this.data,this.offset,r);this.offset+=Ct},getUint8:function(){var r=Vt(this.data,this.offset);this.offset+=Ct;return r},setInt16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;kt(this.data,this.offset,r<0?r|65536:r,t);this.offset+=Lt},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Wt(this.data,this.offset,r);this.offset+=Lt;return t&32768?t^-65536:t},setUint16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;kt(this.data,this.offset,r,t);this.offset+=Lt},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Wt(this.data,this.offset,r);this.offset+=Lt;return t},setInt24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;zt(this.data,this.offset,r<0?r|16777216:r,t);this.offset+=pt},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Xt(this.data,this.offset,r);this.offset+=pt;return t&8388608?t^-16777216:t},setUint24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;zt(this.data,this.offset,r,t);this.offset+=pt},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Xt(this.data,this.offset,r);this.offset+=pt;return t},setInt32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Qt(this.data,this.offset,r<0?r|4294967296:r,t);this.offset+=Dt},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Kt(this.data,this.offset,r);this.offset+=Dt;return t&2147483648?t^-4294967296:t},setUint32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;Qt(this.data,this.offset,r,t);this.offset+=Dt},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Kt(this.data,this.offset,r);this.offset+=Dt;return t},setFloat32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;wt(this.data,this.offset,r,t,23,4);this.offset+=Dt},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Ft(this.data,this.offset,r,23,4);this.offset+=Dt;return t},setFixedString:function(r,t){var e=r.length>t?t:r.length;var a=0;for(a=0;a<e;++a){this.setUint8(r.charCodeAt(a))}for(a=e;a<t;++a){this.setUint8(0)}},getFixedStringBase:function(r,t){var e=t.stopOnZero;var a=this.offset+r;var n=[];var i;while(this.offset<a){i=this.getUint8();if(e&&i===0){this.seek(a);break}n.push(String.fromCharCode(i))}return n.join("")},getFixedString:function(r){return this.getFixedStringBase(r,{stopOnZero:true})},setString:function(r){this.setUint8(r.length);this.setFixedString(r)},getString:function(){var r=this.getUint8();return this.getFixedStringBase(r,{stopOnZero:false})},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=t+r;return this.data.slice(t,this.offset)},setBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[t,r.length].concat(f(r)));this.data=e;this.offset=t+r.length}};Object.defineProperties(Zt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var qt=Hr;var Jt=Kr[Hr];var $t=2;var re=function(r){return function(t){R(Jt,t,$t);var e=new Zt(t,false);var a=e.getUint8();var n=e.getUint8();return{commandId:a,commandName:r[a],errorCode:n,errorName:Ut[n]}}};var te=re(Kr);var ee=pr;var ae=Kr[pr];var ne=6;var ie=function(r){R(ae,r,ne);return{vector:r}};var ve=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var e={};for(var a in r){e[a]=(t&r[a])!==0}return e};var oe=function(r,t,e){return(1<<t)-1&r>>e-1};var Ee="x";var ue=[".","1","3","R","M"];var fe=[".","A","G","R","T","D"];var se=[".","0","1","2","3","4","5"];var _e=[".","A","B","C","D","E","F"];var Ae=[".","A","B","C","D","E","F","H","K","G"];var ge=[".","1","2","3","4"];var ce=[".","L","M","Z","K"];var le=[".","0","1","2","3","4","5","6","7","8","9"];var Re=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Te=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var de=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var Oe=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var he={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var Ue={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var Se=function(r){var t=ve(Ue,r);return{meterType:"mtx3",...t,typeMeterG:!t.typeMeterG}};var Ne=function(r){return[r>>4,r&15]};var Ie=function(r){var t=new Array(r.length*2).fill(0);r.forEach(function(r,e){var a=Ne(r),n=E(a,2),i=n[0],v=n[1];t[e*2]=i;t[e*2+1]=v});return t};var me=function(r){if(r.length!==14&&r.length!==16){throw new Error("Device type bytes wrong size")}var t=["MTX "];t.push(ue[r[0]]??Ee);t.push(fe[r[1]]??Ee);t.push(se[r[2]]??Ee);t.push(se[r[3]]??Ee);t.push(".");t.push(_e[r[4]]??Ee);t.push(Ae[r[5]]??Ee);t.push(".");t.push(ge[r[6]]??Ee);t.push(ce[r[7]]??Ee);var e=r[8];t.push(le[r[9]]??Ee);t.push("-");var a;if(r.length<14||r[12]===0&&r[13]===0){t.push(Re[r[10]]??Ee);a=11}else if(r[13]===0){t.push(Re[r[10]]??Ee);t.push(Re[r[11]]??Ee);a=12}else{t.push(Re[r[10]]??Ee);t.push(Re[r[11]]??Ee);t.push(Re[r[12]]??Ee);a=13}var n=r[a];if(n&&n!==0){t.push(de[n]??Ee)}return{type:t.join(""),revision:e}};var Ce=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=["MTX "];var e=r[1]===5?"-":" ";t.push(ue[r[0]]??Ee);t.push(fe[r[1]]??Ee);t.push(e);for(var a=2;a<r.length;a++){if(r[a]!==0){t.push(Te[r[a]]??Ee)}}return{type:t.join("")}};var Le=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=[];t.push(ue[r[0]]??Ee);for(var e=1;e<r.length;e++){if(r[e]!==0){t.push(Oe[r[e]]??Ee)}}return{type:t.join("")}};var pe=function(r){if(r.length!==9){throw new Error("The buffer is too small")}var t;var e=[0,5,6,7,9,127,239];var a=e.indexOf(r[0])!==-1?2:0;var n=Ie(r.slice(0,8));var i=n[a];var v=ue[i];if(v==="1"||v==="3"){t={...me(n.slice(a)),descriptor:v==="3"?Se(r[8]):{meterType:"mtx1",...ve(he,r[8])}}}else{t=v==="M"?Le(n):Ce(n)}return t};var De=80;var Pe=81;var Me=82;var ye=83;var Fe=84;var we=85;var Ye=86;var Ge=87;var xe=88;var Be=89;var be=90;var He=91;var Ve=255;var We=Object.freeze({__proto__:null,DATA_REQUEST:De,DATA_RESPONSE:Pe,FRAGMENT_REQUEST:be,FRAGMENT_RESPONSE:He,IDENT_REQUEST:Me,IDENT_RESPONSE:ye,INVALID:Ve,L2_CHECK_ADDRESS_REQUEST:Ye,L2_CHECK_ADDRESS_RESPONSE:Ge,L2_RM_ADDRESS_REQUEST:xe,L2_RM_ADDRESS_RESPONSE:Be,L2_SET_ADDRESS_REQUEST:Fe,L2_SET_ADDRESS_RESPONSE:we});Xr(We);Xr(U);var Xe=0;var Ke=1;var je=2;var ke=3;var ze=4;var Qe=5;var Ze=6;var qe=7;var Je=8;var $e=9;var ra=10;var ta=11;var ea=12;var aa=13;var na=14;var ia=Object.freeze({__proto__:null,CASE_MODULE_OPEN:ra,CASE_OPEN:Xe,CASE_TERMINAL_OPEN:$e,DEVICE_FAILURE:Je,ERROR_ACCESS:Qe,MAGNETIC_ON:Ke,PARAMETERS_UPDATE_LOCAL:ke,PARAMETERS_UPDATE_REMOTE:je,PROTECTION_RESET_EM:aa,PROTECTION_RESET_MAGNETIC:na,RESTART:ze,TARIFF_TABLE_GET:ea,TARIFF_TABLE_SET:ta,TIME_CORRECT:qe,TIME_SET:Ze});var va=Xr(ia);Xr(Gr);var oa=1;var Ea=2;var ua=3;var fa=16;var sa=17;var _a=18;var Aa=19;var ga=20;var ca=21;var la=32;var Ra=33;var Ta=34;var da=35;var Oa=36;var ha=37;var Ua=38;var Sa=39;var Na=40;var Ia=41;var ma=49;var Ca=50;var La=51;var pa=52;var Da=53;var Pa=54;var Ma=55;var ya=56;var Fa=57;var wa=58;var Ya=59;var Ga=64;var xa=65;var Ba=66;var ba=67;var Ha=68;var Va=69;var Wa=70;var Xa=71;var Ka=72;var ja=73;var ka=74;var za=75;var Qa=76;var Za=77;var qa=78;var Ja=79;var $a=80;var rn=81;var tn=82;var en=83;var an=84;var nn=85;var vn=86;var on=87;var En=88;var un=89;var fn=96;var sn=97;var _n=98;var An=99;var gn=100;var cn=101;var ln=102;var Rn=103;var Tn=104;var dn=105;var On=112;var hn=113;var Un=114;var Sn=115;var Nn=116;var In=117;var mn=118;var Cn=119;var Ln=120;var pn=121;var Dn=122;var Pn=123;var Mn=124;var yn=125;var Fn=144;var wn=145;var Yn=147;var Gn=148;var xn=152;var Bn=156;var bn=157;var Hn=158;var Vn=159;var Wn=160;var Xn=161;var Kn=162;var jn=176;var kn=177;var zn=178;var Qn=179;var Zn=180;var qn=181;var Jn=182;var $n=183;var ri=185;var ti=186;var ei=224;var ai=225;var ni=226;var ii=227;var vi=228;var oi=229;var Ei=230;var ui=231;var fi=232;var si=Object.freeze({__proto__:null,ACCESS_ERROR:sa,ACCESS_LOCKED:fa,ACC_PARAMETERS_EXT_FAULT:Sn,ACC_PARAMETERS_FAULT:Un,BAD_TEST_EEPROM:Tn,BAD_TEST_FRAM:dn,BATTERY_FAULT:en,BATTERY_OK:tn,BIPOLAR_POWER_FAULT:Zn,BIPOLAR_POWER_OK:qn,BLOCK_TARIFF_FAULT:In,CALC_PERIOD_FAULT:Nn,CALIBRATION_FAULT:nn,CALIBRATION_FLAG_RESET:Rn,CALIBRATION_FLAG_SET:ln,CALIBRATION_OK:an,CALIBRATION_PARAMETERS_FAULT:mn,CASE_CLOSED:Aa,CASE_MODULE_CLOSED:yn,CASE_MODULE_OPENED:Mn,CASE_OPENED:_a,CASE_TERMINAL_BOX_CLOSED:Pn,CASE_TERMINAL_BOX_OPENED:Dn,CHANGE_ACCESS_KEY0:la,CHANGE_ACCESS_KEY1:Ra,CHANGE_ACCESS_KEY2:Ta,CHANGE_ACCESS_KEY3:da,CHANGE_COR_TIME:Ia,CHANGE_PARAMETERS_CHANNEL:ri,CHANGE_PARAMETERS_LOCAL:Oa,CHANGE_PARAMETERS_REMOTE:ha,CHANGE_TARIFF_TABLE:Ca,CHANGE_TARIFF_TABLE_2:xn,CLOCK_FAULT:on,CLOCK_OK:vn,CMD_RELAY_2_OFF:sn,CMD_RELAY_2_ON:fn,CMD_RELAY_OFF:Na,CMD_RELAY_ON:Sa,CMD_SET_DATETIME:Ua,COSF_MIN_OVER:Ya,COSF_OK:wa,CROSS_ZERO_EN_T1:_n,CROSS_ZERO_EN_T2:An,CROSS_ZERO_EN_T3:gn,CROSS_ZERO_EN_T4:cn,CROSS_ZERO_EXPORT_EN_T1:Hn,CROSS_ZERO_EXPORT_EN_T2:Vn,CROSS_ZERO_EXPORT_EN_T3:Wn,CROSS_ZERO_EXPORT_EN_T4:Xn,CURRENT_UNEQUAL_FAULT:zn,CURRENT_UNEQUAL_OK:Qn,EM_MAGNETIC_INFLUENCE_OFF:kn,EM_MAGNETIC_INFLUENCE_ON:jn,ENERGY_REGISTER_FAULT:oa,ENERGY_REGISTER_OVERFLOW:ma,F_MAX_OK:Ka,F_MAX_OVER:ja,F_MIN_OK:ka,F_MIN_OVER:za,I_MAX_OK:Qa,I_MAX_OVER:Za,MAGNETIC_INFLUENCE_OFF:ca,MAGNETIC_INFLUENCE_ON:ga,OPERATOR_PARAMETERS_VALUES_FAULT:ua,POWER_A_OFF:En,POWER_A_ON:un,POWER_OVER_RELAY_OFF:bn,POWER_SALDO_OK:$a,POWER_SALDO_OVER:rn,P_MAX_A_MINUS_OK:ui,P_MAX_A_MINUS_OVER:fi,P_MAX_OK:qa,P_MAX_OVER:Ja,RELAY_HARD_BAD_OFF:Fn,RELAY_HARD_BAD_ON:Yn,RELAY_HARD_OFF:Gn,RELAY_HARD_ON:wn,RELAY_OFF:Ma,RELAY_OFF_BAD_SALDO:ti,RELAY_ON:Pa,RESET_EM_FLAG:Jn,RESET_MAGNET_FLAG:$n,RESTART:ya,SALDO_EN_FAULT:Ln,SALDO_PARAMETERS_FAULT:hn,SET_DEMAND_EN_10MIN:ii,SET_DEMAND_EN_15MIN:vi,SET_DEMAND_EN_1MIN:ei,SET_DEMAND_EN_30MIN:oi,SET_DEMAND_EN_3MIN:ai,SET_DEMAND_EN_5MIN:ni,SET_DEMAND_EN_60MIN:Ei,SET_NEW_SALDO:On,SET_SALDO_PARAM:Bn,SET_TARIFF_TABLE:La,SUMMER_TIME:pa,TIME_CORRECT:pn,TIME_CORRECT_NEW:Kn,T_MAX_OK:Ha,T_MAX_OVER:Va,T_MIN_OK:Wa,T_MIN_OVER:Xa,VENDOR_PAR_FAULT:Ea,V_MAX_OK:Ga,V_MAX_OVER:xa,V_MIN_OK:Ba,V_MIN_OVER:ba,WATCHDOG_RESTART:Fa,WINTER_SUMMER_FAULT:Cn,WINTER_TIME:Da});var _i=Xr(si);var Ai=0;var gi=1;var ci=2;var li=3;var Ri=4;var Ti=5;var di=Object.freeze({__proto__:null,GSM:gi,TCP_CLIENT:li,TCP_SERVER:ci,TCP_SERVER_HTTP_PING:Ti,TCP_SERVER_TCP_PING:Ri,UNDEFINED:Ai});Xr(di);var Oi=0;var hi=1;var Ui=2;var Si=3;var Ni=Object.freeze({__proto__:null,CONFIGURATION_0:Oi,CONFIGURATION_1:hi,RESERVED:Ui,STATUS:Si});Xr(Ni);var Ii=1;var mi=2;var Ci=3;var Li=4;var pi=5;var Di=6;var Pi=7;var Mi=8;var yi=9;var Fi=10;var wi=11;var Yi=12;var Gi=13;var xi=14;var Bi=15;var bi=16;var Hi=17;var Vi=18;var Wi=19;var Xi=20;var Ki=21;var ji=22;var ki=23;var zi=24;var Qi=25;var Zi=26;var qi=28;var Ji=30;var $i=31;var rv=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:Li,ACTIVE_ENERGY_T2:pi,ACTIVE_ENERGY_T3:Di,ACTIVE_ENERGY_T4:Pi,ACTIVE_POWER_IN_NEUTRAL:yi,ACTIVE_POWER_PER_PHASE:Mi,BATTERY_VOLTAGE:ji,CURRENT_BALANCE:Ji,CURRENT_IN_NEUTRAL:wi,CURRENT_IN_PHASE:Fi,DATE_MONTH_YEAR:xi,EXPORTED_ACTIVE_ENERGY_T1:bi,EXPORTED_ACTIVE_ENERGY_T2:Hi,EXPORTED_ACTIVE_ENERGY_T3:Vi,EXPORTED_ACTIVE_ENERGY_T4:Wi,HOUR_MINUTE_SECOND:Gi,MAGNET_INDUCTION:qi,OPTOPORT_SPEED:$i,POWER_FACTOR_PHASE_A:Xi,POWER_FACTOR_PHASE_B:Ki,POWER_THRESHOLD_T1:ki,POWER_THRESHOLD_T2:zi,POWER_THRESHOLD_T3:Qi,POWER_THRESHOLD_T4:Zi,SET_ALL_SEGMENT_DISPLAY:Ii,SOFTWARE_VERSION:mi,TOTAL_ACTIVE_ENERGY:Ci,TOTAL_EXPORTED_ACTIVE_ENERGY:Bi,VOLTAGE:Yi});Xr(rv);var tv=2400;var ev=9600;var av={rs485orTwi:{0:ev,2:tv,4:ev},optoport:{0:tv,2:tv,4:ev}};({rs485orTwi:Xr(av.rs485orTwi),optoport:Xr(av.optoport)});var nv=1;var iv=2;var vv=11;var ov=74;var Ev=7;var uv=4;var fv=48;var sv=50;var _v=3+fv*2;var Av={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var gv={...Av,AUTO_SCREEN_SCROLLING:2147483648};var cv={...Av,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var lv={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var Rv={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Tv={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var dv={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var Ov={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var hv={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32,POWER_AVERAGING_TYPE:128};var Uv={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var Sv={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var Nv={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5,RELAY_MAGNET_OFF:2**6,RELAY_P_MINUS_MAX_OFF:2**7};var Iv={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var mv={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var Cv={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var Lv={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};var pv=function(r){return{rs485orTwi:av.rs485orTwi[oe(r,4,1)],optoport:av.optoport[oe(r,4,5)]}};function Dv(r,t,e){var a=e>>uv;var n=new Array(uv).fill(0);n.forEach(function(t,e){var i=!!oe(a,1,e+1);if(i){n[e]=r.getInt32()}else{n[e]=null}});return n}function Pv(r){if(r===65535){return{tariff:undefined,energy:undefined}}return{tariff:r>>14&3,energy:r&16383}}var Mv=function(r){return{tariff:oe(r,2,1),isFirstHalfHour:!oe(r,1,3),hour:oe(r,5,4)}};var yv=function(r){var t=c(r.getBytes(3),{separator:""});var e=r.getUint8();var a=r.getUint8();var n=c(r.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:a,serial:n}};var Fv=function(r){return{isSummerTime:!!r.getUint8(),seconds:r.getUint8(),minutes:r.getUint8(),hours:r.getUint8(),day:r.getUint8(),date:r.getUint8(),month:r.getUint8(),year:r.getUint8()}};var wv=function(r){return{id:r.getUint32(),tariffSet:r.getUint8(),activateYear:r.getUint8(),activateMonth:r.getUint8(),activateDay:r.getUint8(),specialProfilesArraySize:r.getUint8(),seasonProfilesArraySize:r.getUint8(),dayProfilesArraySize:r.getUint8()}};var Yv=function(r){return{monthTransitionSummer:r.getUint8(),dateTransitionSummer:r.getUint8(),hoursTransitionSummer:r.getUint8(),hoursCorrectSummer:r.getUint8(),monthTransitionWinter:r.getUint8(),dateTransitionWinter:r.getUint8(),hoursTransitionWinter:r.getUint8(),hoursCorrectWinter:r.getUint8(),isCorrectionNeeded:r.getUint8()===1}};var Gv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndexes:new Array(Ev).fill(0).map(function(){return r.getUint8()})}};var xv=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndex:r.getUint8(),year:r.getUint8()}};var Bv=function(r){return pe(r.getBytes(9))};var bv=function(r){var t;var e={vpThreshold:r.getUint32(),vThreshold:r.getUint32(),ipThreshold:r.getUint32(),pmaxThreshold0:r.getUint32(),pmaxThreshold1:r.getUint32(),pmaxThreshold2:r.getUint32(),pmaxThreshold3:r.getUint32(),serialPortsSpeed:pv(r.getUint8()),tint:r.getUint8(),calcPeriodDate:r.getUint8(),timeoutDisplay:r.getUint8(),timeoutScreen:r.getUint8(),displaySet:ve(gv,r.getUint32()),relaySet4:ve(dv,r.getUint8()),relaySet3:ve(Tv,r.getUint8()),relaySet2:ve(Rv,r.getUint8()),relaySet1:ve(lv,r.getUint8()),displayType:r.getUint8(),ten:r.getUint8(),voltageAveragingInterval:(t=r.getUint8(),r.getUint8(),t),deltaCorMin:r.getUint8(),timeoutMagnetOff:r.getUint8(),timeoutMagnetOn:r.getUint8(),define1:ve(hv,r.getUint8()),timeoutRelayOn:r.getUint8(),timeoutRelayKey:r.getUint8(),timeoutRelayAuto:r.getUint8(),timeoutBadVAVB:r.getUint8(),freqMax:r.getUint8(),freqMin:r.getUint8(),phMin:r.getUint16(),year:r.getUint8(),month:r.getUint8(),date:r.getUint8(),energyDecimalPoint:r.getUint8(),typeMeter:r.getUint8(),timeoutIMax:r.getUint8(),timeoutPMax:r.getUint8(),timeoutCos:r.getUint8(),pMaxDef:r.getUint8(),displaySetExt:ve(cv,r.getUint32()),timeoutUneqCurrent:r.getUint8(),timeoutBipolarPower:r.getUint8(),relaySet5:ve(Ov,r.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var a=r.getUint8();e.timeCorrectPeriod=a&127;e.timeCorrectPassHalfhour=!!(a&128);return e};var Hv=function(r){var t=r.getUint8();var e=oe(t,uv,1);var a=Dv(r,e,t);return{energyType:e,energies:a}};var Vv=function(r){return new Array(uv).fill(0).map(function(){return r.getInt32()})};var Wv=function(r){return{year:r.getUint8(),month:r.getUint8(),date:r.getUint8()}};var Xv=function(r){return{coefficients:new Array(4).fill(0).map(function(){return r.getUint32()}),decimalPointTariff:r.getUint8(),indicationThreshold:r.getInt32(),relayThreshold:r.getInt32(),mode:r.getUint8(),saldoOffTimeBegin:r.getUint8(),saldoOffTimeEnd:r.getUint8(),decimalPointIndication:r.getUint8(),powerThreshold:r.getUint32(),creditThreshold:r.getInt32()}};var Kv=function(r,t){var e=new Array(t).fill(0).map(function(){return r.getUint16()});return e.map(function(r){return Pv(r)})};var jv=function(r){var t=r.getUint16();return ve(Uv,t)};var kv=function(r){var t=r.getUint16();var e=ve(Sv,r.getUint8());var a=ve(Nv,r.getUint8());var n=ve(Iv,r.getUint8());var i=ve(mv,r.getUint8());var v=ve(Cv,r.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:a,status1:n,status2:i,status3:v}};var zv=function(r){var t={hours:r.getUint8(),minutes:r.getUint8(),seconds:r.getUint8(),event:r.getUint8()};var e=t.event;var a=r.bytesLeft;t.eventName=_i[e];switch(e){case bn:if(a<4){return t}t.power=[r.getUint8(),r.getUint8(),r.getUint8(),r.getUint8()];break;case Ua:case pn:if(a<8){return t}t.newDate=Fv(r);break}return t};var Qv=function(r){var t=r.getUint8();var e=r.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},demandType:r.getUint8(),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var Zv=function(r){var t=r.getUint8();var e=r.getUint8();var a=r.getUint8();return{channelParam1:t,powerOffTrackingInterval:e,channelParam2:a}};var qv=function(r){var t=Wv(r);var e=new Array(uv).fill(0).map(function(){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}});return{date:t,power:e}};var Jv=function(r){return{pmaxMinusThreshold0:r.getUint32(),pmaxMinusThreshold1:r.getUint32(),pmaxMinusThreshold2:r.getUint32(),pmaxMinusThreshold3:r.getUint32(),relaySet:ve(Lv,r.getUint8())}};var $v=function(r){return new Array(uv).fill(0).map(function(){return{date:r.getUint8(),hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}})};var ro=ur;var to=Kr[ur];var eo=9;var ao=function(r){R(to,r,eo);var t=new Zt(r,false);return Yv(t)};var no=fr;var io=Kr[fr];var vo=9;var oo=function(r){R(io,r,vo);var t=E(r,9),e=t[0],a=t[1],n=t[2],i=t[3],v=t[4],o=t[5],u=t[6],f=t[7],s=t[8];return{event:e,name:va[e],index:a,date:{year:n,month:i,date:v,hours:o,minutes:u,seconds:f},count:s}};var Eo=nr;var uo=Kr[nr];var fo=31;var so={calibrationEnable:1,hardkey:2,keyPressTest:4,keyOpenkeyTest:8,keyGerkonTest:16,keyOpenKlemaTest:32,keyOpenModuleTest:64,keyPress2Test:128};var _o=function(r){R(uo,r,fo);var t=new Zt(r,false);var e=t.getUint32();var a=t.getUint32();var n=t.getUint32();var i=t.getUint32();var v=t.getUint32();var o=t.getUint32();var E=ve(Sv,t.getUint8());var u=t.getUint8();var f=t.getUint8();var s=ve(so,t.getUint8());var _={"A+":t.getUint8(),"A-":t.getUint8()};var A=!!(t.getUint8()&1);var g=u|f<<8;return{operatingSeconds:e,tbadVAVB:a,tbadImaxAll:n,tbadPmaxAll:i,tbadUnequalCurrAll:v,tbadFREQ:o,relayStatus:E,statusEvent:ve(Uv,g),calibrationFlags:s,currentTariffs:_,isSummerTime:A}};var Ao=D;var go=Kr[D];var co=32;var lo=function(r){R(go,r,co);var t=new Zt(r,false);return{powerA:t.getInt32(),iaRms:t.getInt32(),vavbRms:t.getInt32(),varA:t.getInt32(),pfA:t.getInt16()/1e3,ibRms:t.getInt32(),powerB:t.getInt32(),varB:t.getInt32(),pfB:t.getInt16()/1e3}};var Ro=C;var To=Kr[C];var Oo=8;var ho=function(r){R(To,r,Oo);var t=new Zt(r,false);return Fv(t)};var Uo=19;var So=x;var No=function(r){var t=new Zt(r,false);var e;if(r.length===Uo){e={date:Wv(t),energies:Vv(t)}}else{e={date:Wv(t),...Hv(t)}}return e};var Io=19;var mo=gr;var Co=function(r){var t=new Zt(r,false);var e;if(r.length===Io){e={date:Wv(t),energies:Vv(t)}}else{e={date:Wv(t),...Hv(t)}}return e};var Lo=4;var po=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var Do=4294967295;var Po={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Mo=function(r){return r<Lo?1<<r:0};var yo=function(r){return r<Lo?1<<r<<4:0};var Fo=function(r){var t=r.getUint8();var e=r.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};var wo=function(r){var t=r.getUint8();return ve(Po,t)};var Yo=function(r,t){var e=[];for(var a=0;a<t;a++){var n=r.getUint16();var i=n>>14&3;var v=n&16383;e.push(n===Do?undefined:{tariff:i,energy:v})}return e};var Go=function(r,t,e){var a={};po.forEach(function(n){if(t[n]){a[n]=Yo(r,e)}});return a};var xo=function(r,t){var e={};if(t&Po["A+"]){e["A+"]=r.getUint32()}if(t&Po["A+R+"]){e["A+R+"]=r.getUint32()}if(t&Po["A+R-"]){e["A+R-"]=r.getUint32()}return e};var Bo=function(r,t){var e={};if(t&Po["A-"]){e["A-"]=r.getUint32()}if(t&Po["A-R+"]){e["A-R+"]=r.getUint32()}if(t&Po["A-R-"]){e["A-R-"]=r.getUint32()}return e};var bo=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(Lo).fill(null);for(var n=0;n<Lo;n++){if(e&Mo(n)){a[n]=xo(r,t)}}for(var i=0;i<Lo;i++){if(e&yo(i)){a[i]={...a[i],...Bo(r,t)}}}return a};var Ho=function(r){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}};var Vo=function(r,t){var e={};if(t&Po["A+"]){e["A+"]=Ho(r)}if(t&Po["A+R+"]){e["A+R+"]=Ho(r)}if(t&Po["A+R-"]){e["A+R-"]=Ho(r)}return e};var Wo=function(r,t){var e={};if(t&Po["A-"]){e["A-"]=Ho(r)}if(t&Po["A-R+"]){e["A-R+"]=Ho(r)}if(t&Po["A-R-"]){e["A-R-"]=Ho(r)}return e};var Xo=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(Lo).fill(null);for(var n=0;n<Lo;n++){if(e&Mo(n)){a[n]=Vo(r,t)}}for(var i=0;i<Lo;i++){if(e&yo(i)){a[i]={...a[i],...Wo(r,t)}}}return a};var Ko=xr;var jo=function(r){var t=new Zt(r,false);return{date:Fo(t),energies:bo(t)}};var ko=J;var zo=Kr[J];var Qo=27;var Zo=function(r){R(zo,r,Qo);var t=new Zt(r,false);return qv(t)};var qo=Tr;var Jo=Kr[Tr];var $o=27;var rE=function(r){R(Jo,r,$o);var t=new Zt(r,false);return qv(t)};var tE=_r;var eE=Kr[_r];var aE=27;var nE=function(r){R(eE,r,aE);var t=new Zt(r,false);return qv(t)};var iE=Br;var vE=function(r){var t=new Zt(r,false);return{date:Fo(t),tariffs:Xo(t)}};var oE=255;var EE=vr;var uE=function(r){var t=r.indexOf(oE);var e=t===-1?r:r.slice(0,t);return{periods:f(e).map(Mv)}};var fE=25;var sE=function(r,t,e){return Math.trunc((r*60+t)/e)};var _E=function(r){return sE(fE,0,r)};var AE=function(r,t,e){if(r===65535){return null}var a=_E(e);if(t===a){return{lastSummerHour:r>>8&255}}return e===60?{energy:r}:{tariff:r>>14&3,energy:r&16383}};var gE=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(AE(a,(t??0)+n,e));return r},[])};var cE=function(r,t,e){if(r===65535){return 65535}var a=_E(e);return t===a?{lastSummerHour:r>>8&255}:{voltage:r}};var lE=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(cE(a,(t??0)+n,e));return r},[])};var RE=7;var TE=wr;var dE=function(r){if(!r||r.length<RE){throw new Error("Invalid uplink GetDemand byte length.")}var t=new Zt(r,false);var e=Qv(t);if(r.length!==RE+2*e.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(e.count).fill(0).map(function(){return t.getUint16()});var n=e.demandType===nv||e.demandType===iv;e.demands=n?gE(a,e.firstIndex,e.period):lE(a,e.firstIndex,e.period);return e};var OE=Fr;var hE=Kr[Fr];var UE=4;var SE=function(r){R(hE,r,UE);var t=new Zt(r,false);return Zv(t)};var NE=m;var IE=Kr[m];var mE=8;var CE=function(r){R(IE,r,mE);var t=new Zt(r,false);return yv(t)};var LE=I;var pE=Kr[I];var DE=9;var PE=function(r){R(pE,r,DE);var t=new Zt(r,false);return Bv(t)};var ME=Sr;var yE=function(t){var e=u(t),a=e[0],n=r(e).slice(1);return{displayMode:a,order:n}};var FE=16;var wE=P;var YE=function(r){var t=new Zt(r,false);var e;if(r.length===FE){e={energies:Vv(t)}}else{e=Hv(t)}return e};var GE=19;var xE=N;var BE=function(r){var t=new Zt(r,false);var e;if(r.length===GE){e={date:Wv(t),energies:Vv(t)}}else{e={date:Wv(t),...Hv(t)}}return e};var bE=16;var HE=Or;var VE=function(r){var t=new Zt(r,false);var e;if(r.length===bE){e={energies:Vv(t)}}else{e=Hv(t)}return e};var WE=19;var XE=cr;var KE=function(r){var t=new Zt(r,false);var e;if(r.length===WE){e={date:Wv(t),energies:Vv(t)}}else{e={date:Wv(t),...Hv(t)}}return e};var jE=3+1;var kE=4;var zE=rr;var QE=jE+255*kE;var ZE=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:zv;return function(e){if(e.length>QE){throw new Error("Wrong buffer size: ".concat(e.length,"."))}var a=new r(e,false);var n=Wv(a);var i=a.getUint8();var v=[];while(!a.isEmpty){v.push(t(a))}return{date:n,eventsNumber:i,events:v}}};var qE=ZE(Zt);var JE=14;var $E=20;var ru=tr;var tu=function(r){if(r.length!==JE&&r.length!==$E){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=new Zt(r,false);var e=t.getUint16();var a=t.getUint16();var n=t.getUint16();var i=t.getUint16();var v=t.getUint16();var o=t.getUint16();var E=t.getUint16();return{accessClosed:o,accessError:v,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:e,setClock:E}};var eu=S;var au=Kr[S];var nu=2;var iu=function(r){R(au,r,nu);var t=new Zt(r,true);return jv(t)};var vu=ir;var ou=Kr[ir];var Eu=4;var uu=function(r){R(ou,r,Eu);var t=new Zt(r,false);return{temperature:t.getInt16(),frequency:t.getInt16()}};var fu=Q;var su=Kr[Q];var _u=7;var Au=function(r){R(su,r,_u);var t=new Zt(r,false);return kv(t)};var gu=function(r,t){var e=65535;for(var a=0;a<t.length;a++){var n=t[a]^e&255;n^=n<<4&255;e=n<<3^n<<8^e>>8^n>>4}return e};var cu=function(r){return r&65280^65280|r&255^255};var lu;(function(r){r[r["X25"]=0]="X25"})(lu||(lu={}));var Ru=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:lu.X25;if(t===lu.X25){var e=gu(65535,r);return cu(e)}throw new Error("unknown CRC16 type")};var Tu=function(r){if(r.length>=2){var t=new Zt(r.slice(-2));return t.getUint16()}return undefined};var du=function(r){var t=Tu(r);var e=r.slice(0,r.length-2);var a=Ru(e);return{payload:e,crc:{calculated:a,received:t}}};var Ou=218;var hu=60;var Uu=function(t,e){var a=E(e,1),n=a[0];var i=du(e.slice(1));if(n>3){throw new Error("Command ".concat(t,". Invalid block index: ").concat(n,"."))}if(i.crc.calculated!==i.crc.received){var v=function(r){return r.toString(16).padStart(4,"0")};throw new Error("Command ".concat(t,". Invalid block crc. Calculated: ")+"0x".concat(v(i.crc.calculated),", received: 0x").concat(v(i.crc.received)))}var o=u(i.payload),f=o[0],s=r(o).slice(1);if(f!==Ou){throw new Error("Command ".concat(t,". Invalid block prefix: ").concat(f,"."))}if(s.length!==1+hu){throw new Error("Command ".concat(t,". Invalid payload length: ").concat(s.length,"."))}return{index:n,data:s}};var Su=Ir;var Nu=Kr[Ir];var Iu=3+hu+2;var mu=function(r){R(Nu,r,Iu);return Uu(Nu,r)};var Cu=G;var Lu=function(r){var t=new Zt(r,false);var e=r.length>_v;var a=Wv(t);var n=Kv(t,e?sv:fv);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var pu=Rr;var Du=function(r){var t=new Zt(r,false);var e=r.length>_v;var a=Wv(t);var n=Kv(t,e?sv:fv);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var Pu=Ar;var Mu=function(r){var t=new Zt(r,false);var e=r.length>_v;var a=Wv(t);var n=Kv(t,e?sv:fv);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var yu=Lr;var Fu=function(r){var t=new Zt(r,false);var e=Fo(t);var a=wo(t);var n=t.getUint8();var i=t.getUint8();return{date:e,firstHalfhour:n,halfhoursNumber:i,energies:Go(t,a,i)}};var wu=1+1+6+3;var Yu=252;var Gu=br;var xu=Kr[br];var Bu=function(r){return{date:Fo(r),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var bu=function(r,t){var e=1+t.count*2;var a=Math.floor(r.bytesLeft/e);var n=[];for(var i=0;i<a;i++){var v=r.getUint8();var o=v===nv||v===iv;var E=new Array(t.count).fill(0).map(function(){return r.getUint16()});var u=o?gE(E,t.firstIndex,t.period):lE(E,t.firstIndex,t.period);n.push({demandType:v,values:u})}return n};var Hu=function(r){l(xu,r,{min:wu,max:Yu});var t=new Zt(r,false);var e=Bu(t);var a=bu(t,e);return{...e,demands:a}};var Vu=Cr;var Wu=Kr[Cr];var Xu=10;var Ku=function(r){R(Wu,r,Xu);var t=new Zt(r,false);return{induction:t.getUint16(),threshold:t.getUint16(),inductionCoefficient:t.getUint16()/100,reserved:t.getUint32()}};var ju=Yr;var ku=Kr[Yr];var zu=1;var Qu=function(r){var t=E(r,1),e=t[0];R(ku,[e],zu);return{ten:e}};var Zu=B;var qu=Kr[B];var Ju=18;var $u=function(r){R(qu,r,Ju);var t=new Zt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:Vv(t)}};var rf=lr;var tf=Kr[lr];var ef=18;var af=function(r){R(tf,r,ef);var t=new Zt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:Vv(t)}};var nf=$;var vf=Kr[$];var of=2+uv*7;var Ef=function(r){R(vf,r,of);var t=new Zt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:$v(t)}};var uf=dr;var ff=Kr[dr];var sf=2+uv*7;var _f=function(r){R(ff,r,sf);var t=new Zt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:$v(t)}};var Af=W;var gf=Kr[W];var cf=ov;var lf=function(r){R(gf,r,cf);var t=new Zt(r,false);return bv(t)};var Rf=Dr;var Tf=Kr[Dr];var df=17;var Of=function(r){R(Tf,r,df);var t=new Zt(r,false);return Jv(t)};var hf=Mr;var Uf=Kr[Mr];var Sf=16;var Nf=function(r){R(Uf,r,Sf);var t=new Zt(r,false);return{year:t.getUint8(),month:t.getUint8(),powerOffSaidiMinutes:t.getUint32(),powerOffSaidiCount:t.getUint16(),powerOffMaidiMinutes:t.getUint32(),powerOffMaifiCount:t.getUint16(),badVoltagePhaseAMinutes:t.getUint16()}};var If=z;var mf=Kr[z];var Cf=1+vv*2;var Lf=function(r){R(mf,r,Cf);var t=new Zt(r,false);return{tariffTable:t.getUint8(),activePlan:wv(t),passivePlan:wv(t)}};var pf=j;var Df=Kr[j];var Pf=29;var Mf=function(r){R(Df,r,Pf);var t=new Zt(r,false);return{currentSaldo:t.getInt32(),count:t.getUint8(),energy:new Array(4).fill(0).map(function(){return t.getInt32()}),beginSaldoOfPeriod:t.getInt32(),date:{month:t.getUint8(),date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8()}}};var yf=Z;var Ff=Kr[Z];var wf=37;var Yf=function(r){R(Ff,r,wf);var t=new Zt(r,false);return Xv(t)};var Gf=or;var xf=Kr[or];var Bf=9;var bf=function(r){R(xf,r,Bf);var t=new Zt(r,false);return Gv(t)};var Hf=Er;var Vf=Kr[Er];var Wf=4;var Xf=function(r){R(Vf,r,Wf);var t=new Zt(r,false);return xv(t)};var Kf=K;var jf=Kr[K];var kf=10;var zf=function(r){R(jf,r,kf);return{version:String.fromCharCode.apply(null,f(r))}};var Qf=Y;var Zf=Kr[Y];var qf=0;var Jf=function(r){R(Zf,r,qf);return{}};var $f=er;var rs=Kr[er];var ts=0;var es=function(r){R(rs,r,ts);return{}};var as=ar;var ns=Kr[ar];var is=0;var vs=function(r){R(ns,r,is);return{}};var os=sr;var Es=Kr[sr];var us=0;var fs=function(r){R(Es,r,us);return{}};var ss=p;var _s=Kr[p];var As=0;var gs=function(r){R(_s,r,As);return{}};var cs=hr;var ls=Kr[hr];var Rs=0;var Ts=function(r){R(ls,r,Rs);return{}};var ds=V;var Os=Kr[V];var hs=0;var Us=function(r){R(Os,r,hs);return{}};var Ss=L;var Ns=Kr[L];var Is=0;var ms=function(r){R(Ns,r,Is);return{}};var Cs=M;var Ls=Kr[M];var ps=0;var Ds=function(r){R(Ls,r,ps);return{}};var Ps=yr;var Ms=Kr[yr];var ys=0;var Fs=function(r){R(Ms,r,ys);return{}};var ws=Ur;var Ys=Kr[Ur];var Gs=0;var xs=function(r){R(Ys,r,Gs);return{}};var Bs=Nr;var bs=Kr[Nr];var Hs=0;var Vs=function(r){R(bs,r,Hs);return{}};var Ws=X;var Xs=Kr[X];var Ks=0;var js=function(r){R(Xs,r,Ks);return{}};var ks=Pr;var zs=Kr[Pr];var Qs=0;var Zs=function(r){R(zs,r,Qs);return{}};var qs=k;var Js=Kr[k];var $s=0;var r_=function(r){R(Js,r,$s);return{}};var t_=q;var e_=Kr[q];var a_=0;var n_=function(r){R(e_,r,a_);return{}};var i_=y;var v_=Kr[y];var o_=0;var E_=function(r){R(v_,r,o_);return{}};var u_=F;var f_=Kr[F];var s_=0;var __=function(r){R(f_,r,s_);return{}};var A_=mr;var g_=Kr[mr];var c_=1;var l_=function(r){R(g_,r,c_);var t=r[0];var e=!!(t&1);var a=!!(t&2);return{electroMagneticIndication:e,magneticIndication:a}};var R_=H;var T_=Kr[H];var d_=0;var O_=function(r){R(T_,r,d_);return{}};var h_=b;var U_=Kr[b];var S_=0;var N_=function(r){R(U_,r,S_);return{}};var I_={encrypt:function(){},decrypt:function(){}};var m_=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=t;r.forEach(function(r){e^=r});return e};var C_=2;var L_=2;var p_=function(r){var t=E(r,1),e=t[0];if(e===St){try{var a=mt(r.slice(C_));return{id:e,name:Nt,headerSize:C_,bytes:r,parameters:a}}catch{return null}}return null};var D_=function(r,t){var e=E(t,1),a=e[0];var n=p_(t.slice(L_-1));var i=p_(t.slice(L_));var v={messageId:a,bytes:t};if(n){return{...v,accessLevel:T,commands:[n]}}if(i){return{...v,accessLevel:r,commands:[i]}}return null};var P_=3;a(a(a(a({},T,0),h,1),O,2),d,3);var M_=2;var y_=2;var F_=function(r,t){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var v=E(e,2),o=v[0],u=v[1];var s=u&P_;var _=D_(s,e);var A={messageId:o,accessLevel:s,commands:i,bytes:e,lrc:{received:undefined,calculated:0}};var g=e.slice(M_);var c;if(_){return _}if(n&&s!==T){g=f(I_.decrypt(n,g))}var l=g[g.length-1];g=g.slice(0,-1);var R=m_(g);if(s!==T||l!==0){if(l!==R){c="Mismatch LRC."}}var d=g[0]&P_;var O=g.slice(1);if(s!==d){c="Mismatch access levels."}var h=0;do{var U=O[h];var S=O[h+1];var N=y_+S;var I=O.slice(h+y_,h+N);var m={id:U,name:t[U],headerSize:y_,bytes:O.slice(h,h+N)};if(!U){break}try{if(!r[U]){throw new Error("Unsupported command id: ".concat(U,"!"))}m.parameters=r[U](I,a);i.push(m)}catch(r){i.push({command:m,error:r.message})}h+=N}while(h<=O.length);A.lrc.calculated=R;A.lrc.received=l;if(c){return{message:A,error:c}}return A}};var w_={};var Y_=Kr;var G_=F_(w_,Y_);w_[jr]=Qr;w_[St]=mt;w_[qt]=te;w_[ee]=ie;w_[ro]=ao;w_[no]=oo;w_[Eo]=_o;w_[Ao]=lo;w_[Ro]=ho;w_[So]=No;w_[mo]=Co;w_[Ko]=jo;w_[ko]=Zo;w_[qo]=rE;w_[tE]=nE;w_[iE]=vE;w_[EE]=uE;w_[TE]=dE;w_[OE]=SE;w_[NE]=CE;w_[LE]=PE;w_[ME]=yE;w_[wE]=YE;w_[xE]=BE;w_[HE]=VE;w_[XE]=KE;w_[zE]=qE;w_[ru]=tu;w_[eu]=iu;w_[vu]=uu;w_[fu]=Au;w_[Su]=mu;w_[Cu]=Lu;w_[pu]=Du;w_[Pu]=Mu;w_[yu]=Fu;w_[Gu]=Hu;w_[Vu]=Ku;w_[ju]=Qu;w_[Zu]=$u;w_[rf]=af;w_[nf]=Ef;w_[uf]=_f;w_[Af]=lf;w_[Rf]=Of;w_[hf]=Nf;w_[If]=Lf;w_[pf]=Mf;w_[yf]=Yf;w_[Gf]=bf;w_[Hf]=Xf;w_[Kf]=zf;w_[Qf]=Jf;w_[$f]=es;w_[as]=vs;w_[os]=fs;w_[ss]=gs;w_[cs]=Ts;w_[ds]=Us;w_[Ss]=ms;w_[Cs]=Ds;w_[Ps]=Fs;w_[ws]=xs;w_[Bs]=Vs;w_[Ws]=js;w_[ks]=Zs;w_[qs]=r_;w_[t_]=n_;w_[i_]=E_;w_[u_]=__;w_[A_]=l_;w_[R_]=O_;w_[h_]=N_;var x_=145;var B_=30;var b_=function(r){if(r[0]!==B_){return{}}var t=r[1];var e=r[3];var a=r.slice(4,t+2);if(e===x_){return a}return null};fromBytes=G_;getDataSegment=b_})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
