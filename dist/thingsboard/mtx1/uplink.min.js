// IMPORTANT!!!
// This example only for default uplink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/


//#region [autogenerated jooby-codec bundle from index.js]
var fromBytes,getDataSegment;(function(){"use strict";function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=Array(t);e<t;e++)a[e]=r[e];return a}function t(r){if(Array.isArray(r))return r}function e(t){if(Array.isArray(t))return r(t)}function a(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function n(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,n,i,v,o=[],E=true,f=false;try{if(i=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;E=!1}else for(;!(E=(a=i.call(e)).done)&&(o.push(a.value),o.length!==t);E=!0);}catch(r){f=true,n=r}finally{try{if(!E&&null!=e.return&&(v=e.return(),Object(v)!==v))return}finally{if(f)throw n}}return o}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(r,e){return t(r)||n(r,e)||_(r,e)||i()}function E(r){return t(r)||a(r)||_(r)||i()}function f(r){return e(r)||a(r)||_(r)||v()}function _(t,e){if(t){if("string"==typeof t)return r(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}var u={separator:" ",prefix:""};var s=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=Object.assign({},u,t),a=e.separator,n=e.prefix;return r.map(function(r){return"".concat(n).concat(r.toString(16).padStart(2,"0"))}).join(a)};var g=0;var A=1;var l=3;var R=4;var c=5;var T=7;var h=8;var d=9;var O=13;var U=15;var N=16;var S=17;var I=18;var L=19;var D=20;var C=21;var m=22;var P=23;var M=24;var p=25;var y=28;var F=30;var w=31;var Y=40;var B=41;var G=42;var b=44;var H=45;var W=46;var V=47;var x=49;var K=50;var X=51;var z=52;var j=53;var k=54;var Q=57;var Z=58;var q=59;var $=60;var J=61;var rr=62;var tr=65;var er=70;var ar=74;var nr=75;var ir=79;var vr=80;var or=82;var Er=83;var fr=88;var _r=89;var ur=91;var sr=92;var gr=93;var Ar=94;var lr=100;var Rr=109;var cr=111;var Tr=112;var hr=113;var dr=114;var Or=116;var Ur=117;var Nr=118;var Sr=122;var Ir=Object.freeze({__proto__:null,activateRatePlan:L,getBuildVersion:Tr,getCorrectTime:rr,getCriticalEvent:tr,getCurrentStatusMeter:Q,getCurrentValues:O,getDateTime:T,getDayDemand:m,getDayDemandExport:ir,getDayMaxDemand:x,getDayMaxDemandExport:fr,getDayMaxDemandPrevious:ar,getDayProfile:q,getDemand:Nr,getDemandParameters:Ur,getDeviceId:c,getDeviceType:R,getDisplayParam:Ar,getEnergy:U,getEnergyDayPrevious:l,getEnergyExport:ur,getEnergyExportDayPrevious:vr,getEventStatus:A,getEvents:X,getEventsCounters:z,getExtendedCurrentValues:Z,getExtendedCurrentValues2:H,getHalfHourDemand:C,getHalfHourDemandExport:Er,getHalfHourDemandPrevious:nr,getHalfHourEnergies:cr,getMagneticFieldThreshold:Rr,getMeterInfo:Sr,getMonthDemand:P,getMonthDemandExport:or,getMonthMaxDemand:K,getMonthMaxDemandExport:_r,getOperatorParameters:F,getOperatorParametersExtended3:hr,getRatePlanInfo:b,getSaldo:B,getSaldoParameters:W,getSeasonProfile:$,getSpecialDay:J,getVersion:Y,prepareRatePlan:D,resetPowerMaxDay:j,resetPowerMaxMonth:k,runTariffPlan:er,setAccessKey:d,setCorrectDateTime:sr,setCorrectTime:y,setDateTime:h,setDayProfile:N,setDemandParameters:Or,setDisplayParam:gr,setOperatorParameters:w,setOperatorParametersExtended3:dr,setSaldo:G,setSaldoParameters:V,setSeasonProfile:S,setSpecialDay:I,setSpecialOperation:lr,turnRelayOff:p,turnRelayOn:M});var Lr=120;var Dr=121;var Cr=254;var mr=Object.freeze({__proto__:null,activateRatePlan:L,errorResponse:Cr,getBuildVersion:Tr,getCorrectTime:rr,getCriticalEvent:tr,getCurrentStatusMeter:Q,getCurrentValues:O,getDateTime:T,getDayDemand:m,getDayDemandExport:ir,getDayEnergies:Lr,getDayMaxDemand:x,getDayMaxDemandExport:fr,getDayMaxDemandPrevious:ar,getDayMaxPower:Dr,getDayProfile:q,getDemand:Nr,getDemandParameters:Ur,getDeviceId:c,getDeviceType:R,getDisplayParam:Ar,getEnergy:U,getEnergyDayPrevious:l,getEnergyExport:ur,getEnergyExportDayPrevious:vr,getEventStatus:A,getEvents:X,getEventsCounters:z,getExtendedCurrentValues:Z,getExtendedCurrentValues2:H,getHalfHourDemand:C,getHalfHourDemandExport:Er,getHalfHourDemandPrevious:nr,getHalfHourEnergies:cr,getMagneticFieldThreshold:Rr,getMeterInfo:Sr,getMonthDemand:P,getMonthDemandExport:or,getMonthMaxDemand:K,getMonthMaxDemandExport:_r,getOperatorParameters:F,getOperatorParametersExtended3:hr,getRatePlanInfo:b,getSaldo:B,getSaldoParameters:W,getSeasonProfile:$,getSpecialDay:J,getVersion:Y,prepareRatePlan:D,resetPowerMaxDay:j,resetPowerMaxMonth:k,runTariffPlan:er,setAccessKey:d,setCorrectDateTime:sr,setCorrectTime:y,setDateTime:h,setDayProfile:N,setDemandParameters:Or,setDisplayParam:gr,setOperatorParameters:w,setOperatorParametersExtended3:dr,setSaldo:G,setSaldoParameters:V,setSeasonProfile:S,setSpecialDay:I,setSpecialOperation:lr,turnRelayOff:p,turnRelayOn:M});var Pr=function(r){var t={};for(var e in r){var a=r[e];t[a]=e}return t};var Mr=Pr(mr);var pr=L;var yr=0;var Fr=function(r){if(r.length!==yr){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var wr=1;var Yr=2;var Br=3;var Gr=4;var br=Math.log,Hr=Math.pow,Wr=Math.LN2;var Vr=function(r,t,e,a,n){var i,v,o=n*8-a-1,E=(1<<o)-1,f=E>>1,_=-7,u=e?n-1:0,s=e?-1:1,g=r[t+u];u+=s;i=g&(1<<-_)-1;g>>=-_;_+=o;for(;_>0;i=i*256+r[t+u],u+=s,_-=8);v=i&(1<<-_)-1;i>>=-_;_+=a;for(;_>0;v=v*256+r[t+u],u+=s,_-=8);if(i===0){i=1-f}else if(i===E){return v?NaN:g?-Infinity:Infinity}else{v=v+Hr(2,a);i=i-f}return(g?-1:1)*v*Hr(2,i-a)};var xr=function(r,t,e,a,n,i){var v,o,E,f=i*8-n-1,_=(1<<f)-1,u=_>>1,s=n===23?Hr(2,-24)-Hr(2,-77):0,g=a?0:i-1,A=a?1:-1,l=e<0||e===0&&1/e<0?1:0;e<0&&(e=-e);if(e!==e||e===Infinity){o=e!==e?1:0;v=_}else{v=br(e)/Wr|0;if(e*(E=Hr(2,-v))<1){v--;E*=2}if(v+u>=1){e+=s/E}else{e+=s*Hr(2,1-u)}if(e*E>=2){v++;E/=2}if(v+u>=_){o=0;v=_}else if(v+u>=1){o=(e*E-1)*Hr(2,n);v=v+u}else{o=e*Hr(2,u-1)*Hr(2,n);v=0}}for(;n>=8;r[t+g]=o&255,g+=A,o/=256,n-=8);v=v<<n|o;f+=n;for(;f>0;r[t+g]=v&255,g+=A,v/=256,f-=8);r[t+g-A]|=l*128};var Kr=[1,0];var Xr=[2,1,0];var zr=[3,2,1,0];var jr=[0,1];var kr=[0,1,2];var Qr=[0,1,2,3];var Zr=function(r,t){return r[t]};var qr=function(r,t,e){var a=e?jr:Kr;var n=r[t+a[0]];var i=r[t+a[1]]<<8;return n|i};var $r=function(r,t,e){var a=e?kr:Xr;var n=r[t+a[0]];var i=r[t+a[1]]<<8;var v=r[t+a[2]]<<16;return n|i|v};var Jr=function(r,t,e){var a=e?Qr:zr;var n=r[t+a[3]]*16777216;var i=r[t+a[2]]*65536;var v=r[t+a[1]]*256;var o=r[t+a[0]];return n+i+v+o};var rt=function(r,t,e){r[t]=e&255};var tt=function(r,t,e,a){var n=a?jr:Kr;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255};var et=function(r,t,e,a){var n=a?kr:Xr;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255};var at=function(r,t,e,a){var n=a?Qr:zr;r[t+n[0]]=e&255;r[t+n[1]]=e>>>8&255;r[t+n[2]]=e>>>16&255;r[t+n[3]]=e>>>24&255};function nt(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof r==="number"){var e=new Array(r).fill(0);this.data=e}else{this.data=r}this.offset=0;this.isLittleEndian=t}nt.prototype={toUint8Array:function(){return this.data},seek:function(r){if(r<0||r>=this.data.length){throw new Error("Invalid position.")}this.offset=r},setInt8:function(r){rt(this.data,this.offset,r<0?r|256:r);this.offset+=wr},getInt8:function(){var r=Zr(this.data,this.offset);this.offset+=wr;return r&128?r^-256:r},setUint8:function(r){rt(this.data,this.offset,r);this.offset+=wr},getUint8:function(){var r=Zr(this.data,this.offset);this.offset+=wr;return r},setInt16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;tt(this.data,this.offset,r<0?r|65536:r,t);this.offset+=Yr},getInt16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=qr(this.data,this.offset,r);this.offset+=Yr;return t&32768?t^-65536:t},setUint16:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;tt(this.data,this.offset,r,t);this.offset+=Yr},getUint16:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=qr(this.data,this.offset,r);this.offset+=Yr;return t},setInt24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;et(this.data,this.offset,r<0?r|16777216:r,t);this.offset+=Br},getInt24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=$r(this.data,this.offset,r);this.offset+=Br;return t&8388608?t^-16777216:t},setUint24:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;et(this.data,this.offset,r,t);this.offset+=Br},getUint24:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=$r(this.data,this.offset,r);this.offset+=Br;return t},setInt32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;at(this.data,this.offset,r<0?r|4294967296:r,t);this.offset+=Gr},getInt32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Jr(this.data,this.offset,r);this.offset+=Gr;return t&2147483648?t^-4294967296:t},setUint32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;at(this.data,this.offset,r,t);this.offset+=Gr},getUint32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Jr(this.data,this.offset,r);this.offset+=Gr;return t},setFloat32:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;xr(this.data,this.offset,r,t,23,4);this.offset+=Gr},getFloat32:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var t=Vr(this.data,this.offset,r,23,4);this.offset+=Gr;return t},setString:function(r){this.setUint8(r.length);for(var t=0;t<r.length;++t){this.setUint8(r.charCodeAt(t))}},getString:function(){var r=this.getUint8();var t=this.offset+r;var e=[];while(this.offset<t){e.push(String.fromCharCode(this.getUint8()))}return e.join("")},getBytesToOffset:function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,r)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=t+r;return this.data.slice(t,this.offset)},setBytes:function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var e=this.data;e.splice.apply(e,[t,r.length].concat(f(r)));this.data=e;this.offset=t+r.length}};Object.defineProperties(nt.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var it=0;var vt=128;var ot=129;var Et=130;var ft=131;var _t=132;var ut=133;var st=134;var gt=135;var At=136;var lt=137;var Rt=144;var ct=145;var Tt=146;var ht=147;var dt=149;var Ot=151;var Ut=152;var Nt=153;var St=154;var It=155;var Lt=156;var Dt=159;var Ct=160;var mt=240;var Pt=Object.freeze({__proto__:null,ACCESS_DENIED:ht,BAD_ARRAY_INDEX:st,BAD_BLOCK_NUMBER:Lt,BAD_DATA_LENGTH:ut,BAD_MESSAGE:_t,BAD_RATE_PLAN_ID:At,BAD_RATE_PLAN_SIZE:lt,BAD_RESPONSE_LENGTH:Rt,BAD_SALDO_WRITE:dt,BLOCKED_METER:Ot,CALIBRATION_DISABLED:Tt,DECRYPTION_FAILURE:Et,INTERNAL:mt,INVALID_CORRECTION_INTERVAL:St,NOT_ALIGNED_DATA:ot,NOT_PREPARED_RATE_PLAN:gt,NO_DATA_FOR_DATE:ct,OK:it,OUT_OFF_RANGE:Dt,SET_METER_TYPE_FAILURE:Ct,TIME_CORRECTION_FAILURE:Nt,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:It,UNENCRYPTED_COMMAND_DISABLED:Ut,UNKNOWN_COMMAND:vt,UNKNOWN_PROTOCOL:ft});var Mt=Pr(Pt);var pt=Cr;var yt=function(r){return function(t){var e=new nt(t,false);var a=e.getUint8();var n=e.getUint8();return{commandId:a,commandName:r[a],errorCode:n,errorName:Mt[n]}}};var Ft=yt(Mr);var wt=Tr;var Yt=6;var Bt=function(r){if(r.length!==Yt){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=o(r,6),e=t[0],a=t[1],n=t[2],i=t[3],v=t[4],E=t[5];return{date:{date:e,month:a,year:n},version:"".concat(i,".").concat(v,".").concat(E)}};var Gt=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var e={};for(var a in r){e[a]=(t&r[a])!==0}return e};var bt=function(r,t,e){return(1<<t)-1&r>>e-1};var Ht="x";var Wt=[".","1","3","R","M"];var Vt=[".","A","G","R","T","D"];var xt=[".","0","1","2","3","4","5"];var Kt=[".","A","B","C","D","E","F"];var Xt=[".","A","B","C","D","E","F","H","K","G"];var zt=[".","1","2","3","4"];var jt=[".","L","M","Z","K"];var kt=[".","0","1","2","3","4","5","6","7","8","9"];var Qt=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var Zt=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var qt=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var $t=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var Jt={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var re={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var te=function(r){var t=Gt(re,r);return{meterType:"mtx3",...t,typeMeterG:!t.typeMeterG}};var ee=function(r){return[r>>4,r&15]};var ae=function(r){var t=new Array(r.length*2).fill(0);r.forEach(function(r,e){var a=ee(r),n=o(a,2),i=n[0],v=n[1];t[e*2]=i;t[e*2+1]=v});return t};var ne=function(r){if(r.length!==14&&r.length!==16){throw new Error("Device type bytes wrong size")}var t=["MTX "];t.push(Wt[r[0]]??Ht);t.push(Vt[r[1]]??Ht);t.push(xt[r[2]]??Ht);t.push(xt[r[3]]??Ht);t.push(".");t.push(Kt[r[4]]??Ht);t.push(Xt[r[5]]??Ht);t.push(".");t.push(zt[r[6]]??Ht);t.push(jt[r[7]]??Ht);var e=r[8];t.push(kt[r[9]]??Ht);t.push("-");var a;if(r.length<14||r[12]===0&&r[13]===0){t.push(Qt[r[10]]??Ht);a=11}else if(r[13]===0){t.push(Qt[r[10]]??Ht);t.push(Qt[r[11]]??Ht);a=12}else{t.push(Qt[r[10]]??Ht);t.push(Qt[r[11]]??Ht);t.push(Qt[r[12]]??Ht);a=13}var n=r[a];if(n&&n!==0){t.push(qt[n]??Ht)}return{type:t.join(""),revision:e}};var ie=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=["MTX "];var e=r[1]===5?"-":" ";t.push(Wt[r[0]]??Ht);t.push(Vt[r[1]]??Ht);t.push(e);for(var a=2;a<r.length;a++){if(r[a]!==0){t.push(Zt[r[a]]??Ht)}}return{type:t.join("")}};var ve=function(r){if(r.length<14){throw new Error("The buffer is too small")}var t=[];t.push(Wt[r[0]]??Ht);for(var e=1;e<r.length;e++){if(r[e]!==0){t.push($t[r[e]]??Ht)}}return{type:t.join("")}};var oe=function(r){if(r.length!==9){throw new Error("The buffer is too small")}var t;var e=[0,5,6,7,9,127,239];var a=e.indexOf(r[0])!==-1?2:0;var n=ae(r.slice(0,8));var i=n[a];var v=Wt[i];if(v==="1"||v==="3"){t={...ne(n.slice(a)),descriptor:v==="3"?te(r[8]):{meterType:"mtx1",...Gt(Jt,r[8])}}}else{t=v==="M"?ve(n):ie(n)}return t};var Ee=80;var fe=81;var _e=82;var ue=83;var se=84;var ge=85;var Ae=86;var le=87;var Re=88;var ce=89;var Te=90;var he=91;var de=255;var Oe=Object.freeze({__proto__:null,DATA_REQUEST:Ee,DATA_RESPONSE:fe,FRAGMENT_REQUEST:Te,FRAGMENT_RESPONSE:he,IDENT_REQUEST:_e,IDENT_RESPONSE:ue,INVALID:de,L2_CHECK_ADDRESS_REQUEST:Ae,L2_CHECK_ADDRESS_RESPONSE:le,L2_RM_ADDRESS_REQUEST:Re,L2_RM_ADDRESS_RESPONSE:ce,L2_SET_ADDRESS_REQUEST:se,L2_SET_ADDRESS_RESPONSE:ge});Pr(Oe);var Ue=1;var Ne=2;var Se=3;var Ie=16;var Le=17;var De=18;var Ce=19;var me=20;var Pe=21;var Me=32;var pe=33;var ye=34;var Fe=35;var we=36;var Ye=37;var Be=38;var Ge=39;var be=40;var He=41;var We=49;var Ve=50;var xe=51;var Ke=52;var Xe=53;var ze=54;var je=55;var ke=56;var Qe=57;var Ze=60;var qe=61;var $e=62;var Je=63;var ra=64;var ta=65;var ea=66;var aa=67;var na=68;var ia=69;var va=70;var oa=71;var Ea=72;var fa=73;var _a=74;var ua=75;var sa=76;var ga=77;var Aa=78;var la=79;var Ra=80;var ca=81;var Ta=82;var ha=83;var da=84;var Oa=85;var Ua=86;var Na=87;var Sa=88;var Ia=89;var La=96;var Da=97;var Ca=98;var ma=99;var Pa=100;var Ma=101;var pa=102;var ya=103;var Fa=104;var wa=105;var Ya=112;var Ba=113;var Ga=114;var ba=115;var Ha=116;var Wa=117;var Va=118;var xa=119;var Ka=120;var Xa=121;var za=122;var ja=123;var ka=124;var Qa=125;var Za=126;var qa=144;var $a=145;var Ja=147;var rn=148;var tn=152;var en=156;var an=157;var nn=158;var vn=159;var on=160;var En=161;var fn=162;var _n=176;var un=177;var sn=178;var gn=179;var An=180;var ln=181;var Rn=182;var cn=183;var Tn=185;var hn=186;var dn=224;var On=225;var Un=226;var Nn=227;var Sn=228;var In=229;var Ln=230;var Dn=231;var Cn=232;var mn=Object.freeze({__proto__:null,ACCESS_LOCKED:Ie,ACC_PARAM_BAD:Ga,ACC_PARAM_EXT_BAD:ba,BAD_TEST_EEPROM:Fa,BAD_TEST_FRAM:wa,BATTERY_FAULT:ha,BATTERY_OK:Ta,BIPOLAR_POWER_FAULT:An,BIPOLAR_POWER_OK:ln,BLOCK_TARIFF_BAD:Wa,CALC_PERIOD_BAD:Ha,CALIBRATION_FAULT:Oa,CALIBRATION_FLAG_RESET:ya,CALIBRATION_FLAG_SET:pa,CALIBRATION_OK:da,CALIBRATION_PARAM_BAD:Va,CASE_CLOSE:Ce,CASE_KLEMA_CLOSE:ja,CASE_KLEMA_OPEN:za,CASE_MODULE_CLOSE:Qa,CASE_MODULE_OPEN:ka,CASE_OPEN:De,CHANGE_ACCESS_KEY0:Me,CHANGE_ACCESS_KEY1:pe,CHANGE_ACCESS_KEY2:ye,CHANGE_ACCESS_KEY3:Fe,CHANGE_COR_TIME:He,CHANGE_PARAM_CANAL:Tn,CHANGE_PAR_LOCAL:we,CHANGE_PAR_REMOTE:Ye,CHANGE_TARIFF_TABLE:Ve,CHANGE_TARIFF_TBL_2:tn,CLOCK_FAULT:Na,CLOCK_OK:Ua,CMD_CHANGE_TIME:Be,CMD_RELAY_2_OFF:Da,CMD_RELAY_2_ON:La,CMD_RELAY_OFF:be,CMD_RELAY_ON:Ge,CROSS_ZERO_ENT0:Ca,CROSS_ZERO_ENT1:ma,CROSS_ZERO_ENT2:Pa,CROSS_ZERO_ENT3:Ma,CROSS_ZERO_EXPORT_ENT0:nn,CROSS_ZERO_EXPORT_ENT1:vn,CROSS_ZERO_EXPORT_ENT2:on,CROSS_ZERO_EXPORT_ENT3:En,CURRENT_UNEQUAL_FAULT:sn,CURRENT_UNEQUAL_OK:gn,EM_MAGNETIC_OFF:un,EM_MAGNETIC_ON:_n,ENERGY_REGISTER_FAULT:Ue,ENERGY_REGISTER_OVERFLOW:We,ERR_ACCESS:Le,F_MAX_OK:Ea,F_MAX_OVER:fa,F_MIN_OK:_a,F_MIN_OVER:ua,I_MAX_OK:sa,I_MAX_OVER:ga,MAGNETIC_OFF:Pe,MAGNETIC_ON:me,OP_PAR_FAULT:Se,POWER_A_OFF:Sa,POWER_A_ON:Ia,POWER_B_OFF:qe,POWER_B_ON:Ze,POWER_C_OFF:Je,POWER_C_ON:$e,POWER_GOOD_DIO:Za,POWER_OVER_RELAY_OFF:an,POWER_SALDO_OK:Ra,POWER_SALDO_OVER:ca,P_MAX_A_MINUS_OK:Dn,P_MAX_A_MINUS_OVER:Cn,P_MAX_OK:Aa,P_MAX_OVER:la,RELAY_HARD_BAD_OFF:qa,RELAY_HARD_BAD_ON:Ja,RELAY_HARD_OFF:rn,RELAY_HARD_ON:$a,RELAY_OFF:je,RELAY_OFF_BAD_SALDO:hn,RELAY_ON:ze,RESET_EM_FLAG:Rn,RESET_MAGNET_FLAG:cn,RESTART:ke,SALDO_EN_BAD:Ka,SALDO_PARAM_BAD:Ba,SET_DEMAND_EN_10MIN:Nn,SET_DEMAND_EN_15MIN:Sn,SET_DEMAND_EN_1MIN:dn,SET_DEMAND_EN_30MIN:In,SET_DEMAND_EN_3MIN:On,SET_DEMAND_EN_5MIN:Un,SET_DEMAND_EN_60MIN:Ln,SET_NEW_SALDO:Ya,SET_SALDO_PARAM:en,SET_TARIFF_TABLE:xe,SUMMER_TIME:Ke,TIME_CORRECT:Xa,TIME_CORRECT_NEW:fn,T_MAX_OK:na,T_MAX_OVER:ia,T_MIN_OK:va,T_MIN_OVER:oa,VENDOR_PAR_FAULT:Ne,V_MAX_OK:ra,V_MAX_OVER:ta,V_MIN_OK:ea,V_MIN_OVER:aa,WD_RESTART:Qe,WINTER_SUMMER_BAD:xa,WINTER_TIME:Xe});var Pn=Pr(mn);var Mn=11;var pn=7;var yn=4;var Fn=48;var wn=50;var Yn=3+Fn*2;var Bn={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var Gn={...Bn,AUTO_SCREEN_SCROLLING:2147483648};var bn={...Bn,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Hn={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var Wn={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var Vn={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var xn={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var Kn={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var Xn={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var zn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var jn={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var kn={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5,RELAY_MAGNET_OFF:2**6,RELAY_P_MINUS_MAX_OFF:2**7};var Qn={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var Zn={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var qn={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var $n={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};function Jn(r,t,e){var a=e>>yn;var n=new Array(yn).fill(0);n.forEach(function(t,e){var i=!!bt(a,1,e+1);if(i){n[e]=r.getInt32()}else{n[e]=null}});return n}function ri(r){if(r===65535){return{tariff:undefined,energy:undefined}}return{tariff:r>>14&3,energy:r&16383}}var ti=function(r){return{tariff:bt(r,2,1),isFirstHalfHour:!bt(r,1,3),hour:bt(r,5,4)}};var ei=function(r){var t=s(r.getBytes(3),{separator:""});var e=r.getUint8();var a=r.getUint8();var n=s(r.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:a,serial:n}};var ai=function(r){return{isSummerTime:!!r.getUint8(),seconds:r.getUint8(),minutes:r.getUint8(),hours:r.getUint8(),day:r.getUint8(),date:r.getUint8(),month:r.getUint8(),year:r.getUint8()}};var ni=function(r){return{id:r.getUint32(),tariffSet:r.getUint8(),activateYear:r.getUint8(),activateMonth:r.getUint8(),activateDay:r.getUint8(),specialProfilesArraySize:r.getUint8(),seasonProfilesArraySize:r.getUint8(),dayProfilesArraySize:r.getUint8()}};var ii=function(r){return{monthTransitionSummer:r.getUint8(),dateTransitionSummer:r.getUint8(),hoursTransitionSummer:r.getUint8(),hoursCorrectSummer:r.getUint8(),monthTransitionWinter:r.getUint8(),dateTransitionWinter:r.getUint8(),hoursTransitionWinter:r.getUint8(),hoursCorrectWinter:r.getUint8(),isCorrectionNeeded:r.getUint8()===1}};var vi=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndexes:new Array(pn).fill(0).map(function(){return r.getUint8()})}};var oi=function(r){return{month:r.getUint8(),date:r.getUint8(),dayIndex:r.getUint8(),isPeriodic:r.getUint8()===0}};var Ei=function(r){return oe(r.getBytes(9))};var fi=function(r){var t={vpThreshold:r.getUint32(),vThreshold:r.getUint32(),ipThreshold:r.getUint32(),pmaxThreshold0:r.getUint32(),pmaxThreshold1:r.getUint32(),pmaxThreshold2:r.getUint32(),pmaxThreshold3:r.getUint32(),speedOptoPort:r.getUint8(),tint:r.getUint8(),calcPeriodDate:r.getUint8(),timeoutDisplay:r.getUint8(),timeoutScreen:r.getUint8(),displaySet:Gt(Gn,r.getUint32()),relaySet4:Gt(xn,r.getUint8()),relaySet3:Gt(Vn,r.getUint8()),relaySet2:Gt(Wn,r.getUint8()),relaySet1:Gt(Hn,r.getUint8()),displayType:r.getUint8(),ten:r.getUint8(),timeoutRefresh:r.getUint16(),deltaCorMin:r.getUint8(),timeoutMagnetOff:r.getUint8(),timeoutMagnetOn:r.getUint8(),define1:Gt(Xn,r.getUint8()),timeoutRelayOn:r.getUint8(),timeoutRelayKey:r.getUint8(),timeoutRelayAuto:r.getUint8(),timeoutBadVAVB:r.getUint8(),freqMax:r.getUint8(),freqMin:r.getUint8(),phMin:r.getUint16(),year:r.getUint8(),month:r.getUint8(),date:r.getUint8(),energyDecimalPoint:r.getUint8(),typeMeter:r.getUint8(),timeoutIMax:r.getUint8(),timeoutPMax:r.getUint8(),timeoutCos:r.getUint8(),pMaxDef:r.getUint8(),displaySetExt:Gt(bn,r.getUint32()),timeoutUneqCurrent:r.getUint8(),timeoutBipolarPower:r.getUint8(),relaySet5:Gt(Kn,r.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=r.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};var _i=function(r){var t=r.getUint8();var e=bt(t,yn,1);var a=Jn(r,e,t);return{energyType:e,energies:a}};var ui=function(r){return new Array(yn).fill(0).map(function(){return r.getInt32()})};var si=function(r){return{year:r.getUint8(),month:r.getUint8(),date:r.getUint8()}};var gi=function(r){return{coefficients:new Array(4).fill(0).map(function(){return r.getUint32()}),decimalPointTariff:r.getUint8(),indicationThreshold:r.getInt32(),relayThreshold:r.getInt32(),mode:r.getUint8(),saldoOffTimeBegin:r.getUint8(),saldoOffTimeEnd:r.getUint8(),decimalPointIndication:r.getUint8(),powerThreshold:r.getUint32(),creditThreshold:r.getInt32()}};var Ai=function(r,t){var e=new Array(t).fill(0).map(function(){return r.getUint16()});return e.map(function(r){return ri(r)})};var li=function(r){var t=r.getUint16();return Gt(zn,t)};var Ri=function(r){var t=r.getUint16();var e=Gt(jn,r.getUint8());var a=Gt(kn,r.getUint8());var n=Gt(Qn,r.getUint8());var i=Gt(Zn,r.getUint8());var v=Gt(qn,r.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:a,status1:n,status2:i,status3:v}};var ci=function(r){var t={hours:r.getUint8(),minutes:r.getUint8(),seconds:r.getUint8(),event:r.getUint8()};var e=t.event;var a=r.bytesLeft;t.eventName=Pn[e];switch(e){case an:if(a<4){return t}t.power=[r.getUint8(),r.getUint8(),r.getUint8(),r.getUint8()];break;case Be:case Xa:if(a<8){return t}t.newDate=ai(r);break}return t};var Ti=function(r){var t=r.getUint8();var e=r.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:r.getUint8(),firstIndex:r.getUint16(),count:r.getUint8(),period:r.getUint8()}};var hi=function(r){var t=r.getUint8();var e=r.getUint8();var a=r.getUint8();return{channelParam1:t,counterInterval:e,channelParam2:a}};var di=function(r){var t=si(r);var e=new Array(yn).fill(0).map(function(){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}});return{date:t,power:e}};var Oi=function(r){return{pmaxMinusThreshold0:r.getUint32(),pmaxMinusThreshold1:r.getUint32(),pmaxMinusThreshold2:r.getUint32(),pmaxMinusThreshold3:r.getUint32(),relaySet:Gt($n,r.getUint8())}};var Ui=function(r){return new Array(yn).fill(0).map(function(){return{date:r.getUint8(),hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}})};var Ni=rr;var Si=function(r){var t=new nt(r,false);return ii(t)};var Ii=0;var Li=1;var Di=2;var Ci=3;var mi=4;var Pi=5;var Mi=6;var pi=7;var yi=8;var Fi=9;var wi=10;var Yi=11;var Bi=12;var Gi=13;var bi=14;var Hi=Object.freeze({__proto__:null,CASE_MODULE_OPEN:wi,CASE_OPEN:Ii,CASE_TERMINAL_OPEN:Fi,DEVICE_FAILURE:yi,ERROR_ACCESS:Pi,MAGNETIC_ON:Li,PARAMETERS_UPDATE_LOCAL:Ci,PARAMETERS_UPDATE_REMOTE:Di,PROTECTION_RESET_EM:Gi,PROTECTION_RESET_MAGNETIC:bi,RESTART:mi,TARIFF_TABLE_GET:Bi,TARIFF_TABLE_SET:Yi,TIME_CORRECT:pi,TIME_SET:Mi});var Wi=Pr(Hi);var Vi=tr;var xi=9;var Ki=function(r){if(r.length!==xi){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=o(r,9),e=t[0],a=t[1],n=t[2],i=t[3],v=t[4],E=t[5],f=t[6],_=t[7],u=t[8];return{event:e,name:Wi[e],index:a,date:{year:n,month:i,date:v,hours:E,minutes:f,seconds:_},count:u}};var Xi=Q;var zi={calibrationEnable:1,hardkey:2,keyPressTest:4,keyOpenkeyTest:8,keyGerkonTest:16,keyOpenKlemaTest:32,keyOpenModuleTest:64,keyPress2Test:128};var ji=function(r){var t=new nt(r,false);var e=t.getUint32();var a=t.getUint32();var n=t.getUint32();var i=t.getUint32();t.getUint32();var v=t.getUint32();var o=Gt(jn,t.getUint8());var E=t.getUint8();var f=t.getUint8();var _=Gt(zi,t.getUint8());var u={"A+":t.getUint8(),"A-":t.getUint8()};var s=!!(t.getUint8()&1);var g=E|f<<8;return{operatingSeconds:e,tbadVAVB:a,tbadImaxAll:n,tbadPmaxAll:i,tbadFREQ:v,relayStatus:o,statusEvent:Gt(zn,g),calibrationFlags:_,currentTariffs:u,isSummerTime:s}};var ki=O;var Qi=function(r){var t=new nt(r,false);return{powerA:t.getInt32(),iaRms:t.getInt32(),vavbRms:t.getInt32(),varA:t.getInt32(),pfA:t.getInt16()/1e3,ibRms:t.getInt32(),powerB:t.getInt32(),varB:t.getInt32(),pfB:t.getInt16()/1e3}};var Zi=T;var qi=function(r){var t=new nt(r,false);return ai(t)};var $i=19;var Ji=m;var rv=function(r){var t=new nt(r,false);var e;if(r.length===$i){e={date:si(t),energies:ui(t)}}else{e={date:si(t),..._i(t)}}return e};var tv=19;var ev=ir;var av=function(r){var t=new nt(r,false);var e;if(r.length===tv){e={date:si(t),energies:ui(t)}}else{e={date:si(t),..._i(t)}}return e};var nv=4;var iv=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var vv=4294967295;var ov={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var Ev=function(r){return r<nv?1<<r:0};var fv=function(r){return r<nv?1<<r<<4:0};var _v=function(r){var t=r.getUint8();var e=r.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};var uv=function(r){var t=r.getUint8();return Gt(ov,t)};var sv=function(r,t){var e=[];for(var a=0;a<t;a++){var n=r.getUint16();var i=n>>14&3;var v=n&16383;e.push(n===vv?undefined:{tariff:i,energy:v})}return e};var gv=function(r,t,e){var a={};iv.forEach(function(n){if(t[n]){a[n]=sv(r,e)}});return a};var Av=function(r,t){var e={};if(t&ov["A+"]){e["A+"]=r.getUint32()}if(t&ov["A+R+"]){e["A+R+"]=r.getUint32()}if(t&ov["A+R-"]){e["A+R-"]=r.getUint32()}return e};var lv=function(r,t){var e={};if(t&ov["A-"]){e["A-"]=r.getUint32()}if(t&ov["A-R+"]){e["A-R+"]=r.getUint32()}if(t&ov["A-R-"]){e["A-R-"]=r.getUint32()}return e};var Rv=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(nv).fill(null);for(var n=0;n<nv;n++){if(e&Ev(n)){a[n]=Av(r,t)}}for(var i=0;i<nv;i++){if(e&fv(i)){a[i]={...a[i],...lv(r,t)}}}return a};var cv=function(r){return{hours:r.getUint8(),minutes:r.getUint8(),power:r.getUint32()}};var Tv=function(r,t){var e={};if(t&ov["A+"]){e["A+"]=cv(r)}if(t&ov["A+R+"]){e["A+R+"]=cv(r)}if(t&ov["A+R-"]){e["A+R-"]=cv(r)}return e};var hv=function(r,t){var e={};if(t&ov["A-"]){e["A-"]=cv(r)}if(t&ov["A-R+"]){e["A-R+"]=cv(r)}if(t&ov["A-R-"]){e["A-R-"]=cv(r)}return e};var dv=function(r){var t=r.getUint8();var e=r.getUint8();var a=new Array(nv).fill(null);for(var n=0;n<nv;n++){if(e&Ev(n)){a[n]=Tv(r,t)}}for(var i=0;i<nv;i++){if(e&fv(i)){a[i]={...a[i],...hv(r,t)}}}return a};var Ov=Lr;var Uv=function(r){var t=new nt(r,false);return{date:_v(t),energies:Rv(t)}};var Nv=x;var Sv=function(r){var t=new nt(r,false);return di(t)};var Iv=fr;var Lv=function(r){var t=new nt(r,false);return di(t)};var Dv=ar;var Cv=function(r){var t=new nt(r,false);return di(t)};var mv=Dr;var Pv=function(r){var t=new nt(r,false);return{date:_v(t),tariffs:dv(t)}};var Mv=255;var pv=q;var yv=function(r){var t=r.indexOf(Mv);var e=t===-1?r:r.slice(0,t);return{periods:f(e).map(ti)}};var Fv=1;var wv=2;Pr(Ir);var Yv=7;var Bv=25;var Gv=function(r,t,e){return Math.trunc((r*60+t)/e)};var bv=function(r){return Gv(Bv,0,r)};var Hv=function(r,t,e){if(r===65535){return null}var a=bv(e);if(t===a){return{lastSummerHour:r>>8&255}}return e===60?{energy:r}:{tariff:r>>14&3,energy:r&16383}};var Wv=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(Hv(a,(t??0)+n,e));return r},[])};var Vv=function(r,t,e){if(r===65535){return 65535}var a=bv(e);return t===a?{lastSummerHour:r>>8&255}:{voltage:r}};var xv=function(r,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:30;return r.reduce(function(r,a,n){r.push(Vv(a,(t??0)+n,e));return r},[])};var Kv=Nr;var Xv=function(r){if(!r||r.length<Yv){throw new Error("Invalid uplink GetDemand byte length.")}var t=new nt(r,false);var e=Ti(t);if(r.length!==Yv+2*e.count){throw new Error("Invalid uplink GetDemand demands byte length.")}var a=new Array(e.count).fill(0).map(function(){return t.getUint16()});var n=e.energyType===Fv||e.energyType===wv;e.demands=n?Wv(a,e.firstIndex,e.period):xv(a,e.firstIndex,e.period);return e};var zv=function(r,t,e){if(!r){throw new Error("Command name is required.")}if(t&&!Array.isArray(t)){throw new Error("Invalid payload for ".concat(r,". Expected array, got: ").concat(typeof t,"."))}if(t.length!==e){var a=s(t,{separator:""});throw new Error("Wrong buffer size for ".concat(r,": ").concat(t.length,". Expected: ").concat(e,". Payload: 0x").concat(a,"."))}};var jv=Ur;var kv=Mr[Ur];var Qv=4;var Zv=function(r){zv(kv,r,Qv);var t=new nt(r,false);return hi(t)};var qv=c;var $v=function(r){var t=new nt(r,false);return ei(t)};var Jv=R;var ro=function(r){var t=new nt(r,false);return Ei(t)};var to=1;var eo=2;var ao=3;var no=4;var io=5;var vo=6;var oo=7;var Eo=8;var fo=9;var _o=10;var uo=11;var so=12;var go=13;var Ao=14;var lo=15;var Ro=16;var co=17;var To=18;var ho=19;var Oo=20;var Uo=21;var No=22;var So=23;var Io=24;var Lo=25;var Do=26;var Co=28;var mo=30;var Po=31;var Mo=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:no,ACTIVE_ENERGY_T2:io,ACTIVE_ENERGY_T3:vo,ACTIVE_ENERGY_T4:oo,ACTIVE_POWER_IN_NEUTRAL:fo,ACTIVE_POWER_PER_PHASE:Eo,BATTERY_VOLTAGE:No,CURRENT_BALANCE:mo,CURRENT_IN_NEUTRAL:uo,CURRENT_IN_PHASE:_o,DATE_MONTH_YEAR:Ao,EXPORTED_ACTIVE_ENERGY_T1:Ro,EXPORTED_ACTIVE_ENERGY_T2:co,EXPORTED_ACTIVE_ENERGY_T3:To,EXPORTED_ACTIVE_ENERGY_T4:ho,HOUR_MINUTE_SECOND:go,MAGNET_INDUCTION:Co,OPTOPORT_SPEED:Po,POWER_FACTOR_PHASE_A:Oo,POWER_FACTOR_PHASE_B:Uo,POWER_THRESHOLD_T1:So,POWER_THRESHOLD_T2:Io,POWER_THRESHOLD_T3:Lo,POWER_THRESHOLD_T4:Do,SET_ALL_SEGMENT_DISPLAY:to,SOFTWARE_VERSION:eo,TOTAL_ACTIVE_ENERGY:ao,TOTAL_EXPORTED_ACTIVE_ENERGY:lo,VOLTAGE:so});Pr(Mo);var po=Ar;var yo=function(r){var t=E(r),e=t[0],a=t.slice(1);return{displayMode:e,order:a}};var Fo=16;var wo=U;var Yo=function(r){var t=new nt(r,false);var e;if(r.length===Fo){e={energies:ui(t)}}else{e=_i(t)}return e};var Bo=19;var Go=l;var bo=function(r){var t=new nt(r,false);var e;if(r.length===Bo){e={date:si(t),energies:ui(t)}}else{e={date:si(t),..._i(t)}}return e};var Ho=16;var Wo=ur;var Vo=function(r){var t=new nt(r,false);var e;if(r.length===Ho){e={energies:ui(t)}}else{e=_i(t)}return e};var xo=19;var Ko=vr;var Xo=function(r){var t=new nt(r,false);var e;if(r.length===xo){e={date:si(t),energies:ui(t)}}else{e={date:si(t),..._i(t)}}return e};var zo=3+1;var jo=4;var ko=X;var Qo=zo+255*jo;var Zo=function(r){return function(t){if(t.length>Qo){throw new Error("Wrong buffer size: ".concat(t.length,"."))}var e=new r(t,false);var a=si(e);var n=e.getUint8();var i=[];while(!e.isEmpty){i.push(ci(e))}return{date:a,eventsNumber:n,events:i}}};var qo=Zo(nt);var $o=14;var Jo=20;var rE=z;var tE=function(r){if(r.length!==$o&&r.length!==Jo){throw new Error("Wrong buffer size: ".concat(r.length,"."))}var t=new nt(r,false);var e=t.getUint16();var a=t.getUint16();var n=t.getUint16();var i=t.getUint16();var v=t.getUint16();var o=t.getUint16();var E=t.getUint16();return{accessClosed:o,accessError:v,localParametersChange:n,remoteParametersChange:i,powerOff:a,restart:e,setClock:E}};var eE=A;var aE=function(r){var t=new nt(r,true);return li(t)};var nE=Z;var iE=function(r){var t=new nt(r,false);return{temperature:t.getInt16(),frequency:t.getInt16()}};var vE=H;var oE=function(r){var t=new nt(r,false);return Ri(t)};var EE=C;var fE=function(r){var t=new nt(r,false);var e=r.length>Yn;var a=si(t);var n=Ai(t,e?wn:Fn);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var _E=Er;var uE=function(r){var t=new nt(r,false);var e=r.length>Yn;var a=si(t);var n=Ai(t,e?wn:Fn);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var sE=nr;var gE=function(r){var t=new nt(r,false);var e=r.length>Yn;var a=si(t);var n=Ai(t,e?wn:Fn);if(e){return{date:a,periods:n,dstHour:t.getUint8()}}return{date:a,periods:n}};var AE=cr;var lE=function(r){var t=new nt(r,false);var e=_v(t);var a=uv(t);var n=t.getUint8();var i=t.getUint8();return{date:e,firstHalfhour:n,halfhoursNumber:i,energies:gv(t,a,i)}};var RE=Rr;var cE=function(r){var t=new nt(r,false);return{induction:t.getUint16(),threshold:t.getUint16(),inductionCoefficient:t.getUint16()/100,reserved:t.getUint32()}};var TE=Sr;var hE=function(r){var t=o(r,1),e=t[0];return{ten:e}};var dE=P;var OE=function(r){var t=new nt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:ui(t)}};var UE=or;var NE=function(r){var t=new nt(r,false);return{year:t.getUint8(),month:t.getUint8(),energies:ui(t)}};var SE=K;var IE=function(r){var t=new nt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:Ui(t)}};var LE=_r;var DE=function(r){var t=new nt(r,false);return{year:t.getUint8(),month:t.getUint8(),tariffs:Ui(t)}};var CE=F;var mE=function(r){var t=new nt(r,false);return fi(t)};var PE=hr;var ME=function(r){var t=new nt(r,false);return Oi(t)};var pE=b;var yE=1+Mn*2;var FE=function(r){if(r.length!==yE){throw new Error("Invalid getRatePlanInfo data size.")}var t=new nt(r,false);return{tariffTable:t.getUint8(),activePlan:ni(t),passivePlan:ni(t)}};var wE=B;var YE=29;var BE=function(r){if(r.length!==YE){throw new Error("Invalid getSaldo data size.")}var t=new nt(r,false);return{currentSaldo:t.getInt32(),count:t.getUint8(),energy:new Array(4).fill(0).map(function(){return t.getInt32()}),beginSaldoOfPeriod:t.getInt32(),date:{month:t.getUint8(),date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8()}}};var GE=W;var bE=37;var HE=function(r){if(r.length!==bE){throw new Error("Invalid getSaldoParameters data size.")}var t=new nt(r,false);return gi(t)};var WE=$;var VE=function(r){var t=new nt(r,false);return vi(t)};var xE=J;var KE=function(r){var t=new nt(r,false);return oi(t)};var XE=Y;var zE=function(r){return{version:String.fromCharCode.apply(null,f(r))}};var jE=D;var kE=0;var QE=function(r){if(r.length!==kE){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var ZE=j;var qE=0;var $E=function(r){if(r.length!==qE){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var JE=k;var rf=0;var tf=function(r){if(r.length!==rf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var ef=er;var af=0;var nf=function(r){if(r.length!==af){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var vf=d;var of=0;var Ef=function(r){if(r.length!==of){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var ff=sr;var _f=0;var uf=function(r){if(r.length!==_f){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var sf=y;var gf=0;var Af=function(r){if(r.length!==gf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var lf=h;var Rf=0;var cf=function(r){if(r.length!==Rf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Tf=N;var hf=0;var df=function(r){if(r.length!==hf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Of=Or;var Uf=Mr[Or];var Nf=0;var Sf=function(r){zv(Uf,r,Nf);return{}};var If=gr;var Lf=0;var Df=function(r){if(r.length!==Lf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Cf=w;var mf=0;var Pf=function(r){if(r.length!==mf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Mf=dr;var pf=0;var yf=function(r){if(r.length!==pf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Ff=G;var wf=0;var Yf=function(r){if(r.length!==wf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Bf=V;var Gf=0;var bf=function(r){if(r.length!==Gf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var Hf=S;var Wf=0;var Vf=function(r){if(r.length!==Wf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var xf=I;var Kf=0;var Xf=function(r){if(r.length!==Kf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var zf=lr;var jf=function(r){var t=new nt(r,false);var e=t.getUint8();var a=!!(e&1);var n=!!(e&2);return{electroMagneticIndication:a,magneticIndication:n}};var kf=p;var Qf=0;var Zf=function(r){if(r.length!==Qf){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var qf=M;var $f=0;var Jf=function(r){if(r.length!==$f){throw new Error("Wrong buffer size: ".concat(r.length,"."))}return{}};var r_={encrypt:function(){},decrypt:function(){}};var t_=function(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var e=t;r.forEach(function(r){e^=r});return e};var e_=3;var a_=2;var n_=2;var i_=function(r,t){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=a?.aesKey;var i=[];var v=o(e,2),E=v[0],_=v[1];var u=_&e_;var s={messageId:E,accessLevel:u,commands:i,bytes:e,lrc:{received:undefined,calculated:0}};var A=e.slice(a_);var l;if(n&&u!==g){A=f(r_.decrypt(n,A))}var R=A[A.length-1];A=A.slice(0,-1);var c=t_(A);if(u!==g||R!==0){if(R!==c){l="Mismatch LRC."}}var T=A[0]&e_;var h=A.slice(1);if(u!==T){l="Mismatch access levels."}var d=0;do{var O=h[d];var U=h[d+1];var N=n_+U;var S=h.slice(d+n_,d+N);var I={id:O,name:t[O],headerSize:n_,bytes:h.slice(d,d+N)};if(!O){break}try{if(!r[O]){throw new Error("Unsupported command id: ".concat(O,"!"))}I.parameters=r[O](S,a);i.push(I)}catch(r){i.push({command:I,error:r.message})}d+=N}while(d<=h.length);s.lrc.calculated=c;s.lrc.received=R;if(l){return{message:s,error:l}}return s}};var v_={};var o_=Mr;var E_=i_(v_,o_);v_[pr]=Fr;v_[pt]=Ft;v_[wt]=Bt;v_[Ni]=Si;v_[Vi]=Ki;v_[Xi]=ji;v_[ki]=Qi;v_[Zi]=qi;v_[Ji]=rv;v_[ev]=av;v_[Ov]=Uv;v_[Nv]=Sv;v_[Iv]=Lv;v_[Dv]=Cv;v_[mv]=Pv;v_[pv]=yv;v_[Kv]=Xv;v_[jv]=Zv;v_[qv]=$v;v_[Jv]=ro;v_[po]=yo;v_[wo]=Yo;v_[Go]=bo;v_[Wo]=Vo;v_[Ko]=Xo;v_[ko]=qo;v_[rE]=tE;v_[eE]=aE;v_[nE]=iE;v_[vE]=oE;v_[EE]=fE;v_[_E]=uE;v_[sE]=gE;v_[AE]=lE;v_[RE]=cE;v_[TE]=hE;v_[dE]=OE;v_[UE]=NE;v_[SE]=IE;v_[LE]=DE;v_[CE]=mE;v_[PE]=ME;v_[pE]=FE;v_[wE]=BE;v_[GE]=HE;v_[WE]=VE;v_[xE]=KE;v_[XE]=zE;v_[jE]=QE;v_[ZE]=$E;v_[JE]=tf;v_[ef]=nf;v_[vf]=Ef;v_[ff]=uf;v_[sf]=Af;v_[lf]=cf;v_[Tf]=df;v_[Of]=Sf;v_[If]=Df;v_[Cf]=Pf;v_[Mf]=yf;v_[Ff]=Yf;v_[Bf]=bf;v_[Hf]=Vf;v_[xf]=Xf;v_[zf]=jf;v_[kf]=Zf;v_[qf]=Jf;var f_=145;var __=30;var u_=function(r){if(r[0]!==__){return{}}var t=r[1];var e=r[3];var a=r.slice(4,t+2);if(e===f_){return a}return null};fromBytes=E_;getDataSegment=u_})();
//#endregion


/*
  Incoming arguments:
    * payload - array of bytes
    * metadata - key/value object
*/

var segment = getDataSegment(payload);
var message = null;

// just a single data segment
if ( segment ) {
    message = fromBytes(segment);

    // there may be a message.error (e.g. mismatched LRC)
    // in that case message.message will contain everything parsed successfully
    // it should be used with caution
}

var result = {
    // required property, set to real device name from payload/metadata depending on integration
    // empty value throw an error in converter
    deviceName: '',

    deviceType: 'Water Meter',
    attributes: {
        model: 'Device Model',
        serialNumber: 'SN111',
        manufacturer: 'Device Manufacturer'
    },
    telemetry: {
        // telemetry display only primitive, i.e. string and numbers
        // for example only!
        message: JSON.stringify(message.message || message)
    },
    metadata: metadata
};

return result;
