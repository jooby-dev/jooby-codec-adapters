// IMPORTANT!!!
// This example only for default downlink data converter.
// Data converters for other integrations use different input and result.
// Find example of uplink data converter for your integration and edit usage of payload and result
// Integrations list: https://thingsboard.io/docs/user-guide/integrations/

// encoded message should be less than this size
// to be able to send to a device
var MAX_DATA_SEGMENT_SIZE = 50;


//#region [autogenerated jooby-codec bundle from index.js]
var toBytes,setDataSegment,getBase64FromBytes;(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){if(Array.isArray(t))return t}function r(e){if(Array.isArray(e))return t(e)}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i,s,o=[],v=true,f=false;try{if(i=(r=r.call(t)).next,0===e);else for(;!(v=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);v=!0);}catch(t){f=true,a=t}finally{try{if(!v&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return o}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){return e(t)||a(t,r)||f(t,r)||i()}function v(t){return r(t)||n(t)||f(t)||s()}function f(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var u={separator:" ",prefix:""};var h=1;var E=2;var _=3;var A=4;var g=Math.log,T=Math.pow,c=Math.LN2;var d=function(t,e,r,n,a){var i,s,o=a*8-n-1,v=(1<<o)-1,f=v>>1,u=-7,h=r?a-1:0,E=r?-1:1,_=t[e+h];h+=E;i=_&(1<<-u)-1;_>>=-u;u+=o;for(;u>0;i=i*256+t[e+h],h+=E,u-=8);s=i&(1<<-u)-1;i>>=-u;u+=n;for(;u>0;s=s*256+t[e+h],h+=E,u-=8);if(i===0){i=1-f}else if(i===v){return s?NaN:_?-Infinity:Infinity}else{s=s+T(2,n);i=i-f}return(_?-1:1)*s*T(2,i-n)};var l=function(t,e,r,n,a,i){var s,o,v,f=i*8-a-1,u=(1<<f)-1,h=u>>1,E=a===23?T(2,-24)-T(2,-77):0,_=n?0:i-1,A=n?1:-1,d=r<0||r===0&&1/r<0?1:0;r<0&&(r=-r);if(r!==r||r===Infinity){o=r!==r?1:0;s=u}else{s=g(r)/c|0;if(r*(v=T(2,-s))<1){s--;v*=2}if(s+h>=1){r+=E/v}else{r+=E*T(2,1-h)}if(r*v>=2){s++;v/=2}if(s+h>=u){o=0;s=u}else if(s+h>=1){o=(r*v-1)*T(2,a);s=s+h}else{o=r*T(2,h-1)*T(2,a);s=0}}for(;a>=8;t[e+_]=o&255,_+=A,o/=256,a-=8);s=s<<a|o;f+=a;for(;f>0;t[e+_]=s&255,_+=A,s/=256,f-=8);t[e+_-A]|=d*128};var R=[1,0];var p=[2,1,0];var U=[3,2,1,0];var y=[0,1];var O=[0,1,2];var m=[0,1,2,3];var P=function(t,e){return t[e]};var S=function(t,e,r){var n=r?y:R;var a=t[e+n[0]];var i=t[e+n[1]]<<8;return a|i};var D=function(t,e,r){var n=r?O:p;var a=t[e+n[0]];var i=t[e+n[1]]<<8;var s=t[e+n[2]]<<16;return a|i|s};var M=function(t,e,r){var n=r?m:U;var a=t[e+n[3]]*16777216;var i=t[e+n[2]]*65536;var s=t[e+n[1]]*256;var o=t[e+n[0]];return a+i+s+o};var N=function(t,e,r){t[e]=r&255};var I=function(t,e,r,n){var a=n?y:R;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255};var C=function(t,e,r,n){var a=n?O:p;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255;t[e+a[2]]=r>>>16&255};var L=function(t,e,r,n){var a=n?m:U;t[e+a[0]]=r&255;t[e+a[1]]=r>>>8&255;t[e+a[2]]=r>>>16&255;t[e+a[3]]=r>>>24&255};function F(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof t==="number"){var r=new Array(t).fill(0);this.data=r}else{this.data=t}this.offset=0;this.isLittleEndian=e}F.prototype={toUint8Array:function(){return this.data},seek:function(t){if(t<0||t>=this.data.length){throw new Error("Invalid position.")}this.offset=t},setInt8:function(t){N(this.data,this.offset,t<0?t|256:t);this.offset+=h},getInt8:function(){var t=P(this.data,this.offset);this.offset+=h;return t&128?t^-256:t},setUint8:function(t){N(this.data,this.offset,t);this.offset+=h},getUint8:function(){var t=P(this.data,this.offset);this.offset+=h;return t},setInt16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;I(this.data,this.offset,t<0?t|65536:t,e);this.offset+=E},getInt16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=S(this.data,this.offset,t);this.offset+=E;return e&32768?e^-65536:e},setUint16:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;I(this.data,this.offset,t,e);this.offset+=E},getUint16:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=S(this.data,this.offset,t);this.offset+=E;return e},setInt24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t<0?t|16777216:t,e);this.offset+=_},getInt24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=D(this.data,this.offset,t);this.offset+=_;return e&8388608?e^-16777216:e},setUint24:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;C(this.data,this.offset,t,e);this.offset+=_},getUint24:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=D(this.data,this.offset,t);this.offset+=_;return e},setInt32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t<0?t|4294967296:t,e);this.offset+=A},getInt32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=M(this.data,this.offset,t);this.offset+=A;return e&2147483648?e^-4294967296:e},setUint32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;L(this.data,this.offset,t,e);this.offset+=A},getUint32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=M(this.data,this.offset,t);this.offset+=A;return e},setFloat32:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.isLittleEndian;l(this.data,this.offset,t,e,23,4);this.offset+=A},getFloat32:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isLittleEndian;var e=d(this.data,this.offset,t,23,4);this.offset+=A;return e},setString:function(t){this.setUint8(t.length);for(var e=0;e<t.length;++e){this.setUint8(t.charCodeAt(e))}},getString:function(){var t=this.getUint8();var e=this.offset+t;var r=[];while(this.offset<e){r.push(String.fromCharCode(this.getUint8()))}return r.join("")},getBytesToOffset:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.offset;return this.data.slice(0,t)},getBytesLeft:function(){return this.getBytes(this.bytesLeft)},getBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;this.offset=e+t;return this.data.slice(e,this.offset)},setBytes:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset;var r=this.data;r.splice.apply(r,[e,t.length].concat(v(t)));this.data=r;this.offset=e+t.length}};Object.defineProperties(F.prototype,{size:{get:function(){return this.data.length}},isEmpty:{get:function(){if(this.offset>this.data.length){throw new Error("current offset ".concat(this.offset," is outside the bounds of the buffer"))}return this.data.length-this.offset===0}},bytesLeft:{get:function(){return this.data.length-this.offset}},position:{get:function(){return this.offset}}});var x=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=0;for(var n in e){if(n in t&&e[n]){r|=t[n]}}return r};var w=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r={};for(var n in t){r[n]=(e&t[n])!==0}return r};var B=function(t,e,r){return(1<<e)-1&t>>r-1};var Y=function(t,e,r,n){var a=(1<<e)-1<<r-1;var i=n;var s=t;s&=~a;i<<=r-1;s|=i;return s};var H=function(t){var e=t.trim();if(!e){return[]}e=e.replace(/0x/g,"").split(/\s+/).map(function(t){return t.padStart(2,"0")}).join("");if(e.length%2!==0){e="0".concat(e)}var r=e.length/2;var n=new Array(r);for(var a=0;a<r;a++){n[a]=parseInt(e.substring(a*2,a*2+2),16)}return n};var G="x";var V=[".","1","3","R","M"];var W=[".","A","G","R","T","D"];var b=[".","0","1","2","3","4","5"];var K=[".","A","B","C","D","E","F"];var X=[".","A","B","C","D","E","F","H","K","G"];var j=[".","1","2","3","4"];var z=[".","L","M","Z","K"];var Q=[".","0","1","2","3","4","5","6","7","8","9"];var Z=[".","D","B","C","E","P","R","O","L","F","S","M","Y","G","N","U"];var k=[".","0","1","2","3","4","5","6","P","R","L","E","G","-","/"];var q=[".","H","A","T","0","0","0","0","0","1","2","3","4","0","0","0"];var $=[".","0","1","2","3","4","5","6","7","8","I","X","G","W","M","-"];var J={typeMeterG:1<<0,downgradedToA:1<<4,supportMeterInfo:1<<6};var tt={typeMeterTransformer:1<<0,downgradedToR:1<<3,typeMeterG:1<<4,supportMeterInfo:1<<6,reactiveByQuadrants:1<<7};var et=function(t){var e=w(tt,t);return{meterType:"mtx3",...e,typeMeterG:!e.typeMeterG}};var rt=function(t){return x(tt,{...t,typeMeterG:!t.typeMeterG})};var nt=function(t){return[t>>4,t&15]};var at=function(t){var e=new Array(t.length*2).fill(0);t.forEach(function(t,r){var n=nt(t),a=o(n,2),i=a[0],s=a[1];e[r*2]=i;e[r*2+1]=s});return e};var it=function(t){var e=[];t.forEach(function(t){return e.push(t.toString(16))});if(t.length&1){e.push("0")}return H(e.join(""))};var st=function(t){if(t.length!==14&&t.length!==16){throw new Error("Device type bytes wrong size")}var e=["MTX "];e.push(V[t[0]]??G);e.push(W[t[1]]??G);e.push(b[t[2]]??G);e.push(b[t[3]]??G);e.push(".");e.push(K[t[4]]??G);e.push(X[t[5]]??G);e.push(".");e.push(j[t[6]]??G);e.push(z[t[7]]??G);var r=t[8];e.push(Q[t[9]]??G);e.push("-");var n;if(t.length<14||t[12]===0&&t[13]===0){e.push(Z[t[10]]??G);n=11}else if(t[13]===0){e.push(Z[t[10]]??G);e.push(Z[t[11]]??G);n=12}else{e.push(Z[t[10]]??G);e.push(Z[t[11]]??G);e.push(Z[t[12]]??G);n=13}var a=t[n];if(a&&a!==0){e.push(q[a]??G)}return{type:e.join(""),revision:r}};var ot=function(t,e,r){var n=[];if(t.length<11){throw new Error("Wrong format")}n.push(V.indexOf(t[0]));n.push(W.indexOf(t[1]));n.push(b.indexOf(t[2]));n.push(b.indexOf(t[3]));if(t[4]!=="."){throw new Error("Wrong format")}n.push(K.indexOf(t[5]));n.push(X.indexOf(t[6]));if(t[7]!=="."){throw new Error("Wrong format")}n.push(j.indexOf(t[8]));n.push(z.indexOf(t[9]));n.push(r??0);n.push(Q.indexOf(t[10]));if(t[11]!=="-"){throw new Error("Wrong format")}var a=t.length>13?t.length-1:t.length;for(var i=12;i<a;i++){n.push(Z.indexOf(t[i]))}if(a<t.length){n.push(q.indexOf(t[a]))}var s=it(n);var o=new Array(9).fill(0);o[0]=0;for(var v=0;v<s.length;v++){o[v+(s.length<8?1:0)]=s[v]}return o};var vt=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=["MTX "];var r=t[1]===5?"-":" ";e.push(V[t[0]]??G);e.push(W[t[1]]??G);e.push(r);for(var n=2;n<t.length;n++){if(t[n]!==0){e.push(k[t[n]]??G)}}return{type:e.join("")}};var ft=function(t){if(t.length<3){throw new Error("Wrong format")}var e=[];e.push(V.indexOf(t[0]));e.push(W.indexOf(t[1]));for(var r=3;r<t.length;r++){e.push(k.indexOf(t[r]))}var n=it(e);if(n.length===8){return n}if(n.length>8){throw new Error("Wrong format")}var a=new Array(8).fill(0);for(var i=0;i<n.length;i++){a[i]=n[i]}return a};var ut=function(t){if(t.length<14){throw new Error("The buffer is too small")}var e=[];e.push(V[t[0]]??G);for(var r=1;r<t.length;r++){if(t[r]!==0){e.push($[t[r]]??G)}}return{type:e.join("")}};var ht=function(t){if(t.length<1){throw new Error("Wrong format")}var e=[];e.push(V.indexOf(t[0]));for(var r=1;r<t.length;r++){e.push($.indexOf(t[r]))}var n=it(e);var a=new Array(8).fill(0);for(var i=0;i<n.length&&i<8;i++){a[i]=n[i]}return a};var Et=function(t){if(t.length!==9){throw new Error("The buffer is too small")}var e;var r=[0,5,6,7,9,127,239];var n=r.indexOf(t[0])!==-1?2:0;var a=at(t.slice(0,8));var i=a[n];var s=V[i];if(s==="1"||s==="3"){e={...st(a.slice(n)),descriptor:s==="3"?et(t[8]):{meterType:"mtx1",...w(J,t[8])}}}else{e=s==="M"?ut(a):vt(a)}return e};var _t=function(t,e){var r=t.type,n=t.revision,a=t.descriptor;if(!r.startsWith("MTX ")){throw new Error("Wrong format")}var i;var s=r.substring(4);var o=r[4];if(o==="1"||o==="3"){i=ot(s,e,n)}else{i=o==="M"?ht(s):ft(s)}if(a?.meterType){i[8]=a.meterType==="mtx1"?x(J,a):rt(a)}else{i[8]=0}return i};var At=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Object.assign({},u,e),n=r.separator,a=r.prefix;return t.map(function(t){return"".concat(a).concat(t.toString(16).padStart(2,"0"))}).join(n)};var gt=80;var Tt=81;var ct=82;var dt=83;var lt=84;var Rt=85;var pt=86;var Ut=87;var yt=88;var Ot=89;var mt=90;var Pt=91;var St=255;var Dt=Object.freeze({__proto__:null,DATA_REQUEST:gt,DATA_RESPONSE:Tt,FRAGMENT_REQUEST:mt,FRAGMENT_RESPONSE:Pt,IDENT_REQUEST:ct,IDENT_RESPONSE:dt,INVALID:St,L2_CHECK_ADDRESS_REQUEST:pt,L2_CHECK_ADDRESS_RESPONSE:Ut,L2_RM_ADDRESS_REQUEST:yt,L2_RM_ADDRESS_RESPONSE:Ot,L2_SET_ADDRESS_REQUEST:lt,L2_SET_ADDRESS_RESPONSE:Rt});var Mt=function(t){var e={};for(var r in t){var n=t[r];e[n]=r}return e};var Nt=Mt(Dt);var It=1;var Ct=2;var Lt=3;var Ft=16;var xt=17;var wt=18;var Bt=19;var Yt=20;var Ht=21;var Gt=32;var Vt=33;var Wt=34;var bt=35;var Kt=36;var Xt=37;var jt=38;var zt=39;var Qt=40;var Zt=41;var kt=49;var qt=50;var $t=51;var Jt=52;var te=53;var ee=54;var re=55;var ne=56;var ae=57;var ie=60;var se=61;var oe=62;var ve=63;var fe=64;var ue=65;var he=66;var Ee=67;var _e=68;var Ae=69;var ge=70;var Te=71;var ce=72;var de=73;var le=74;var Re=75;var pe=76;var Ue=77;var ye=78;var Oe=79;var me=80;var Pe=81;var Se=82;var De=83;var Me=84;var Ne=85;var Ie=86;var Ce=87;var Le=88;var Fe=89;var xe=96;var we=97;var Be=98;var Ye=99;var He=100;var Ge=101;var Ve=102;var We=103;var be=104;var Ke=105;var Xe=112;var je=113;var ze=114;var Qe=115;var Ze=116;var ke=117;var qe=118;var $e=119;var Je=120;var tr=121;var er=122;var rr=123;var nr=124;var ar=125;var ir=126;var sr=144;var or=145;var vr=147;var fr=148;var ur=152;var hr=156;var Er=157;var _r=158;var Ar=159;var gr=160;var Tr=161;var cr=162;var dr=176;var lr=177;var Rr=178;var pr=179;var Ur=180;var yr=181;var Or=182;var mr=183;var Pr=185;var Sr=186;var Dr=224;var Mr=225;var Nr=226;var Ir=227;var Cr=228;var Lr=229;var Fr=230;var xr=231;var wr=232;var Br=Object.freeze({__proto__:null,ACCESS_LOCKED:Ft,ACC_PARAM_BAD:ze,ACC_PARAM_EXT_BAD:Qe,BAD_TEST_EEPROM:be,BAD_TEST_FRAM:Ke,BATTERY_FAULT:De,BATTERY_OK:Se,BIPOLAR_POWER_FAULT:Ur,BIPOLAR_POWER_OK:yr,BLOCK_TARIFF_BAD:ke,CALC_PERIOD_BAD:Ze,CALIBRATION_FAULT:Ne,CALIBRATION_FLAG_RESET:We,CALIBRATION_FLAG_SET:Ve,CALIBRATION_OK:Me,CALIBRATION_PARAM_BAD:qe,CASE_CLOSE:Bt,CASE_KLEMA_CLOSE:rr,CASE_KLEMA_OPEN:er,CASE_MODULE_CLOSE:ar,CASE_MODULE_OPEN:nr,CASE_OPEN:wt,CHANGE_ACCESS_KEY0:Gt,CHANGE_ACCESS_KEY1:Vt,CHANGE_ACCESS_KEY2:Wt,CHANGE_ACCESS_KEY3:bt,CHANGE_COR_TIME:Zt,CHANGE_PARAM_CANAL:Pr,CHANGE_PAR_LOCAL:Kt,CHANGE_PAR_REMOTE:Xt,CHANGE_TARIFF_TABLE:qt,CHANGE_TARIFF_TBL_2:ur,CLOCK_FAULT:Ce,CLOCK_OK:Ie,CMD_CHANGE_TIME:jt,CMD_RELAY_2_OFF:we,CMD_RELAY_2_ON:xe,CMD_RELAY_OFF:Qt,CMD_RELAY_ON:zt,CROSS_ZERO_ENT0:Be,CROSS_ZERO_ENT1:Ye,CROSS_ZERO_ENT2:He,CROSS_ZERO_ENT3:Ge,CROSS_ZERO_EXPORT_ENT0:_r,CROSS_ZERO_EXPORT_ENT1:Ar,CROSS_ZERO_EXPORT_ENT2:gr,CROSS_ZERO_EXPORT_ENT3:Tr,CURRENT_UNEQUAL_FAULT:Rr,CURRENT_UNEQUAL_OK:pr,EM_MAGNETIC_OFF:lr,EM_MAGNETIC_ON:dr,ENERGY_REGISTER_FAULT:It,ENERGY_REGISTER_OVERFLOW:kt,ERR_ACCESS:xt,F_MAX_OK:ce,F_MAX_OVER:de,F_MIN_OK:le,F_MIN_OVER:Re,I_MAX_OK:pe,I_MAX_OVER:Ue,MAGNETIC_OFF:Ht,MAGNETIC_ON:Yt,OP_PAR_FAULT:Lt,POWER_A_OFF:Le,POWER_A_ON:Fe,POWER_B_OFF:se,POWER_B_ON:ie,POWER_C_OFF:ve,POWER_C_ON:oe,POWER_GOOD_DIO:ir,POWER_OVER_RELAY_OFF:Er,POWER_SALDO_OK:me,POWER_SALDO_OVER:Pe,P_MAX_A_MINUS_OK:xr,P_MAX_A_MINUS_OVER:wr,P_MAX_OK:ye,P_MAX_OVER:Oe,RELAY_HARD_BAD_OFF:sr,RELAY_HARD_BAD_ON:vr,RELAY_HARD_OFF:fr,RELAY_HARD_ON:or,RELAY_OFF:re,RELAY_OFF_BAD_SALDO:Sr,RELAY_ON:ee,RESET_EM_FLAG:Or,RESET_MAGNET_FLAG:mr,RESTART:ne,SALDO_EN_BAD:Je,SALDO_PARAM_BAD:je,SET_DEMAND_EN_10MIN:Ir,SET_DEMAND_EN_15MIN:Cr,SET_DEMAND_EN_1MIN:Dr,SET_DEMAND_EN_30MIN:Lr,SET_DEMAND_EN_3MIN:Mr,SET_DEMAND_EN_5MIN:Nr,SET_DEMAND_EN_60MIN:Fr,SET_NEW_SALDO:Xe,SET_SALDO_PARAM:hr,SET_TARIFF_TABLE:$t,SUMMER_TIME:Jt,TIME_CORRECT:tr,TIME_CORRECT_NEW:cr,T_MAX_OK:_e,T_MAX_OVER:Ae,T_MIN_OK:ge,T_MIN_OVER:Te,VENDOR_PAR_FAULT:Ct,V_MAX_OK:fe,V_MAX_OVER:ue,V_MIN_OK:he,V_MIN_OVER:Ee,WD_RESTART:ae,WINTER_SUMMER_BAD:$e,WINTER_TIME:te});var Yr=Mt(Br);var Hr={type:gt,destination:65535,source:65534};var Gr=11;var Vr=74;var Wr=7;var br=2+Wr;var Kr=4;var Xr={SET_ALL_SEGMENT_DISPLAY:1,SOFTWARE_VERSION:2,TOTAL_ACTIVE_ENERGY:4,ACTIVE_ENERGY_T1:8,ACTIVE_ENERGY_T2:16,ACTIVE_ENERGY_T3:32,ACTIVE_ENERGY_T4:64,ACTIVE_POWER_PER_PHASE:128,ACTIVE_POWER_IN_NEUTRAL:256,CURRENT_IN_PHASE:512,CURRENT_IN_NEUTRAL:1024,VOLTAGE:2048,HOUR_MINUTE_SECOND:4096,DATE_MONTH_YEAR:8192,TOTAL_EXPORTED_ACTIVE_ENERGY:16384,EXPORTED_ACTIVE_ENERGY_T1:32768,EXPORTED_ACTIVE_ENERGY_T2:65536,EXPORTED_ACTIVE_ENERGY_T3:131072,EXPORTED_ACTIVE_ENERGY_T4:262144,POWER_FACTOR_PHASE_A:524288,POWER_FACTOR_PHASE_B:1048576,BATTERY_VOLTAGE:2097152,POWER_THRESHOLD_T1:4194304,POWER_THRESHOLD_T2:8388608,POWER_THRESHOLD_T3:16777216,POWER_THRESHOLD_T4:33554432,CURRENT_BALANCE:536870912};var jr={...Xr,AUTO_SCREEN_SCROLLING:2147483648};var zr={...Xr,MAGNET_INDUCTION:134217728,OPTOPORT_SPEED:1073741824,SORT_DISPLAY_SCREENS:2147483648};var Qr={RELAY_ON_Y:1,RELAY_ON_CENTER:2,RELAY_ON_PB:4,RELAY_ON_TARIFF_1:8,RELAY_ON_TARIFF_2:16,RELAY_ON_TARIFF_3:32,RELAY_ON_TARIFF_4:64,RELAY_ON_V_GOOD:128};var Zr={RELAY_OFF_Y:1,RELAY_OFF_CENTER:2,RELAY_OFF_TARIFF_1:4,RELAY_OFF_TARIFF_2:8,RELAY_OFF_TARIFF_3:16,RELAY_OFF_TARIFF_4:32,RELAY_OFF_I_LIMIT:64,RELAY_OFF_V_BAD:128};var kr={RELAY_OFF_LIM_TARIFF_1:2,RELAY_OFF_LIM_TARIFF_2:4,RELAY_OFF_LIM_TARIFF_3:8,RELAY_OFF_LIM_TARIFF_4:16,RELAY_OFF_PF_MIN:32};var qr={RELAY_ON_TIMEOUT:1,RELAY_ON_SALDO:2,RELAY_OFF_SALDO:4,RELAY_OFF_SALDO_SOFT:8,RELAY_OFF_MAGNET:16,RELAY_ON_MAGNET_TIMEOUT:32,RELAY_ON_MAGNET_AUTO:64};var $r={RELAY_OFF_UNEQUAL_CURRENT:1,RELAY_ON_UNEQUAL_CURRENT:2,RELAY_OFF_BIPOLAR_POWER:4,RELAY_ON_BIPOLAR_POWER:8};var Jr={BLOCK_KEY_OPTOPORT:2,MAGNET_SCREEN_CONST:32};var tn={CASE_OPEN:2**0,MAGNETIC_ON:2**1,PARAMETERS_UPDATE_REMOTE:2**2,PARAMETERS_UPDATE_LOCAL:2**3,RESTART:2**4,ERROR_ACCESS:2**5,TIME_SET:2**6,TIME_CORRECT:2**7,DEVICE_FAILURE:2**8,CASE_TERMINAL_OPEN:2**9,CASE_MODULE_OPEN:2**10,TARIFF_TABLE_SET:2**11,TARIFF_TABLE_GET:2**12,PROTECTION_RESET_EM:2**13,PROTECTION_RESET_MAGNETIC:2**14};var en={RELAY_STATE:2**0,RELAY_UBAD:2**1,RELAY_UNEQ_CURRENT:2**4,RELAY_OFF_CENTER:2**5,RELAY_IMAX:2**6,RELAY_PMAX:2**7};var rn={RELAY_COSFI:2**0,RELAY_SALDO_OFF_FLAG:2**1,RELAY_UNEQUAL_CURRENT_OFF:2**2,RELAY_BIPOLAR_POWER_OFF:2**3,RELAY_SALDO_OFF_ON_MAX_POWER:2**4,RELAY_HARD_ST1:2**5};var nn={MAXVA:2**0,MINVA:2**1,MAXT:2**2,MINT:2**3,MAXF:2**4,MINF:2**5,MAXIA:2**6,MAXP:2**7};var an={MAX_POWER_SALDO:2**0,BATTERY_VBAT_BAD:2**1,CLOCK_UNSET:2**3,MIN_COS_FI:2**5};var sn={UNEQUAL_CURRENT:2**0,BIPOLAR_POWER:2**1,POWER_A_NEGATIVE:2**6,POWER_B_NEGATIVE:2**7};var on={RELAY_OFF_LIMIT_P_MINUS_T1:8,RELAY_OFF_LIMIT_P_MINUS_T2:16,RELAY_OFF_LIMIT_P_MINUS_T3:32,RELAY_OFF_LIMIT_P_MINUS_T4:64};function vn(t,e,r){var n=r>>Kr;var a=new Array(Kr).fill(0);a.forEach(function(e,r){var i=!!B(n,1,r+1);if(i){a[r]=t.getUint32()}else{a[r]=null}});return a}function fn(t,e,r){var n=1+Kr;var a=e;r.forEach(function(t,e){a=Y(a,1,e+n,Number(!!t))});t.setUint8(a)}function un(t){if(t===65535){return{tariff:undefined,energy:undefined}}return{tariff:t>>14&3,energy:t&16383}}function hn(t,e){var r=e.tariff,n=e.energy;if(r!==undefined&&n!==undefined){t.setUint16(r<<14|n&16383)}else{t.setUint16(65535)}}function En(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;F.call(this,t,e)}En.prototype=Object.create(F.prototype);En.prototype.constructor=En;En.getDayProfileFromByte=function(t){return{tariff:B(t,2,1),isFirstHalfHour:!B(t,1,3),hour:B(t,5,4)}};En.getByteFromDayProfile=function(t){var e=0;e=Y(e,2,1,t.tariff);e=Y(e,1,3,+!t.isFirstHalfHour);e=Y(e,5,4,t.hour);return e};En.getDefaultSeasonProfile=function(){return{month:1,date:1,dayIndexes:[0,0,0,0,0,0,0]}};En.getDefaultOperatorParameters=function(){return{vpThreshold:265e3,vThreshold:156e3,ipThreshold:12e4,pmaxThreshold0:31800,pmaxThreshold1:31800,pmaxThreshold2:31800,pmaxThreshold3:31800,speedOptoPort:0,tint:30,calcPeriodDate:1,timeoutDisplay:127,timeoutScreen:7,displaySet:w(jr,2147496324),relaySet4:w(qr,0),relaySet3:w(kr,0),relaySet2:w(Zr,3),relaySet1:w(Qr,3),displayType:0,ten:0,timeoutRefresh:240,deltaCorMin:15,timeoutMagnetOff:5,timeoutMagnetOn:5,define1:w(Jr,0),timeoutRelayOn:1,timeoutRelayKey:0,timeoutRelayAuto:5,timeoutBadVAVB:5,freqMax:55,freqMin:45,phMin:0,year:0,month:0,date:0,energyDecimalPoint:2,typeMeter:0,timeoutIMax:5,timeoutPMax:5,timeoutCos:5,pMaxDef:1,displaySetExt:w(zr,137904127),timeoutUneqCurrent:5,timeoutBipolarPower:5,relaySet5:w($r,0),timeCorrectPeriod:24,timeCorrectPassHalfhour:false}};En.getDefaultOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:0,pmaxMinusThreshold1:0,pmaxMinusThreshold2:0,pmaxMinusThreshold3:0,relaySet:w(on,0)}};En.prototype.getFrameHeader=function(){var t=this.getUint8();var e=Nt[t];var r=this.getUint16();var n=this.getUint16();return{type:t,typeName:e,destination:r,source:n}};En.prototype.setFrameHeader=function(t){var e=t.type,r=e===void 0?Hr.type:e,n=t.destination,a=n===void 0?Hr.destination:n,i=t.source,s=i===void 0?Hr.source:i;this.setUint8(r);this.setUint16(a);this.setUint16(s)};En.prototype.getDeviceId=function(){var t=At(this.getBytes(3),{separator:""});var e=this.getUint8();var r=this.getUint8();var n=At(this.getBytes(3),{separator:""});return{manufacturer:t,type:e,year:r,serial:n}};En.prototype.setDeviceId=function(t){var e=t.manufacturer,r=t.type,n=t.year,a=t.serial;this.setBytes(H(e));this.setUint8(r);this.setUint8(n);this.setBytes(H(a))};En.prototype.getDateTime=function(){return{isSummerTime:!!this.getUint8(),seconds:this.getUint8(),minutes:this.getUint8(),hours:this.getUint8(),day:this.getUint8(),date:this.getUint8(),month:this.getUint8(),year:this.getUint8()}};En.prototype.setDateTime=function(t){this.setUint8(t.isSummerTime?1:0);this.setUint8(t.seconds);this.setUint8(t.minutes);this.setUint8(t.hours);this.setUint8(t.day||0);this.setUint8(t.date);this.setUint8(t.month);this.setUint8(t.year)};En.prototype.getTariffPlan=function(){return{id:this.getUint32(),tariffSet:this.getUint8(),activateYear:this.getUint8(),activateMonth:this.getUint8(),activateDay:this.getUint8(),specialProfilesArraySize:this.getUint8(),seasonProfilesArraySize:this.getUint8(),dayProfilesArraySize:this.getUint8()}};En.prototype.setTariffPlan=function(t){this.setUint32(t.id);this.setUint8(t.tariffSet);this.setUint8(t.activateYear);this.setUint8(t.activateMonth);this.setUint8(t.activateDay);this.setUint8(t.specialProfilesArraySize);this.setUint8(t.seasonProfilesArraySize);this.setUint8(t.dayProfilesArraySize)};En.prototype.getTimeCorrectionParameters=function(){return{monthTransitionSummer:this.getUint8(),dateTransitionSummer:this.getUint8(),hoursTransitionSummer:this.getUint8(),hoursCorrectSummer:this.getUint8(),monthTransitionWinter:this.getUint8(),dateTransitionWinter:this.getUint8(),hoursTransitionWinter:this.getUint8(),hoursCorrectWinter:this.getUint8(),isCorrectionNeeded:this.getUint8()===1}};En.prototype.setTimeCorrectionParameters=function(t){this.setUint8(t.monthTransitionSummer);this.setUint8(t.dateTransitionSummer);this.setUint8(t.hoursTransitionSummer);this.setUint8(t.hoursCorrectSummer);this.setUint8(t.monthTransitionWinter);this.setUint8(t.dateTransitionWinter);this.setUint8(t.hoursTransitionWinter);this.setUint8(t.hoursCorrectWinter);this.setUint8(+t.isCorrectionNeeded)};En.prototype.getDayProfile=function(){return En.getDayProfileFromByte(this.getUint8())};En.prototype.setDayProfile=function(t){this.setUint8(En.getByteFromDayProfile(t))};En.prototype.getSeasonProfile=function(){var t=this;return{month:this.getUint8(),date:this.getUint8(),dayIndexes:new Array(Wr).fill(0).map(function(){return t.getUint8()})}};En.prototype.setSeasonProfile=function(t){var e=this;this.setUint8(t.month);this.setUint8(t.date);t.dayIndexes.forEach(function(t){return e.setUint8(t)})};En.prototype.getSpecialDay=function(){return{month:this.getUint8(),date:this.getUint8(),dayIndex:this.getUint8(),isPeriodic:this.getUint8()===0}};En.prototype.setSpecialDay=function(t){this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.dayIndex);this.setUint8(+!t.isPeriodic)};En.prototype.getDeviceType=function(){return Et(this.getBytes(9))};En.prototype.setDeviceType=function(t){this.setBytes(_t(t))};En.prototype.getOperatorParameters=function(){var t={vpThreshold:this.getUint32(),vThreshold:this.getUint32(),ipThreshold:this.getUint32(),pmaxThreshold0:this.getUint32(),pmaxThreshold1:this.getUint32(),pmaxThreshold2:this.getUint32(),pmaxThreshold3:this.getUint32(),speedOptoPort:this.getUint8(),tint:this.getUint8(),calcPeriodDate:this.getUint8(),timeoutDisplay:this.getUint8(),timeoutScreen:this.getUint8(),displaySet:w(jr,this.getUint32()),relaySet4:w(qr,this.getUint8()),relaySet3:w(kr,this.getUint8()),relaySet2:w(Zr,this.getUint8()),relaySet1:w(Qr,this.getUint8()),displayType:this.getUint8(),ten:this.getUint8(),timeoutRefresh:this.getUint16(),deltaCorMin:this.getUint8(),timeoutMagnetOff:this.getUint8(),timeoutMagnetOn:this.getUint8(),define1:w(Jr,this.getUint8()),timeoutRelayOn:this.getUint8(),timeoutRelayKey:this.getUint8(),timeoutRelayAuto:this.getUint8(),timeoutBadVAVB:this.getUint8(),freqMax:this.getUint8(),freqMin:this.getUint8(),phMin:this.getUint16(),year:this.getUint8(),month:this.getUint8(),date:this.getUint8(),energyDecimalPoint:this.getUint8(),typeMeter:this.getUint8(),timeoutIMax:this.getUint8(),timeoutPMax:this.getUint8(),timeoutCos:this.getUint8(),pMaxDef:this.getUint8(),displaySetExt:w(zr,this.getUint32()),timeoutUneqCurrent:this.getUint8(),timeoutBipolarPower:this.getUint8(),relaySet5:w($r,this.getUint8()),timeCorrectPeriod:0,timeCorrectPassHalfhour:false};var e=this.getUint8();t.timeCorrectPeriod=e&127;t.timeCorrectPassHalfhour=!!(e&128);return t};En.prototype.setOperatorParameters=function(t){var e=t.timeCorrectPeriod|(t.timeCorrectPassHalfhour?128:0);this.setUint32(t.vpThreshold);this.setUint32(t.vThreshold);this.setUint32(t.ipThreshold);this.setUint32(t.pmaxThreshold0);this.setUint32(t.pmaxThreshold1);this.setUint32(t.pmaxThreshold2);this.setUint32(t.pmaxThreshold3);this.setUint8(t.speedOptoPort);this.setUint8(t.tint);this.setUint8(t.calcPeriodDate);this.setUint8(t.timeoutDisplay);this.setUint8(t.timeoutScreen);this.setUint32(x(jr,t.displaySet));this.setUint8(x(qr,t.relaySet4));this.setUint8(x(kr,t.relaySet3));this.setUint8(x(Zr,t.relaySet2));this.setUint8(x(Qr,t.relaySet1));this.setUint8(t.displayType);this.setUint8(t.ten);this.setUint16(t.timeoutRefresh);this.setUint8(t.deltaCorMin);this.setUint8(t.timeoutMagnetOff);this.setUint8(t.timeoutMagnetOn);this.setUint8(x(Jr,t.define1));this.setUint8(t.timeoutRelayOn);this.setUint8(t.timeoutRelayKey);this.setUint8(t.timeoutRelayAuto);this.setUint8(t.timeoutBadVAVB);this.setUint8(t.freqMax);this.setUint8(t.freqMin);this.setUint16(t.phMin);this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date);this.setUint8(t.energyDecimalPoint);this.setUint8(t.typeMeter);this.setUint8(t.timeoutIMax);this.setUint8(t.timeoutPMax);this.setUint8(t.timeoutCos);this.setUint8(t.pMaxDef);this.setUint32(x(zr,t.displaySetExt));this.setUint8(t.timeoutUneqCurrent);this.setUint8(t.timeoutBipolarPower);this.setUint8(x($r,t.relaySet5));this.setUint8(e)};En.prototype.getPackedEnergyWithType=function(){var t=this.getUint8();var e=B(t,Kr,1);var r=vn(this,e,t);return{energyType:e,energies:r}};En.prototype.setPackedEnergyWithType=function(t){var e=this;var r=t.energyType,n=t.energies;if(r){fn(this,r,n)}n.forEach(function(t){if(t!==null){e.setUint32(t)}})};En.prototype.getEnergies=function(){var t=this;return new Array(Kr).fill(0).map(function(){return t.getInt32()})};En.prototype.setEnergies=function(t){var e=this;t.forEach(function(t){return e.setUint32(t)})};En.prototype.getDate=function(){return{year:this.getUint8(),month:this.getUint8(),date:this.getUint8()}};En.prototype.setDate=function(t){this.setUint8(t.year);this.setUint8(t.month);this.setUint8(t.date)};En.prototype.getSaldoParameters=function(){var t=this;return{coefficients:new Array(4).fill(0).map(function(){return t.getUint32()}),decimalPointTariff:this.getUint8(),indicationThreshold:this.getInt32(),relayThreshold:this.getInt32(),mode:this.getUint8(),saldoOffTimeBegin:this.getUint8(),saldoOffTimeEnd:this.getUint8(),decimalPointIndication:this.getUint8(),powerThreshold:this.getUint32(),creditThreshold:this.getInt32()}};En.prototype.setSaldoParameters=function(t){var e=this;t.coefficients.forEach(function(t){return e.setUint32(t)});this.setUint8(t.decimalPointTariff);this.setInt32(t.indicationThreshold);this.setInt32(t.relayThreshold);this.setUint8(t.mode);this.setUint8(t.saldoOffTimeBegin);this.setUint8(t.saldoOffTimeEnd);this.setUint8(t.decimalPointIndication);this.setUint32(t.powerThreshold);this.setInt32(t.creditThreshold)};En.prototype.getEnergyPeriods=function(t){var e=this;var r=new Array(t).fill(0).map(function(){return e.getUint16()});return r.map(function(t){return un(t)})};En.prototype.setEnergyPeriods=function(t){var e=this;t.forEach(function(t){return hn(e,t)})};En.prototype.getEventStatus=function(){var t=this.getUint16();return w(tn,t)};En.prototype.setEventStatus=function(t){this.setUint16(x(tn,t))};En.prototype.getExtendedCurrentValues2=function(){var t=this.getUint16();var e=w(en,this.getUint8());var r=w(rn,this.getUint8());var n=w(nn,this.getUint8());var a=w(an,this.getUint8());var i=w(sn,this.getUint8());return{uBattery:t,relayStatus:e,relayStatus2:r,status1:n,status2:a,status3:i}};En.prototype.setExtendedCurrentValues2=function(t){var e=t.uBattery,r=t.relayStatus,n=t.relayStatus2,a=t.status1,i=t.status2,s=t.status3;this.setUint16(e);this.setUint8(x(en,r));this.setUint8(x(rn,n));this.setUint8(x(nn,a));this.setUint8(x(an,i));this.setUint8(x(sn,s))};En.prototype.getEvent=function(){var t={hours:this.getUint8(),minutes:this.getUint8(),seconds:this.getUint8(),event:this.getUint8()};var e=t.event;var r=this.bytesLeft;t.eventName=Yr[e];switch(e){case Er:if(r<4){return t}t.power=[this.getUint8(),this.getUint8(),this.getUint8(),this.getUint8()];break;case jt:case tr:if(r<8){return t}t.newDate=this.getDateTime();break}return t};En.prototype.setEvent=function(t){this.setUint8(t.hours);this.setUint8(t.minutes);this.setUint8(t.seconds);this.setUint8(t.event);switch(t.event){case Er:for(var e of t.power){this.setUint8(e)}break;case jt:case tr:this.setDateTime(t.newDate);break}};En.prototype.getDemand=function(){var t=this.getUint8();var e=this.getUint8();return{date:{year:t>>1,month:t<<3&15|e>>5,date:e&31},energyType:this.getUint8(),firstIndex:this.getUint16(),count:this.getUint8(),period:this.getUint8()}};En.prototype.setDemand=function(t){var e=t.date.year<<1|t.date.month>>3&1;var r=t.date.month<<5&224|t.date.date&31;this.setUint8(e);this.setUint8(r);this.setUint8(t.energyType);this.setUint16(t.firstIndex);this.setUint8(t.count);this.setUint8(t.period)};En.prototype.getDemandParameters=function(){var t=this.getUint8();var e=this.getUint8();var r=this.getUint8();return{channelParam1:t,counterInterval:e,channelParam2:r}};En.prototype.setDemandParameters=function(t){this.setUint8(t.channelParam1);this.setUint8(t.counterInterval);this.setUint8(t.channelParam2);this.setUint8(0)};En.prototype.getDayMaxDemandResponse=function(){var t=this;var e=this.getDate();var r=new Array(Kr).fill(0).map(function(){return{hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}});return{date:e,power:r}};En.prototype.setDayMaxDemandResponse=function(t){var e=this;this.setDate(t.date);t.power.forEach(function(t){e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)})};En.prototype.getOperatorParametersExtended3=function(){return{pmaxMinusThreshold0:this.getUint32(),pmaxMinusThreshold1:this.getUint32(),pmaxMinusThreshold2:this.getUint32(),pmaxMinusThreshold3:this.getUint32(),relaySet:w(on,this.getUint8())}};En.prototype.setOperatorParametersExtended3=function(t){var e=t.pmaxMinusThreshold0,r=t.pmaxMinusThreshold1,n=t.pmaxMinusThreshold2,a=t.pmaxMinusThreshold3,i=t.relaySet;this.setUint32(e);this.setUint32(r);this.setUint32(n);this.setUint32(a);this.setUint8(x(on,i))};En.prototype.getMonthMaxPowerByTariffs=function(){var t=this;return new Array(Kr).fill(0).map(function(){return{date:t.getUint8(),hours:t.getUint8(),minutes:t.getUint8(),power:t.getUint32()}})};En.prototype.setMonthMaxPowerByTariffs=function(t){var e=this;t.forEach(function(t){e.setUint8(t.date);e.setUint8(t.hours);e.setUint8(t.minutes);e.setUint32(t.power)})};var _n=function(t){return btoa(t.map(function(t){return String.fromCharCode(t)}).join(""))};var An=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return[t,e.length].concat(v(e))};var gn=0;var Tn=3;var cn=1;var dn=3;var ln=4;var Rn=5;var pn=7;var Un=8;var yn=9;var On=13;var mn=15;var Pn=16;var Sn=17;var Dn=18;var Mn=19;var Nn=20;var In=21;var Cn=22;var Ln=23;var Fn=24;var xn=25;var wn=28;var Bn=30;var Yn=31;var Hn=40;var Gn=41;var Vn=42;var Wn=44;var bn=45;var Kn=46;var Xn=47;var jn=49;var zn=50;var Qn=51;var Zn=52;var kn=53;var qn=54;var $n=57;var Jn=58;var ta=59;var ea=60;var ra=61;var na=62;var aa=65;var ia=70;var sa=74;var oa=75;var va=79;var fa=80;var ua=82;var ha=83;var Ea=88;var _a=89;var Aa=91;var ga=92;var Ta=93;var ca=94;var da=100;var la=109;var Ra=111;var pa=112;var Ua=113;var ya=114;var Oa=116;var ma=117;var Pa=118;var Sa=122;var Da=Object.freeze({__proto__:null,activateRatePlan:Mn,getBuildVersion:pa,getCorrectTime:na,getCriticalEvent:aa,getCurrentStatusMeter:$n,getCurrentValues:On,getDateTime:pn,getDayDemand:Cn,getDayDemandExport:va,getDayMaxDemand:jn,getDayMaxDemandExport:Ea,getDayMaxDemandPrevious:sa,getDayProfile:ta,getDemand:Pa,getDemandParameters:ma,getDeviceId:Rn,getDeviceType:ln,getDisplayParam:ca,getEnergy:mn,getEnergyDayPrevious:dn,getEnergyExport:Aa,getEnergyExportDayPrevious:fa,getEventStatus:cn,getEvents:Qn,getEventsCounters:Zn,getExtendedCurrentValues:Jn,getExtendedCurrentValues2:bn,getHalfHourDemand:In,getHalfHourDemandExport:ha,getHalfHourDemandPrevious:oa,getHalfHourEnergies:Ra,getMagneticFieldThreshold:la,getMeterInfo:Sa,getMonthDemand:Ln,getMonthDemandExport:ua,getMonthMaxDemand:zn,getMonthMaxDemandExport:_a,getOperatorParameters:Bn,getOperatorParametersExtended3:Ua,getRatePlanInfo:Wn,getSaldo:Gn,getSaldoParameters:Kn,getSeasonProfile:ea,getSpecialDay:ra,getVersion:Hn,prepareRatePlan:Nn,resetPowerMaxDay:kn,resetPowerMaxMonth:qn,runTariffPlan:ia,setAccessKey:yn,setCorrectDateTime:ga,setCorrectTime:wn,setDateTime:Un,setDayProfile:Pn,setDemandParameters:Oa,setDisplayParam:Ta,setOperatorParameters:Yn,setOperatorParametersExtended3:ya,setSaldo:Vn,setSaldoParameters:Xn,setSeasonProfile:Sn,setSpecialDay:Dn,setSpecialOperation:da,turnRelayOff:xn,turnRelayOn:Fn});Mt(Da);var Ma=Mn;var Na=1+Gr;var Ia=function(t){var e=new En(Na);e.setUint8(t.tariffTable);e.setTariffPlan(t.tariffPlan);return An(Ma,e.data)};var Ca=pa;var La=function(){return An(Ca)};var Fa=na;var xa=function(){return An(Fa)};var wa=0;var Ba=1;var Ya=2;var Ha=3;var Ga=4;var Va=5;var Wa=6;var ba=7;var Ka=8;var Xa=9;var ja=10;var za=11;var Qa=12;var Za=13;var ka=14;var qa=Object.freeze({__proto__:null,CASE_MODULE_OPEN:ja,CASE_OPEN:wa,CASE_TERMINAL_OPEN:Xa,DEVICE_FAILURE:Ka,ERROR_ACCESS:Va,MAGNETIC_ON:Ba,PARAMETERS_UPDATE_LOCAL:Ha,PARAMETERS_UPDATE_REMOTE:Ya,PROTECTION_RESET_EM:Za,PROTECTION_RESET_MAGNETIC:ka,RESTART:Ga,TARIFF_TABLE_GET:Qa,TARIFF_TABLE_SET:za,TIME_CORRECT:ba,TIME_SET:Wa});Mt(qa);var $a=aa;var Ja=function(t){return An($a,[t.event,t.index])};var ti=$n;var ei=function(){return An(ti)};var ri=On;var ni=function(){return An(ri)};var ai=pn;var ii=function(){return An(ai)};var si=3;var oi=4;var vi=Cn;var fi=function(t){var e=new En(t?.energyType?oi:si);e.setDate(t?.date);if(t?.energyType){e.setUint8(t.energyType)}return An(vi,e.data)};var ui=3;var hi=4;var Ei=va;var _i=function(t){var e=new En(t?.energyType?hi:ui);e.setDate(t?.date);if(t?.energyType){e.setUint8(t.energyType)}return An(Ei,e.data)};var Ai=jn;var gi=3;var Ti=function(t){var e=new En(gi);e.setDate(t.date);return An(Ai,e.data)};var ci=Ea;var di=3;var li=function(t){var e=new En(di);e.setDate(t.date);return An(ci,e.data)};var Ri=sa;var pi=function(){return An(Ri)};var Ui=ta;var yi=3;var Oi=function(t){var e=new En(yi);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return An(Ui,e.data)};var mi=Pa;var Pi=7;var Si=function(t){var e=new En(Pi);e.setDemand(t);return An(mi,e.data)};var Di=ma;var Mi=function(){return An(Di)};var Ni=Rn;var Ii=function(){return An(Ni)};var Ci=ln;var Li=function(){return An(Ci)};var Fi=0;var xi=128;var wi=129;var Bi=130;var Yi=131;var Hi=132;var Gi=133;var Vi=134;var Wi=135;var bi=136;var Ki=137;var Xi=144;var ji=145;var zi=146;var Qi=147;var Zi=149;var ki=151;var qi=152;var $i=153;var Ji=154;var ts=155;var es=156;var rs=159;var ns=160;var as=240;var is=Object.freeze({__proto__:null,ACCESS_DENIED:Qi,BAD_ARRAY_INDEX:Vi,BAD_BLOCK_NUMBER:es,BAD_DATA_LENGTH:Gi,BAD_MESSAGE:Hi,BAD_RATE_PLAN_ID:bi,BAD_RATE_PLAN_SIZE:Ki,BAD_RESPONSE_LENGTH:Xi,BAD_SALDO_WRITE:Zi,BLOCKED_METER:ki,CALIBRATION_DISABLED:zi,DECRYPTION_FAILURE:Bi,INTERNAL:as,INVALID_CORRECTION_INTERVAL:Ji,NOT_ALIGNED_DATA:wi,NOT_PREPARED_RATE_PLAN:Wi,NO_DATA_FOR_DATE:ji,OK:Fi,OUT_OFF_RANGE:rs,SET_METER_TYPE_FAILURE:ns,TIME_CORRECTION_FAILURE:$i,TIME_CORRECTION_OUT_HALF_HOUR_DISABLED:ts,UNENCRYPTED_COMMAND_DISABLED:qi,UNKNOWN_COMMAND:xi,UNKNOWN_PROTOCOL:Yi});Mt(is);var ss=1;var os=2;var vs=3;var fs=4;var us=5;var hs=6;var Es=7;var _s=8;var As=9;var gs=10;var Ts=11;var cs=12;var ds=13;var ls=14;var Rs=15;var ps=16;var Us=17;var ys=18;var Os=19;var ms=20;var Ps=21;var Ss=22;var Ds=23;var Ms=24;var Ns=25;var Is=26;var Cs=28;var Ls=30;var Fs=31;var xs=Object.freeze({__proto__:null,ACTIVE_ENERGY_T1:fs,ACTIVE_ENERGY_T2:us,ACTIVE_ENERGY_T3:hs,ACTIVE_ENERGY_T4:Es,ACTIVE_POWER_IN_NEUTRAL:As,ACTIVE_POWER_PER_PHASE:_s,BATTERY_VOLTAGE:Ss,CURRENT_BALANCE:Ls,CURRENT_IN_NEUTRAL:Ts,CURRENT_IN_PHASE:gs,DATE_MONTH_YEAR:ls,EXPORTED_ACTIVE_ENERGY_T1:ps,EXPORTED_ACTIVE_ENERGY_T2:Us,EXPORTED_ACTIVE_ENERGY_T3:ys,EXPORTED_ACTIVE_ENERGY_T4:Os,HOUR_MINUTE_SECOND:ds,MAGNET_INDUCTION:Cs,OPTOPORT_SPEED:Fs,POWER_FACTOR_PHASE_A:ms,POWER_FACTOR_PHASE_B:Ps,POWER_THRESHOLD_T1:Ds,POWER_THRESHOLD_T2:Ms,POWER_THRESHOLD_T3:Ns,POWER_THRESHOLD_T4:Is,SET_ALL_SEGMENT_DISPLAY:ss,SOFTWARE_VERSION:os,TOTAL_ACTIVE_ENERGY:vs,TOTAL_EXPORTED_ACTIVE_ENERGY:Rs,VOLTAGE:cs});Mt(xs);var ws=120;var Bs=121;var Ys=254;var Hs=Object.freeze({__proto__:null,activateRatePlan:Mn,errorResponse:Ys,getBuildVersion:pa,getCorrectTime:na,getCriticalEvent:aa,getCurrentStatusMeter:$n,getCurrentValues:On,getDateTime:pn,getDayDemand:Cn,getDayDemandExport:va,getDayEnergies:ws,getDayMaxDemand:jn,getDayMaxDemandExport:Ea,getDayMaxDemandPrevious:sa,getDayMaxPower:Bs,getDayProfile:ta,getDemand:Pa,getDemandParameters:ma,getDeviceId:Rn,getDeviceType:ln,getDisplayParam:ca,getEnergy:mn,getEnergyDayPrevious:dn,getEnergyExport:Aa,getEnergyExportDayPrevious:fa,getEventStatus:cn,getEvents:Qn,getEventsCounters:Zn,getExtendedCurrentValues:Jn,getExtendedCurrentValues2:bn,getHalfHourDemand:In,getHalfHourDemandExport:ha,getHalfHourDemandPrevious:oa,getHalfHourEnergies:Ra,getMagneticFieldThreshold:la,getMeterInfo:Sa,getMonthDemand:Ln,getMonthDemandExport:ua,getMonthMaxDemand:zn,getMonthMaxDemandExport:_a,getOperatorParameters:Bn,getOperatorParametersExtended3:Ua,getRatePlanInfo:Wn,getSaldo:Gn,getSaldoParameters:Kn,getSeasonProfile:ea,getSpecialDay:ra,getVersion:Hn,prepareRatePlan:Nn,resetPowerMaxDay:kn,resetPowerMaxMonth:qn,runTariffPlan:ia,setAccessKey:yn,setCorrectDateTime:ga,setCorrectTime:wn,setDateTime:Un,setDayProfile:Pn,setDemandParameters:Oa,setDisplayParam:Ta,setOperatorParameters:Yn,setOperatorParametersExtended3:ya,setSaldo:Vn,setSaldoParameters:Xn,setSeasonProfile:Sn,setSpecialDay:Dn,setSpecialOperation:da,turnRelayOff:xn,turnRelayOn:Fn});Mt(Hs);var Gs=ca;var Vs=1;var Ws=function(t){var e=new En(Vs);e.setUint8(t.displayMode);return An(Gs,e.data)};var bs=0;var Ks=1;var Xs=mn;var js=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=new En(t?.energyType?Ks:bs);if(t?.energyType){e.setUint8(t.energyType)}return An(Xs,e.data)};var zs=dn;var Qs=function(t){if(t.energyType){return An(zs,[t.energyType])}return An(zs)};var Zs=0;var ks=1;var qs=Aa;var $s=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=new En(t?.energyType?ks:Zs);if(t?.energyType){e.setUint8(t.energyType)}return An(qs,e.data)};var Js=fa;var to=function(t){if(t.energyType){return An(Js,[t.energyType])}return An(Js)};var eo=Qn;var ro=4;var no=function(t){var e=new En(ro);e.setDate(t.date);e.setUint8(t.offset);return An(eo,e.data)};var ao=Zn;var io=function(){return An(ao)};var so=cn;var oo=function(){return An(so)};var vo=Jn;var fo=function(){return An(vo)};var uo=bn;var ho=function(){return An(uo)};var Eo=In;var _o=3;var Ao=function(t){var e=new En(_o);e.setDate(t.date);return An(Eo,e.data)};var go=ha;var To=3;var co=function(t){var e=new En(To);e.setDate(t.date);return An(go,e.data)};var lo=oa;var Ro=function(){return An(lo)};var po=4;var Uo=["A+","A+R+","A+R-","A-","A-R+","A-R-"];var yo=4294967295;var Oo={"A+":1,"A+R+":2,"A+R-":4,"A-":8,"A-R+":16,"A-R-":32};var mo=function(t){var e={};Object.keys(t).forEach(function(r){e[r]=!!t[r]});return x(Oo,e)};var Po=function(t){return t<po?1<<t:0};var So=function(t){return t<po?1<<t<<4:0};var Do=function(t,e){var r=0;if(t<po){if(e["A+"]||e["A+R+"]||e["A+R-"]){r|=Po(t)}if(e["A-"]||e["A-R+"]||e["A-R-"]){r|=So(t)}}return r};function Mo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;F.call(this,t,e)}Mo.prototype=Object.create(F.prototype);Mo.prototype.constructor=Mo;Mo.prototype.getDate=function(){var t=this.getUint8();var e=this.getUint8();return{year:t>>1,month:t<<3&15|e>>5,date:e&31}};Mo.prototype.setDate=function(t){var e=t.year,r=t.month,n=t.date;var a=e<<1|r>>3&1;var i=r<<5&224|n&31;this.setUint8(a);this.setUint8(i)};Mo.prototype.getEnergiesFlags=function(){var t=this.getUint8();return w(Oo,t)};Mo.prototype.setEnergiesFlags=function(t){this.setUint8(mo(t))};Mo.prototype.getHalfHourEnergy1=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();var a=n>>14&3;var i=n&16383;e.push(n===yo?undefined:{tariff:a,energy:i})}return e};Mo.prototype.setHalfHourEnergy1=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e],n=r.tariff,a=r.energy;var i=n<<14|a;this.setUint16(i===undefined?yo:i)}}};Mo.prototype.getHalfHourEnergy3=function(t){var e=[];for(var r=0;r<t;r++){var n=this.getUint16();e.push(n===yo?undefined:n)}return e};Mo.prototype.setHalfHourEnergy3=function(t){if(t){for(var e=0;e<t.length;e++){var r=t[e];this.setUint16(r===undefined?yo:r)}}};Mo.prototype.getHalfHourEnergies1=function(t,e){var r=this;var n={};Uo.forEach(function(a){if(t[a]){n[a]=r.getHalfHourEnergy1(e)}});return n};Mo.prototype.getHalfHourEnergies3=function(t,e){var r=this;var n={};Uo.forEach(function(a){if(t[a]){n[a]=r.getHalfHourEnergy3(e)}});return n};Mo.prototype.setHalfHourEnergies1=function(t){var e=this;Uo.forEach(function(r){e.setHalfHourEnergy1(t[r])})};Mo.prototype.setHalfHourEnergies3=function(t){var e=this;Uo.forEach(function(r){e.setHalfHourEnergy3(t[r])})};Mo.prototype.getAPlusTariffEnergies=function(t){var e={};if(t&Oo["A+"]){e["A+"]=this.getUint32()}if(t&Oo["A+R+"]){e["A+R+"]=this.getUint32()}if(t&Oo["A+R-"]){e["A+R-"]=this.getUint32()}return e};Mo.prototype.setAPlusTariffEnergies=function(t){if(t){if(t["A+"]){this.setUint32(t["A+"])}if(t["A+R+"]){this.setUint32(t["A+R+"])}if(t["A+R-"]){this.setUint32(t["A+R-"])}}};Mo.prototype.getAMinusTariffEnergies=function(t){var e={};if(t&Oo["A-"]){e["A-"]=this.getUint32()}if(t&Oo["A-R+"]){e["A-R+"]=this.getUint32()}if(t&Oo["A-R-"]){e["A-R-"]=this.getUint32()}return e};Mo.prototype.setAMinusTariffEnergies=function(t){if(t){if(t["A-"]){this.setUint32(t["A-"])}if(t["A-R+"]){this.setUint32(t["A-R+"])}if(t["A-R-"]){this.setUint32(t["A-R-"])}}};Mo.prototype.getTariffsEnergies=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(po).fill(null);for(var n=0;n<po;n++){if(e&Po(n)){r[n]=this.getAPlusTariffEnergies(t)}}for(var a=0;a<po;a++){if(e&So(a)){r[a]={...r[a],...this.getAMinusTariffEnergies(t)}}}return r};Mo.prototype.setTariffsEnergies=function(t){var e=this;var r=0;var n=0;t.forEach(function(t,e){if(t){r|=mo(t);n|=Do(e,t)}});this.setUint8(r);this.setUint8(n);t.forEach(function(t){return e.setAPlusTariffEnergies(t)});t.forEach(function(t){return e.setAMinusTariffEnergies(t)})};Mo.prototype.getPowerMax=function(){return{hours:this.getUint8(),minutes:this.getUint8(),power:this.getUint32()}};Mo.prototype.setPowerMax=function(t){if(t){var e=t.hours,r=t.minutes,n=t.power;this.setUint8(e);this.setUint8(r);this.setUint32(n)}};Mo.prototype.getAPlusTariffPowerMax=function(t){var e={};if(t&Oo["A+"]){e["A+"]=this.getPowerMax()}if(t&Oo["A+R+"]){e["A+R+"]=this.getPowerMax()}if(t&Oo["A+R-"]){e["A+R-"]=this.getPowerMax()}return e};Mo.prototype.setAPlusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A+"]);this.setPowerMax(t["A+R+"]);this.setPowerMax(t["A+R+"])}};Mo.prototype.getAMinusTariffPowerMax=function(t){var e={};if(t&Oo["A-"]){e["A-"]=this.getPowerMax()}if(t&Oo["A-R+"]){e["A-R+"]=this.getPowerMax()}if(t&Oo["A-R-"]){e["A-R-"]=this.getPowerMax()}return e};Mo.prototype.setAMinusTariffPowerMax=function(t){if(t){this.setPowerMax(t["A-"]);this.setPowerMax(t["A-R+"]);this.setPowerMax(t["A-R-"])}};Mo.prototype.getTariffsPowerMax=function(){var t=this.getUint8();var e=this.getUint8();var r=new Array(po).fill(null);for(var n=0;n<po;n++){if(e&Po(n)){r[n]=this.getAPlusTariffPowerMax(t)}}for(var a=0;a<po;a++){if(e&So(a)){r[a]={...r[a],...this.getAMinusTariffPowerMax(t)}}}return r};Mo.prototype.setTariffsPowerMax=function(t){var e=this;var r=0;var n=0;t.forEach(function(t,e){if(t){r|=mo(t);n|=Do(e,t)}});this.setUint8(r);this.setUint8(n);t.forEach(function(t){return e.setAPlusTariffPowerMax(t)});t.forEach(function(t){return e.setAMinusTariffPowerMax(t)})};var No=Ra;var Io=5;var Co=function(t){var e=new Mo(Io);e.setDate(t.date);e.setEnergiesFlags(t.energies);e.setUint8(t.firstHalfhour);e.setUint8(t.halfhoursNumber);return An(No,e.data)};var Lo=la;var Fo=function(){return An(Lo)};var xo=Sa;var wo=function(){return An(xo)};var Bo=Ln;var Yo=2;var Ho=function(t){var e=new En(Yo);e.setUint8(t.year);e.setUint8(t.month);return An(Bo,e.data)};var Go=ua;var Vo=2;var Wo=function(t){var e=new En(Vo);e.setUint8(t.year);e.setUint8(t.month);return An(Go,e.data)};var bo=zn;var Ko=function(t){var e=t.year,r=t.month;return An(bo,[e,r])};var Xo=_a;var jo=function(t){var e=t.year,r=t.month;return An(Xo,[e,r])};var zo=Bn;var Qo=function(){return An(zo)};var Zo=Ua;var ko=function(){return An(Zo)};var qo=Wn;var $o=function(t){return An(qo,[t.tariffTable])};var Jo=Gn;var tv=function(){return An(Jo)};var ev=Kn;var rv=function(){return An(ev)};var nv=ea;var av=3;var iv=function(t){var e=new En(av);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return An(nv,e.data)};var sv=ra;var ov=3;var vv=function(t){var e=new En(ov);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setUint8(t.isActive?0:1);return An(sv,e.data)};var fv=Hn;var uv=function(){return An(fv)};var hv=Nn;var Ev=5;var _v=function(t){var e=new En(Ev);e.setUint8(t.tariffTable);e.setUint32(t.id);return An(hv,e.data)};var Av=kn;var gv=function(){return An(Av)};var Tv=qn;var cv=function(){return An(Tv)};var dv=ia;var lv=function(t){return An(dv,[t.tariffTable])};var Rv=16;var pv=yn;var Uv=1+Rv;var yv=function(t){var e=new En(Uv);e.setUint8(t.accessLevel);e.setBytes(t.key);return An(pv,e.data)};var Ov=ga;var mv=2;var Pv=function(t){var e=new En(mv);e.setInt16(t.seconds);return An(Ov,e.data)};var Sv=wn;var Dv=9;var Mv=function(t){var e=new En(Dv);e.setTimeCorrectionParameters(t);return An(Sv,e.data)};var Nv=Un;var Iv=8;var Cv=function(t){var e=new En(Iv);e.setDateTime(t);return An(Nv,e.data)};var Lv=8;var Fv=255;var xv=Pn;var wv=function(t){var e=t.periods.length<Lv;var r=2+t.periods.length+ +e;var n=new En(r);n.setUint8(t.tariffTable);n.setUint8(t.index);t.periods.forEach(function(t){n.setDayProfile(t)});if(e){n.setUint8(Fv)}return An(xv,n.data)};var Bv=Oa;var Yv=4;var Hv=function(t){var e=new En(Yv);e.setDemandParameters(t);return An(Bv,e.data)};var Gv=Ta;var Vv=function(t){return An(Gv,[t.displayMode].concat(v(t.order)))};var Wv=Yn;var bv=Vr;var Kv=function(t){var e=new En(bv);e.setOperatorParameters(t);return An(Wv,e.data)};var Xv=ya;var jv=17;var zv=function(t){var e=new En(jv);e.setOperatorParametersExtended3(t);return An(Xv,e.data)};var Qv=Vn;var Zv=12;var kv=function(t){var e=new En(Zv);e.setUint8(t.date.month);e.setUint8(t.date.date);e.setUint8(t.date.hours);e.setUint8(t.date.minutes);e.setInt32(t.saldoNew);e.setInt32(t.saldoOld);return An(Qv,e.data)};var qv=Xn;var $v=37;var Jv=function(t){var e=new En($v);e.setSaldoParameters(t);return An(qv,e.data)};var tf=Sn;var ef=br;var rf=function(t){var e=new En(ef);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSeasonProfile(t);return An(tf,e.data)};var nf=Dn;var af=6;var sf=function(t){var e=new En(af);e.setUint8(t.tariffTable);e.setUint8(t.index);e.setSpecialDay(t);return An(nf,e.data)};var of=da;var vf=2;var ff=function(t){var e=new En(vf);var r=0;if(t.readScreensInfo){r|=128}if(t.resetElectroMagneticIndication){r|=1}if(t.resetMagneticIndication){r|=2}e.setUint8(t.type);e.setUint8(r);return An(of,e.data)};var uf=xn;var hf=function(){return An(uf)};var Ef=Fn;var _f=function(){return An(Ef)};var Af={encrypt:function(){},decrypt:function(){}};var gf=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:85;var r=e;t.forEach(function(t){r^=t});return r};var Tf=16;var cf=[0];var df=function(t){return function(e,r){var n;var a=r.messageId,i=a===void 0?1:a,s=r.accessLevel,o=s===void 0?Tn:s,f=r.aesKey;var u=e.map(function(e){if("id"in e){return t[e.id](e.parameters||{})}if("command"in e){return e.command.bytes}throw new Error("wrong command format")});var h=o|16;var E=[i,h];var _=(n=[]).concat.apply(n,[h].concat(v(u),[cf]));if(o!==gn){var A=(_.length+1)%Tf;if(A){_=_.concat(new Array(Tf-A).fill(0))}}_=_.concat(gf(_));if(f&&o!==gn){_=v(Af.encrypt(f,_))}return E.concat(_)}};var lf={};var Rf=df(lf);lf[Ma]=Ia;lf[Ca]=La;lf[Fa]=xa;lf[$a]=Ja;lf[ti]=ei;lf[ri]=ni;lf[ai]=ii;lf[vi]=fi;lf[Ei]=_i;lf[Ai]=Ti;lf[ci]=li;lf[Ri]=pi;lf[Ui]=Oi;lf[mi]=Si;lf[Di]=Mi;lf[Ni]=Ii;lf[Ci]=Li;lf[Gs]=Ws;lf[Xs]=js;lf[zs]=Qs;lf[qs]=$s;lf[Js]=to;lf[eo]=no;lf[ao]=io;lf[so]=oo;lf[vo]=fo;lf[uo]=ho;lf[Eo]=Ao;lf[go]=co;lf[lo]=Ro;lf[No]=Co;lf[Lo]=Fo;lf[xo]=wo;lf[Bo]=Ho;lf[Go]=Wo;lf[bo]=Ko;lf[Xo]=jo;lf[zo]=Qo;lf[Zo]=ko;lf[qo]=$o;lf[Jo]=tv;lf[ev]=rv;lf[nv]=iv;lf[sv]=vv;lf[fv]=uv;lf[hv]=_v;lf[Av]=gv;lf[Tv]=cv;lf[dv]=lv;lf[pv]=yv;lf[Ov]=Pv;lf[Sv]=Mv;lf[Nv]=Cv;lf[xv]=wv;lf[Bv]=Hv;lf[Gv]=Vv;lf[Wv]=Kv;lf[Xv]=zv;lf[Qv]=kv;lf[qv]=Jv;lf[tf]=rf;lf[nf]=sf;lf[of]=ff;lf[uf]=hf;lf[Ef]=_f;var pf=145;var Uf=30;var yf=function(t){var e=[Uf,t.length+2,0,pf].concat(v(t));return[].concat(v(e),[gf(e)])};getBase64FromBytes=_n;toBytes=Rf;setDataSegment=yf})();
//#endregion


/*
  Incoming arguments:
    * msg - JSON message payload downlink message json
    * msgType - type of message, for ex. 'ATTRIBUTES_UPDATED', 'POST_TELEMETRY_REQUEST', etc.
    * metadata - list of key-value pairs with additional data about the message
    * integrationMetadata - list of key-value pairs with additional data defined in Integration executing this converter

  Output must be an object with the following fields:
    * contentType - BINARY
    * data - payload in base64
*/

var bytes = toBytes(msg.commands);

// send nothing if not fit in a single data segment
if ( bytes.length > MAX_DATA_SEGMENT_SIZE ) {
    bytes = [];
} else {
    bytes = setDataSegment(bytes);
}

var result = {
    contentType: 'BINARY',
    data: getBase64FromBytes(bytes)
};

return result;
